{"dependabot/github_actions/docker/build-push-action-5": [{"commit_oid": "4094b3e8f93297d4ea4b60a6555b175b838ac989", "commit_date": "2023-09-12T18:54:09Z", "commit_message": "chore(deps): bump docker/build-push-action from 4 to 5\n\nBumps [docker/build-push-action](https://github.com/docker/build-push-action) from 4 to 5.\n- [Release notes](https://github.com/docker/build-push-action/releases)\n- [Commits](https://github.com/docker/build-push-action/compare/v4...v5)\n\n---\nupdated-dependencies:\n- dependency-name: docker/build-push-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6acfecae572fb457115b276b5b64d9424ad5187b", "commit_date": "2023-08-30T07:21:08Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC1087", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c80408c8644a0add1907b0593eb83f90d6247b1", "commit_date": "2023-08-30T06:47:15Z", "commit_message": "fix(dracut.sh): remove microcode check based on CONFIG_MICROCODE_[AMD|INTEL]\n\n`CONFIG_MICROCODE_AMD` and `CONFIG_MICROCODE_INTEL` are hidden since\nhttps://lore.kernel.org/all/20230810160805.081212701@linutronix.de/, therefore\nthis check is wrong and early microcode is always disabled.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b4e23ce4238821b0c2dd3c846da45f9cfeb57954", "commit_date": "2023-08-25T12:25:55Z", "commit_message": "fix(release): maintain dracut-version.sh in the source tree\n\nUpdate dracut-version.sh as part of release generation.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23389f6d48871212eba46e34db67e0c9f4368078", "commit_date": "2023-08-24T10:17:47Z", "commit_message": "docs: set KVERSION for running test suite\n\nRunning the test suite in podman will most likely require setting\n`KVERSION` because the running Linux kernel version will most likely be\ndifferent to the kernel version in the container.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b81e8eb67c80500e529ff2f845c10719b2afd87", "commit_date": "2023-08-24T06:54:01Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC2154", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "166456331d55cdc23946c11315dc2c88aab15911", "commit_date": "2023-08-22T12:00:29Z", "commit_message": "feat(install.d): allow using dracut in combination with ukify\n\nThis can be simply accomplished with the KERNEL_INSTALL_INITRD_GENERATOR\nand KERNEL_INSTALL_UKI_GENERATOR variables. `60-ukify.install` looks for\nthe initrd in the KERNEL_INSTALL_STAGING_AREA and then takes care of building\nthe uki.\n\nThis change makes it possible to use a configuration like this:\n/etc/kernel/install.conf\nlayout=uki\nuki_generator=ukify\ninitrd_generator=dracut\n\nWithout this change this configuration will fail since dracut would also\ngenerate an uki instead of initrd, which will cause a problem in\n`60-ukify.install` since it can't find an initrd to use.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f78e5de23769b6c1d656b44bf3c7eb97ba73518", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support disabling KVM by setting NO_KVM\n\nKVM fails on the Ubuntu ppc64el autopkgtest runners:\n\n```\n$ /usr/bin/qemu-system-ppc64el -enable-kvm -cpu host [...]\nioctl(KVM_CREATE_VM) failed: 22 Invalid argument\nPPC KVM module is not loaded. Try modprobe kvm_hv.\nqemu-system-ppc64el: failed to initialize kvm: Invalid argument\n$ modprobe kvm_hv\nmodprobe: ERROR: could not insert 'kvm_hv': No such device\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "65f0ef52a9bd63ccb1e31ccae948b49978e5ab0e", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: set QEMU machine for ARM and PowerPC\n\nSet QEMU machine for ARM and PowerPC to run on Debian/Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f29e428bdb3068e25150bc9591a961bd2df66442", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "fix(test): only use QEMU machine q35 on x86\n\nThe QEMU machine `q35` is only available on x86:\n\n```\nqemu-system-aarch64: unsupported machine type\nUse -machine help to list supported machines\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb7d5ec4cb06b2b4435327255049e55d34301d27", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support /boot/vmlinux\n\nOn the Ubuntu ppc64el architecture the kernel is named `/boot/vmlinux`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1e63b184517112efcce253f3962cab50fe25927", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: log qemu calls to ease debugging\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf97572bd5145a9e1192297a806dda94a3422de0", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: introduce overridable ARCH variable in run-qemu\n\nAllow specifying the architecture for `run-qemu`. E.g. this enables\nrunning armhf containers on arm64 hosts.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a18f1335fcab1eb84fedc45e450851d093335aa", "commit_date": "2023-08-22T06:52:53Z", "commit_message": "fix(test): use bash for jobs -r parameter\n\nTest 20 - \"NFSv3 root=dhcp DHCP IP:path\" fails on Debian with following\nerror message in `server.log`:\n\n```\njobs -rp\n/sbin/init: 105: jobs: Illegal option -r\n```\n\nThe jobs parameter `-r` requires bash.\n\nPartially fixes #1901\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e9d89d9c05b4ad1d70a508a604c0b1745c1b17f", "commit_date": "2023-08-21T13:19:57Z", "commit_message": "ci: also run integration test on Ubuntu\n\nAdd a Dockerfile for Ubuntu (very similar to Debian) and run the\nintegration tests also on Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "31c4d284017044b72ddea767c4d35d6d70473984", "commit_date": "2023-08-21T12:39:14Z", "commit_message": "feat(Makefile): allow setting dracut version via environment variables\n\nTo ease packaging dracut for Debian/Ubuntu, please support setting the\ndracut main/full version via environment variables:\n\n```\n$ DRACUT_MAIN_VERSION=007\n$ export DRACUT_FULL_VERSION=007-bond\n$ make dracut-version.sh\n$ grep VERSION dracut-version.sh\nDRACUT_VERSION=007-bond\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ddf6323145d50d33a897687474c73770328bf757", "commit_date": "2023-08-21T12:18:44Z", "commit_message": "fix: codespell", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "028f7632f8fbeb68d0414baa2ae2482bfb19f1b3", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: fix skipcpio path for installed binary\n\nThe `skipcpio` binary is installed in `${PKGLIBDIR}/skipcpio`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbee4f37cb933fcb4eeb89eb7a2c8fd687eb9079", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: skip test 98 if dracut-util is not available\n\nBuilding `dracut-util` requires the source code to be present and\nprevents running the test against the installed system. Check that\n`dracut-util` and rely on the test environment to build `dracut-util`\nbeforehand.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0321c90fabb37145db67751c948a58afc123d75", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make package libdir configurable\n\nMake the package libdir configurable to allow running the test suite\nout-of-tree. `PKGLIBDIR` can be pointed to the installed dracut libdir.\nUse `PKGLIBDIR` for the location of `dracut-init.sh`, `dracut-install`,\n`dracut-util`, `dracut-cpio`, and `modules.d`.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9939d0e1f1e17cc5d33cba55717ac063d21a048", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make dracut directory configurable\n\nMake the directory of the `dracut.sh` script configurable to allow\nrunning the test suite out-of-tree.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7528d84de84d9c1fb7d5f54712c692600e21b044", "commit_date": "2023-08-16T06:30:26Z", "commit_message": "fix(systemd): add new systemd-tmpfiles-setup-dev-early.service\n\n`systemd-tmpfiles-setup-dev.service`, `kmod-static-nodes.service` and\n`systemd-sysusers.service` have an ordering dependency on this new service since\nhttps://github.com/systemd/systemd/commit/353c849", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "570b9d405116c9763266aa2e88ea0a2460c734ba", "commit_date": "2023-08-16T06:26:14Z", "commit_message": "fix(systemd-udevd): add missing override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32f6f364ddeb706bf8741f2895d60022aee264e7", "commit_date": "2023-08-10T12:04:03Z", "commit_message": "fix(dracut-install): protect against broken links pointing to themselves\n\n`readlink` does not return an error if a symbolic link points to itself, which\ncan cause a stack overflow due to infinite recursion in the `get_real_file`\nfunction.\n\nAlthough this type of recursive links should not exist, we discovered this\nissue on a real system. It can be reproduced as follows:\n\n```\n> ls -l /lib64/libblkid.so\n-rwxr-xr-x 1 root root 224368 Aug  9 15:13 /lib64/libblkid.so\n> rm -f /lib64/libblkid.so\n> ln -s /lib64/libblkid.so /lib64/libblkid.so\n> ls -l /lib64/libblkid.so\nlrwxrwxrwx 1 root root 18 Aug  9 15:06 /lib64/libblkid.so -> /lib64/libblkid.so\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\n...\n[infinite recursion]\n...\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\n/usr/lib/dracut/dracut-init.sh: line 298: 20949 Segmentation fault      (core dumped) $DRACUT_INSTALL ${dracutsysrootdir:+-r \"$dracutsysrootdir\"} ${initdir:+-D \"$initdir\"} -a ${loginstall:+-L \"$loginstall\"} ${DRACUT_RESOLVE_DEPS:+-l} ${DRACUT_FIPS_MODE:+-f} ${_hostonly_install:+-H} \"$@\"\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.dqLmOS/initramfs -a /lib64/libblkid.so\n...\n```\n\nAfter applying this patch:\n\n```\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: ERROR: '/lib64/libblkid.so' is pointing to itself.\ndracut-install: ERROR: installing '/lib64/libblkid.so'\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.4w8FVL/initramfs -a /lib64/libblkid.so\n...\n```", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2c6b584e2227e68f54c8843925dcb73aefe87ac", "commit_date": "2023-08-10T06:19:57Z", "commit_message": "fix(dracut.sh): exit if resolving executable dependencies fails\n\nWe came across an issue where, when resolving executable dependencies, a call to\na buggy glib function in `dracut-install` was causing a termination with\nSIGSEGV, but dracut didn't stop the build process, which resulted in an\nunbootable initrd, due to missing required libraries.\n\n```\ndracut: *** Resolving executable dependencies ***\nxargs: /usr/lib/dracut/dracut-install: terminated by signal 11\ndracut: *** Resolving executable dependencies done ***\n```\n\nTherefore, stop the initrd creation in this case.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fffeadedf2170563cb7c0e0cb06994b0878ed455", "commit_date": "2023-08-05T16:35:59Z", "commit_message": "feat(dracut): add --sbat option to add sbat policy to UKI\n\nTake existing .sbat section from the uefi stub and merge it\nwith vmlinux .sbat (if it exists) and user-provided .sbat parameters\nusing the new --sbat option.\n\nFor some reasons, --update-section in objcopy does not resize the\n.sbat section, so remove the section from the stub and add it\nto the UKI as new one, to avoid having incomplete SBAT strings.\n\nSigned-off-by: Emanuele Giuseppe Esposito <eesposit@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af3076a1cb527cd7800b9aaeb368c91de1362c75", "commit_date": "2023-08-03T06:18:29Z", "commit_message": "ci: run all local tests on all containers (including Gentoo)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699d51c5dc222707053bb6e423559d56c1aa072f", "commit_date": "2023-08-01T10:48:55Z", "commit_message": "chore(dracut-init.sh): remove support for obsolete syntax\n\nOld syntax dracut modules had its check install installkernel\nscripts in dedicated shell files and did not support module\ndependencies.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "83eccc742ca932733b71007f78f0da28155f68ea", "commit_date": "2023-08-01T06:36:14Z", "commit_message": "ci: change the order of lint jobs as lint_shell is more likely to fail", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d55fa8239aebb8c77ba9a8a9db0fdedf8fa6232a", "commit_date": "2023-08-01T06:21:32Z", "commit_message": "ci: migrate from systemd-boot to systemd-utils in Gentoo container\n\nSee https://www-cdn.gentoo.org/support/news-items/2022-04-19-systemd-utils.html\n\nAlso no longer include open-iscsi for musl as it fails to compile, see\nhttps://bugs.gentoo.org/908587", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "403f4e8e15da4fdc84f3d32a0f231eeb9b2e4ed0", "commit_date": "2023-07-31T09:35:20Z", "commit_message": "ci: do not run test container generation on forked repos by default\n\nIf CONTAINER Github variable set, reenable the github action\nschedule.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16855765c8ad9d3237e6d98e59d0f8e6d4c7fc62", "commit_date": "2023-07-31T08:29:06Z", "commit_message": "refactor(install): log about missing firmware only once\n\nWhen attempting to locate a firmware path under each of the firwaredirs\nparent directories, Dracut logs an error for every missing path.\nInstead, only log the error if the firmware path isn't found under any\nof the firmwaredirs.\n\nSigned-off-by: David Disseldorp <ddiss@suse.de>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c46513fb21b51934d0862a234e55b759360917cd", "commit_date": "2023-07-31T07:15:14Z", "commit_message": "test: increase test VM memory from 512M to 1024M to avoid OOM killer", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a804945f27a0ccc2f69ae694599b1afec2afe8b1", "commit_date": "2023-07-26T15:49:35Z", "commit_message": "fix(integrity): do not require ls\n\nls is not used by the integrity dracut module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e278a965733f706a87756d0a4c38245a723b9e5c", "commit_date": "2023-07-26T15:49:20Z", "commit_message": "ci: match comment with code\n\nProperly document the time container generation runs daily.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e1e924550a23b7fbbca5f752f32a749631db116", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: automate release generation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a3758704ad1c7c9646cc844936b256076e139ea7", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: allow the release generation script to compute the next release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5cdd4b3502a2774f9590fcb9d2e17fe29b3ea87d", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "refactor(Makefile): improve AUTHORS and CONTRIBUTORS targets\n\nMake make rules more generic to be able to use them not just in\nmanual release process but also in CI release process.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c9f403f1c219b8e2ff62011bfcc1b5e254b411a", "commit_date": "2023-07-24T15:22:42Z", "commit_message": "fix(dracut-init.sh): `module_check` method ignores `forced` option\n\nWhen the `module_check` method is called passing 3 arguments (all calls right\nnow), the `forced` option is ignored, so the `hostonly` variable is never unset\nbefore the module's `check` method is called.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4e6eaf9c61616a2f27ef6e91cc787888afecde4", "commit_date": "2023-07-24T11:52:49Z", "commit_message": "feat(systemd-rfkill): remove module\n\nThe rfkill service and socket provided by systemd will not be activated in the\ninitrd since https://github.com/systemd/systemd/commit/49c55abc", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f11e8fffc2db1f6f02d09207a1edbf1d898249d7", "commit_date": "2023-07-24T11:50:15Z", "commit_message": "fix(man): add missing initrd-root-device.target to flow chart\n\nThis target was added since https://github.com/dracutdevs/dracut/commit/d4efc0ae\nand is ordered between `basic.target` and `sysroot.mount`, see `man bootup.7`\n(`dracut-pre-mount.service` starts after).", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1b53bb6297d83940b52e806c01030e8f5035d9f2", "commit_date": "2023-07-24T11:40:40Z", "commit_message": "fix(dracut-init.sh): use the local _ret variable\n\nUse the local _ret variable when declared.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "273e481193daba3e7aa264f36d6721313c2ee84b", "commit_date": "2023-07-24T10:25:13Z", "commit_message": "ci: install util-linux-systemd and systemd-boot into openSUSE container\n\n- `findmnt` is installed by `util-linux-systemd`\n- `/usr/lib/systemd/boot/efi/linuxx64.efi.stub` is installed by `systemd-boot`", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbdab2d87fa49c7fdd08b274d8a21e6046360cad", "commit_date": "2023-07-24T09:08:42Z", "commit_message": "fix(dracut.sh): shellcheck warning SC1004\n\nAs stated in [1] it should work without literal backslash+linefeed.\n\n[1] https://github.com/koalaman/shellcheck/issues/1246", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "33a66ed04bdc30eccb172a0cd6dcc36d9d74f825", "commit_date": "2023-07-20T12:25:46Z", "commit_message": "fix(dracut.sh): use gawk for strtonum\n\nstrtonum is a gawkism and is not available in all awks, e.g. mawk. Use gawk\nto avoid failure.\n\nFixes: f32e95bcadbc5158843530407adc1e7b700561b1\nSigned-off-by: Sam James <sam@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6af3fcfd7f699ec4bb3f1e9ac71b7a9ebb9804b3", "commit_date": "2023-07-17T06:33:19Z", "commit_message": "fix(man): remove duplicate entry\n\nDRACUT_COMPRESS_BZIP2 was mentioned several times in the list.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "81d78c4e95c13b859befc6869365b3c069e2038e", "commit_date": "2023-07-13T16:51:48Z", "commit_message": "ci: release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52351cfa049a9594d539e6a5337d591e8039ab80", "commit_date": "2023-07-07T12:24:10Z", "commit_message": "feat(livenet): add memory size check depending on live image size\n\nFor writeable live images, the memory must hold the complete image.\nThat means it must be at least the size of the image plus some RAM\nnecessary to run processes.\nWith too small RAM, the OOM Killer steps in and makes the boot hang.\nThis patch lets the system go into the emergency shell instead.\n\nThe default minimum RAM after subtracting the live image size is set to 1G.\nThe parameter rd.minmem is added to modify this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15d4f60eb1f9f704df16287ccf7bc19755a73875", "commit_date": "2023-06-29T06:25:57Z", "commit_message": "chore(gentoo.conf): remove examples to avoid confusion\n\nThese examples are not used and not maintained and changing them\nwould not have an impact on Gentoo.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7ef1302715bead649625666f92eff434082de1f", "commit_date": "2023-06-28T11:53:14Z", "commit_message": "fix(modsign): load keys to correct keyring\n\nUntil now, 03modsign module was loading keys from /lib/modules/keys/* into the\ncurrent session keyring.\nThis change makes it add keys to the secondary trusted keyring. This works\nonly as long as added certificate is signed by key from the same keyring.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "179e1a992fc2b74d55a600bef152d5df43802104", "commit_date": "2023-06-26T13:56:15Z", "commit_message": "fix(dmsquash-live-autooverlay): specify filesystemtype when it is already known", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a71b905ef32654b2bbb6fbbc58e8aa3c89c967e6", "commit_date": "2023-06-26T13:54:04Z", "commit_message": "chore: remove git2spec.pl, it is no longer used", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa332cad7196b6e05b9e2f1810dc54bb38ed2ac", "commit_date": "2023-06-26T13:39:48Z", "commit_message": "fix(fs-lib): remove quoting form the first argument of the e2fsck call\n\nFix regression.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f5cc202e998eb22bda98920b8eeeb0f027ca0b6e", "commit_date": "2023-06-26T13:24:02Z", "commit_message": "fix(Makefile): remove leftover rpm build rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ffc766d23d9175673f722a3c81e7609496167845", "commit_date": "2023-06-26T13:16:12Z", "commit_message": "fix(Makefile): no longer upload to kernel.org", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b490f6f7d7cf1c322b47af4e44d7f238612fb260", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "feat(nvmf): add code for parsing the NBFT\n\nAdd code to parse the Nvme-oF Boot Firmware Table (NBFT) according\nto the NVM Express Boot Specification 1.0 [1]. The implementation in\ndracut follows a similar general approach as iBFT support in the\niscsi module.\n\nNBFT support requires two steps:\n\n(1) Setting up the network and routing according to the\n    HFI (\"Host Fabric Interface\") records in the NBFT,\n(2) Establishing the actual NVMe-oF connection.\n\n(1) is accomplished by reading the NBFT using JSON output from\nthe \"nvme nbft show\" command, and transforming it into command\nline options (\"ip=\", \"rd.neednet\", etc.) understood by dracut's\nnetwork module and its backends. The resulting network setup code\nis backend-agnostic. It has been tested with the \"network-legacy\"\nand \"network-manager\" network backend modules. The network setup\ncode supports IPv4 and IPv6 with static, RA, or DHCP configurations,\n802.1q VLANs, and simple routing / gateway setup.\n\n(2) is done using the \"nvme connect-all\" command [2] in the netroot handler,\nwhich is invoked by networking backends when an interface gets fully\nconfigured. This patch adds support for \"netboot=nbft\". The \"nbftroot\"\nhandler calls nvmf-autoconnect.sh, which contains the actual connect\nlogic. nvmf-autoconnect.sh itself is preserved, because there are\nother NVMe-oF setups like NVMe over FC which don't depend on the\nnetwork.\n\nThe various ways to configure NVMe-oF are prioritized like this:\n\n 1 FC autoconnect from kernel commandline (rd.nvmf.discover=fc,auto)\n 2 NBFT, if present\n 3 discovery.conf or config.json, if present, and cmdline.d parameters,\n   if present (rd.nvmf.discovery=...)\n 4 FC autoconnect (without kernel command line)\n\nThe reason for this priorization is that in the initial RAM fs, we try\nto activate only those connections that are necessary to mount the root\nfile system. This avoids confusion, possible contradicting or ambiguous\nconfiguration, and timeouts from unavailable targets.\n\nA retry logic is implemented for enabling the NVMe-oF connections,\nusing the \"settled\" initqueue, the netroot handler, and eventually, the\n\"timeout\" initqueue. This is similar to the retry logic of the iscsi module.\nIn the \"timeout\" case, connection to all possible NVMe-oF subsystems\nis attempted.\n\nTwo new command line parameters are introduced to make it possible to\nchange the priorities above:\n\n - \"rd.nvmf.nonbft\" causes the NBFT to be ignored,\n - \"rd.nvmf.nostatic\" causes any statically configured NVMe-oF targets\n   (config.json, discovery.conf, and cmdline.d) to be ignored.\n\nThese parameters may be helpful to skip attempts to set up broken\nconfigurations.\n\nAt initramfs build time, the nvmf module is now enabled if an NBFT\ntable is detected in the system.\n\n[1] https://nvmexpress.org/wp-content/uploads/NVM-Express-Boot-Specification-2022.11.15-Ratified.pdf\n[2] NBFT support in nvme-cli requires the latest upstream code (> v2.4).\n\nSigned-off-by: Martin Wilck <mwilck@suse.com>\nCo-authored-by: John Meneghini <jmeneghi@redhat.com>\nCo-authored-by: Charles Rose <charles.rose@dell.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f07117d68d07d52aa4ce8b4b2549a0cb716b7f4b", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): support /etc/nvme/config.json\n\nSince nvme-cli 2.0, configuration of subsystems to connect to is\nstored under `/etc/nvme` in either `discovery.conf` or `config.json`.\nAttempt discovery also if the latter exists, but not the former.\nAlso, install \"config.json\" if it's present on the root FS.\n\nAs before, \"rd.nvmf.discover=fc,auto\" will force either file to be ignored,\nand NBFT-defined targets take precedence if found.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "902f3a8f84643e4249b9bbb2e81d1b13eaf35364", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): install 8021q module unconditionally\n\nIn NBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "17b8649eb931f3f4990ac8184fe23fc257df6fa5", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect even more kernel-install vars, plus style fixes\n\n- More verbose with KERNEL_INSTALL_VERBOSE=1\n\n- Use KERNEL_INSTALL_CONF_ROOT if defined\n\n- Fallback to /usr/lib/os-release if /etc/os-release does not exist\n\n- Fallback to \"Linux $KERNEL_VERSION\" if no PRETTY_NAME found\n\n- Styling fixes\n\nCo-authored-by: Antonio Alvarez Feijoo <antonio.feijoo@suse.com>\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a037634ad71711d29828214830ebdade0c449dbc", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect more kernel-install env variables\n\n- If kernel-install has defined a staging area for us\n(KERNEL_INSTALL_STAGING_AREA) install generated initrd/uki.efi there.\nThe actual install is then handled by 90-loaderentry.install or\n90-uki-copy-install.\n\n- Also skip regeneration if an uki.efi already exists.\n\n- Pass --kernel-image to dracut, this is required to generate an uki (uefi=yes)\n\n- Add --no-uefi argument to dracut rescue image generation, this ensures that\nit at least installs correctly. TODO: Rework 51-dracut-rescue.install to also\nwork with uki's.\n\nThis fixes installing a kernel with uefi=yes in dracut config and layout=uki\nin kernel/install.conf.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "09d3ec1648822d84e95b274b60cb51b80e8f49f9", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(dracut.sh): also prevent fsfreeze for tmpfs\n\nKERNEL_INSTALL_STAGING_AREA is often on tmpfs, it cannot be frozen\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4000a1ecff208479254be8ce88de826099e2b685", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "fix(dmsquash-live): allow other fstypes\n\nUse det_fs to determine fstype and provide fallback instead of\njust calling blkid.\n\nMany other dracut modules (e.g. fs-lib, btrfs, mdraid) are already\nusing det_fs to determine fstype.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "995ac6f887e7cb5f8bdf2d636ed3b3e715691db4", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(DMSQUASH): add test for NTFS\n\nAdd a test case for mounting the root filesystem from\na squashfs image file that is store on an NTFS drive.\n\nThe test case is using ntfs3 module to mount the NTFS drive.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d96754eaa57657b3acfe4a50612a07da8365a0a2", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(16): check for failure after each sub-test run\n\nThe test case had a bug where it only checked for\nat least one of the passing instead of all the subtests passing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfa408c9de7cd0b0af6099b6f1e0cce2e70ec467", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): make bluetooth rules more strict\n\nOnly warn if bluetooth kernel module is loaded\nat the time of initrd generation in hostonly mode.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e84d65c5b0191582e26fe9cc150d460652b34b33", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): add missing files\n\n- org.bluez.service dbus system service\n- bluetooth.service override conf", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8079ceafcac910d0c061830769866710c3e889a8", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): include it if Appearance matches the value assigned for keyboard\n\nFollowing the Bluetooth spec [1], Assigned Numbers Document, Rev. 2023-05-04,\nSection 2.6.3, Appearance Sub-category, the Appearance value defined for\nkeyboards is 0x03C1.\n\nThis value must be checked to include the bluetooth module in hostonly mode,\nbecause some Bluetooth keyboards do not set the Class attribute.\n\n[1] https://www.bluetooth.com/specifications/assigned-numbers/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0ecb038832038523a27f989d0eb82b45fb67861c", "commit_date": "2023-06-22T17:31:01Z", "commit_message": "fix(bluetooth): warn user instead of including it by default\n\nBluetooth module can result in a known race condition at boot.\nDiscourage its usage by default.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "765e69ce4d88a4ef6c1028cc117b3f233a285f0e", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-timedated): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d083021910f0633035a056e0541549efffec896", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-resolved): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0dc7ec96b81fec100a5ab948c12846b2b9910e6", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-networkd): correct typos in override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2f685ecb4a968d5cd889803d5a248dab89473a", "commit_date": "2023-06-22T15:08:06Z", "commit_message": "fix(dracut-init.sh): correct check in `is_qemu_virtualized` function\n\nDo not redirect `systemd-detect-virt` to /dev/null, otherwise, the `vm` variable\nis always empty. This function was working only thanks to the following /sys\ncheck.\n\nReported-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ed765dd23e4c5616c82d1cbf8b4dbceaafc7647", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): do not require module via cmdline when --no-kernel\n\ninitrd built without modules would fail when it attempts to load a\nkernel module. (Use case scenario: kernel with built-in module.)\n\nsynthesize an the cmdline only when modules are truly installed.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b47a2efe91ab8be480925c04388200a3666812c", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): add missing cmdline function\n\nOtherwise `dracut --print-cmdline` does not print the command line option added\nby the btrfs module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2ff7b4702c2098f7db63b0ffb118da0b5c0723c1", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: conditionally add tgt to Gentoo container\n\nThis commit allows to run test 30 and test 35 on a Gentoo.\n\nUse the newly introduced conditional for nfs4 support as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d06153f89666e9741f587408e10fb9983385bfa5", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: re-enable lvm on Gentoo container\n\nGentoo changed it's policy and now lvm needs to be enabled explicitly.\n\nSee https://www.gentoo.org/support/news-items/2022-11-19-lvm2-default-USE-flags.html\n\nNo need to install thin-provisioning-tools explicitelly, it is\npulled in as a dependency of the lvm2 package.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a9ecb5e3256645a4059e2d2c601971e32c7cc0ff", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: disable initramfs generation inside Gentoo container\n\nDisabling initramfs generation saves installing 4 additional packages.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5803ece5c25aa0daef4260edd01630a759c69efd", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: add extra packages for tests to Gentoo container\n\nAdd cryptsetup, multipath-tools and open-iscsi\nto the Gentoo container for tests 10, 14, 30, 35.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6fd6b36d5e16c12ba4a040ddcf7c5e7338c34146", "commit_date": "2023-06-19T07:31:55Z", "commit_message": "ci: switching the musl test to 18 (uefi)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af31df4b365f11cf1edd92914d2d83b3bd1588e8", "commit_date": "2023-06-16T23:48:14Z", "commit_message": "test(ISCSI): make test-30 use the test dracut modules\n\nIntroduce test_dracut that is meant to be shared between tests\nin test-functions.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcf4665bfcbc910c80eeb244353ca4b9a5254719", "commit_date": "2023-06-15T06:56:44Z", "commit_message": "ci: add dependencies to Debian container\n\n- add systemd-boot-efi for test 18\n- tgt is needed for test 30 and 35\n- nbd-server is needed for test 40\n- gawk dependency has been introduced by f32e95bcadbc5158843530407adc1e7b700561b1\n- install dracut instead of initramfs-tools to match actual usage\n- remove workaround for https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=962300\nas it is now fixed on Debian 12.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ec2c7e1aa4591f4eeb0bb85aa51bf1914e18ff78", "commit_date": "2023-06-14T14:52:30Z", "commit_message": "test(UEFI): add test case for UEFI boot\n\nInclude OVMF in containers if it is not already present.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1b3f88d500f16c007de5b2e48f9bdea30c45ec9", "commit_date": "2023-06-12T11:58:19Z", "commit_message": "docs: remove rd.lvm.snapsize and rd.lvm.snapshot", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4235c035ff1abad0c22125c26cab813c42b29da0", "commit_date": "2023-06-12T11:52:41Z", "commit_message": "fix(Makefile): execute command -v instead of which", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2f961a2bd7b5f5cbff6394d6be6eace15e236b7", "commit_date": "2023-06-12T06:04:54Z", "commit_message": "fix(network-legacy): typo\n\nSigned-off-by: lilinjie <lilinjie@uniontech.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f8f115a27b2bb63f0893262b6c951a187bac8ef", "commit_date": "2023-06-09T12:55:48Z", "commit_message": "fix(network,dbus): improve dependency checking\n\nDecouple implementation details of the backend\ndependencies from the meta module.\n\nCall check_module for each submodule instead\nof reimplementing sub-package dependencies\ninside the meta module itself.\n\nAdd missing NetworkManager binary to the\nnetwork-manager dracut module check.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cd6f683d634970112a29867137431d0d57f8c957", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-pcrphase): only include systemd-pcrphase-initrd.service\n\nThe only systemd-pcrphase related unit configured to run in the initrd is\nsystemd-pcrphase-initrd.service.\nBoth systemd-pcrphase.service and systemd-pcrphase-sysinit.service contain\n`ConditionPathExists=!/etc/initrd-release`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ef00735ae4fa19684598a8f7868e8b36b6bf5fe", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-tmpfiles): do not include systemd-tmpfiles-clean.timer\n\nThe systemd-tmpfiles-clean.timer unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eff2a9398120b29fd869eec991410e254d0dcbb8", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-journald): do not include systemd-journal-flush.service\n\nThe systemd-journal-flush.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "925febf89d54c0bef9e3c8fda3b8e5b1f8ba30cd", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd): do not include systemd-random-seed.service\n\nThe systemd-random-seed.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c\n\nAlso, the systemd-random-seed-load.service does not exist since\nhttps://github.com/systemd/systemd/commit/c35b956d", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1588995ae0d9f984ad08f2d466f7a09646c6517", "commit_date": "2023-06-08T06:21:54Z", "commit_message": "fix(dracut.sh): correct path for UEFI stub on split-usr systems\n\nsystemd always installs the UEFI stub in ${prefix}/lib/systemd/boot/efi.\n\nOn split-usr systems, systemdutildir is ${rootprefix}/lib/systemd, which\nmakes dracut look in the wrong place.\n\nInstead, grab 'prefix' from systemd.pc and store it in 'systemd_prefix'.\n\nBug: https://bugs.gentoo.org/765208\nSigned-off-by: Mike Gilbert <floppym@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa20bbb5b1c78963331fb6261763ea4c51ebc04f", "commit_date": "2023-06-07T16:15:36Z", "commit_message": "feat(dracut-init.sh): do not print by default if an udev rule is skipped", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5e036b157eb196ad4ae80d691ef8e9b203f0494", "commit_date": "2023-06-07T14:32:30Z", "commit_message": "test: move more makeroot dependencies into test-makeroot dracut module", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "afb5717e67727d49fae0d2a1a4169e5b247387f4", "commit_date": "2023-06-06T14:33:02Z", "commit_message": "fix(kernel-modules): add interconnect drivers\n\nMany devicetree based systems require interconnect drivers to function\nproperly. Include those in the initramfs.\n\nSigned-off-by: Andrew Halaney <ahalaney@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d244b316f29143f536254b8828365dbce4388148", "commit_date": "2023-06-06T13:40:41Z", "commit_message": "test(LVM-THIN): avoid thin pool size warning\n\nAvoid the following warning by reducing thin pool size\n\n> \"Sum of all thin volume sizes exceeds the size of thin pool\n> and the size of whole volume group.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "739b9e1b38abfa998caec35048ab367a0d19ed76", "commit_date": "2023-06-06T13:36:59Z", "commit_message": "ci: cleanup containers\n\nRemove /etc/profile.d/dracut-test.sh from test containers\nNo use to override default command\nRemove references to docker. These files work just fine\nwith podman as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae7cd94b346ac7f4ce7ca6c236d1ecdaba1171a3", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: add empty default test_cleanup implementation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1346763ab7c031605cf74260e6846433f40f823", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: move more common test code to test-functions\n\nMove KVERSION and USE_NETWORK definition to test-functions.\nAdd option for qemu_add_drive_args to initialize drive with size.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ac581ef66dd8f1939e771419824137aebbc8f66", "commit_date": "2023-06-06T06:51:58Z", "commit_message": "fix(resolve-deps): check the existing file\u2014not the source\n\nCheck for dependencies on the file actually installed, otherwise,\nsuch as when the shebang is a link not equal to the initramfs link,\nthe wrong file may be tested.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07af8d58745a121052cab49c70a476f02996da1e", "commit_date": "2023-06-05T15:27:27Z", "commit_message": "fix(dracut-lib.sh): remove successful finished initqueue scripts\n\nIf some \"finished\" initscripts keep failing, dracut will start\nprinting warnings after a while. But it will warn about all scripts\nin the finished initqueue, not only those that have failed. That\nmakes it difficult to identify the script that has actually\ncaused the failure.\n\nTo avoid this, delete finished initqueue scripts when they succeed.\nAlso, instead of returning as soon as one of the scripts fails, try\nall scripts, deleting those that succeed, and return failure if at\nleast one script failed.\n\nIf a previously deleted script is recreated by some other part of\nthe code, it will be re-run the next time the check_finished() function\nis called, and will be re-deleted if it still succeeds.\n\nThe only case where I see that this might cause issues is if some\ncondition needs to be tested over and over again, because it succeeds\nand then fails later (for example, a device showing up and then being\nremoved again). But I think that this is not the intended logic.\nIn general, when a device shows up or another \"finished\" condition\nis met, we assume that this condition will hold at least until the\ninitramfs switches root and exits. If all conditions are met, the\ncurrent code will also exit the initqueue without retrying any of\nthe conditions again.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7310a641e227aae446684baeb48f878c3299ff9f", "commit_date": "2023-06-05T14:24:58Z", "commit_message": "fix(udev-rules): remove firmware.rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc182ed8cf779220b95d654a9a2397e991f9c16c", "commit_date": "2023-06-05T13:53:09Z", "commit_message": "docs: change ext3 to ext4\n\nPromote ext4 instead of ext3 in the manual.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a26eec5cc1f384f71226066f13db89f92913f28", "commit_date": "2023-06-05T13:49:15Z", "commit_message": "fix(dracut.sh): silence the output of hardlinking files by default", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8a703aaa7bbfe4f078fef5a4318243db059b87b", "commit_date": "2023-06-05T12:31:21Z", "commit_message": "fix(github): exempt issues in a milestone", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07b49a3ed79a792cede7e6ee21be29aba07168bc", "commit_date": "2023-06-05T12:23:27Z", "commit_message": "fix(virtiofs): add virtio_pci kernel module to virtiofs\n\nfix #2357\n\nSigned-off-by: Sergio E. Nemirowski <sergio@outerface.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c08ae406bc7c7d815b0911d9429f400719afc2ae", "commit_date": "2023-05-25T11:37:03Z", "commit_message": "ci: install multipath-tools into openSuse container", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d118754333d203303007475512aee7eb18b989fe", "commit_date": "2023-05-19T13:34:04Z", "commit_message": "test: remove references of dhcpd3 from tests\n\ndhcp3-server is no longer supported by Debian\nand it is replaced by isc-dhcp-server.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1843c16cafff005f798c379225e97dce459bc3dd", "commit_date": "2023-05-18T08:57:23Z", "commit_message": "test: move test condition to test_check\n\nThis enables skipping the test instead of failing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "006890a2c3bfbaac58f1f9f863e48212388f0ec8", "commit_date": "2023-05-13T23:34:22Z", "commit_message": "test: upgrade to ext4\n\nMost users use ext4 instead of ext3 or ext2. Upgrade tests to ext4.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "86c8a5a7c2573645e67537fb9975efab808d42c9", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): rootfs-generator cannot write outside of generator dir\n\nAlthough it was already documented in systemd.generator(7) that generators must\nnot write to locations other than those passed as arguments, since\nhttps://github.com/systemd/systemd/commit/ca6ce62d systemd executes generators\nin a mount namespace \"sandbox\", so now the hooks created by the rootfs-generator\nare lost.\n\nThese hooks are created using the root= cmdline argument, so this patch moves\nthe creation of these hooks to a cmdline hook.\n\nFixes issue #2211\nFixes issue #2225", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "acfa793b5cc035ebd36b0c5ce97ba2fd89e5745c", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): check and create generator dir outside of inner function", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a7c04716a5e528d86135bf87745054f7cbd54469", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): do not hardcode the systemd generator directory\n\nThe normal directory is the first argument passed to the systemd generator,\nso use it instead of hardcoding /run/systemd/generator.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cd41ab5174945253d65b61433921d5a53276683", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: add more packages to allow testing more dracut containers", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "19c5439510f9d908c0cc48d5b4a321fa9b87f67a", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: simplify and sort", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6178a9d83ffad67fa371cef2ff3f5bbb337bc8b7", "commit_date": "2023-05-09T02:04:09Z", "commit_message": "fix(dracut.sh): handle imagebase for uefi\n\n* UEFI creation didn't handle the ImageBase data for the PE file\n  generation. Create an UKI thanks a stub file with a non zero BaseImage\n  logs some warning ans generate a bad file offset management. The efi\n  becomes unloadable.\n* This commit parse the PE file header, get the data and apply the\n  ImageBase on the objcopy command.\n\nFixes dracutdevs#2284\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67591e8855006eb02aa0ffab7349ab770e471473", "commit_date": "2023-05-08T04:58:09Z", "commit_message": "fix(dracut-functions): avoid calling grep with PCRE (-P)\n\nInvoking grep in Perl mode requires JIT'ing the Perl regex.\nThis can run into issues with SELinix policy which will generally try to\nlimit use of execmem in general purpose scripts. This occurs since the\nJIT'd code will live in executable  memory.\n\nThe PCRE only '\\K' command in the Perl REGEX can be replaced by a call\nto awk instead.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "260883d96f33e7aced3d00c85d0ebffcec1385a1", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut-initramfs-restore.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to debug the shutdown after explicitly\nresetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "971b302d70fbbfac3b6047654b7dc7ceeb1c17e7", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(lsinitrd.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to query the initrd content after\nexplicitly resetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "97fe09769d6a86492c39e0368f088f54f7c0fa6e", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to generate the initrd after explicitly\nresetting the /etc/machine-id file.\n\nFixes issue #2267", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48c2cb457b1472d09453be130797bc6e0e194f7c", "commit_date": "2023-04-26T12:15:24Z", "commit_message": "feat(systemd-creds): introducing the systemd-creds module\n\nIntroducing the systemd-creds module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "71e391ebdc8f5d88447db1b6d475c813d82d5ffb", "commit_date": "2023-04-26T12:11:00Z", "commit_message": "fix(systemd-networkd): add missing conf files and services", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a62e895db9510f0fc4c47ee81b1436096eca4d64", "commit_date": "2023-04-14T04:40:04Z", "commit_message": "fix(dracut-functions.sh): convert mmcblk to the real kernel module name\n\nIn some x86_64 platforms such as Intel Elkhartlake, an issue of missing\nnecessary modules due to udevadm drivers field unmatch the real kernel module\nname is found:\n\n  $ udevadm info -a /dev/block/179:1\n\n  looking at parent device '/devices/pci0000:00/0000:00:1a.0/mmc_host/mmc0/mmc0:0001':\n    KERNELS==\"mmc0:0001\"\n    SUBSYSTEMS==\"mmc\"\n    DRIVERS==\"mmcblk\"\n    ....\n\nThe DRIVERS field, aka mmcblk will be given to instmods to install the\ncorresponding mmc_block.ko kernel module. However mmc_block.ko cannot be\nselected by string mmcblk, as a result, mmc_block.ko cannot be installed\nin hostonly-mode strict, which will fail to bootup the machine such as in\nkdump cases:\n\n  $ /usr/lib/dracut/dracut-install -D /var/tmp --kerneldir /lib/modules/$(uname -r)/ -m mmcblk\n  dracut-install: Failed to find module 'mmcblk'\n\nIn this patch, we will convert the string mmcblk to mmc_block, so the\nkernel module can be successfully loaded.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "297525c5c0781e13c4bf86aa42e81b9f166802ad", "commit_date": "2023-04-11T06:02:40Z", "commit_message": "fix(multipath): remove dependency on multipathd.socket\n\nThis reverts commit e39ff407eca1d783ab44093c44db5ee401ff5b1d, removes\nan incorrect `Also=` directive from multipathd.service.\n\n`Also=multipathd.socket` is not the correct behavior for a\nsocket-activated service. This directive has been removed upstream\nand dracut should do the same.\n\nThis fixes #2289, #2175 where in the cleanup hook running multipath\nbinary triggers activation of multipathd.service after it is stopped\nas dracut prepares to switch root in initrd-cleanup.service.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1300a930e76dbb380c7840760207296a1e58364c", "commit_date": "2023-03-30T15:56:53Z", "commit_message": "feat(lsinitrd): notify user on missing compressor\n\nProvide a notice to user if the required compressor package is\nmissing.  This rather than failing silently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a0d14d3bc691b318507c01708bc67d9e3b9d5109", "commit_date": "2023-03-29T06:11:36Z", "commit_message": "fix(99base): adjust to allow mksh as initrd shell\n\nUse printf instead of echo in str_replace() to preserve escapes.\nFind command paths while PATH includes /usr/sbin. (switch_root was\n  not found after the original environment is restored on Fedora.)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8b951d20d409b3647c85a9c6d064ccb15cdb5fe7", "commit_date": "2023-03-28T11:33:37Z", "commit_message": "fix(base): do not quote $CLINE in the `set` command\n\nThis is needed to correctly parse init arguments.\n\nFixes: 2fabaaa62dcfd31e593ca45e1374e55adae29d6b", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df2458a6b8aec70e74757ea7ae35f672a99ddc17", "commit_date": "2023-03-22T07:13:14Z", "commit_message": "fix(systemd-ac-power): correct systemd-ac-power binary path\n\n`systemd-ac-power` has been moved from `/usr/lib/systemd` to `/usr/bin/` since\nhttps://github.com/systemd/systemd/commit/251dc2f1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f32e95bcadbc5158843530407adc1e7b700561b1", "commit_date": "2023-03-20T11:56:24Z", "commit_message": "fix(dracut.sh): use dynamically uefi's sections offset\n\n* Uefi section are creating by `objcopy` with hardcoded sections\noffset. This commit allow to have the correct offset between\neach part of the efi file, needed to create an UKI. Offsets\nare simply calculated so no sections overlap, as recommended\nin  https://wiki.archlinux.org/title/Unified_kernel_image#Manually\nMoreover, efi stub file's header is parsed to apply the correct\noffsets according the section alignment factor.\n* Remove EFI_SECTION_VMA_INITRD, no need anymore as initrd\nsection offset dynamically calculated\n\nFixes dracutdevs#2275\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b4774239989257999053033fc92cded7803896", "commit_date": "2023-03-06T10:45:47Z", "commit_message": "fix(lvmthinpool-monitor): activate lvm thin pool before extend its size\n\nThe state of lvm thin pool may change into inactived state when kdump into\n2nd kernel. As a result, lvextend will fail to extend its size. For example:\n\nIn 1st kernel:\n\n  $ lvs\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-a-tz-- 300.00m thinpool        70.54\n  thinpool vg00       twi-aotz-- 236.00m                 89.67  12.50\n  ...\n\nIn 2nd kernel:\n\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-aotz-- 300.00m thinpool        70.54\n  thinpool vg00       twi---tz-- 236.00m                 89.67  12.50\n  ...\n\nAnd the lvextend failing log:\n[  8.483878] start-thinpool-monitor[590]: lvextend using policy requires the thin pool to be active.\n\nIn this patch, we will first activate lvm thin pool before calling lvextend\nduring kdump.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aca51203609954b38b41ea303a4376cbce061150", "commit_date": "2023-03-01T08:16:33Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.5.0 to 0.6.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.5.0 to 0.6.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.5.0...v0.6.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e780720efe6488c4e07af39926575ee12f40339", "commit_date": "2023-02-28T07:34:40Z", "commit_message": "fix(dmsquash-live): restore compatibility with earlier releases\n\nFollow-up to 40dd5c90e0efcb9ebaa9abb42a38c7316e9706bd .", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ddcb137ea2a4d79491ff94f1f7802dcaa7ac381", "commit_date": "2023-02-27T13:26:40Z", "commit_message": "fix(dracut.sh): kmoddir does not handle trailing /\n\nFixes https://github.com/dracutdevs/dracut/issues/2236\n\n+(/) only works in bash interactive mode. Using any non-interactive\nbash run simply doesn't remove anything.\n\nThe solution is copied from dracut-lib.sh, trim().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d554d9b98333372aeb20fd153a42c8171979825", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old eudev specific rule\n\nRevert 64fb0900cbc47804b4225287e4622063169db360, no longer\nneeded.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d648bf805a27cbf1920f0437606c9ffb2684ec18", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old redhat specific rule\n\nThe 40-redhat.rules rule has been removed upstream in 2010.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6a33e677aca49dd81826949b61acb945d672ba84", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old edd_id extra rules\n\nThe 61-persistent-storage-edd.rules rule has been removed upstream\nin 2012.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1edc41af979e1c1097be082c357f7a4895fbbad2", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old debian specific rules\n\nThe last Debian release that carried 91-permissions.rules is wheezy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f9ad06873eb50754611ece2c18a0cd0b22336c0", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "feat(test): nfs_fetch_url test into nfs test\n\nThis is to check the behavior of nfs_fetch_url() in nfs-lib.sh.\nnfs_fetch_url() calls nfs_already_mounted() internally.\nA file /nfs/client/root/fetchfile is on NFS server, which is fetched\nfrom clients for testing with nfs_fetch_url().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "966b6cec1bebd91ddd0f85c357f7ab57d3213f51", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "fix(url-lib.sh): nfs_already_mounted() with trailing slash in nfs path\n\nnfs_already_mounted() doesn't work when the installation ISO and kickstart file on a same NFS share are specified with inst.repo and inst.ks boot parameter as below.\n\n   inst.repo=nfs:192.168.1.1:/home/data/rhel9.iso inst.ks=nfs:192.168.1.1:/home/data/ks.cfg\n\n   NOTE: /home/data is configured for nfs share on 192.168.1.1\n\nOne problem is a file (not a directory) was passed into nfs_already_mounted().\nnfs_already_mounted() is the function to judge if the given directory is already mounted.\nSo, filepath should be passed in nfs_fetch_url().\n\nThe other problem is about the trailing slash in the nfs path in /proc/mounts.\n\nThe /proc/mounts has an entry after nfs mount of inst.repo.\n\n   192.168.1.1:/data/   /run/install/isodir  nfs  ro,relatime,<snip>\n\nIn this case, nfs_already_mounted() returns \"/run/install/isodir//home/data/ks.cfg\" wrongly. The following is from the log.\n\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@156(nfs_fetch_url): nfs_already_mounted 192.168.122.1 /home/data/ks.cfg\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@137(nfs_already_mounted): local server=192.168.122.1 path=/home/data/ks.cfg s= p=\n...\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@140(nfs_already_mounted): '[' 192.168.122.1 = 192.168.122.1 ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@141(nfs_already_mounted): '[' /home/data/ks.cfg = /home/data/ ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@143(nfs_already_mounted): str_starts /home/data/ks.cfg /home/data/\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/dracut-lib.sh@51(str_starts): '[' ks.cfg '!=' /home/data/ks.cfg ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@144(nfs_already_mounted): echo /run/install/isodir//home/data/ks.cfg\n...\n[   14.658069] localhost.localdomain dracut-initqueue[934]: //lib/url-lib.sh@156(nfs_fetch_url): mntdir=/run/install/isodir//home/data/ks.cfg\n\nThis function doesn't expect the trailiing slash of the nfs path in /proc/mounts, so it should be removed before processing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9bcd4d2c88985fa05e98b100e43d5630bdf0a6e", "commit_date": "2023-02-22T20:49:56Z", "commit_message": "ci: use CodeQL instead of LGTM\n\nAs LGTM is going to be shut down by EOY[0], let's move the code scanning to\nCodeQL as recommended. Thanks to GH integration the results from such\nscans will be shown both in the respective PR and in the Security ->\nCode Scanning tab[1].\n\n[0] https://github.blog/2022-08-15-the-next-step-for-lgtm-com-github-code-scanning/\n[1] https://github.com/dracutdevs/dracut/security/code-scanning", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae88e029c6ad20248d229bebd7e8f10d3d094988", "commit_date": "2023-02-22T20:20:52Z", "commit_message": "feat(dracut): use log level indicator in console output\n\nAlso, use the same format in messages printed to console before dracut-logger\nis sourced.\n\nFixes issue #1065", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df381b7e0cd95f78e40ac70f0f3c96a2fa8dd189", "commit_date": "2023-02-21T20:34:49Z", "commit_message": "feat(kernel-modules): driver support for macbook keyboards\n\nDiscussed in: https://bugzilla.redhat.com/show_bug.cgi?id=2166209", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "131822e26d76a3ce2028e9a545be2af066805629", "commit_date": "2023-02-21T20:05:44Z", "commit_message": "fix(dracut-install): prevent possible infinite recursion with suppliers\n\nDuring search for fw_devlink suppliers, it's possible to encounter a\nsituation where supplier A depends on supplier B, and supplier B has a\nparent node that depends on supplier A. This leads to an infinite\nrecursion.\n\nTo fix this, make sure suppliers are only processed once.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f3a7172db5dc02a6b8620a31ec36a5a3c1b540d4", "commit_date": "2023-02-16T20:15:37Z", "commit_message": "build: remove rpm spec file and build rules\n\nAs discussed in issue #2204 this patch removes the dracut.spec file from\nthe repository.  The advantage of this patch is that it creates a\ndracut-version.tar.xv file that can be more easily consumed by the\ndownstream distributions because there's no rpm spec file included in\nthe distribution.\n\nTested with a downstream rpm spec fiie:\n\n```\ncd dracut\nVERSION=`git describe --abbrev=0 --tags --always`\nmake clean\nmake dist\ncp dracut-${VERSION}.tar.xz ../\ncd ..\n\nxz -d -v dracut-${VERSION}.tar.xz\ntar rf dracut-${VERSION}.tar dracut.spec\nxz -9 dracut-${VERSION}.tar\n\nrm -rf rmpbuild\nmkdir -p rpmbuild/{BUILD,BUILDROOT,RPMS,SOURCES,SPECS,SRPMS}\nrpmbuild -ta --define \"_topdir `pwd`/rpmbuild\" -v dracut-${VERSION}.tar.xz\n```\n\nFixes issue #2204", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "89269d239f0539b7bd4339ba98a0d1b188b59962", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): add UFS drivers\n\nAdd ufs to the list of block drivers as it is used in modern embedded\nsystems.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "87a76dbb578aff473e690857d1b714eacd92b9ec", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): use modalias info in get_dev_module()\n\nWhen calling dracut with '--hostonly-mode=strict', get_dev_module() gets\ncalled on the system's block devices to find the required drivers. The\ndriver name is retrieved using udevadm. However, the driver name\nreturned by udevadm is not necessarily the same as the module name.\nThis is the case for the Qualcomm UFS driver: udevadm returns\n'ufshcd-qcom' while the module name is 'ufs-qcom', so dracut-install is\nnot able to find the module afterwards.\n\nTo solve this, make get_dev_module() also return the module alias info\nfrom the modalias files contained in the sysfs directories parsed by\nudevadm.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5dca3d68915cef077fda2bc5292e12f82cf6dd6", "commit_date": "2023-02-15T02:14:27Z", "commit_message": "fix(crypt): add missing libraries\n\nAdd missing libraries, closes #2137", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "61ceb35f4079ae8d0ee1635b56dd8bc88149b4a8", "commit_date": "2023-02-14T15:56:34Z", "commit_message": "revert(network-manager): avoid restarting NetworkManager\n\nThis reverts commit 77630365aed201a729c73a9ffda0733a75f3fee4.\n\nIts commit message states:\n\n  On EL8.3 the NetworkManager keep restarting even if it exits successfully\n  while waiting for Clevis to unlock. This patch ensures NetworkManager runs\n  only once in initrd.\n\nYes; NetworkManager is run multiple times, so that it's able to\nconfigure interfaces that haven't been seen previously (because bus was\nslow to scan or device took time to initialize).\n\nIt's not clear what problem was the original commit trying to fix.\nI suspect there was no problem, just a misunderstanding.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a6dd5bfb9a514a3bf650cc1e8d4311c05e9b968c", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle sbsign errors for UEFI builds\n\n`sbsign` does not issue any error if there is not enough disk space to create\nthe signed file using its `--output` option. So, verify the signed image after\nits creation using `sbverify`.\n\nFixes issue #2197", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8602df705879100be17e93fe56f5cbeb6216248f", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle out of space error for UEFI builds\n\nIf `cp` fails, do not continue, print an error and exit, like it's already\nbeing done for non-UEFI builds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "726d56ca0a23e5a39de5f809da2d20ce7985d437", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): IPv6: don't wait for RA for static IPv6 assignments\n\nThis patch reverts commit\nc603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\").\nIt's not generally correct wait for a default route to be established\nfor an interface, or to wait for \"proto ra\" routes in general.\nFor example, if the system is a router itself, it will receive no\nRAs. In isolated networks, no gateway may be advertized, either.\nThis is similar in spirit to 76f6566 (\"Revert \"wait for IPv6 RA\nif using none/static IPv6 assignment\"\")\n\nWhatever c603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\")\nwas supposed to achieve, it should be done differently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b074216be93dc4512b76fcd6b77a727aef11b22b", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network-legacy): always include af_packet\n\nFor static IPv4 configurations, we use arping to check for duplicate\nIP addresses. arping requires the af_packet module to work, and if arping\nfails, the IP address will not be set and booting will fail.\naf_packet may not be loaded / required in the running system, for example if\nthe system had been booted in an IPv6 configuration, or if it had been\nmanually unloaded. Make sure it's included in initramfs in hostonly mode, too.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ff255a4488f63cf84179d4572f44fe3a1bd29ec", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): don't assume prefix length 64 by default\n\nAssuming a default prefix length of 64 by default if no explicit\nprefix length is given is wrong and known to cause connectivity\nproblems in some networks. A prefix length of 128 should be assumed\nin this case.\n\nSee https://www.rfc-editor.org/rfc/rfc5942 (specifically section 5)\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=684009", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3b65a493a635a3f85f9e65c4337cd4c144ff8fc", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): prefix syntax for static iBFT IPv6 addresses\n\nibft_to_cmdline() formats a static IPv6 address like this\n(without peer, gateway, hostname):\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10/64]:::::ibft0:none\"\n\nThis means that the \"mask\" field (4th) is left blank. When this is\nparsed later by parse-ip-opts.sh, it bails out with the error\nmessage \"Sorry, automatic calculation of netmask is not yet supported\".\n\nparse-ip-opts.sh rather expects the prefix in the 4th field:\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10]:::64::ibft0:none\"\n\nThis syntax will be correctly transformed to the command\n\n  ip addr add fd09:9a46:b5c1:1fe::10/64 dev ibft0\n\nThis patch fixes the formatting of the \"ip=\" line in ibft_to_cmdline().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa5d9526eca23f642fd623d2c857fd8f9930b83d", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): install 8021q module unconditionally\n\nIn iBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3de4c7313260fb600507c9b87f780390b874c870", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "feat(dracut-install): add fw_devlink suppliers as module dependencies\n\nDracut currently finds kernel module dependencies using two methods:\ndepmod and softdeps. However, these are often insufficient on embedded\nsystems where a lot of driver dependencies are only described in the\ndevice tree. This is often the case for low-level devices such as\nclocks, regulators, pinctrls, etc.\n\nThis patch allows dracut to find those device tree dependencies, by\nparsing the sysfs supplier nodes populated by fw_devlink.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0c3b683270dbce933ef3d2f89d99dea7314ebf6", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add Hashmap cleanup function\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ea8cf5f56df2e2808863188450488835c17e59d", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add function to install one dependent module\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88aeca2a381a657787c4200e9179c3ff70b057e9", "commit_date": "2023-02-13T12:12:21Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.2.2 to 0.5.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.2.2 to 0.5.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.2.2...v0.5.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16931f5236b44078ab2bbc60d7b3bef2ba4507d7", "commit_date": "2023-02-13T12:08:36Z", "commit_message": "chore(shfmt): update to pass with shfmt v3.5.1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d777dd3dab50c2e383c00751fae5d9593339315f", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): move fips-boot script to pre-pivot\n\nThis is needed in s390x to be able to use the same `boot=` command line\nparameter in grub and zipl. Otherwise, `boot=` would need to be added only to\n`grub.cfg` (not `/etc/default/grub` and thereby not to `/boot/zipl/config`).\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab26ad2c2ab4a5884e392951998d40829f130387", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): only unmount /boot if it was mounted by the fips module\n\nThe `do_fips` method should only unmount /boot if it was mounted in the\n`mount_boot` method.\n\nIn addition, now the `mount_boot` method checks if /boot is already mounted.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "68d0653e35f79e78b75a71c122c091ba4f4d5759", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "feat(fips): add progress messages\n\nThis allows to better understand at what point a FIPS integrity test failed.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fabbb6412b70bdd1aac5279b90b9a23a267ffc5", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): do not blindly remove /boot\n\nThe `mount_boot` method called from fips-noboot.sh in the pre-pivot hook blindly\nexecutes `rm -rf /boot` if there is no `boot=` command line parameter, without\nfirst checking that /boot is not already mounted by other means.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c95075e2c792cdb0e18aac6300ae8dc0dd6a6c1b", "commit_date": "2023-02-13T11:58:52Z", "commit_message": "chore(base): remove support for <udev-176\n\nThis reverts 579238a3acd0317d7124a76dc489f19d9471fb63.\n\nKeep the support for prepare_udev_rules for out-of-tree\ndracut modules and issue a deprecation warning.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cef3f28e15a834284786c79f108b7c42481f96", "commit_date": "2023-02-13T11:18:58Z", "commit_message": "fix(plymouth): remove /etc/system-release dependency\n\n/etc/*release files should not be managed in the plymouth module\nand more importantly dracut assumes /etc/os-release not\n/etc/system-release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3a7112bef794e2f2dd741ec2c74fa9cb9117651", "commit_date": "2023-02-13T10:57:11Z", "commit_message": "feat(resume): also consider resume= in the cmdline as enabling hibernation\n\nDon't consider noresume to disable, that's a single-boot flag\n\nCloses #924", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d8a9a73df9688989b5e47469e74ad5aa666a5bfb", "commit_date": "2023-02-13T10:54:41Z", "commit_message": "fix(network-manager): add \"After\" dependency on dbus.service\n\nDuring shutdown, there is no ordering dependency between the nm-initrd service\nand the D-Bus daemon, and so the latter can be stopped before. This causes\nissues to NetworkManager, especially when team interfaces are present because\nNM will see teamd dropping from the bus and will try to reactivate the\nconnection.\n\nAdd a \"After\" dependency to make sure the D-Bus daemon is stopped after NM on\nshutdown.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1597076887c6744b9ec69c0ac44a1134fd700700", "commit_date": "2023-02-13T10:51:42Z", "commit_message": "fix(fido2): libfido2.so depends on libz.so\n\nCo-authored-by: cs50guy2", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a531ca044e3cfe9b670e7e4d59a7bae5bafec1e", "commit_date": "2023-02-13T10:21:53Z", "commit_message": "fix(dracut-install): continue parsing if ldd prints \"cannot execute binary file\"\n\nWhen the kernel is compiled without IA32_EMULATION and the glibc 32-bit library\nis installed on the system, `ldd` prints the following output:\n\n```\n> ldd /usr/lib64/libfido2.so.1.12.0\n/bin/ldd: line 162: /lib/ld-linux.so.2: cannot execute binary file: Exec format error\n\tlinux-vdso.so.1 (0x00007ffd627fa000)\n\tlibcbor.so.0.9 => /lib64/libcbor.so.0.9 (0x00007f18d799f000)\n\tlibcrypto.so.3 => /lib64/libcrypto.so.3 (0x00007f18d7400000)\n\tlibudev.so.1 => /lib64/libudev.so.1 (0x00007f18d7971000)\n\tlibhidapi-hidraw.so.0 => /lib64/libhidapi-hidraw.so.0 (0x00007f18d7968000)\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f18d794e000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f18d7205000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f18d79f9000)\n> echo $?\n0\n```\n\nThe `ldd` script uses the following code to resolve dependencies:\n\n```\nRTLDLIST=\"/lib/ld-linux.so.2 /lib64/ld-linux-x86-64.so.2 /libx32/ld-linux-x32.so.2\"\n...\nRTLD=\nret=1\nfor rtld in ${RTLDLIST}; do\n  if test -x $rtld; then\n    verify_out=`${rtld} --verify \"$file\"`\n    ret=$?\n    case $ret in\n      [02]) RTLD=${rtld}; break;;\n    esac\n  fi\ndone\n```\n\nSo, if the 32-bit library fails, the 64-bit library may work, so don't stop\nparsing the `ldd` output unconditionally when the message \"cannot execute binary\nfile\" is printed.\n\nFixes issue #2190", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b530f26368d723dcc34fb67d687c60009b06412", "commit_date": "2023-02-13T07:56:39Z", "commit_message": "fix: make iso-scan trigger udev events\n\nFixes #2183", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab07f6d1ee3cda8c735e6235e5da4c74913e5184", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "ci: enable test 60\n\nIt's hopefully stable now.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d7c0ffbd65c8d5c9fef559a51a2405a28c6f6a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): rename test 60\n\nThe test *also* checks the generation of ifcfg files, but it's primarily a test\nfor bonding, bridging and VLANs. Update the name to reflect this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e846cb1320e32db1e3d200743f8fc08732d4c9e", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): improve test 60\n\nThe test has the following issues:\n\n - it sets up a bridge on net1 and net2, however those interfaces\n   are part of the same qemu hub and this causes switching loops;\n\n - the bonds are created on two interfaces but only one has a DHCP server, and\n   this causes random failures;\n\n - the checks performed on the client are pretty limited.\n\nRework the test:\n\n - avoid the bridging loop;\n\n - update the topology to use a bond interface on the server side;\n\n - introduce additional checks on the client: start a ping and check that ports\n   are properly attached to bonds and bridge;\n\n - make it possible to return module-specific information from the client; in\n   the future this can be added for example to check that the NetworkManager or\n   systemd-networkd configuration is correct.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f44740f2c234ddb275e0a11e23d45e3678eb4a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): remove leftover link file from server rootfs\n\n01-client.link must be removed, otherwise it conflicts with 01-server.link that\nsets a different naming policy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9fb64d96ab7a7e19a7940e56e9bc0da863b46386", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): assign fixed address to bridge\n\nKernel uses the lowest MAC of all attached ports as MAC address of the\nbridge. However, after the first port gets attached, DHCP can be started on the\nbridge and it will use the MAC (and client-id) of the first port; so, the MAC\nused for DHCP depends on the order of attachment of ports, which is not\nguaranteed to be stable in general.\n\nTo make sure that the DHCP server always sees the request from the MAC of\nenp0s1, assign that MAC to the bridge from the kernel command line.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "462d9b9254d4386e9eac267547ee4e8cd2487c3d", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): bump DHCP timeout to 30 seconds\n\nThe current interval (3 seconds) is very low and causes sporadic failures\nespecially when DHCP is run on a bridge (TEST-50-MULTINIC); in that specific\ncase, interfaces take time to be attached to the bridge and before enp0s1 is\nattached all DISCOVER packets are lost.\n\nBump the timeout to a more robust value of 30 seconds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "da959483333c6ab83e4cdef837130eacec6b35d7", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): remove check on dhclient support for --timeout\n\nThe network-legacy dracut module already ignores the DHCP timeout option when\nit's not supported by dhclient. Other network modules don't use dhclient for\nDHCP.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d3993c7dabdd37c54a991c6ad9ea38365598d16a", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): adapt multinic test for new NetworkManager versions\n\nSince version 1.42, NetworkManager creates a \"external\" connection for the\nloopback interface. Ignore that connection in the multinic test.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70aeb4c1a56027bc2fe5570c080d96625b377c94", "commit_date": "2023-02-06T12:19:58Z", "commit_message": "fix(install): do not undef _FILE_OFFSET_BITS\n\n_FILE_OFFSET_BITS is a feature test macro to determine largefile\nsupport. Usually its set to 64 on systems supporting LFS. Its also\nneeded to be set to 64 for supporting 64bit time_t on glibc on 32bit\nsystems. If its undefined explicitly, then 64bit time_t can not be\nenabled.\n\nSigned-off-by: Khem Raj <raj.khem@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "18c5fb6ae0e32f11596cb365a73946eb1c9ce5e5", "commit_date": "2023-02-02T07:26:43Z", "commit_message": "chore(deps): bump docker/build-push-action from 3 to 4\n\nBumps [docker/build-push-action](https://github.com/docker/build-push-action) from 3 to 4.\n- [Release notes](https://github.com/docker/build-push-action/releases)\n- [Commits](https://github.com/docker/build-push-action/compare/v3...v4)\n\n---\nupdated-dependencies:\n- dependency-name: docker/build-push-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4a5c90ab993d2559720c2d4023d99ad43df00a", "commit_date": "2023-02-02T07:13:30Z", "commit_message": "fix(dracut.sh): --sysroot option broken if global variables not set in conf\n\nWhen `$dracutsysrootdir` is set and references an existing directory, the\ninternal global variables are never set, unless their value is assigned via\nconfiguration file.\n\nThe simple fix would be turn all:\n\n```\n[[ -d $dracutsysrootdir$var ]] || var=value\n```\ninto:\n```\n[[ -z $var || ! -d $dracutsysrootdir$var ]] && var=value\n```\n\nBut this patch also includes a refactoring, removing duplicate code using the\nsame `set_global_var` function to set and export global variables, and improving\nreadability.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "823de8fe5337cd7b8b4ce4dec3675ea44b723706", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "refactor(dracut-init.sh): remove redundant \"dracut\" from \"dracut module\" prints\n\nIn a similar fashion than \"Including module\" prints.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a10078a5c3ce9adf309962634e71ae6e186f2621", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "feat(dracut-init.sh): specify if a module cannot be found or cannot be installed\n\nDo not print the same error message for both situations.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1f84ff882fe272ef0185a284eee82e89735c833d", "commit_date": "2023-01-31T07:44:57Z", "commit_message": "fix(lsinitrd.sh): handle filenames with special characters\n\nPrinting and unpacking of specific files passed as arguments does not work if\ntheir filenames contain special characters with a hexadecimal character escape\n(\\x), which is often the case for systemd device units.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eb75861c2a1c05eb142616da1891a7fa5a2a34e1", "commit_date": "2023-01-27T15:55:03Z", "commit_message": "fix(dracut-systemd): remove unused argument\n\nThe `generator_wait_for_dev` function of the dracut rootfs systemd generator\nonly uses the first argument. Moreover, RDRETRY is unset at this point.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a109c6123ffa8506379b73a4b1aeee4d0b67866d", "commit_date": "2023-01-27T15:16:35Z", "commit_message": "feat(lvm): always include all drivers that LVM can use\n\nThis patch adds all the kernel modules that might be needed by LVM, to avoid\nhaving to rebuild the initrd in hostonly mode after a dynamic change that\nrequires new drivers to boot.\n\nFor example, LVM allows to dynamically convert a linear logical volume to a\nRAID-1 type (`lvconvert --type raid1 vg/lv`), which, in hostonly mode, will\nrequire the user to manually rebuild the initrd again to include the new RAID\ndrivers in use, otherwise the system will fail to boot.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aafcab935b7e84cea8fc3f084b6935f87b2b8a5", "commit_date": "2023-01-27T08:03:54Z", "commit_message": "fix(dracut-init.sh): correct typo in comment", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cda6b00abce0e68e353ab929b86cfaf45c3dc1c8", "commit_date": "2023-01-27T08:02:57Z", "commit_message": "fix(dracut.sh): correct --help and --version exit codes\n\nBoth are valid options that cause regular program termination without errors, so\ndracut should return 0.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e971c788f0a4a494eedf291b988d698849c36c22", "commit_date": "2023-01-27T08:01:50Z", "commit_message": "refactor(virtiofs): remove exit after die\n\nThe `die` function already ends with `exit 1`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c16c76fb51683cd70c3643b122685b7cdb4178c", "commit_date": "2023-01-19T13:22:22Z", "commit_message": "ci: fix Gentoo container used for testing", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3e8108eb75247249ec05eaba943c3f48637c04b", "commit_date": "2023-01-06T20:07:49Z", "commit_message": "fix(crypt-gpg): do not use always --card-status\n\nIf no GPG smart card is used then the card-status breaks the decryption\nof the keyfile. Therefore, use the card-status only if a smart card is\nused to decrypt the keyfie.\n\nFixes issue #2004", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f6bb4a36b763ae6de0e1aee55bc95d3d3f3ec1e1", "commit_date": "2023-01-06T04:49:37Z", "commit_message": "docs(RELEASE.md): update release docs\n\n- Remove the reference to Harald's git ci alias\n- Added a missing push to master\n- Added a warning not to add the Rendered View entry from the NEWS.md to\n  the tags. ( Github adds that to the release with no way of removing it, see 058 )\n- Added validation of the new tag ( Good practice )\n- Clarify milestone handover.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b060945c45a938af8ef53010272eb4ac3acc12df", "commit_date": "2023-01-04T09:18:08Z", "commit_message": "ci: disable test 50\n\nTest 50 (MULTINIC) seems to be the only test that prevents\nthe project from having an all passing continuous integration\ntest suite.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88fe9205de49c12ed8eaac2ca227a72830750955", "commit_date": "2023-01-04T05:38:58Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "93339444361303c15e26b6ff5cea6ef99ad0b3e0", "commit_date": "2023-01-03T14:09:12Z", "commit_message": "fix(dmsquash-live): live:/dev/*\n\nfix a bug introduced in 71cfa2e22\n\nmake sure root is set correctly for both of the following cases\n - \"root=live:/dev/*\"\n - \"rd.live.image root=/dev/*\"", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "10cf8e46f43a7a2094e4d861c1296db6af0e0fa1", "commit_date": "2022-12-30T14:13:00Z", "commit_message": "fix(load_fstype): avoid false positive searchs\n\nRefactor to avoid substring matches\n  and to speed processing.\nAlso avoid xtracing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08b63a25296d689186c6343f96e764bf893367cb", "commit_date": "2022-12-30T14:10:00Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94dcac7ccdfeb2ff7bd7c59c0f8bf46d0698ce3f", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "refactor(dracut-install): strerror(errno) -> %m", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "efd4ca271f15530d7264d2c87a104284e20b28aa", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() environment block", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "77226cb412822dc7614037c6d9225d98e64d4a55", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't reallocate {src,dst}path in hmac_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a20556f0e51249e501aeb87eb5a337a15db52253", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() excessively for dracut_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ed8337bb9fec0283af5dc745450394ba649a03", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): stat() w/unused buf -> access(F_OK) in dracut-install", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "751a110f29f07cb41246c09784c63bb26bb708c6", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): multiple single-character strstr()s -> strpbrk()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e5237dd771029ad90d921732a9805f618ed67fc", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "chore: remove src/install/hashmap.lo", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9dbbebb1339d1c3dc8e6b8835a6edbc95c66e2fe", "commit_date": "2022-12-28T07:40:23Z", "commit_message": "feat(network-wicked): remove module\n\nwicked is being phased out from openSUSE\nhttps://news.opensuse.org/2022/01/28/bash-systemd-libvirt-update-in-tw/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "dependabot/github_actions/docker/login-action-3": [{"commit_oid": "c98383bb6f008d99d986fb899538f52ce4383d21", "commit_date": "2023-09-12T18:54:13Z", "commit_message": "chore(deps): bump docker/login-action from 2 to 3\n\nBumps [docker/login-action](https://github.com/docker/login-action) from 2 to 3.\n- [Release notes](https://github.com/docker/login-action/releases)\n- [Commits](https://github.com/docker/login-action/compare/v2...v3)\n\n---\nupdated-dependencies:\n- dependency-name: docker/login-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6acfecae572fb457115b276b5b64d9424ad5187b", "commit_date": "2023-08-30T07:21:08Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC1087", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c80408c8644a0add1907b0593eb83f90d6247b1", "commit_date": "2023-08-30T06:47:15Z", "commit_message": "fix(dracut.sh): remove microcode check based on CONFIG_MICROCODE_[AMD|INTEL]\n\n`CONFIG_MICROCODE_AMD` and `CONFIG_MICROCODE_INTEL` are hidden since\nhttps://lore.kernel.org/all/20230810160805.081212701@linutronix.de/, therefore\nthis check is wrong and early microcode is always disabled.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b4e23ce4238821b0c2dd3c846da45f9cfeb57954", "commit_date": "2023-08-25T12:25:55Z", "commit_message": "fix(release): maintain dracut-version.sh in the source tree\n\nUpdate dracut-version.sh as part of release generation.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23389f6d48871212eba46e34db67e0c9f4368078", "commit_date": "2023-08-24T10:17:47Z", "commit_message": "docs: set KVERSION for running test suite\n\nRunning the test suite in podman will most likely require setting\n`KVERSION` because the running Linux kernel version will most likely be\ndifferent to the kernel version in the container.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b81e8eb67c80500e529ff2f845c10719b2afd87", "commit_date": "2023-08-24T06:54:01Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC2154", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "166456331d55cdc23946c11315dc2c88aab15911", "commit_date": "2023-08-22T12:00:29Z", "commit_message": "feat(install.d): allow using dracut in combination with ukify\n\nThis can be simply accomplished with the KERNEL_INSTALL_INITRD_GENERATOR\nand KERNEL_INSTALL_UKI_GENERATOR variables. `60-ukify.install` looks for\nthe initrd in the KERNEL_INSTALL_STAGING_AREA and then takes care of building\nthe uki.\n\nThis change makes it possible to use a configuration like this:\n/etc/kernel/install.conf\nlayout=uki\nuki_generator=ukify\ninitrd_generator=dracut\n\nWithout this change this configuration will fail since dracut would also\ngenerate an uki instead of initrd, which will cause a problem in\n`60-ukify.install` since it can't find an initrd to use.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f78e5de23769b6c1d656b44bf3c7eb97ba73518", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support disabling KVM by setting NO_KVM\n\nKVM fails on the Ubuntu ppc64el autopkgtest runners:\n\n```\n$ /usr/bin/qemu-system-ppc64el -enable-kvm -cpu host [...]\nioctl(KVM_CREATE_VM) failed: 22 Invalid argument\nPPC KVM module is not loaded. Try modprobe kvm_hv.\nqemu-system-ppc64el: failed to initialize kvm: Invalid argument\n$ modprobe kvm_hv\nmodprobe: ERROR: could not insert 'kvm_hv': No such device\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "65f0ef52a9bd63ccb1e31ccae948b49978e5ab0e", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: set QEMU machine for ARM and PowerPC\n\nSet QEMU machine for ARM and PowerPC to run on Debian/Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f29e428bdb3068e25150bc9591a961bd2df66442", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "fix(test): only use QEMU machine q35 on x86\n\nThe QEMU machine `q35` is only available on x86:\n\n```\nqemu-system-aarch64: unsupported machine type\nUse -machine help to list supported machines\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb7d5ec4cb06b2b4435327255049e55d34301d27", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support /boot/vmlinux\n\nOn the Ubuntu ppc64el architecture the kernel is named `/boot/vmlinux`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1e63b184517112efcce253f3962cab50fe25927", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: log qemu calls to ease debugging\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf97572bd5145a9e1192297a806dda94a3422de0", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: introduce overridable ARCH variable in run-qemu\n\nAllow specifying the architecture for `run-qemu`. E.g. this enables\nrunning armhf containers on arm64 hosts.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a18f1335fcab1eb84fedc45e450851d093335aa", "commit_date": "2023-08-22T06:52:53Z", "commit_message": "fix(test): use bash for jobs -r parameter\n\nTest 20 - \"NFSv3 root=dhcp DHCP IP:path\" fails on Debian with following\nerror message in `server.log`:\n\n```\njobs -rp\n/sbin/init: 105: jobs: Illegal option -r\n```\n\nThe jobs parameter `-r` requires bash.\n\nPartially fixes #1901\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e9d89d9c05b4ad1d70a508a604c0b1745c1b17f", "commit_date": "2023-08-21T13:19:57Z", "commit_message": "ci: also run integration test on Ubuntu\n\nAdd a Dockerfile for Ubuntu (very similar to Debian) and run the\nintegration tests also on Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "31c4d284017044b72ddea767c4d35d6d70473984", "commit_date": "2023-08-21T12:39:14Z", "commit_message": "feat(Makefile): allow setting dracut version via environment variables\n\nTo ease packaging dracut for Debian/Ubuntu, please support setting the\ndracut main/full version via environment variables:\n\n```\n$ DRACUT_MAIN_VERSION=007\n$ export DRACUT_FULL_VERSION=007-bond\n$ make dracut-version.sh\n$ grep VERSION dracut-version.sh\nDRACUT_VERSION=007-bond\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ddf6323145d50d33a897687474c73770328bf757", "commit_date": "2023-08-21T12:18:44Z", "commit_message": "fix: codespell", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "028f7632f8fbeb68d0414baa2ae2482bfb19f1b3", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: fix skipcpio path for installed binary\n\nThe `skipcpio` binary is installed in `${PKGLIBDIR}/skipcpio`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbee4f37cb933fcb4eeb89eb7a2c8fd687eb9079", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: skip test 98 if dracut-util is not available\n\nBuilding `dracut-util` requires the source code to be present and\nprevents running the test against the installed system. Check that\n`dracut-util` and rely on the test environment to build `dracut-util`\nbeforehand.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0321c90fabb37145db67751c948a58afc123d75", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make package libdir configurable\n\nMake the package libdir configurable to allow running the test suite\nout-of-tree. `PKGLIBDIR` can be pointed to the installed dracut libdir.\nUse `PKGLIBDIR` for the location of `dracut-init.sh`, `dracut-install`,\n`dracut-util`, `dracut-cpio`, and `modules.d`.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9939d0e1f1e17cc5d33cba55717ac063d21a048", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make dracut directory configurable\n\nMake the directory of the `dracut.sh` script configurable to allow\nrunning the test suite out-of-tree.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7528d84de84d9c1fb7d5f54712c692600e21b044", "commit_date": "2023-08-16T06:30:26Z", "commit_message": "fix(systemd): add new systemd-tmpfiles-setup-dev-early.service\n\n`systemd-tmpfiles-setup-dev.service`, `kmod-static-nodes.service` and\n`systemd-sysusers.service` have an ordering dependency on this new service since\nhttps://github.com/systemd/systemd/commit/353c849", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "570b9d405116c9763266aa2e88ea0a2460c734ba", "commit_date": "2023-08-16T06:26:14Z", "commit_message": "fix(systemd-udevd): add missing override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32f6f364ddeb706bf8741f2895d60022aee264e7", "commit_date": "2023-08-10T12:04:03Z", "commit_message": "fix(dracut-install): protect against broken links pointing to themselves\n\n`readlink` does not return an error if a symbolic link points to itself, which\ncan cause a stack overflow due to infinite recursion in the `get_real_file`\nfunction.\n\nAlthough this type of recursive links should not exist, we discovered this\nissue on a real system. It can be reproduced as follows:\n\n```\n> ls -l /lib64/libblkid.so\n-rwxr-xr-x 1 root root 224368 Aug  9 15:13 /lib64/libblkid.so\n> rm -f /lib64/libblkid.so\n> ln -s /lib64/libblkid.so /lib64/libblkid.so\n> ls -l /lib64/libblkid.so\nlrwxrwxrwx 1 root root 18 Aug  9 15:06 /lib64/libblkid.so -> /lib64/libblkid.so\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\n...\n[infinite recursion]\n...\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\n/usr/lib/dracut/dracut-init.sh: line 298: 20949 Segmentation fault      (core dumped) $DRACUT_INSTALL ${dracutsysrootdir:+-r \"$dracutsysrootdir\"} ${initdir:+-D \"$initdir\"} -a ${loginstall:+-L \"$loginstall\"} ${DRACUT_RESOLVE_DEPS:+-l} ${DRACUT_FIPS_MODE:+-f} ${_hostonly_install:+-H} \"$@\"\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.dqLmOS/initramfs -a /lib64/libblkid.so\n...\n```\n\nAfter applying this patch:\n\n```\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: ERROR: '/lib64/libblkid.so' is pointing to itself.\ndracut-install: ERROR: installing '/lib64/libblkid.so'\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.4w8FVL/initramfs -a /lib64/libblkid.so\n...\n```", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2c6b584e2227e68f54c8843925dcb73aefe87ac", "commit_date": "2023-08-10T06:19:57Z", "commit_message": "fix(dracut.sh): exit if resolving executable dependencies fails\n\nWe came across an issue where, when resolving executable dependencies, a call to\na buggy glib function in `dracut-install` was causing a termination with\nSIGSEGV, but dracut didn't stop the build process, which resulted in an\nunbootable initrd, due to missing required libraries.\n\n```\ndracut: *** Resolving executable dependencies ***\nxargs: /usr/lib/dracut/dracut-install: terminated by signal 11\ndracut: *** Resolving executable dependencies done ***\n```\n\nTherefore, stop the initrd creation in this case.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fffeadedf2170563cb7c0e0cb06994b0878ed455", "commit_date": "2023-08-05T16:35:59Z", "commit_message": "feat(dracut): add --sbat option to add sbat policy to UKI\n\nTake existing .sbat section from the uefi stub and merge it\nwith vmlinux .sbat (if it exists) and user-provided .sbat parameters\nusing the new --sbat option.\n\nFor some reasons, --update-section in objcopy does not resize the\n.sbat section, so remove the section from the stub and add it\nto the UKI as new one, to avoid having incomplete SBAT strings.\n\nSigned-off-by: Emanuele Giuseppe Esposito <eesposit@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af3076a1cb527cd7800b9aaeb368c91de1362c75", "commit_date": "2023-08-03T06:18:29Z", "commit_message": "ci: run all local tests on all containers (including Gentoo)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699d51c5dc222707053bb6e423559d56c1aa072f", "commit_date": "2023-08-01T10:48:55Z", "commit_message": "chore(dracut-init.sh): remove support for obsolete syntax\n\nOld syntax dracut modules had its check install installkernel\nscripts in dedicated shell files and did not support module\ndependencies.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "83eccc742ca932733b71007f78f0da28155f68ea", "commit_date": "2023-08-01T06:36:14Z", "commit_message": "ci: change the order of lint jobs as lint_shell is more likely to fail", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d55fa8239aebb8c77ba9a8a9db0fdedf8fa6232a", "commit_date": "2023-08-01T06:21:32Z", "commit_message": "ci: migrate from systemd-boot to systemd-utils in Gentoo container\n\nSee https://www-cdn.gentoo.org/support/news-items/2022-04-19-systemd-utils.html\n\nAlso no longer include open-iscsi for musl as it fails to compile, see\nhttps://bugs.gentoo.org/908587", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "403f4e8e15da4fdc84f3d32a0f231eeb9b2e4ed0", "commit_date": "2023-07-31T09:35:20Z", "commit_message": "ci: do not run test container generation on forked repos by default\n\nIf CONTAINER Github variable set, reenable the github action\nschedule.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16855765c8ad9d3237e6d98e59d0f8e6d4c7fc62", "commit_date": "2023-07-31T08:29:06Z", "commit_message": "refactor(install): log about missing firmware only once\n\nWhen attempting to locate a firmware path under each of the firwaredirs\nparent directories, Dracut logs an error for every missing path.\nInstead, only log the error if the firmware path isn't found under any\nof the firmwaredirs.\n\nSigned-off-by: David Disseldorp <ddiss@suse.de>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c46513fb21b51934d0862a234e55b759360917cd", "commit_date": "2023-07-31T07:15:14Z", "commit_message": "test: increase test VM memory from 512M to 1024M to avoid OOM killer", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a804945f27a0ccc2f69ae694599b1afec2afe8b1", "commit_date": "2023-07-26T15:49:35Z", "commit_message": "fix(integrity): do not require ls\n\nls is not used by the integrity dracut module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e278a965733f706a87756d0a4c38245a723b9e5c", "commit_date": "2023-07-26T15:49:20Z", "commit_message": "ci: match comment with code\n\nProperly document the time container generation runs daily.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e1e924550a23b7fbbca5f752f32a749631db116", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: automate release generation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a3758704ad1c7c9646cc844936b256076e139ea7", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: allow the release generation script to compute the next release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5cdd4b3502a2774f9590fcb9d2e17fe29b3ea87d", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "refactor(Makefile): improve AUTHORS and CONTRIBUTORS targets\n\nMake make rules more generic to be able to use them not just in\nmanual release process but also in CI release process.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c9f403f1c219b8e2ff62011bfcc1b5e254b411a", "commit_date": "2023-07-24T15:22:42Z", "commit_message": "fix(dracut-init.sh): `module_check` method ignores `forced` option\n\nWhen the `module_check` method is called passing 3 arguments (all calls right\nnow), the `forced` option is ignored, so the `hostonly` variable is never unset\nbefore the module's `check` method is called.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4e6eaf9c61616a2f27ef6e91cc787888afecde4", "commit_date": "2023-07-24T11:52:49Z", "commit_message": "feat(systemd-rfkill): remove module\n\nThe rfkill service and socket provided by systemd will not be activated in the\ninitrd since https://github.com/systemd/systemd/commit/49c55abc", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f11e8fffc2db1f6f02d09207a1edbf1d898249d7", "commit_date": "2023-07-24T11:50:15Z", "commit_message": "fix(man): add missing initrd-root-device.target to flow chart\n\nThis target was added since https://github.com/dracutdevs/dracut/commit/d4efc0ae\nand is ordered between `basic.target` and `sysroot.mount`, see `man bootup.7`\n(`dracut-pre-mount.service` starts after).", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1b53bb6297d83940b52e806c01030e8f5035d9f2", "commit_date": "2023-07-24T11:40:40Z", "commit_message": "fix(dracut-init.sh): use the local _ret variable\n\nUse the local _ret variable when declared.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "273e481193daba3e7aa264f36d6721313c2ee84b", "commit_date": "2023-07-24T10:25:13Z", "commit_message": "ci: install util-linux-systemd and systemd-boot into openSUSE container\n\n- `findmnt` is installed by `util-linux-systemd`\n- `/usr/lib/systemd/boot/efi/linuxx64.efi.stub` is installed by `systemd-boot`", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbdab2d87fa49c7fdd08b274d8a21e6046360cad", "commit_date": "2023-07-24T09:08:42Z", "commit_message": "fix(dracut.sh): shellcheck warning SC1004\n\nAs stated in [1] it should work without literal backslash+linefeed.\n\n[1] https://github.com/koalaman/shellcheck/issues/1246", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "33a66ed04bdc30eccb172a0cd6dcc36d9d74f825", "commit_date": "2023-07-20T12:25:46Z", "commit_message": "fix(dracut.sh): use gawk for strtonum\n\nstrtonum is a gawkism and is not available in all awks, e.g. mawk. Use gawk\nto avoid failure.\n\nFixes: f32e95bcadbc5158843530407adc1e7b700561b1\nSigned-off-by: Sam James <sam@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6af3fcfd7f699ec4bb3f1e9ac71b7a9ebb9804b3", "commit_date": "2023-07-17T06:33:19Z", "commit_message": "fix(man): remove duplicate entry\n\nDRACUT_COMPRESS_BZIP2 was mentioned several times in the list.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "81d78c4e95c13b859befc6869365b3c069e2038e", "commit_date": "2023-07-13T16:51:48Z", "commit_message": "ci: release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52351cfa049a9594d539e6a5337d591e8039ab80", "commit_date": "2023-07-07T12:24:10Z", "commit_message": "feat(livenet): add memory size check depending on live image size\n\nFor writeable live images, the memory must hold the complete image.\nThat means it must be at least the size of the image plus some RAM\nnecessary to run processes.\nWith too small RAM, the OOM Killer steps in and makes the boot hang.\nThis patch lets the system go into the emergency shell instead.\n\nThe default minimum RAM after subtracting the live image size is set to 1G.\nThe parameter rd.minmem is added to modify this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15d4f60eb1f9f704df16287ccf7bc19755a73875", "commit_date": "2023-06-29T06:25:57Z", "commit_message": "chore(gentoo.conf): remove examples to avoid confusion\n\nThese examples are not used and not maintained and changing them\nwould not have an impact on Gentoo.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7ef1302715bead649625666f92eff434082de1f", "commit_date": "2023-06-28T11:53:14Z", "commit_message": "fix(modsign): load keys to correct keyring\n\nUntil now, 03modsign module was loading keys from /lib/modules/keys/* into the\ncurrent session keyring.\nThis change makes it add keys to the secondary trusted keyring. This works\nonly as long as added certificate is signed by key from the same keyring.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "179e1a992fc2b74d55a600bef152d5df43802104", "commit_date": "2023-06-26T13:56:15Z", "commit_message": "fix(dmsquash-live-autooverlay): specify filesystemtype when it is already known", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a71b905ef32654b2bbb6fbbc58e8aa3c89c967e6", "commit_date": "2023-06-26T13:54:04Z", "commit_message": "chore: remove git2spec.pl, it is no longer used", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa332cad7196b6e05b9e2f1810dc54bb38ed2ac", "commit_date": "2023-06-26T13:39:48Z", "commit_message": "fix(fs-lib): remove quoting form the first argument of the e2fsck call\n\nFix regression.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f5cc202e998eb22bda98920b8eeeb0f027ca0b6e", "commit_date": "2023-06-26T13:24:02Z", "commit_message": "fix(Makefile): remove leftover rpm build rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ffc766d23d9175673f722a3c81e7609496167845", "commit_date": "2023-06-26T13:16:12Z", "commit_message": "fix(Makefile): no longer upload to kernel.org", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b490f6f7d7cf1c322b47af4e44d7f238612fb260", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "feat(nvmf): add code for parsing the NBFT\n\nAdd code to parse the Nvme-oF Boot Firmware Table (NBFT) according\nto the NVM Express Boot Specification 1.0 [1]. The implementation in\ndracut follows a similar general approach as iBFT support in the\niscsi module.\n\nNBFT support requires two steps:\n\n(1) Setting up the network and routing according to the\n    HFI (\"Host Fabric Interface\") records in the NBFT,\n(2) Establishing the actual NVMe-oF connection.\n\n(1) is accomplished by reading the NBFT using JSON output from\nthe \"nvme nbft show\" command, and transforming it into command\nline options (\"ip=\", \"rd.neednet\", etc.) understood by dracut's\nnetwork module and its backends. The resulting network setup code\nis backend-agnostic. It has been tested with the \"network-legacy\"\nand \"network-manager\" network backend modules. The network setup\ncode supports IPv4 and IPv6 with static, RA, or DHCP configurations,\n802.1q VLANs, and simple routing / gateway setup.\n\n(2) is done using the \"nvme connect-all\" command [2] in the netroot handler,\nwhich is invoked by networking backends when an interface gets fully\nconfigured. This patch adds support for \"netboot=nbft\". The \"nbftroot\"\nhandler calls nvmf-autoconnect.sh, which contains the actual connect\nlogic. nvmf-autoconnect.sh itself is preserved, because there are\nother NVMe-oF setups like NVMe over FC which don't depend on the\nnetwork.\n\nThe various ways to configure NVMe-oF are prioritized like this:\n\n 1 FC autoconnect from kernel commandline (rd.nvmf.discover=fc,auto)\n 2 NBFT, if present\n 3 discovery.conf or config.json, if present, and cmdline.d parameters,\n   if present (rd.nvmf.discovery=...)\n 4 FC autoconnect (without kernel command line)\n\nThe reason for this priorization is that in the initial RAM fs, we try\nto activate only those connections that are necessary to mount the root\nfile system. This avoids confusion, possible contradicting or ambiguous\nconfiguration, and timeouts from unavailable targets.\n\nA retry logic is implemented for enabling the NVMe-oF connections,\nusing the \"settled\" initqueue, the netroot handler, and eventually, the\n\"timeout\" initqueue. This is similar to the retry logic of the iscsi module.\nIn the \"timeout\" case, connection to all possible NVMe-oF subsystems\nis attempted.\n\nTwo new command line parameters are introduced to make it possible to\nchange the priorities above:\n\n - \"rd.nvmf.nonbft\" causes the NBFT to be ignored,\n - \"rd.nvmf.nostatic\" causes any statically configured NVMe-oF targets\n   (config.json, discovery.conf, and cmdline.d) to be ignored.\n\nThese parameters may be helpful to skip attempts to set up broken\nconfigurations.\n\nAt initramfs build time, the nvmf module is now enabled if an NBFT\ntable is detected in the system.\n\n[1] https://nvmexpress.org/wp-content/uploads/NVM-Express-Boot-Specification-2022.11.15-Ratified.pdf\n[2] NBFT support in nvme-cli requires the latest upstream code (> v2.4).\n\nSigned-off-by: Martin Wilck <mwilck@suse.com>\nCo-authored-by: John Meneghini <jmeneghi@redhat.com>\nCo-authored-by: Charles Rose <charles.rose@dell.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f07117d68d07d52aa4ce8b4b2549a0cb716b7f4b", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): support /etc/nvme/config.json\n\nSince nvme-cli 2.0, configuration of subsystems to connect to is\nstored under `/etc/nvme` in either `discovery.conf` or `config.json`.\nAttempt discovery also if the latter exists, but not the former.\nAlso, install \"config.json\" if it's present on the root FS.\n\nAs before, \"rd.nvmf.discover=fc,auto\" will force either file to be ignored,\nand NBFT-defined targets take precedence if found.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "902f3a8f84643e4249b9bbb2e81d1b13eaf35364", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): install 8021q module unconditionally\n\nIn NBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "17b8649eb931f3f4990ac8184fe23fc257df6fa5", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect even more kernel-install vars, plus style fixes\n\n- More verbose with KERNEL_INSTALL_VERBOSE=1\n\n- Use KERNEL_INSTALL_CONF_ROOT if defined\n\n- Fallback to /usr/lib/os-release if /etc/os-release does not exist\n\n- Fallback to \"Linux $KERNEL_VERSION\" if no PRETTY_NAME found\n\n- Styling fixes\n\nCo-authored-by: Antonio Alvarez Feijoo <antonio.feijoo@suse.com>\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a037634ad71711d29828214830ebdade0c449dbc", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect more kernel-install env variables\n\n- If kernel-install has defined a staging area for us\n(KERNEL_INSTALL_STAGING_AREA) install generated initrd/uki.efi there.\nThe actual install is then handled by 90-loaderentry.install or\n90-uki-copy-install.\n\n- Also skip regeneration if an uki.efi already exists.\n\n- Pass --kernel-image to dracut, this is required to generate an uki (uefi=yes)\n\n- Add --no-uefi argument to dracut rescue image generation, this ensures that\nit at least installs correctly. TODO: Rework 51-dracut-rescue.install to also\nwork with uki's.\n\nThis fixes installing a kernel with uefi=yes in dracut config and layout=uki\nin kernel/install.conf.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "09d3ec1648822d84e95b274b60cb51b80e8f49f9", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(dracut.sh): also prevent fsfreeze for tmpfs\n\nKERNEL_INSTALL_STAGING_AREA is often on tmpfs, it cannot be frozen\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4000a1ecff208479254be8ce88de826099e2b685", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "fix(dmsquash-live): allow other fstypes\n\nUse det_fs to determine fstype and provide fallback instead of\njust calling blkid.\n\nMany other dracut modules (e.g. fs-lib, btrfs, mdraid) are already\nusing det_fs to determine fstype.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "995ac6f887e7cb5f8bdf2d636ed3b3e715691db4", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(DMSQUASH): add test for NTFS\n\nAdd a test case for mounting the root filesystem from\na squashfs image file that is store on an NTFS drive.\n\nThe test case is using ntfs3 module to mount the NTFS drive.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d96754eaa57657b3acfe4a50612a07da8365a0a2", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(16): check for failure after each sub-test run\n\nThe test case had a bug where it only checked for\nat least one of the passing instead of all the subtests passing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfa408c9de7cd0b0af6099b6f1e0cce2e70ec467", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): make bluetooth rules more strict\n\nOnly warn if bluetooth kernel module is loaded\nat the time of initrd generation in hostonly mode.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e84d65c5b0191582e26fe9cc150d460652b34b33", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): add missing files\n\n- org.bluez.service dbus system service\n- bluetooth.service override conf", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8079ceafcac910d0c061830769866710c3e889a8", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): include it if Appearance matches the value assigned for keyboard\n\nFollowing the Bluetooth spec [1], Assigned Numbers Document, Rev. 2023-05-04,\nSection 2.6.3, Appearance Sub-category, the Appearance value defined for\nkeyboards is 0x03C1.\n\nThis value must be checked to include the bluetooth module in hostonly mode,\nbecause some Bluetooth keyboards do not set the Class attribute.\n\n[1] https://www.bluetooth.com/specifications/assigned-numbers/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0ecb038832038523a27f989d0eb82b45fb67861c", "commit_date": "2023-06-22T17:31:01Z", "commit_message": "fix(bluetooth): warn user instead of including it by default\n\nBluetooth module can result in a known race condition at boot.\nDiscourage its usage by default.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "765e69ce4d88a4ef6c1028cc117b3f233a285f0e", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-timedated): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d083021910f0633035a056e0541549efffec896", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-resolved): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0dc7ec96b81fec100a5ab948c12846b2b9910e6", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-networkd): correct typos in override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2f685ecb4a968d5cd889803d5a248dab89473a", "commit_date": "2023-06-22T15:08:06Z", "commit_message": "fix(dracut-init.sh): correct check in `is_qemu_virtualized` function\n\nDo not redirect `systemd-detect-virt` to /dev/null, otherwise, the `vm` variable\nis always empty. This function was working only thanks to the following /sys\ncheck.\n\nReported-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ed765dd23e4c5616c82d1cbf8b4dbceaafc7647", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): do not require module via cmdline when --no-kernel\n\ninitrd built without modules would fail when it attempts to load a\nkernel module. (Use case scenario: kernel with built-in module.)\n\nsynthesize an the cmdline only when modules are truly installed.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b47a2efe91ab8be480925c04388200a3666812c", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): add missing cmdline function\n\nOtherwise `dracut --print-cmdline` does not print the command line option added\nby the btrfs module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2ff7b4702c2098f7db63b0ffb118da0b5c0723c1", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: conditionally add tgt to Gentoo container\n\nThis commit allows to run test 30 and test 35 on a Gentoo.\n\nUse the newly introduced conditional for nfs4 support as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d06153f89666e9741f587408e10fb9983385bfa5", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: re-enable lvm on Gentoo container\n\nGentoo changed it's policy and now lvm needs to be enabled explicitly.\n\nSee https://www.gentoo.org/support/news-items/2022-11-19-lvm2-default-USE-flags.html\n\nNo need to install thin-provisioning-tools explicitelly, it is\npulled in as a dependency of the lvm2 package.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a9ecb5e3256645a4059e2d2c601971e32c7cc0ff", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: disable initramfs generation inside Gentoo container\n\nDisabling initramfs generation saves installing 4 additional packages.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5803ece5c25aa0daef4260edd01630a759c69efd", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: add extra packages for tests to Gentoo container\n\nAdd cryptsetup, multipath-tools and open-iscsi\nto the Gentoo container for tests 10, 14, 30, 35.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6fd6b36d5e16c12ba4a040ddcf7c5e7338c34146", "commit_date": "2023-06-19T07:31:55Z", "commit_message": "ci: switching the musl test to 18 (uefi)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af31df4b365f11cf1edd92914d2d83b3bd1588e8", "commit_date": "2023-06-16T23:48:14Z", "commit_message": "test(ISCSI): make test-30 use the test dracut modules\n\nIntroduce test_dracut that is meant to be shared between tests\nin test-functions.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcf4665bfcbc910c80eeb244353ca4b9a5254719", "commit_date": "2023-06-15T06:56:44Z", "commit_message": "ci: add dependencies to Debian container\n\n- add systemd-boot-efi for test 18\n- tgt is needed for test 30 and 35\n- nbd-server is needed for test 40\n- gawk dependency has been introduced by f32e95bcadbc5158843530407adc1e7b700561b1\n- install dracut instead of initramfs-tools to match actual usage\n- remove workaround for https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=962300\nas it is now fixed on Debian 12.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ec2c7e1aa4591f4eeb0bb85aa51bf1914e18ff78", "commit_date": "2023-06-14T14:52:30Z", "commit_message": "test(UEFI): add test case for UEFI boot\n\nInclude OVMF in containers if it is not already present.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1b3f88d500f16c007de5b2e48f9bdea30c45ec9", "commit_date": "2023-06-12T11:58:19Z", "commit_message": "docs: remove rd.lvm.snapsize and rd.lvm.snapshot", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4235c035ff1abad0c22125c26cab813c42b29da0", "commit_date": "2023-06-12T11:52:41Z", "commit_message": "fix(Makefile): execute command -v instead of which", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2f961a2bd7b5f5cbff6394d6be6eace15e236b7", "commit_date": "2023-06-12T06:04:54Z", "commit_message": "fix(network-legacy): typo\n\nSigned-off-by: lilinjie <lilinjie@uniontech.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f8f115a27b2bb63f0893262b6c951a187bac8ef", "commit_date": "2023-06-09T12:55:48Z", "commit_message": "fix(network,dbus): improve dependency checking\n\nDecouple implementation details of the backend\ndependencies from the meta module.\n\nCall check_module for each submodule instead\nof reimplementing sub-package dependencies\ninside the meta module itself.\n\nAdd missing NetworkManager binary to the\nnetwork-manager dracut module check.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cd6f683d634970112a29867137431d0d57f8c957", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-pcrphase): only include systemd-pcrphase-initrd.service\n\nThe only systemd-pcrphase related unit configured to run in the initrd is\nsystemd-pcrphase-initrd.service.\nBoth systemd-pcrphase.service and systemd-pcrphase-sysinit.service contain\n`ConditionPathExists=!/etc/initrd-release`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ef00735ae4fa19684598a8f7868e8b36b6bf5fe", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-tmpfiles): do not include systemd-tmpfiles-clean.timer\n\nThe systemd-tmpfiles-clean.timer unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eff2a9398120b29fd869eec991410e254d0dcbb8", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-journald): do not include systemd-journal-flush.service\n\nThe systemd-journal-flush.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "925febf89d54c0bef9e3c8fda3b8e5b1f8ba30cd", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd): do not include systemd-random-seed.service\n\nThe systemd-random-seed.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c\n\nAlso, the systemd-random-seed-load.service does not exist since\nhttps://github.com/systemd/systemd/commit/c35b956d", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1588995ae0d9f984ad08f2d466f7a09646c6517", "commit_date": "2023-06-08T06:21:54Z", "commit_message": "fix(dracut.sh): correct path for UEFI stub on split-usr systems\n\nsystemd always installs the UEFI stub in ${prefix}/lib/systemd/boot/efi.\n\nOn split-usr systems, systemdutildir is ${rootprefix}/lib/systemd, which\nmakes dracut look in the wrong place.\n\nInstead, grab 'prefix' from systemd.pc and store it in 'systemd_prefix'.\n\nBug: https://bugs.gentoo.org/765208\nSigned-off-by: Mike Gilbert <floppym@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa20bbb5b1c78963331fb6261763ea4c51ebc04f", "commit_date": "2023-06-07T16:15:36Z", "commit_message": "feat(dracut-init.sh): do not print by default if an udev rule is skipped", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5e036b157eb196ad4ae80d691ef8e9b203f0494", "commit_date": "2023-06-07T14:32:30Z", "commit_message": "test: move more makeroot dependencies into test-makeroot dracut module", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "afb5717e67727d49fae0d2a1a4169e5b247387f4", "commit_date": "2023-06-06T14:33:02Z", "commit_message": "fix(kernel-modules): add interconnect drivers\n\nMany devicetree based systems require interconnect drivers to function\nproperly. Include those in the initramfs.\n\nSigned-off-by: Andrew Halaney <ahalaney@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d244b316f29143f536254b8828365dbce4388148", "commit_date": "2023-06-06T13:40:41Z", "commit_message": "test(LVM-THIN): avoid thin pool size warning\n\nAvoid the following warning by reducing thin pool size\n\n> \"Sum of all thin volume sizes exceeds the size of thin pool\n> and the size of whole volume group.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "739b9e1b38abfa998caec35048ab367a0d19ed76", "commit_date": "2023-06-06T13:36:59Z", "commit_message": "ci: cleanup containers\n\nRemove /etc/profile.d/dracut-test.sh from test containers\nNo use to override default command\nRemove references to docker. These files work just fine\nwith podman as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae7cd94b346ac7f4ce7ca6c236d1ecdaba1171a3", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: add empty default test_cleanup implementation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1346763ab7c031605cf74260e6846433f40f823", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: move more common test code to test-functions\n\nMove KVERSION and USE_NETWORK definition to test-functions.\nAdd option for qemu_add_drive_args to initialize drive with size.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ac581ef66dd8f1939e771419824137aebbc8f66", "commit_date": "2023-06-06T06:51:58Z", "commit_message": "fix(resolve-deps): check the existing file\u2014not the source\n\nCheck for dependencies on the file actually installed, otherwise,\nsuch as when the shebang is a link not equal to the initramfs link,\nthe wrong file may be tested.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07af8d58745a121052cab49c70a476f02996da1e", "commit_date": "2023-06-05T15:27:27Z", "commit_message": "fix(dracut-lib.sh): remove successful finished initqueue scripts\n\nIf some \"finished\" initscripts keep failing, dracut will start\nprinting warnings after a while. But it will warn about all scripts\nin the finished initqueue, not only those that have failed. That\nmakes it difficult to identify the script that has actually\ncaused the failure.\n\nTo avoid this, delete finished initqueue scripts when they succeed.\nAlso, instead of returning as soon as one of the scripts fails, try\nall scripts, deleting those that succeed, and return failure if at\nleast one script failed.\n\nIf a previously deleted script is recreated by some other part of\nthe code, it will be re-run the next time the check_finished() function\nis called, and will be re-deleted if it still succeeds.\n\nThe only case where I see that this might cause issues is if some\ncondition needs to be tested over and over again, because it succeeds\nand then fails later (for example, a device showing up and then being\nremoved again). But I think that this is not the intended logic.\nIn general, when a device shows up or another \"finished\" condition\nis met, we assume that this condition will hold at least until the\ninitramfs switches root and exits. If all conditions are met, the\ncurrent code will also exit the initqueue without retrying any of\nthe conditions again.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7310a641e227aae446684baeb48f878c3299ff9f", "commit_date": "2023-06-05T14:24:58Z", "commit_message": "fix(udev-rules): remove firmware.rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc182ed8cf779220b95d654a9a2397e991f9c16c", "commit_date": "2023-06-05T13:53:09Z", "commit_message": "docs: change ext3 to ext4\n\nPromote ext4 instead of ext3 in the manual.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a26eec5cc1f384f71226066f13db89f92913f28", "commit_date": "2023-06-05T13:49:15Z", "commit_message": "fix(dracut.sh): silence the output of hardlinking files by default", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8a703aaa7bbfe4f078fef5a4318243db059b87b", "commit_date": "2023-06-05T12:31:21Z", "commit_message": "fix(github): exempt issues in a milestone", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07b49a3ed79a792cede7e6ee21be29aba07168bc", "commit_date": "2023-06-05T12:23:27Z", "commit_message": "fix(virtiofs): add virtio_pci kernel module to virtiofs\n\nfix #2357\n\nSigned-off-by: Sergio E. Nemirowski <sergio@outerface.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c08ae406bc7c7d815b0911d9429f400719afc2ae", "commit_date": "2023-05-25T11:37:03Z", "commit_message": "ci: install multipath-tools into openSuse container", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d118754333d203303007475512aee7eb18b989fe", "commit_date": "2023-05-19T13:34:04Z", "commit_message": "test: remove references of dhcpd3 from tests\n\ndhcp3-server is no longer supported by Debian\nand it is replaced by isc-dhcp-server.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1843c16cafff005f798c379225e97dce459bc3dd", "commit_date": "2023-05-18T08:57:23Z", "commit_message": "test: move test condition to test_check\n\nThis enables skipping the test instead of failing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "006890a2c3bfbaac58f1f9f863e48212388f0ec8", "commit_date": "2023-05-13T23:34:22Z", "commit_message": "test: upgrade to ext4\n\nMost users use ext4 instead of ext3 or ext2. Upgrade tests to ext4.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "86c8a5a7c2573645e67537fb9975efab808d42c9", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): rootfs-generator cannot write outside of generator dir\n\nAlthough it was already documented in systemd.generator(7) that generators must\nnot write to locations other than those passed as arguments, since\nhttps://github.com/systemd/systemd/commit/ca6ce62d systemd executes generators\nin a mount namespace \"sandbox\", so now the hooks created by the rootfs-generator\nare lost.\n\nThese hooks are created using the root= cmdline argument, so this patch moves\nthe creation of these hooks to a cmdline hook.\n\nFixes issue #2211\nFixes issue #2225", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "acfa793b5cc035ebd36b0c5ce97ba2fd89e5745c", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): check and create generator dir outside of inner function", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a7c04716a5e528d86135bf87745054f7cbd54469", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): do not hardcode the systemd generator directory\n\nThe normal directory is the first argument passed to the systemd generator,\nso use it instead of hardcoding /run/systemd/generator.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cd41ab5174945253d65b61433921d5a53276683", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: add more packages to allow testing more dracut containers", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "19c5439510f9d908c0cc48d5b4a321fa9b87f67a", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: simplify and sort", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6178a9d83ffad67fa371cef2ff3f5bbb337bc8b7", "commit_date": "2023-05-09T02:04:09Z", "commit_message": "fix(dracut.sh): handle imagebase for uefi\n\n* UEFI creation didn't handle the ImageBase data for the PE file\n  generation. Create an UKI thanks a stub file with a non zero BaseImage\n  logs some warning ans generate a bad file offset management. The efi\n  becomes unloadable.\n* This commit parse the PE file header, get the data and apply the\n  ImageBase on the objcopy command.\n\nFixes dracutdevs#2284\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67591e8855006eb02aa0ffab7349ab770e471473", "commit_date": "2023-05-08T04:58:09Z", "commit_message": "fix(dracut-functions): avoid calling grep with PCRE (-P)\n\nInvoking grep in Perl mode requires JIT'ing the Perl regex.\nThis can run into issues with SELinix policy which will generally try to\nlimit use of execmem in general purpose scripts. This occurs since the\nJIT'd code will live in executable  memory.\n\nThe PCRE only '\\K' command in the Perl REGEX can be replaced by a call\nto awk instead.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "260883d96f33e7aced3d00c85d0ebffcec1385a1", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut-initramfs-restore.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to debug the shutdown after explicitly\nresetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "971b302d70fbbfac3b6047654b7dc7ceeb1c17e7", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(lsinitrd.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to query the initrd content after\nexplicitly resetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "97fe09769d6a86492c39e0368f088f54f7c0fa6e", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to generate the initrd after explicitly\nresetting the /etc/machine-id file.\n\nFixes issue #2267", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48c2cb457b1472d09453be130797bc6e0e194f7c", "commit_date": "2023-04-26T12:15:24Z", "commit_message": "feat(systemd-creds): introducing the systemd-creds module\n\nIntroducing the systemd-creds module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "71e391ebdc8f5d88447db1b6d475c813d82d5ffb", "commit_date": "2023-04-26T12:11:00Z", "commit_message": "fix(systemd-networkd): add missing conf files and services", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a62e895db9510f0fc4c47ee81b1436096eca4d64", "commit_date": "2023-04-14T04:40:04Z", "commit_message": "fix(dracut-functions.sh): convert mmcblk to the real kernel module name\n\nIn some x86_64 platforms such as Intel Elkhartlake, an issue of missing\nnecessary modules due to udevadm drivers field unmatch the real kernel module\nname is found:\n\n  $ udevadm info -a /dev/block/179:1\n\n  looking at parent device '/devices/pci0000:00/0000:00:1a.0/mmc_host/mmc0/mmc0:0001':\n    KERNELS==\"mmc0:0001\"\n    SUBSYSTEMS==\"mmc\"\n    DRIVERS==\"mmcblk\"\n    ....\n\nThe DRIVERS field, aka mmcblk will be given to instmods to install the\ncorresponding mmc_block.ko kernel module. However mmc_block.ko cannot be\nselected by string mmcblk, as a result, mmc_block.ko cannot be installed\nin hostonly-mode strict, which will fail to bootup the machine such as in\nkdump cases:\n\n  $ /usr/lib/dracut/dracut-install -D /var/tmp --kerneldir /lib/modules/$(uname -r)/ -m mmcblk\n  dracut-install: Failed to find module 'mmcblk'\n\nIn this patch, we will convert the string mmcblk to mmc_block, so the\nkernel module can be successfully loaded.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "297525c5c0781e13c4bf86aa42e81b9f166802ad", "commit_date": "2023-04-11T06:02:40Z", "commit_message": "fix(multipath): remove dependency on multipathd.socket\n\nThis reverts commit e39ff407eca1d783ab44093c44db5ee401ff5b1d, removes\nan incorrect `Also=` directive from multipathd.service.\n\n`Also=multipathd.socket` is not the correct behavior for a\nsocket-activated service. This directive has been removed upstream\nand dracut should do the same.\n\nThis fixes #2289, #2175 where in the cleanup hook running multipath\nbinary triggers activation of multipathd.service after it is stopped\nas dracut prepares to switch root in initrd-cleanup.service.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1300a930e76dbb380c7840760207296a1e58364c", "commit_date": "2023-03-30T15:56:53Z", "commit_message": "feat(lsinitrd): notify user on missing compressor\n\nProvide a notice to user if the required compressor package is\nmissing.  This rather than failing silently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a0d14d3bc691b318507c01708bc67d9e3b9d5109", "commit_date": "2023-03-29T06:11:36Z", "commit_message": "fix(99base): adjust to allow mksh as initrd shell\n\nUse printf instead of echo in str_replace() to preserve escapes.\nFind command paths while PATH includes /usr/sbin. (switch_root was\n  not found after the original environment is restored on Fedora.)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8b951d20d409b3647c85a9c6d064ccb15cdb5fe7", "commit_date": "2023-03-28T11:33:37Z", "commit_message": "fix(base): do not quote $CLINE in the `set` command\n\nThis is needed to correctly parse init arguments.\n\nFixes: 2fabaaa62dcfd31e593ca45e1374e55adae29d6b", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df2458a6b8aec70e74757ea7ae35f672a99ddc17", "commit_date": "2023-03-22T07:13:14Z", "commit_message": "fix(systemd-ac-power): correct systemd-ac-power binary path\n\n`systemd-ac-power` has been moved from `/usr/lib/systemd` to `/usr/bin/` since\nhttps://github.com/systemd/systemd/commit/251dc2f1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f32e95bcadbc5158843530407adc1e7b700561b1", "commit_date": "2023-03-20T11:56:24Z", "commit_message": "fix(dracut.sh): use dynamically uefi's sections offset\n\n* Uefi section are creating by `objcopy` with hardcoded sections\noffset. This commit allow to have the correct offset between\neach part of the efi file, needed to create an UKI. Offsets\nare simply calculated so no sections overlap, as recommended\nin  https://wiki.archlinux.org/title/Unified_kernel_image#Manually\nMoreover, efi stub file's header is parsed to apply the correct\noffsets according the section alignment factor.\n* Remove EFI_SECTION_VMA_INITRD, no need anymore as initrd\nsection offset dynamically calculated\n\nFixes dracutdevs#2275\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b4774239989257999053033fc92cded7803896", "commit_date": "2023-03-06T10:45:47Z", "commit_message": "fix(lvmthinpool-monitor): activate lvm thin pool before extend its size\n\nThe state of lvm thin pool may change into inactived state when kdump into\n2nd kernel. As a result, lvextend will fail to extend its size. For example:\n\nIn 1st kernel:\n\n  $ lvs\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-a-tz-- 300.00m thinpool        70.54\n  thinpool vg00       twi-aotz-- 236.00m                 89.67  12.50\n  ...\n\nIn 2nd kernel:\n\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-aotz-- 300.00m thinpool        70.54\n  thinpool vg00       twi---tz-- 236.00m                 89.67  12.50\n  ...\n\nAnd the lvextend failing log:\n[  8.483878] start-thinpool-monitor[590]: lvextend using policy requires the thin pool to be active.\n\nIn this patch, we will first activate lvm thin pool before calling lvextend\nduring kdump.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aca51203609954b38b41ea303a4376cbce061150", "commit_date": "2023-03-01T08:16:33Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.5.0 to 0.6.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.5.0 to 0.6.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.5.0...v0.6.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e780720efe6488c4e07af39926575ee12f40339", "commit_date": "2023-02-28T07:34:40Z", "commit_message": "fix(dmsquash-live): restore compatibility with earlier releases\n\nFollow-up to 40dd5c90e0efcb9ebaa9abb42a38c7316e9706bd .", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ddcb137ea2a4d79491ff94f1f7802dcaa7ac381", "commit_date": "2023-02-27T13:26:40Z", "commit_message": "fix(dracut.sh): kmoddir does not handle trailing /\n\nFixes https://github.com/dracutdevs/dracut/issues/2236\n\n+(/) only works in bash interactive mode. Using any non-interactive\nbash run simply doesn't remove anything.\n\nThe solution is copied from dracut-lib.sh, trim().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d554d9b98333372aeb20fd153a42c8171979825", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old eudev specific rule\n\nRevert 64fb0900cbc47804b4225287e4622063169db360, no longer\nneeded.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d648bf805a27cbf1920f0437606c9ffb2684ec18", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old redhat specific rule\n\nThe 40-redhat.rules rule has been removed upstream in 2010.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6a33e677aca49dd81826949b61acb945d672ba84", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old edd_id extra rules\n\nThe 61-persistent-storage-edd.rules rule has been removed upstream\nin 2012.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1edc41af979e1c1097be082c357f7a4895fbbad2", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old debian specific rules\n\nThe last Debian release that carried 91-permissions.rules is wheezy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f9ad06873eb50754611ece2c18a0cd0b22336c0", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "feat(test): nfs_fetch_url test into nfs test\n\nThis is to check the behavior of nfs_fetch_url() in nfs-lib.sh.\nnfs_fetch_url() calls nfs_already_mounted() internally.\nA file /nfs/client/root/fetchfile is on NFS server, which is fetched\nfrom clients for testing with nfs_fetch_url().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "966b6cec1bebd91ddd0f85c357f7ab57d3213f51", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "fix(url-lib.sh): nfs_already_mounted() with trailing slash in nfs path\n\nnfs_already_mounted() doesn't work when the installation ISO and kickstart file on a same NFS share are specified with inst.repo and inst.ks boot parameter as below.\n\n   inst.repo=nfs:192.168.1.1:/home/data/rhel9.iso inst.ks=nfs:192.168.1.1:/home/data/ks.cfg\n\n   NOTE: /home/data is configured for nfs share on 192.168.1.1\n\nOne problem is a file (not a directory) was passed into nfs_already_mounted().\nnfs_already_mounted() is the function to judge if the given directory is already mounted.\nSo, filepath should be passed in nfs_fetch_url().\n\nThe other problem is about the trailing slash in the nfs path in /proc/mounts.\n\nThe /proc/mounts has an entry after nfs mount of inst.repo.\n\n   192.168.1.1:/data/   /run/install/isodir  nfs  ro,relatime,<snip>\n\nIn this case, nfs_already_mounted() returns \"/run/install/isodir//home/data/ks.cfg\" wrongly. The following is from the log.\n\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@156(nfs_fetch_url): nfs_already_mounted 192.168.122.1 /home/data/ks.cfg\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@137(nfs_already_mounted): local server=192.168.122.1 path=/home/data/ks.cfg s= p=\n...\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@140(nfs_already_mounted): '[' 192.168.122.1 = 192.168.122.1 ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@141(nfs_already_mounted): '[' /home/data/ks.cfg = /home/data/ ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@143(nfs_already_mounted): str_starts /home/data/ks.cfg /home/data/\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/dracut-lib.sh@51(str_starts): '[' ks.cfg '!=' /home/data/ks.cfg ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@144(nfs_already_mounted): echo /run/install/isodir//home/data/ks.cfg\n...\n[   14.658069] localhost.localdomain dracut-initqueue[934]: //lib/url-lib.sh@156(nfs_fetch_url): mntdir=/run/install/isodir//home/data/ks.cfg\n\nThis function doesn't expect the trailiing slash of the nfs path in /proc/mounts, so it should be removed before processing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9bcd4d2c88985fa05e98b100e43d5630bdf0a6e", "commit_date": "2023-02-22T20:49:56Z", "commit_message": "ci: use CodeQL instead of LGTM\n\nAs LGTM is going to be shut down by EOY[0], let's move the code scanning to\nCodeQL as recommended. Thanks to GH integration the results from such\nscans will be shown both in the respective PR and in the Security ->\nCode Scanning tab[1].\n\n[0] https://github.blog/2022-08-15-the-next-step-for-lgtm-com-github-code-scanning/\n[1] https://github.com/dracutdevs/dracut/security/code-scanning", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae88e029c6ad20248d229bebd7e8f10d3d094988", "commit_date": "2023-02-22T20:20:52Z", "commit_message": "feat(dracut): use log level indicator in console output\n\nAlso, use the same format in messages printed to console before dracut-logger\nis sourced.\n\nFixes issue #1065", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df381b7e0cd95f78e40ac70f0f3c96a2fa8dd189", "commit_date": "2023-02-21T20:34:49Z", "commit_message": "feat(kernel-modules): driver support for macbook keyboards\n\nDiscussed in: https://bugzilla.redhat.com/show_bug.cgi?id=2166209", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "131822e26d76a3ce2028e9a545be2af066805629", "commit_date": "2023-02-21T20:05:44Z", "commit_message": "fix(dracut-install): prevent possible infinite recursion with suppliers\n\nDuring search for fw_devlink suppliers, it's possible to encounter a\nsituation where supplier A depends on supplier B, and supplier B has a\nparent node that depends on supplier A. This leads to an infinite\nrecursion.\n\nTo fix this, make sure suppliers are only processed once.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f3a7172db5dc02a6b8620a31ec36a5a3c1b540d4", "commit_date": "2023-02-16T20:15:37Z", "commit_message": "build: remove rpm spec file and build rules\n\nAs discussed in issue #2204 this patch removes the dracut.spec file from\nthe repository.  The advantage of this patch is that it creates a\ndracut-version.tar.xv file that can be more easily consumed by the\ndownstream distributions because there's no rpm spec file included in\nthe distribution.\n\nTested with a downstream rpm spec fiie:\n\n```\ncd dracut\nVERSION=`git describe --abbrev=0 --tags --always`\nmake clean\nmake dist\ncp dracut-${VERSION}.tar.xz ../\ncd ..\n\nxz -d -v dracut-${VERSION}.tar.xz\ntar rf dracut-${VERSION}.tar dracut.spec\nxz -9 dracut-${VERSION}.tar\n\nrm -rf rmpbuild\nmkdir -p rpmbuild/{BUILD,BUILDROOT,RPMS,SOURCES,SPECS,SRPMS}\nrpmbuild -ta --define \"_topdir `pwd`/rpmbuild\" -v dracut-${VERSION}.tar.xz\n```\n\nFixes issue #2204", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "89269d239f0539b7bd4339ba98a0d1b188b59962", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): add UFS drivers\n\nAdd ufs to the list of block drivers as it is used in modern embedded\nsystems.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "87a76dbb578aff473e690857d1b714eacd92b9ec", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): use modalias info in get_dev_module()\n\nWhen calling dracut with '--hostonly-mode=strict', get_dev_module() gets\ncalled on the system's block devices to find the required drivers. The\ndriver name is retrieved using udevadm. However, the driver name\nreturned by udevadm is not necessarily the same as the module name.\nThis is the case for the Qualcomm UFS driver: udevadm returns\n'ufshcd-qcom' while the module name is 'ufs-qcom', so dracut-install is\nnot able to find the module afterwards.\n\nTo solve this, make get_dev_module() also return the module alias info\nfrom the modalias files contained in the sysfs directories parsed by\nudevadm.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5dca3d68915cef077fda2bc5292e12f82cf6dd6", "commit_date": "2023-02-15T02:14:27Z", "commit_message": "fix(crypt): add missing libraries\n\nAdd missing libraries, closes #2137", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "61ceb35f4079ae8d0ee1635b56dd8bc88149b4a8", "commit_date": "2023-02-14T15:56:34Z", "commit_message": "revert(network-manager): avoid restarting NetworkManager\n\nThis reverts commit 77630365aed201a729c73a9ffda0733a75f3fee4.\n\nIts commit message states:\n\n  On EL8.3 the NetworkManager keep restarting even if it exits successfully\n  while waiting for Clevis to unlock. This patch ensures NetworkManager runs\n  only once in initrd.\n\nYes; NetworkManager is run multiple times, so that it's able to\nconfigure interfaces that haven't been seen previously (because bus was\nslow to scan or device took time to initialize).\n\nIt's not clear what problem was the original commit trying to fix.\nI suspect there was no problem, just a misunderstanding.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a6dd5bfb9a514a3bf650cc1e8d4311c05e9b968c", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle sbsign errors for UEFI builds\n\n`sbsign` does not issue any error if there is not enough disk space to create\nthe signed file using its `--output` option. So, verify the signed image after\nits creation using `sbverify`.\n\nFixes issue #2197", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8602df705879100be17e93fe56f5cbeb6216248f", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle out of space error for UEFI builds\n\nIf `cp` fails, do not continue, print an error and exit, like it's already\nbeing done for non-UEFI builds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "726d56ca0a23e5a39de5f809da2d20ce7985d437", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): IPv6: don't wait for RA for static IPv6 assignments\n\nThis patch reverts commit\nc603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\").\nIt's not generally correct wait for a default route to be established\nfor an interface, or to wait for \"proto ra\" routes in general.\nFor example, if the system is a router itself, it will receive no\nRAs. In isolated networks, no gateway may be advertized, either.\nThis is similar in spirit to 76f6566 (\"Revert \"wait for IPv6 RA\nif using none/static IPv6 assignment\"\")\n\nWhatever c603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\")\nwas supposed to achieve, it should be done differently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b074216be93dc4512b76fcd6b77a727aef11b22b", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network-legacy): always include af_packet\n\nFor static IPv4 configurations, we use arping to check for duplicate\nIP addresses. arping requires the af_packet module to work, and if arping\nfails, the IP address will not be set and booting will fail.\naf_packet may not be loaded / required in the running system, for example if\nthe system had been booted in an IPv6 configuration, or if it had been\nmanually unloaded. Make sure it's included in initramfs in hostonly mode, too.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ff255a4488f63cf84179d4572f44fe3a1bd29ec", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): don't assume prefix length 64 by default\n\nAssuming a default prefix length of 64 by default if no explicit\nprefix length is given is wrong and known to cause connectivity\nproblems in some networks. A prefix length of 128 should be assumed\nin this case.\n\nSee https://www.rfc-editor.org/rfc/rfc5942 (specifically section 5)\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=684009", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3b65a493a635a3f85f9e65c4337cd4c144ff8fc", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): prefix syntax for static iBFT IPv6 addresses\n\nibft_to_cmdline() formats a static IPv6 address like this\n(without peer, gateway, hostname):\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10/64]:::::ibft0:none\"\n\nThis means that the \"mask\" field (4th) is left blank. When this is\nparsed later by parse-ip-opts.sh, it bails out with the error\nmessage \"Sorry, automatic calculation of netmask is not yet supported\".\n\nparse-ip-opts.sh rather expects the prefix in the 4th field:\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10]:::64::ibft0:none\"\n\nThis syntax will be correctly transformed to the command\n\n  ip addr add fd09:9a46:b5c1:1fe::10/64 dev ibft0\n\nThis patch fixes the formatting of the \"ip=\" line in ibft_to_cmdline().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa5d9526eca23f642fd623d2c857fd8f9930b83d", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): install 8021q module unconditionally\n\nIn iBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3de4c7313260fb600507c9b87f780390b874c870", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "feat(dracut-install): add fw_devlink suppliers as module dependencies\n\nDracut currently finds kernel module dependencies using two methods:\ndepmod and softdeps. However, these are often insufficient on embedded\nsystems where a lot of driver dependencies are only described in the\ndevice tree. This is often the case for low-level devices such as\nclocks, regulators, pinctrls, etc.\n\nThis patch allows dracut to find those device tree dependencies, by\nparsing the sysfs supplier nodes populated by fw_devlink.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0c3b683270dbce933ef3d2f89d99dea7314ebf6", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add Hashmap cleanup function\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ea8cf5f56df2e2808863188450488835c17e59d", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add function to install one dependent module\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88aeca2a381a657787c4200e9179c3ff70b057e9", "commit_date": "2023-02-13T12:12:21Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.2.2 to 0.5.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.2.2 to 0.5.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.2.2...v0.5.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16931f5236b44078ab2bbc60d7b3bef2ba4507d7", "commit_date": "2023-02-13T12:08:36Z", "commit_message": "chore(shfmt): update to pass with shfmt v3.5.1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d777dd3dab50c2e383c00751fae5d9593339315f", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): move fips-boot script to pre-pivot\n\nThis is needed in s390x to be able to use the same `boot=` command line\nparameter in grub and zipl. Otherwise, `boot=` would need to be added only to\n`grub.cfg` (not `/etc/default/grub` and thereby not to `/boot/zipl/config`).\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab26ad2c2ab4a5884e392951998d40829f130387", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): only unmount /boot if it was mounted by the fips module\n\nThe `do_fips` method should only unmount /boot if it was mounted in the\n`mount_boot` method.\n\nIn addition, now the `mount_boot` method checks if /boot is already mounted.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "68d0653e35f79e78b75a71c122c091ba4f4d5759", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "feat(fips): add progress messages\n\nThis allows to better understand at what point a FIPS integrity test failed.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fabbb6412b70bdd1aac5279b90b9a23a267ffc5", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): do not blindly remove /boot\n\nThe `mount_boot` method called from fips-noboot.sh in the pre-pivot hook blindly\nexecutes `rm -rf /boot` if there is no `boot=` command line parameter, without\nfirst checking that /boot is not already mounted by other means.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c95075e2c792cdb0e18aac6300ae8dc0dd6a6c1b", "commit_date": "2023-02-13T11:58:52Z", "commit_message": "chore(base): remove support for <udev-176\n\nThis reverts 579238a3acd0317d7124a76dc489f19d9471fb63.\n\nKeep the support for prepare_udev_rules for out-of-tree\ndracut modules and issue a deprecation warning.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cef3f28e15a834284786c79f108b7c42481f96", "commit_date": "2023-02-13T11:18:58Z", "commit_message": "fix(plymouth): remove /etc/system-release dependency\n\n/etc/*release files should not be managed in the plymouth module\nand more importantly dracut assumes /etc/os-release not\n/etc/system-release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3a7112bef794e2f2dd741ec2c74fa9cb9117651", "commit_date": "2023-02-13T10:57:11Z", "commit_message": "feat(resume): also consider resume= in the cmdline as enabling hibernation\n\nDon't consider noresume to disable, that's a single-boot flag\n\nCloses #924", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d8a9a73df9688989b5e47469e74ad5aa666a5bfb", "commit_date": "2023-02-13T10:54:41Z", "commit_message": "fix(network-manager): add \"After\" dependency on dbus.service\n\nDuring shutdown, there is no ordering dependency between the nm-initrd service\nand the D-Bus daemon, and so the latter can be stopped before. This causes\nissues to NetworkManager, especially when team interfaces are present because\nNM will see teamd dropping from the bus and will try to reactivate the\nconnection.\n\nAdd a \"After\" dependency to make sure the D-Bus daemon is stopped after NM on\nshutdown.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1597076887c6744b9ec69c0ac44a1134fd700700", "commit_date": "2023-02-13T10:51:42Z", "commit_message": "fix(fido2): libfido2.so depends on libz.so\n\nCo-authored-by: cs50guy2", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a531ca044e3cfe9b670e7e4d59a7bae5bafec1e", "commit_date": "2023-02-13T10:21:53Z", "commit_message": "fix(dracut-install): continue parsing if ldd prints \"cannot execute binary file\"\n\nWhen the kernel is compiled without IA32_EMULATION and the glibc 32-bit library\nis installed on the system, `ldd` prints the following output:\n\n```\n> ldd /usr/lib64/libfido2.so.1.12.0\n/bin/ldd: line 162: /lib/ld-linux.so.2: cannot execute binary file: Exec format error\n\tlinux-vdso.so.1 (0x00007ffd627fa000)\n\tlibcbor.so.0.9 => /lib64/libcbor.so.0.9 (0x00007f18d799f000)\n\tlibcrypto.so.3 => /lib64/libcrypto.so.3 (0x00007f18d7400000)\n\tlibudev.so.1 => /lib64/libudev.so.1 (0x00007f18d7971000)\n\tlibhidapi-hidraw.so.0 => /lib64/libhidapi-hidraw.so.0 (0x00007f18d7968000)\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f18d794e000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f18d7205000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f18d79f9000)\n> echo $?\n0\n```\n\nThe `ldd` script uses the following code to resolve dependencies:\n\n```\nRTLDLIST=\"/lib/ld-linux.so.2 /lib64/ld-linux-x86-64.so.2 /libx32/ld-linux-x32.so.2\"\n...\nRTLD=\nret=1\nfor rtld in ${RTLDLIST}; do\n  if test -x $rtld; then\n    verify_out=`${rtld} --verify \"$file\"`\n    ret=$?\n    case $ret in\n      [02]) RTLD=${rtld}; break;;\n    esac\n  fi\ndone\n```\n\nSo, if the 32-bit library fails, the 64-bit library may work, so don't stop\nparsing the `ldd` output unconditionally when the message \"cannot execute binary\nfile\" is printed.\n\nFixes issue #2190", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b530f26368d723dcc34fb67d687c60009b06412", "commit_date": "2023-02-13T07:56:39Z", "commit_message": "fix: make iso-scan trigger udev events\n\nFixes #2183", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab07f6d1ee3cda8c735e6235e5da4c74913e5184", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "ci: enable test 60\n\nIt's hopefully stable now.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d7c0ffbd65c8d5c9fef559a51a2405a28c6f6a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): rename test 60\n\nThe test *also* checks the generation of ifcfg files, but it's primarily a test\nfor bonding, bridging and VLANs. Update the name to reflect this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e846cb1320e32db1e3d200743f8fc08732d4c9e", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): improve test 60\n\nThe test has the following issues:\n\n - it sets up a bridge on net1 and net2, however those interfaces\n   are part of the same qemu hub and this causes switching loops;\n\n - the bonds are created on two interfaces but only one has a DHCP server, and\n   this causes random failures;\n\n - the checks performed on the client are pretty limited.\n\nRework the test:\n\n - avoid the bridging loop;\n\n - update the topology to use a bond interface on the server side;\n\n - introduce additional checks on the client: start a ping and check that ports\n   are properly attached to bonds and bridge;\n\n - make it possible to return module-specific information from the client; in\n   the future this can be added for example to check that the NetworkManager or\n   systemd-networkd configuration is correct.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f44740f2c234ddb275e0a11e23d45e3678eb4a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): remove leftover link file from server rootfs\n\n01-client.link must be removed, otherwise it conflicts with 01-server.link that\nsets a different naming policy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9fb64d96ab7a7e19a7940e56e9bc0da863b46386", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): assign fixed address to bridge\n\nKernel uses the lowest MAC of all attached ports as MAC address of the\nbridge. However, after the first port gets attached, DHCP can be started on the\nbridge and it will use the MAC (and client-id) of the first port; so, the MAC\nused for DHCP depends on the order of attachment of ports, which is not\nguaranteed to be stable in general.\n\nTo make sure that the DHCP server always sees the request from the MAC of\nenp0s1, assign that MAC to the bridge from the kernel command line.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "462d9b9254d4386e9eac267547ee4e8cd2487c3d", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): bump DHCP timeout to 30 seconds\n\nThe current interval (3 seconds) is very low and causes sporadic failures\nespecially when DHCP is run on a bridge (TEST-50-MULTINIC); in that specific\ncase, interfaces take time to be attached to the bridge and before enp0s1 is\nattached all DISCOVER packets are lost.\n\nBump the timeout to a more robust value of 30 seconds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "da959483333c6ab83e4cdef837130eacec6b35d7", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): remove check on dhclient support for --timeout\n\nThe network-legacy dracut module already ignores the DHCP timeout option when\nit's not supported by dhclient. Other network modules don't use dhclient for\nDHCP.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d3993c7dabdd37c54a991c6ad9ea38365598d16a", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): adapt multinic test for new NetworkManager versions\n\nSince version 1.42, NetworkManager creates a \"external\" connection for the\nloopback interface. Ignore that connection in the multinic test.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70aeb4c1a56027bc2fe5570c080d96625b377c94", "commit_date": "2023-02-06T12:19:58Z", "commit_message": "fix(install): do not undef _FILE_OFFSET_BITS\n\n_FILE_OFFSET_BITS is a feature test macro to determine largefile\nsupport. Usually its set to 64 on systems supporting LFS. Its also\nneeded to be set to 64 for supporting 64bit time_t on glibc on 32bit\nsystems. If its undefined explicitly, then 64bit time_t can not be\nenabled.\n\nSigned-off-by: Khem Raj <raj.khem@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "18c5fb6ae0e32f11596cb365a73946eb1c9ce5e5", "commit_date": "2023-02-02T07:26:43Z", "commit_message": "chore(deps): bump docker/build-push-action from 3 to 4\n\nBumps [docker/build-push-action](https://github.com/docker/build-push-action) from 3 to 4.\n- [Release notes](https://github.com/docker/build-push-action/releases)\n- [Commits](https://github.com/docker/build-push-action/compare/v3...v4)\n\n---\nupdated-dependencies:\n- dependency-name: docker/build-push-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4a5c90ab993d2559720c2d4023d99ad43df00a", "commit_date": "2023-02-02T07:13:30Z", "commit_message": "fix(dracut.sh): --sysroot option broken if global variables not set in conf\n\nWhen `$dracutsysrootdir` is set and references an existing directory, the\ninternal global variables are never set, unless their value is assigned via\nconfiguration file.\n\nThe simple fix would be turn all:\n\n```\n[[ -d $dracutsysrootdir$var ]] || var=value\n```\ninto:\n```\n[[ -z $var || ! -d $dracutsysrootdir$var ]] && var=value\n```\n\nBut this patch also includes a refactoring, removing duplicate code using the\nsame `set_global_var` function to set and export global variables, and improving\nreadability.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "823de8fe5337cd7b8b4ce4dec3675ea44b723706", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "refactor(dracut-init.sh): remove redundant \"dracut\" from \"dracut module\" prints\n\nIn a similar fashion than \"Including module\" prints.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a10078a5c3ce9adf309962634e71ae6e186f2621", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "feat(dracut-init.sh): specify if a module cannot be found or cannot be installed\n\nDo not print the same error message for both situations.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1f84ff882fe272ef0185a284eee82e89735c833d", "commit_date": "2023-01-31T07:44:57Z", "commit_message": "fix(lsinitrd.sh): handle filenames with special characters\n\nPrinting and unpacking of specific files passed as arguments does not work if\ntheir filenames contain special characters with a hexadecimal character escape\n(\\x), which is often the case for systemd device units.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eb75861c2a1c05eb142616da1891a7fa5a2a34e1", "commit_date": "2023-01-27T15:55:03Z", "commit_message": "fix(dracut-systemd): remove unused argument\n\nThe `generator_wait_for_dev` function of the dracut rootfs systemd generator\nonly uses the first argument. Moreover, RDRETRY is unset at this point.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a109c6123ffa8506379b73a4b1aeee4d0b67866d", "commit_date": "2023-01-27T15:16:35Z", "commit_message": "feat(lvm): always include all drivers that LVM can use\n\nThis patch adds all the kernel modules that might be needed by LVM, to avoid\nhaving to rebuild the initrd in hostonly mode after a dynamic change that\nrequires new drivers to boot.\n\nFor example, LVM allows to dynamically convert a linear logical volume to a\nRAID-1 type (`lvconvert --type raid1 vg/lv`), which, in hostonly mode, will\nrequire the user to manually rebuild the initrd again to include the new RAID\ndrivers in use, otherwise the system will fail to boot.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aafcab935b7e84cea8fc3f084b6935f87b2b8a5", "commit_date": "2023-01-27T08:03:54Z", "commit_message": "fix(dracut-init.sh): correct typo in comment", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cda6b00abce0e68e353ab929b86cfaf45c3dc1c8", "commit_date": "2023-01-27T08:02:57Z", "commit_message": "fix(dracut.sh): correct --help and --version exit codes\n\nBoth are valid options that cause regular program termination without errors, so\ndracut should return 0.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e971c788f0a4a494eedf291b988d698849c36c22", "commit_date": "2023-01-27T08:01:50Z", "commit_message": "refactor(virtiofs): remove exit after die\n\nThe `die` function already ends with `exit 1`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c16c76fb51683cd70c3643b122685b7cdb4178c", "commit_date": "2023-01-19T13:22:22Z", "commit_message": "ci: fix Gentoo container used for testing", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3e8108eb75247249ec05eaba943c3f48637c04b", "commit_date": "2023-01-06T20:07:49Z", "commit_message": "fix(crypt-gpg): do not use always --card-status\n\nIf no GPG smart card is used then the card-status breaks the decryption\nof the keyfile. Therefore, use the card-status only if a smart card is\nused to decrypt the keyfie.\n\nFixes issue #2004", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f6bb4a36b763ae6de0e1aee55bc95d3d3f3ec1e1", "commit_date": "2023-01-06T04:49:37Z", "commit_message": "docs(RELEASE.md): update release docs\n\n- Remove the reference to Harald's git ci alias\n- Added a missing push to master\n- Added a warning not to add the Rendered View entry from the NEWS.md to\n  the tags. ( Github adds that to the release with no way of removing it, see 058 )\n- Added validation of the new tag ( Good practice )\n- Clarify milestone handover.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b060945c45a938af8ef53010272eb4ac3acc12df", "commit_date": "2023-01-04T09:18:08Z", "commit_message": "ci: disable test 50\n\nTest 50 (MULTINIC) seems to be the only test that prevents\nthe project from having an all passing continuous integration\ntest suite.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88fe9205de49c12ed8eaac2ca227a72830750955", "commit_date": "2023-01-04T05:38:58Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "93339444361303c15e26b6ff5cea6ef99ad0b3e0", "commit_date": "2023-01-03T14:09:12Z", "commit_message": "fix(dmsquash-live): live:/dev/*\n\nfix a bug introduced in 71cfa2e22\n\nmake sure root is set correctly for both of the following cases\n - \"root=live:/dev/*\"\n - \"rd.live.image root=/dev/*\"", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "10cf8e46f43a7a2094e4d861c1296db6af0e0fa1", "commit_date": "2022-12-30T14:13:00Z", "commit_message": "fix(load_fstype): avoid false positive searchs\n\nRefactor to avoid substring matches\n  and to speed processing.\nAlso avoid xtracing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08b63a25296d689186c6343f96e764bf893367cb", "commit_date": "2022-12-30T14:10:00Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94dcac7ccdfeb2ff7bd7c59c0f8bf46d0698ce3f", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "refactor(dracut-install): strerror(errno) -> %m", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "efd4ca271f15530d7264d2c87a104284e20b28aa", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() environment block", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "77226cb412822dc7614037c6d9225d98e64d4a55", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't reallocate {src,dst}path in hmac_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a20556f0e51249e501aeb87eb5a337a15db52253", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() excessively for dracut_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ed8337bb9fec0283af5dc745450394ba649a03", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): stat() w/unused buf -> access(F_OK) in dracut-install", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "751a110f29f07cb41246c09784c63bb26bb708c6", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): multiple single-character strstr()s -> strpbrk()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e5237dd771029ad90d921732a9805f618ed67fc", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "chore: remove src/install/hashmap.lo", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9dbbebb1339d1c3dc8e6b8835a6edbc95c66e2fe", "commit_date": "2022-12-28T07:40:23Z", "commit_message": "feat(network-wicked): remove module\n\nwicked is being phased out from openSUSE\nhttps://news.opensuse.org/2022/01/28/bash-systemd-libvirt-update-in-tw/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "dependabot/github_actions/docker/setup-buildx-action-3": [{"commit_oid": "acc063214b44b0aa673cdbe3fb3401795d8a9d07", "commit_date": "2023-09-12T18:54:16Z", "commit_message": "chore(deps): bump docker/setup-buildx-action from 2 to 3\n\nBumps [docker/setup-buildx-action](https://github.com/docker/setup-buildx-action) from 2 to 3.\n- [Release notes](https://github.com/docker/setup-buildx-action/releases)\n- [Commits](https://github.com/docker/setup-buildx-action/compare/v2...v3)\n\n---\nupdated-dependencies:\n- dependency-name: docker/setup-buildx-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6acfecae572fb457115b276b5b64d9424ad5187b", "commit_date": "2023-08-30T07:21:08Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC1087", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c80408c8644a0add1907b0593eb83f90d6247b1", "commit_date": "2023-08-30T06:47:15Z", "commit_message": "fix(dracut.sh): remove microcode check based on CONFIG_MICROCODE_[AMD|INTEL]\n\n`CONFIG_MICROCODE_AMD` and `CONFIG_MICROCODE_INTEL` are hidden since\nhttps://lore.kernel.org/all/20230810160805.081212701@linutronix.de/, therefore\nthis check is wrong and early microcode is always disabled.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b4e23ce4238821b0c2dd3c846da45f9cfeb57954", "commit_date": "2023-08-25T12:25:55Z", "commit_message": "fix(release): maintain dracut-version.sh in the source tree\n\nUpdate dracut-version.sh as part of release generation.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23389f6d48871212eba46e34db67e0c9f4368078", "commit_date": "2023-08-24T10:17:47Z", "commit_message": "docs: set KVERSION for running test suite\n\nRunning the test suite in podman will most likely require setting\n`KVERSION` because the running Linux kernel version will most likely be\ndifferent to the kernel version in the container.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b81e8eb67c80500e529ff2f845c10719b2afd87", "commit_date": "2023-08-24T06:54:01Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC2154", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "166456331d55cdc23946c11315dc2c88aab15911", "commit_date": "2023-08-22T12:00:29Z", "commit_message": "feat(install.d): allow using dracut in combination with ukify\n\nThis can be simply accomplished with the KERNEL_INSTALL_INITRD_GENERATOR\nand KERNEL_INSTALL_UKI_GENERATOR variables. `60-ukify.install` looks for\nthe initrd in the KERNEL_INSTALL_STAGING_AREA and then takes care of building\nthe uki.\n\nThis change makes it possible to use a configuration like this:\n/etc/kernel/install.conf\nlayout=uki\nuki_generator=ukify\ninitrd_generator=dracut\n\nWithout this change this configuration will fail since dracut would also\ngenerate an uki instead of initrd, which will cause a problem in\n`60-ukify.install` since it can't find an initrd to use.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f78e5de23769b6c1d656b44bf3c7eb97ba73518", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support disabling KVM by setting NO_KVM\n\nKVM fails on the Ubuntu ppc64el autopkgtest runners:\n\n```\n$ /usr/bin/qemu-system-ppc64el -enable-kvm -cpu host [...]\nioctl(KVM_CREATE_VM) failed: 22 Invalid argument\nPPC KVM module is not loaded. Try modprobe kvm_hv.\nqemu-system-ppc64el: failed to initialize kvm: Invalid argument\n$ modprobe kvm_hv\nmodprobe: ERROR: could not insert 'kvm_hv': No such device\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "65f0ef52a9bd63ccb1e31ccae948b49978e5ab0e", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: set QEMU machine for ARM and PowerPC\n\nSet QEMU machine for ARM and PowerPC to run on Debian/Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f29e428bdb3068e25150bc9591a961bd2df66442", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "fix(test): only use QEMU machine q35 on x86\n\nThe QEMU machine `q35` is only available on x86:\n\n```\nqemu-system-aarch64: unsupported machine type\nUse -machine help to list supported machines\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb7d5ec4cb06b2b4435327255049e55d34301d27", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support /boot/vmlinux\n\nOn the Ubuntu ppc64el architecture the kernel is named `/boot/vmlinux`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1e63b184517112efcce253f3962cab50fe25927", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: log qemu calls to ease debugging\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf97572bd5145a9e1192297a806dda94a3422de0", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: introduce overridable ARCH variable in run-qemu\n\nAllow specifying the architecture for `run-qemu`. E.g. this enables\nrunning armhf containers on arm64 hosts.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a18f1335fcab1eb84fedc45e450851d093335aa", "commit_date": "2023-08-22T06:52:53Z", "commit_message": "fix(test): use bash for jobs -r parameter\n\nTest 20 - \"NFSv3 root=dhcp DHCP IP:path\" fails on Debian with following\nerror message in `server.log`:\n\n```\njobs -rp\n/sbin/init: 105: jobs: Illegal option -r\n```\n\nThe jobs parameter `-r` requires bash.\n\nPartially fixes #1901\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e9d89d9c05b4ad1d70a508a604c0b1745c1b17f", "commit_date": "2023-08-21T13:19:57Z", "commit_message": "ci: also run integration test on Ubuntu\n\nAdd a Dockerfile for Ubuntu (very similar to Debian) and run the\nintegration tests also on Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "31c4d284017044b72ddea767c4d35d6d70473984", "commit_date": "2023-08-21T12:39:14Z", "commit_message": "feat(Makefile): allow setting dracut version via environment variables\n\nTo ease packaging dracut for Debian/Ubuntu, please support setting the\ndracut main/full version via environment variables:\n\n```\n$ DRACUT_MAIN_VERSION=007\n$ export DRACUT_FULL_VERSION=007-bond\n$ make dracut-version.sh\n$ grep VERSION dracut-version.sh\nDRACUT_VERSION=007-bond\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ddf6323145d50d33a897687474c73770328bf757", "commit_date": "2023-08-21T12:18:44Z", "commit_message": "fix: codespell", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "028f7632f8fbeb68d0414baa2ae2482bfb19f1b3", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: fix skipcpio path for installed binary\n\nThe `skipcpio` binary is installed in `${PKGLIBDIR}/skipcpio`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbee4f37cb933fcb4eeb89eb7a2c8fd687eb9079", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: skip test 98 if dracut-util is not available\n\nBuilding `dracut-util` requires the source code to be present and\nprevents running the test against the installed system. Check that\n`dracut-util` and rely on the test environment to build `dracut-util`\nbeforehand.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0321c90fabb37145db67751c948a58afc123d75", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make package libdir configurable\n\nMake the package libdir configurable to allow running the test suite\nout-of-tree. `PKGLIBDIR` can be pointed to the installed dracut libdir.\nUse `PKGLIBDIR` for the location of `dracut-init.sh`, `dracut-install`,\n`dracut-util`, `dracut-cpio`, and `modules.d`.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9939d0e1f1e17cc5d33cba55717ac063d21a048", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make dracut directory configurable\n\nMake the directory of the `dracut.sh` script configurable to allow\nrunning the test suite out-of-tree.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7528d84de84d9c1fb7d5f54712c692600e21b044", "commit_date": "2023-08-16T06:30:26Z", "commit_message": "fix(systemd): add new systemd-tmpfiles-setup-dev-early.service\n\n`systemd-tmpfiles-setup-dev.service`, `kmod-static-nodes.service` and\n`systemd-sysusers.service` have an ordering dependency on this new service since\nhttps://github.com/systemd/systemd/commit/353c849", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "570b9d405116c9763266aa2e88ea0a2460c734ba", "commit_date": "2023-08-16T06:26:14Z", "commit_message": "fix(systemd-udevd): add missing override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32f6f364ddeb706bf8741f2895d60022aee264e7", "commit_date": "2023-08-10T12:04:03Z", "commit_message": "fix(dracut-install): protect against broken links pointing to themselves\n\n`readlink` does not return an error if a symbolic link points to itself, which\ncan cause a stack overflow due to infinite recursion in the `get_real_file`\nfunction.\n\nAlthough this type of recursive links should not exist, we discovered this\nissue on a real system. It can be reproduced as follows:\n\n```\n> ls -l /lib64/libblkid.so\n-rwxr-xr-x 1 root root 224368 Aug  9 15:13 /lib64/libblkid.so\n> rm -f /lib64/libblkid.so\n> ln -s /lib64/libblkid.so /lib64/libblkid.so\n> ls -l /lib64/libblkid.so\nlrwxrwxrwx 1 root root 18 Aug  9 15:06 /lib64/libblkid.so -> /lib64/libblkid.so\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\n...\n[infinite recursion]\n...\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\n/usr/lib/dracut/dracut-init.sh: line 298: 20949 Segmentation fault      (core dumped) $DRACUT_INSTALL ${dracutsysrootdir:+-r \"$dracutsysrootdir\"} ${initdir:+-D \"$initdir\"} -a ${loginstall:+-L \"$loginstall\"} ${DRACUT_RESOLVE_DEPS:+-l} ${DRACUT_FIPS_MODE:+-f} ${_hostonly_install:+-H} \"$@\"\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.dqLmOS/initramfs -a /lib64/libblkid.so\n...\n```\n\nAfter applying this patch:\n\n```\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: ERROR: '/lib64/libblkid.so' is pointing to itself.\ndracut-install: ERROR: installing '/lib64/libblkid.so'\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.4w8FVL/initramfs -a /lib64/libblkid.so\n...\n```", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2c6b584e2227e68f54c8843925dcb73aefe87ac", "commit_date": "2023-08-10T06:19:57Z", "commit_message": "fix(dracut.sh): exit if resolving executable dependencies fails\n\nWe came across an issue where, when resolving executable dependencies, a call to\na buggy glib function in `dracut-install` was causing a termination with\nSIGSEGV, but dracut didn't stop the build process, which resulted in an\nunbootable initrd, due to missing required libraries.\n\n```\ndracut: *** Resolving executable dependencies ***\nxargs: /usr/lib/dracut/dracut-install: terminated by signal 11\ndracut: *** Resolving executable dependencies done ***\n```\n\nTherefore, stop the initrd creation in this case.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fffeadedf2170563cb7c0e0cb06994b0878ed455", "commit_date": "2023-08-05T16:35:59Z", "commit_message": "feat(dracut): add --sbat option to add sbat policy to UKI\n\nTake existing .sbat section from the uefi stub and merge it\nwith vmlinux .sbat (if it exists) and user-provided .sbat parameters\nusing the new --sbat option.\n\nFor some reasons, --update-section in objcopy does not resize the\n.sbat section, so remove the section from the stub and add it\nto the UKI as new one, to avoid having incomplete SBAT strings.\n\nSigned-off-by: Emanuele Giuseppe Esposito <eesposit@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af3076a1cb527cd7800b9aaeb368c91de1362c75", "commit_date": "2023-08-03T06:18:29Z", "commit_message": "ci: run all local tests on all containers (including Gentoo)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699d51c5dc222707053bb6e423559d56c1aa072f", "commit_date": "2023-08-01T10:48:55Z", "commit_message": "chore(dracut-init.sh): remove support for obsolete syntax\n\nOld syntax dracut modules had its check install installkernel\nscripts in dedicated shell files and did not support module\ndependencies.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "83eccc742ca932733b71007f78f0da28155f68ea", "commit_date": "2023-08-01T06:36:14Z", "commit_message": "ci: change the order of lint jobs as lint_shell is more likely to fail", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d55fa8239aebb8c77ba9a8a9db0fdedf8fa6232a", "commit_date": "2023-08-01T06:21:32Z", "commit_message": "ci: migrate from systemd-boot to systemd-utils in Gentoo container\n\nSee https://www-cdn.gentoo.org/support/news-items/2022-04-19-systemd-utils.html\n\nAlso no longer include open-iscsi for musl as it fails to compile, see\nhttps://bugs.gentoo.org/908587", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "403f4e8e15da4fdc84f3d32a0f231eeb9b2e4ed0", "commit_date": "2023-07-31T09:35:20Z", "commit_message": "ci: do not run test container generation on forked repos by default\n\nIf CONTAINER Github variable set, reenable the github action\nschedule.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16855765c8ad9d3237e6d98e59d0f8e6d4c7fc62", "commit_date": "2023-07-31T08:29:06Z", "commit_message": "refactor(install): log about missing firmware only once\n\nWhen attempting to locate a firmware path under each of the firwaredirs\nparent directories, Dracut logs an error for every missing path.\nInstead, only log the error if the firmware path isn't found under any\nof the firmwaredirs.\n\nSigned-off-by: David Disseldorp <ddiss@suse.de>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c46513fb21b51934d0862a234e55b759360917cd", "commit_date": "2023-07-31T07:15:14Z", "commit_message": "test: increase test VM memory from 512M to 1024M to avoid OOM killer", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a804945f27a0ccc2f69ae694599b1afec2afe8b1", "commit_date": "2023-07-26T15:49:35Z", "commit_message": "fix(integrity): do not require ls\n\nls is not used by the integrity dracut module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e278a965733f706a87756d0a4c38245a723b9e5c", "commit_date": "2023-07-26T15:49:20Z", "commit_message": "ci: match comment with code\n\nProperly document the time container generation runs daily.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e1e924550a23b7fbbca5f752f32a749631db116", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: automate release generation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a3758704ad1c7c9646cc844936b256076e139ea7", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: allow the release generation script to compute the next release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5cdd4b3502a2774f9590fcb9d2e17fe29b3ea87d", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "refactor(Makefile): improve AUTHORS and CONTRIBUTORS targets\n\nMake make rules more generic to be able to use them not just in\nmanual release process but also in CI release process.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c9f403f1c219b8e2ff62011bfcc1b5e254b411a", "commit_date": "2023-07-24T15:22:42Z", "commit_message": "fix(dracut-init.sh): `module_check` method ignores `forced` option\n\nWhen the `module_check` method is called passing 3 arguments (all calls right\nnow), the `forced` option is ignored, so the `hostonly` variable is never unset\nbefore the module's `check` method is called.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4e6eaf9c61616a2f27ef6e91cc787888afecde4", "commit_date": "2023-07-24T11:52:49Z", "commit_message": "feat(systemd-rfkill): remove module\n\nThe rfkill service and socket provided by systemd will not be activated in the\ninitrd since https://github.com/systemd/systemd/commit/49c55abc", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f11e8fffc2db1f6f02d09207a1edbf1d898249d7", "commit_date": "2023-07-24T11:50:15Z", "commit_message": "fix(man): add missing initrd-root-device.target to flow chart\n\nThis target was added since https://github.com/dracutdevs/dracut/commit/d4efc0ae\nand is ordered between `basic.target` and `sysroot.mount`, see `man bootup.7`\n(`dracut-pre-mount.service` starts after).", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1b53bb6297d83940b52e806c01030e8f5035d9f2", "commit_date": "2023-07-24T11:40:40Z", "commit_message": "fix(dracut-init.sh): use the local _ret variable\n\nUse the local _ret variable when declared.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "273e481193daba3e7aa264f36d6721313c2ee84b", "commit_date": "2023-07-24T10:25:13Z", "commit_message": "ci: install util-linux-systemd and systemd-boot into openSUSE container\n\n- `findmnt` is installed by `util-linux-systemd`\n- `/usr/lib/systemd/boot/efi/linuxx64.efi.stub` is installed by `systemd-boot`", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbdab2d87fa49c7fdd08b274d8a21e6046360cad", "commit_date": "2023-07-24T09:08:42Z", "commit_message": "fix(dracut.sh): shellcheck warning SC1004\n\nAs stated in [1] it should work without literal backslash+linefeed.\n\n[1] https://github.com/koalaman/shellcheck/issues/1246", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "33a66ed04bdc30eccb172a0cd6dcc36d9d74f825", "commit_date": "2023-07-20T12:25:46Z", "commit_message": "fix(dracut.sh): use gawk for strtonum\n\nstrtonum is a gawkism and is not available in all awks, e.g. mawk. Use gawk\nto avoid failure.\n\nFixes: f32e95bcadbc5158843530407adc1e7b700561b1\nSigned-off-by: Sam James <sam@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6af3fcfd7f699ec4bb3f1e9ac71b7a9ebb9804b3", "commit_date": "2023-07-17T06:33:19Z", "commit_message": "fix(man): remove duplicate entry\n\nDRACUT_COMPRESS_BZIP2 was mentioned several times in the list.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "81d78c4e95c13b859befc6869365b3c069e2038e", "commit_date": "2023-07-13T16:51:48Z", "commit_message": "ci: release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52351cfa049a9594d539e6a5337d591e8039ab80", "commit_date": "2023-07-07T12:24:10Z", "commit_message": "feat(livenet): add memory size check depending on live image size\n\nFor writeable live images, the memory must hold the complete image.\nThat means it must be at least the size of the image plus some RAM\nnecessary to run processes.\nWith too small RAM, the OOM Killer steps in and makes the boot hang.\nThis patch lets the system go into the emergency shell instead.\n\nThe default minimum RAM after subtracting the live image size is set to 1G.\nThe parameter rd.minmem is added to modify this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15d4f60eb1f9f704df16287ccf7bc19755a73875", "commit_date": "2023-06-29T06:25:57Z", "commit_message": "chore(gentoo.conf): remove examples to avoid confusion\n\nThese examples are not used and not maintained and changing them\nwould not have an impact on Gentoo.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7ef1302715bead649625666f92eff434082de1f", "commit_date": "2023-06-28T11:53:14Z", "commit_message": "fix(modsign): load keys to correct keyring\n\nUntil now, 03modsign module was loading keys from /lib/modules/keys/* into the\ncurrent session keyring.\nThis change makes it add keys to the secondary trusted keyring. This works\nonly as long as added certificate is signed by key from the same keyring.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "179e1a992fc2b74d55a600bef152d5df43802104", "commit_date": "2023-06-26T13:56:15Z", "commit_message": "fix(dmsquash-live-autooverlay): specify filesystemtype when it is already known", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a71b905ef32654b2bbb6fbbc58e8aa3c89c967e6", "commit_date": "2023-06-26T13:54:04Z", "commit_message": "chore: remove git2spec.pl, it is no longer used", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa332cad7196b6e05b9e2f1810dc54bb38ed2ac", "commit_date": "2023-06-26T13:39:48Z", "commit_message": "fix(fs-lib): remove quoting form the first argument of the e2fsck call\n\nFix regression.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f5cc202e998eb22bda98920b8eeeb0f027ca0b6e", "commit_date": "2023-06-26T13:24:02Z", "commit_message": "fix(Makefile): remove leftover rpm build rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ffc766d23d9175673f722a3c81e7609496167845", "commit_date": "2023-06-26T13:16:12Z", "commit_message": "fix(Makefile): no longer upload to kernel.org", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b490f6f7d7cf1c322b47af4e44d7f238612fb260", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "feat(nvmf): add code for parsing the NBFT\n\nAdd code to parse the Nvme-oF Boot Firmware Table (NBFT) according\nto the NVM Express Boot Specification 1.0 [1]. The implementation in\ndracut follows a similar general approach as iBFT support in the\niscsi module.\n\nNBFT support requires two steps:\n\n(1) Setting up the network and routing according to the\n    HFI (\"Host Fabric Interface\") records in the NBFT,\n(2) Establishing the actual NVMe-oF connection.\n\n(1) is accomplished by reading the NBFT using JSON output from\nthe \"nvme nbft show\" command, and transforming it into command\nline options (\"ip=\", \"rd.neednet\", etc.) understood by dracut's\nnetwork module and its backends. The resulting network setup code\nis backend-agnostic. It has been tested with the \"network-legacy\"\nand \"network-manager\" network backend modules. The network setup\ncode supports IPv4 and IPv6 with static, RA, or DHCP configurations,\n802.1q VLANs, and simple routing / gateway setup.\n\n(2) is done using the \"nvme connect-all\" command [2] in the netroot handler,\nwhich is invoked by networking backends when an interface gets fully\nconfigured. This patch adds support for \"netboot=nbft\". The \"nbftroot\"\nhandler calls nvmf-autoconnect.sh, which contains the actual connect\nlogic. nvmf-autoconnect.sh itself is preserved, because there are\nother NVMe-oF setups like NVMe over FC which don't depend on the\nnetwork.\n\nThe various ways to configure NVMe-oF are prioritized like this:\n\n 1 FC autoconnect from kernel commandline (rd.nvmf.discover=fc,auto)\n 2 NBFT, if present\n 3 discovery.conf or config.json, if present, and cmdline.d parameters,\n   if present (rd.nvmf.discovery=...)\n 4 FC autoconnect (without kernel command line)\n\nThe reason for this priorization is that in the initial RAM fs, we try\nto activate only those connections that are necessary to mount the root\nfile system. This avoids confusion, possible contradicting or ambiguous\nconfiguration, and timeouts from unavailable targets.\n\nA retry logic is implemented for enabling the NVMe-oF connections,\nusing the \"settled\" initqueue, the netroot handler, and eventually, the\n\"timeout\" initqueue. This is similar to the retry logic of the iscsi module.\nIn the \"timeout\" case, connection to all possible NVMe-oF subsystems\nis attempted.\n\nTwo new command line parameters are introduced to make it possible to\nchange the priorities above:\n\n - \"rd.nvmf.nonbft\" causes the NBFT to be ignored,\n - \"rd.nvmf.nostatic\" causes any statically configured NVMe-oF targets\n   (config.json, discovery.conf, and cmdline.d) to be ignored.\n\nThese parameters may be helpful to skip attempts to set up broken\nconfigurations.\n\nAt initramfs build time, the nvmf module is now enabled if an NBFT\ntable is detected in the system.\n\n[1] https://nvmexpress.org/wp-content/uploads/NVM-Express-Boot-Specification-2022.11.15-Ratified.pdf\n[2] NBFT support in nvme-cli requires the latest upstream code (> v2.4).\n\nSigned-off-by: Martin Wilck <mwilck@suse.com>\nCo-authored-by: John Meneghini <jmeneghi@redhat.com>\nCo-authored-by: Charles Rose <charles.rose@dell.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f07117d68d07d52aa4ce8b4b2549a0cb716b7f4b", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): support /etc/nvme/config.json\n\nSince nvme-cli 2.0, configuration of subsystems to connect to is\nstored under `/etc/nvme` in either `discovery.conf` or `config.json`.\nAttempt discovery also if the latter exists, but not the former.\nAlso, install \"config.json\" if it's present on the root FS.\n\nAs before, \"rd.nvmf.discover=fc,auto\" will force either file to be ignored,\nand NBFT-defined targets take precedence if found.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "902f3a8f84643e4249b9bbb2e81d1b13eaf35364", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): install 8021q module unconditionally\n\nIn NBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "17b8649eb931f3f4990ac8184fe23fc257df6fa5", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect even more kernel-install vars, plus style fixes\n\n- More verbose with KERNEL_INSTALL_VERBOSE=1\n\n- Use KERNEL_INSTALL_CONF_ROOT if defined\n\n- Fallback to /usr/lib/os-release if /etc/os-release does not exist\n\n- Fallback to \"Linux $KERNEL_VERSION\" if no PRETTY_NAME found\n\n- Styling fixes\n\nCo-authored-by: Antonio Alvarez Feijoo <antonio.feijoo@suse.com>\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a037634ad71711d29828214830ebdade0c449dbc", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect more kernel-install env variables\n\n- If kernel-install has defined a staging area for us\n(KERNEL_INSTALL_STAGING_AREA) install generated initrd/uki.efi there.\nThe actual install is then handled by 90-loaderentry.install or\n90-uki-copy-install.\n\n- Also skip regeneration if an uki.efi already exists.\n\n- Pass --kernel-image to dracut, this is required to generate an uki (uefi=yes)\n\n- Add --no-uefi argument to dracut rescue image generation, this ensures that\nit at least installs correctly. TODO: Rework 51-dracut-rescue.install to also\nwork with uki's.\n\nThis fixes installing a kernel with uefi=yes in dracut config and layout=uki\nin kernel/install.conf.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "09d3ec1648822d84e95b274b60cb51b80e8f49f9", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(dracut.sh): also prevent fsfreeze for tmpfs\n\nKERNEL_INSTALL_STAGING_AREA is often on tmpfs, it cannot be frozen\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4000a1ecff208479254be8ce88de826099e2b685", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "fix(dmsquash-live): allow other fstypes\n\nUse det_fs to determine fstype and provide fallback instead of\njust calling blkid.\n\nMany other dracut modules (e.g. fs-lib, btrfs, mdraid) are already\nusing det_fs to determine fstype.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "995ac6f887e7cb5f8bdf2d636ed3b3e715691db4", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(DMSQUASH): add test for NTFS\n\nAdd a test case for mounting the root filesystem from\na squashfs image file that is store on an NTFS drive.\n\nThe test case is using ntfs3 module to mount the NTFS drive.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d96754eaa57657b3acfe4a50612a07da8365a0a2", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(16): check for failure after each sub-test run\n\nThe test case had a bug where it only checked for\nat least one of the passing instead of all the subtests passing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfa408c9de7cd0b0af6099b6f1e0cce2e70ec467", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): make bluetooth rules more strict\n\nOnly warn if bluetooth kernel module is loaded\nat the time of initrd generation in hostonly mode.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e84d65c5b0191582e26fe9cc150d460652b34b33", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): add missing files\n\n- org.bluez.service dbus system service\n- bluetooth.service override conf", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8079ceafcac910d0c061830769866710c3e889a8", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): include it if Appearance matches the value assigned for keyboard\n\nFollowing the Bluetooth spec [1], Assigned Numbers Document, Rev. 2023-05-04,\nSection 2.6.3, Appearance Sub-category, the Appearance value defined for\nkeyboards is 0x03C1.\n\nThis value must be checked to include the bluetooth module in hostonly mode,\nbecause some Bluetooth keyboards do not set the Class attribute.\n\n[1] https://www.bluetooth.com/specifications/assigned-numbers/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0ecb038832038523a27f989d0eb82b45fb67861c", "commit_date": "2023-06-22T17:31:01Z", "commit_message": "fix(bluetooth): warn user instead of including it by default\n\nBluetooth module can result in a known race condition at boot.\nDiscourage its usage by default.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "765e69ce4d88a4ef6c1028cc117b3f233a285f0e", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-timedated): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d083021910f0633035a056e0541549efffec896", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-resolved): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0dc7ec96b81fec100a5ab948c12846b2b9910e6", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-networkd): correct typos in override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2f685ecb4a968d5cd889803d5a248dab89473a", "commit_date": "2023-06-22T15:08:06Z", "commit_message": "fix(dracut-init.sh): correct check in `is_qemu_virtualized` function\n\nDo not redirect `systemd-detect-virt` to /dev/null, otherwise, the `vm` variable\nis always empty. This function was working only thanks to the following /sys\ncheck.\n\nReported-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ed765dd23e4c5616c82d1cbf8b4dbceaafc7647", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): do not require module via cmdline when --no-kernel\n\ninitrd built without modules would fail when it attempts to load a\nkernel module. (Use case scenario: kernel with built-in module.)\n\nsynthesize an the cmdline only when modules are truly installed.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b47a2efe91ab8be480925c04388200a3666812c", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): add missing cmdline function\n\nOtherwise `dracut --print-cmdline` does not print the command line option added\nby the btrfs module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2ff7b4702c2098f7db63b0ffb118da0b5c0723c1", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: conditionally add tgt to Gentoo container\n\nThis commit allows to run test 30 and test 35 on a Gentoo.\n\nUse the newly introduced conditional for nfs4 support as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d06153f89666e9741f587408e10fb9983385bfa5", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: re-enable lvm on Gentoo container\n\nGentoo changed it's policy and now lvm needs to be enabled explicitly.\n\nSee https://www.gentoo.org/support/news-items/2022-11-19-lvm2-default-USE-flags.html\n\nNo need to install thin-provisioning-tools explicitelly, it is\npulled in as a dependency of the lvm2 package.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a9ecb5e3256645a4059e2d2c601971e32c7cc0ff", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: disable initramfs generation inside Gentoo container\n\nDisabling initramfs generation saves installing 4 additional packages.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5803ece5c25aa0daef4260edd01630a759c69efd", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: add extra packages for tests to Gentoo container\n\nAdd cryptsetup, multipath-tools and open-iscsi\nto the Gentoo container for tests 10, 14, 30, 35.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6fd6b36d5e16c12ba4a040ddcf7c5e7338c34146", "commit_date": "2023-06-19T07:31:55Z", "commit_message": "ci: switching the musl test to 18 (uefi)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af31df4b365f11cf1edd92914d2d83b3bd1588e8", "commit_date": "2023-06-16T23:48:14Z", "commit_message": "test(ISCSI): make test-30 use the test dracut modules\n\nIntroduce test_dracut that is meant to be shared between tests\nin test-functions.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcf4665bfcbc910c80eeb244353ca4b9a5254719", "commit_date": "2023-06-15T06:56:44Z", "commit_message": "ci: add dependencies to Debian container\n\n- add systemd-boot-efi for test 18\n- tgt is needed for test 30 and 35\n- nbd-server is needed for test 40\n- gawk dependency has been introduced by f32e95bcadbc5158843530407adc1e7b700561b1\n- install dracut instead of initramfs-tools to match actual usage\n- remove workaround for https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=962300\nas it is now fixed on Debian 12.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ec2c7e1aa4591f4eeb0bb85aa51bf1914e18ff78", "commit_date": "2023-06-14T14:52:30Z", "commit_message": "test(UEFI): add test case for UEFI boot\n\nInclude OVMF in containers if it is not already present.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1b3f88d500f16c007de5b2e48f9bdea30c45ec9", "commit_date": "2023-06-12T11:58:19Z", "commit_message": "docs: remove rd.lvm.snapsize and rd.lvm.snapshot", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4235c035ff1abad0c22125c26cab813c42b29da0", "commit_date": "2023-06-12T11:52:41Z", "commit_message": "fix(Makefile): execute command -v instead of which", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2f961a2bd7b5f5cbff6394d6be6eace15e236b7", "commit_date": "2023-06-12T06:04:54Z", "commit_message": "fix(network-legacy): typo\n\nSigned-off-by: lilinjie <lilinjie@uniontech.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f8f115a27b2bb63f0893262b6c951a187bac8ef", "commit_date": "2023-06-09T12:55:48Z", "commit_message": "fix(network,dbus): improve dependency checking\n\nDecouple implementation details of the backend\ndependencies from the meta module.\n\nCall check_module for each submodule instead\nof reimplementing sub-package dependencies\ninside the meta module itself.\n\nAdd missing NetworkManager binary to the\nnetwork-manager dracut module check.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cd6f683d634970112a29867137431d0d57f8c957", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-pcrphase): only include systemd-pcrphase-initrd.service\n\nThe only systemd-pcrphase related unit configured to run in the initrd is\nsystemd-pcrphase-initrd.service.\nBoth systemd-pcrphase.service and systemd-pcrphase-sysinit.service contain\n`ConditionPathExists=!/etc/initrd-release`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ef00735ae4fa19684598a8f7868e8b36b6bf5fe", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-tmpfiles): do not include systemd-tmpfiles-clean.timer\n\nThe systemd-tmpfiles-clean.timer unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eff2a9398120b29fd869eec991410e254d0dcbb8", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-journald): do not include systemd-journal-flush.service\n\nThe systemd-journal-flush.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "925febf89d54c0bef9e3c8fda3b8e5b1f8ba30cd", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd): do not include systemd-random-seed.service\n\nThe systemd-random-seed.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c\n\nAlso, the systemd-random-seed-load.service does not exist since\nhttps://github.com/systemd/systemd/commit/c35b956d", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1588995ae0d9f984ad08f2d466f7a09646c6517", "commit_date": "2023-06-08T06:21:54Z", "commit_message": "fix(dracut.sh): correct path for UEFI stub on split-usr systems\n\nsystemd always installs the UEFI stub in ${prefix}/lib/systemd/boot/efi.\n\nOn split-usr systems, systemdutildir is ${rootprefix}/lib/systemd, which\nmakes dracut look in the wrong place.\n\nInstead, grab 'prefix' from systemd.pc and store it in 'systemd_prefix'.\n\nBug: https://bugs.gentoo.org/765208\nSigned-off-by: Mike Gilbert <floppym@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa20bbb5b1c78963331fb6261763ea4c51ebc04f", "commit_date": "2023-06-07T16:15:36Z", "commit_message": "feat(dracut-init.sh): do not print by default if an udev rule is skipped", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5e036b157eb196ad4ae80d691ef8e9b203f0494", "commit_date": "2023-06-07T14:32:30Z", "commit_message": "test: move more makeroot dependencies into test-makeroot dracut module", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "afb5717e67727d49fae0d2a1a4169e5b247387f4", "commit_date": "2023-06-06T14:33:02Z", "commit_message": "fix(kernel-modules): add interconnect drivers\n\nMany devicetree based systems require interconnect drivers to function\nproperly. Include those in the initramfs.\n\nSigned-off-by: Andrew Halaney <ahalaney@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d244b316f29143f536254b8828365dbce4388148", "commit_date": "2023-06-06T13:40:41Z", "commit_message": "test(LVM-THIN): avoid thin pool size warning\n\nAvoid the following warning by reducing thin pool size\n\n> \"Sum of all thin volume sizes exceeds the size of thin pool\n> and the size of whole volume group.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "739b9e1b38abfa998caec35048ab367a0d19ed76", "commit_date": "2023-06-06T13:36:59Z", "commit_message": "ci: cleanup containers\n\nRemove /etc/profile.d/dracut-test.sh from test containers\nNo use to override default command\nRemove references to docker. These files work just fine\nwith podman as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae7cd94b346ac7f4ce7ca6c236d1ecdaba1171a3", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: add empty default test_cleanup implementation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1346763ab7c031605cf74260e6846433f40f823", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: move more common test code to test-functions\n\nMove KVERSION and USE_NETWORK definition to test-functions.\nAdd option for qemu_add_drive_args to initialize drive with size.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ac581ef66dd8f1939e771419824137aebbc8f66", "commit_date": "2023-06-06T06:51:58Z", "commit_message": "fix(resolve-deps): check the existing file\u2014not the source\n\nCheck for dependencies on the file actually installed, otherwise,\nsuch as when the shebang is a link not equal to the initramfs link,\nthe wrong file may be tested.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07af8d58745a121052cab49c70a476f02996da1e", "commit_date": "2023-06-05T15:27:27Z", "commit_message": "fix(dracut-lib.sh): remove successful finished initqueue scripts\n\nIf some \"finished\" initscripts keep failing, dracut will start\nprinting warnings after a while. But it will warn about all scripts\nin the finished initqueue, not only those that have failed. That\nmakes it difficult to identify the script that has actually\ncaused the failure.\n\nTo avoid this, delete finished initqueue scripts when they succeed.\nAlso, instead of returning as soon as one of the scripts fails, try\nall scripts, deleting those that succeed, and return failure if at\nleast one script failed.\n\nIf a previously deleted script is recreated by some other part of\nthe code, it will be re-run the next time the check_finished() function\nis called, and will be re-deleted if it still succeeds.\n\nThe only case where I see that this might cause issues is if some\ncondition needs to be tested over and over again, because it succeeds\nand then fails later (for example, a device showing up and then being\nremoved again). But I think that this is not the intended logic.\nIn general, when a device shows up or another \"finished\" condition\nis met, we assume that this condition will hold at least until the\ninitramfs switches root and exits. If all conditions are met, the\ncurrent code will also exit the initqueue without retrying any of\nthe conditions again.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7310a641e227aae446684baeb48f878c3299ff9f", "commit_date": "2023-06-05T14:24:58Z", "commit_message": "fix(udev-rules): remove firmware.rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc182ed8cf779220b95d654a9a2397e991f9c16c", "commit_date": "2023-06-05T13:53:09Z", "commit_message": "docs: change ext3 to ext4\n\nPromote ext4 instead of ext3 in the manual.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a26eec5cc1f384f71226066f13db89f92913f28", "commit_date": "2023-06-05T13:49:15Z", "commit_message": "fix(dracut.sh): silence the output of hardlinking files by default", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8a703aaa7bbfe4f078fef5a4318243db059b87b", "commit_date": "2023-06-05T12:31:21Z", "commit_message": "fix(github): exempt issues in a milestone", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07b49a3ed79a792cede7e6ee21be29aba07168bc", "commit_date": "2023-06-05T12:23:27Z", "commit_message": "fix(virtiofs): add virtio_pci kernel module to virtiofs\n\nfix #2357\n\nSigned-off-by: Sergio E. Nemirowski <sergio@outerface.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c08ae406bc7c7d815b0911d9429f400719afc2ae", "commit_date": "2023-05-25T11:37:03Z", "commit_message": "ci: install multipath-tools into openSuse container", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d118754333d203303007475512aee7eb18b989fe", "commit_date": "2023-05-19T13:34:04Z", "commit_message": "test: remove references of dhcpd3 from tests\n\ndhcp3-server is no longer supported by Debian\nand it is replaced by isc-dhcp-server.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1843c16cafff005f798c379225e97dce459bc3dd", "commit_date": "2023-05-18T08:57:23Z", "commit_message": "test: move test condition to test_check\n\nThis enables skipping the test instead of failing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "006890a2c3bfbaac58f1f9f863e48212388f0ec8", "commit_date": "2023-05-13T23:34:22Z", "commit_message": "test: upgrade to ext4\n\nMost users use ext4 instead of ext3 or ext2. Upgrade tests to ext4.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "86c8a5a7c2573645e67537fb9975efab808d42c9", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): rootfs-generator cannot write outside of generator dir\n\nAlthough it was already documented in systemd.generator(7) that generators must\nnot write to locations other than those passed as arguments, since\nhttps://github.com/systemd/systemd/commit/ca6ce62d systemd executes generators\nin a mount namespace \"sandbox\", so now the hooks created by the rootfs-generator\nare lost.\n\nThese hooks are created using the root= cmdline argument, so this patch moves\nthe creation of these hooks to a cmdline hook.\n\nFixes issue #2211\nFixes issue #2225", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "acfa793b5cc035ebd36b0c5ce97ba2fd89e5745c", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): check and create generator dir outside of inner function", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a7c04716a5e528d86135bf87745054f7cbd54469", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): do not hardcode the systemd generator directory\n\nThe normal directory is the first argument passed to the systemd generator,\nso use it instead of hardcoding /run/systemd/generator.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cd41ab5174945253d65b61433921d5a53276683", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: add more packages to allow testing more dracut containers", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "19c5439510f9d908c0cc48d5b4a321fa9b87f67a", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: simplify and sort", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6178a9d83ffad67fa371cef2ff3f5bbb337bc8b7", "commit_date": "2023-05-09T02:04:09Z", "commit_message": "fix(dracut.sh): handle imagebase for uefi\n\n* UEFI creation didn't handle the ImageBase data for the PE file\n  generation. Create an UKI thanks a stub file with a non zero BaseImage\n  logs some warning ans generate a bad file offset management. The efi\n  becomes unloadable.\n* This commit parse the PE file header, get the data and apply the\n  ImageBase on the objcopy command.\n\nFixes dracutdevs#2284\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67591e8855006eb02aa0ffab7349ab770e471473", "commit_date": "2023-05-08T04:58:09Z", "commit_message": "fix(dracut-functions): avoid calling grep with PCRE (-P)\n\nInvoking grep in Perl mode requires JIT'ing the Perl regex.\nThis can run into issues with SELinix policy which will generally try to\nlimit use of execmem in general purpose scripts. This occurs since the\nJIT'd code will live in executable  memory.\n\nThe PCRE only '\\K' command in the Perl REGEX can be replaced by a call\nto awk instead.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "260883d96f33e7aced3d00c85d0ebffcec1385a1", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut-initramfs-restore.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to debug the shutdown after explicitly\nresetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "971b302d70fbbfac3b6047654b7dc7ceeb1c17e7", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(lsinitrd.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to query the initrd content after\nexplicitly resetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "97fe09769d6a86492c39e0368f088f54f7c0fa6e", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to generate the initrd after explicitly\nresetting the /etc/machine-id file.\n\nFixes issue #2267", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48c2cb457b1472d09453be130797bc6e0e194f7c", "commit_date": "2023-04-26T12:15:24Z", "commit_message": "feat(systemd-creds): introducing the systemd-creds module\n\nIntroducing the systemd-creds module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "71e391ebdc8f5d88447db1b6d475c813d82d5ffb", "commit_date": "2023-04-26T12:11:00Z", "commit_message": "fix(systemd-networkd): add missing conf files and services", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a62e895db9510f0fc4c47ee81b1436096eca4d64", "commit_date": "2023-04-14T04:40:04Z", "commit_message": "fix(dracut-functions.sh): convert mmcblk to the real kernel module name\n\nIn some x86_64 platforms such as Intel Elkhartlake, an issue of missing\nnecessary modules due to udevadm drivers field unmatch the real kernel module\nname is found:\n\n  $ udevadm info -a /dev/block/179:1\n\n  looking at parent device '/devices/pci0000:00/0000:00:1a.0/mmc_host/mmc0/mmc0:0001':\n    KERNELS==\"mmc0:0001\"\n    SUBSYSTEMS==\"mmc\"\n    DRIVERS==\"mmcblk\"\n    ....\n\nThe DRIVERS field, aka mmcblk will be given to instmods to install the\ncorresponding mmc_block.ko kernel module. However mmc_block.ko cannot be\nselected by string mmcblk, as a result, mmc_block.ko cannot be installed\nin hostonly-mode strict, which will fail to bootup the machine such as in\nkdump cases:\n\n  $ /usr/lib/dracut/dracut-install -D /var/tmp --kerneldir /lib/modules/$(uname -r)/ -m mmcblk\n  dracut-install: Failed to find module 'mmcblk'\n\nIn this patch, we will convert the string mmcblk to mmc_block, so the\nkernel module can be successfully loaded.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "297525c5c0781e13c4bf86aa42e81b9f166802ad", "commit_date": "2023-04-11T06:02:40Z", "commit_message": "fix(multipath): remove dependency on multipathd.socket\n\nThis reverts commit e39ff407eca1d783ab44093c44db5ee401ff5b1d, removes\nan incorrect `Also=` directive from multipathd.service.\n\n`Also=multipathd.socket` is not the correct behavior for a\nsocket-activated service. This directive has been removed upstream\nand dracut should do the same.\n\nThis fixes #2289, #2175 where in the cleanup hook running multipath\nbinary triggers activation of multipathd.service after it is stopped\nas dracut prepares to switch root in initrd-cleanup.service.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1300a930e76dbb380c7840760207296a1e58364c", "commit_date": "2023-03-30T15:56:53Z", "commit_message": "feat(lsinitrd): notify user on missing compressor\n\nProvide a notice to user if the required compressor package is\nmissing.  This rather than failing silently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a0d14d3bc691b318507c01708bc67d9e3b9d5109", "commit_date": "2023-03-29T06:11:36Z", "commit_message": "fix(99base): adjust to allow mksh as initrd shell\n\nUse printf instead of echo in str_replace() to preserve escapes.\nFind command paths while PATH includes /usr/sbin. (switch_root was\n  not found after the original environment is restored on Fedora.)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8b951d20d409b3647c85a9c6d064ccb15cdb5fe7", "commit_date": "2023-03-28T11:33:37Z", "commit_message": "fix(base): do not quote $CLINE in the `set` command\n\nThis is needed to correctly parse init arguments.\n\nFixes: 2fabaaa62dcfd31e593ca45e1374e55adae29d6b", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df2458a6b8aec70e74757ea7ae35f672a99ddc17", "commit_date": "2023-03-22T07:13:14Z", "commit_message": "fix(systemd-ac-power): correct systemd-ac-power binary path\n\n`systemd-ac-power` has been moved from `/usr/lib/systemd` to `/usr/bin/` since\nhttps://github.com/systemd/systemd/commit/251dc2f1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f32e95bcadbc5158843530407adc1e7b700561b1", "commit_date": "2023-03-20T11:56:24Z", "commit_message": "fix(dracut.sh): use dynamically uefi's sections offset\n\n* Uefi section are creating by `objcopy` with hardcoded sections\noffset. This commit allow to have the correct offset between\neach part of the efi file, needed to create an UKI. Offsets\nare simply calculated so no sections overlap, as recommended\nin  https://wiki.archlinux.org/title/Unified_kernel_image#Manually\nMoreover, efi stub file's header is parsed to apply the correct\noffsets according the section alignment factor.\n* Remove EFI_SECTION_VMA_INITRD, no need anymore as initrd\nsection offset dynamically calculated\n\nFixes dracutdevs#2275\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b4774239989257999053033fc92cded7803896", "commit_date": "2023-03-06T10:45:47Z", "commit_message": "fix(lvmthinpool-monitor): activate lvm thin pool before extend its size\n\nThe state of lvm thin pool may change into inactived state when kdump into\n2nd kernel. As a result, lvextend will fail to extend its size. For example:\n\nIn 1st kernel:\n\n  $ lvs\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-a-tz-- 300.00m thinpool        70.54\n  thinpool vg00       twi-aotz-- 236.00m                 89.67  12.50\n  ...\n\nIn 2nd kernel:\n\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-aotz-- 300.00m thinpool        70.54\n  thinpool vg00       twi---tz-- 236.00m                 89.67  12.50\n  ...\n\nAnd the lvextend failing log:\n[  8.483878] start-thinpool-monitor[590]: lvextend using policy requires the thin pool to be active.\n\nIn this patch, we will first activate lvm thin pool before calling lvextend\nduring kdump.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aca51203609954b38b41ea303a4376cbce061150", "commit_date": "2023-03-01T08:16:33Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.5.0 to 0.6.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.5.0 to 0.6.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.5.0...v0.6.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e780720efe6488c4e07af39926575ee12f40339", "commit_date": "2023-02-28T07:34:40Z", "commit_message": "fix(dmsquash-live): restore compatibility with earlier releases\n\nFollow-up to 40dd5c90e0efcb9ebaa9abb42a38c7316e9706bd .", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ddcb137ea2a4d79491ff94f1f7802dcaa7ac381", "commit_date": "2023-02-27T13:26:40Z", "commit_message": "fix(dracut.sh): kmoddir does not handle trailing /\n\nFixes https://github.com/dracutdevs/dracut/issues/2236\n\n+(/) only works in bash interactive mode. Using any non-interactive\nbash run simply doesn't remove anything.\n\nThe solution is copied from dracut-lib.sh, trim().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d554d9b98333372aeb20fd153a42c8171979825", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old eudev specific rule\n\nRevert 64fb0900cbc47804b4225287e4622063169db360, no longer\nneeded.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d648bf805a27cbf1920f0437606c9ffb2684ec18", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old redhat specific rule\n\nThe 40-redhat.rules rule has been removed upstream in 2010.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6a33e677aca49dd81826949b61acb945d672ba84", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old edd_id extra rules\n\nThe 61-persistent-storage-edd.rules rule has been removed upstream\nin 2012.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1edc41af979e1c1097be082c357f7a4895fbbad2", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old debian specific rules\n\nThe last Debian release that carried 91-permissions.rules is wheezy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f9ad06873eb50754611ece2c18a0cd0b22336c0", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "feat(test): nfs_fetch_url test into nfs test\n\nThis is to check the behavior of nfs_fetch_url() in nfs-lib.sh.\nnfs_fetch_url() calls nfs_already_mounted() internally.\nA file /nfs/client/root/fetchfile is on NFS server, which is fetched\nfrom clients for testing with nfs_fetch_url().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "966b6cec1bebd91ddd0f85c357f7ab57d3213f51", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "fix(url-lib.sh): nfs_already_mounted() with trailing slash in nfs path\n\nnfs_already_mounted() doesn't work when the installation ISO and kickstart file on a same NFS share are specified with inst.repo and inst.ks boot parameter as below.\n\n   inst.repo=nfs:192.168.1.1:/home/data/rhel9.iso inst.ks=nfs:192.168.1.1:/home/data/ks.cfg\n\n   NOTE: /home/data is configured for nfs share on 192.168.1.1\n\nOne problem is a file (not a directory) was passed into nfs_already_mounted().\nnfs_already_mounted() is the function to judge if the given directory is already mounted.\nSo, filepath should be passed in nfs_fetch_url().\n\nThe other problem is about the trailing slash in the nfs path in /proc/mounts.\n\nThe /proc/mounts has an entry after nfs mount of inst.repo.\n\n   192.168.1.1:/data/   /run/install/isodir  nfs  ro,relatime,<snip>\n\nIn this case, nfs_already_mounted() returns \"/run/install/isodir//home/data/ks.cfg\" wrongly. The following is from the log.\n\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@156(nfs_fetch_url): nfs_already_mounted 192.168.122.1 /home/data/ks.cfg\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@137(nfs_already_mounted): local server=192.168.122.1 path=/home/data/ks.cfg s= p=\n...\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@140(nfs_already_mounted): '[' 192.168.122.1 = 192.168.122.1 ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@141(nfs_already_mounted): '[' /home/data/ks.cfg = /home/data/ ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@143(nfs_already_mounted): str_starts /home/data/ks.cfg /home/data/\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/dracut-lib.sh@51(str_starts): '[' ks.cfg '!=' /home/data/ks.cfg ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@144(nfs_already_mounted): echo /run/install/isodir//home/data/ks.cfg\n...\n[   14.658069] localhost.localdomain dracut-initqueue[934]: //lib/url-lib.sh@156(nfs_fetch_url): mntdir=/run/install/isodir//home/data/ks.cfg\n\nThis function doesn't expect the trailiing slash of the nfs path in /proc/mounts, so it should be removed before processing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9bcd4d2c88985fa05e98b100e43d5630bdf0a6e", "commit_date": "2023-02-22T20:49:56Z", "commit_message": "ci: use CodeQL instead of LGTM\n\nAs LGTM is going to be shut down by EOY[0], let's move the code scanning to\nCodeQL as recommended. Thanks to GH integration the results from such\nscans will be shown both in the respective PR and in the Security ->\nCode Scanning tab[1].\n\n[0] https://github.blog/2022-08-15-the-next-step-for-lgtm-com-github-code-scanning/\n[1] https://github.com/dracutdevs/dracut/security/code-scanning", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae88e029c6ad20248d229bebd7e8f10d3d094988", "commit_date": "2023-02-22T20:20:52Z", "commit_message": "feat(dracut): use log level indicator in console output\n\nAlso, use the same format in messages printed to console before dracut-logger\nis sourced.\n\nFixes issue #1065", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df381b7e0cd95f78e40ac70f0f3c96a2fa8dd189", "commit_date": "2023-02-21T20:34:49Z", "commit_message": "feat(kernel-modules): driver support for macbook keyboards\n\nDiscussed in: https://bugzilla.redhat.com/show_bug.cgi?id=2166209", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "131822e26d76a3ce2028e9a545be2af066805629", "commit_date": "2023-02-21T20:05:44Z", "commit_message": "fix(dracut-install): prevent possible infinite recursion with suppliers\n\nDuring search for fw_devlink suppliers, it's possible to encounter a\nsituation where supplier A depends on supplier B, and supplier B has a\nparent node that depends on supplier A. This leads to an infinite\nrecursion.\n\nTo fix this, make sure suppliers are only processed once.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f3a7172db5dc02a6b8620a31ec36a5a3c1b540d4", "commit_date": "2023-02-16T20:15:37Z", "commit_message": "build: remove rpm spec file and build rules\n\nAs discussed in issue #2204 this patch removes the dracut.spec file from\nthe repository.  The advantage of this patch is that it creates a\ndracut-version.tar.xv file that can be more easily consumed by the\ndownstream distributions because there's no rpm spec file included in\nthe distribution.\n\nTested with a downstream rpm spec fiie:\n\n```\ncd dracut\nVERSION=`git describe --abbrev=0 --tags --always`\nmake clean\nmake dist\ncp dracut-${VERSION}.tar.xz ../\ncd ..\n\nxz -d -v dracut-${VERSION}.tar.xz\ntar rf dracut-${VERSION}.tar dracut.spec\nxz -9 dracut-${VERSION}.tar\n\nrm -rf rmpbuild\nmkdir -p rpmbuild/{BUILD,BUILDROOT,RPMS,SOURCES,SPECS,SRPMS}\nrpmbuild -ta --define \"_topdir `pwd`/rpmbuild\" -v dracut-${VERSION}.tar.xz\n```\n\nFixes issue #2204", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "89269d239f0539b7bd4339ba98a0d1b188b59962", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): add UFS drivers\n\nAdd ufs to the list of block drivers as it is used in modern embedded\nsystems.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "87a76dbb578aff473e690857d1b714eacd92b9ec", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): use modalias info in get_dev_module()\n\nWhen calling dracut with '--hostonly-mode=strict', get_dev_module() gets\ncalled on the system's block devices to find the required drivers. The\ndriver name is retrieved using udevadm. However, the driver name\nreturned by udevadm is not necessarily the same as the module name.\nThis is the case for the Qualcomm UFS driver: udevadm returns\n'ufshcd-qcom' while the module name is 'ufs-qcom', so dracut-install is\nnot able to find the module afterwards.\n\nTo solve this, make get_dev_module() also return the module alias info\nfrom the modalias files contained in the sysfs directories parsed by\nudevadm.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5dca3d68915cef077fda2bc5292e12f82cf6dd6", "commit_date": "2023-02-15T02:14:27Z", "commit_message": "fix(crypt): add missing libraries\n\nAdd missing libraries, closes #2137", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "61ceb35f4079ae8d0ee1635b56dd8bc88149b4a8", "commit_date": "2023-02-14T15:56:34Z", "commit_message": "revert(network-manager): avoid restarting NetworkManager\n\nThis reverts commit 77630365aed201a729c73a9ffda0733a75f3fee4.\n\nIts commit message states:\n\n  On EL8.3 the NetworkManager keep restarting even if it exits successfully\n  while waiting for Clevis to unlock. This patch ensures NetworkManager runs\n  only once in initrd.\n\nYes; NetworkManager is run multiple times, so that it's able to\nconfigure interfaces that haven't been seen previously (because bus was\nslow to scan or device took time to initialize).\n\nIt's not clear what problem was the original commit trying to fix.\nI suspect there was no problem, just a misunderstanding.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a6dd5bfb9a514a3bf650cc1e8d4311c05e9b968c", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle sbsign errors for UEFI builds\n\n`sbsign` does not issue any error if there is not enough disk space to create\nthe signed file using its `--output` option. So, verify the signed image after\nits creation using `sbverify`.\n\nFixes issue #2197", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8602df705879100be17e93fe56f5cbeb6216248f", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle out of space error for UEFI builds\n\nIf `cp` fails, do not continue, print an error and exit, like it's already\nbeing done for non-UEFI builds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "726d56ca0a23e5a39de5f809da2d20ce7985d437", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): IPv6: don't wait for RA for static IPv6 assignments\n\nThis patch reverts commit\nc603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\").\nIt's not generally correct wait for a default route to be established\nfor an interface, or to wait for \"proto ra\" routes in general.\nFor example, if the system is a router itself, it will receive no\nRAs. In isolated networks, no gateway may be advertized, either.\nThis is similar in spirit to 76f6566 (\"Revert \"wait for IPv6 RA\nif using none/static IPv6 assignment\"\")\n\nWhatever c603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\")\nwas supposed to achieve, it should be done differently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b074216be93dc4512b76fcd6b77a727aef11b22b", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network-legacy): always include af_packet\n\nFor static IPv4 configurations, we use arping to check for duplicate\nIP addresses. arping requires the af_packet module to work, and if arping\nfails, the IP address will not be set and booting will fail.\naf_packet may not be loaded / required in the running system, for example if\nthe system had been booted in an IPv6 configuration, or if it had been\nmanually unloaded. Make sure it's included in initramfs in hostonly mode, too.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ff255a4488f63cf84179d4572f44fe3a1bd29ec", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): don't assume prefix length 64 by default\n\nAssuming a default prefix length of 64 by default if no explicit\nprefix length is given is wrong and known to cause connectivity\nproblems in some networks. A prefix length of 128 should be assumed\nin this case.\n\nSee https://www.rfc-editor.org/rfc/rfc5942 (specifically section 5)\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=684009", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3b65a493a635a3f85f9e65c4337cd4c144ff8fc", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): prefix syntax for static iBFT IPv6 addresses\n\nibft_to_cmdline() formats a static IPv6 address like this\n(without peer, gateway, hostname):\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10/64]:::::ibft0:none\"\n\nThis means that the \"mask\" field (4th) is left blank. When this is\nparsed later by parse-ip-opts.sh, it bails out with the error\nmessage \"Sorry, automatic calculation of netmask is not yet supported\".\n\nparse-ip-opts.sh rather expects the prefix in the 4th field:\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10]:::64::ibft0:none\"\n\nThis syntax will be correctly transformed to the command\n\n  ip addr add fd09:9a46:b5c1:1fe::10/64 dev ibft0\n\nThis patch fixes the formatting of the \"ip=\" line in ibft_to_cmdline().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa5d9526eca23f642fd623d2c857fd8f9930b83d", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): install 8021q module unconditionally\n\nIn iBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3de4c7313260fb600507c9b87f780390b874c870", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "feat(dracut-install): add fw_devlink suppliers as module dependencies\n\nDracut currently finds kernel module dependencies using two methods:\ndepmod and softdeps. However, these are often insufficient on embedded\nsystems where a lot of driver dependencies are only described in the\ndevice tree. This is often the case for low-level devices such as\nclocks, regulators, pinctrls, etc.\n\nThis patch allows dracut to find those device tree dependencies, by\nparsing the sysfs supplier nodes populated by fw_devlink.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0c3b683270dbce933ef3d2f89d99dea7314ebf6", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add Hashmap cleanup function\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ea8cf5f56df2e2808863188450488835c17e59d", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add function to install one dependent module\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88aeca2a381a657787c4200e9179c3ff70b057e9", "commit_date": "2023-02-13T12:12:21Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.2.2 to 0.5.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.2.2 to 0.5.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.2.2...v0.5.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16931f5236b44078ab2bbc60d7b3bef2ba4507d7", "commit_date": "2023-02-13T12:08:36Z", "commit_message": "chore(shfmt): update to pass with shfmt v3.5.1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d777dd3dab50c2e383c00751fae5d9593339315f", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): move fips-boot script to pre-pivot\n\nThis is needed in s390x to be able to use the same `boot=` command line\nparameter in grub and zipl. Otherwise, `boot=` would need to be added only to\n`grub.cfg` (not `/etc/default/grub` and thereby not to `/boot/zipl/config`).\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab26ad2c2ab4a5884e392951998d40829f130387", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): only unmount /boot if it was mounted by the fips module\n\nThe `do_fips` method should only unmount /boot if it was mounted in the\n`mount_boot` method.\n\nIn addition, now the `mount_boot` method checks if /boot is already mounted.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "68d0653e35f79e78b75a71c122c091ba4f4d5759", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "feat(fips): add progress messages\n\nThis allows to better understand at what point a FIPS integrity test failed.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fabbb6412b70bdd1aac5279b90b9a23a267ffc5", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): do not blindly remove /boot\n\nThe `mount_boot` method called from fips-noboot.sh in the pre-pivot hook blindly\nexecutes `rm -rf /boot` if there is no `boot=` command line parameter, without\nfirst checking that /boot is not already mounted by other means.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c95075e2c792cdb0e18aac6300ae8dc0dd6a6c1b", "commit_date": "2023-02-13T11:58:52Z", "commit_message": "chore(base): remove support for <udev-176\n\nThis reverts 579238a3acd0317d7124a76dc489f19d9471fb63.\n\nKeep the support for prepare_udev_rules for out-of-tree\ndracut modules and issue a deprecation warning.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cef3f28e15a834284786c79f108b7c42481f96", "commit_date": "2023-02-13T11:18:58Z", "commit_message": "fix(plymouth): remove /etc/system-release dependency\n\n/etc/*release files should not be managed in the plymouth module\nand more importantly dracut assumes /etc/os-release not\n/etc/system-release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3a7112bef794e2f2dd741ec2c74fa9cb9117651", "commit_date": "2023-02-13T10:57:11Z", "commit_message": "feat(resume): also consider resume= in the cmdline as enabling hibernation\n\nDon't consider noresume to disable, that's a single-boot flag\n\nCloses #924", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d8a9a73df9688989b5e47469e74ad5aa666a5bfb", "commit_date": "2023-02-13T10:54:41Z", "commit_message": "fix(network-manager): add \"After\" dependency on dbus.service\n\nDuring shutdown, there is no ordering dependency between the nm-initrd service\nand the D-Bus daemon, and so the latter can be stopped before. This causes\nissues to NetworkManager, especially when team interfaces are present because\nNM will see teamd dropping from the bus and will try to reactivate the\nconnection.\n\nAdd a \"After\" dependency to make sure the D-Bus daemon is stopped after NM on\nshutdown.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1597076887c6744b9ec69c0ac44a1134fd700700", "commit_date": "2023-02-13T10:51:42Z", "commit_message": "fix(fido2): libfido2.so depends on libz.so\n\nCo-authored-by: cs50guy2", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a531ca044e3cfe9b670e7e4d59a7bae5bafec1e", "commit_date": "2023-02-13T10:21:53Z", "commit_message": "fix(dracut-install): continue parsing if ldd prints \"cannot execute binary file\"\n\nWhen the kernel is compiled without IA32_EMULATION and the glibc 32-bit library\nis installed on the system, `ldd` prints the following output:\n\n```\n> ldd /usr/lib64/libfido2.so.1.12.0\n/bin/ldd: line 162: /lib/ld-linux.so.2: cannot execute binary file: Exec format error\n\tlinux-vdso.so.1 (0x00007ffd627fa000)\n\tlibcbor.so.0.9 => /lib64/libcbor.so.0.9 (0x00007f18d799f000)\n\tlibcrypto.so.3 => /lib64/libcrypto.so.3 (0x00007f18d7400000)\n\tlibudev.so.1 => /lib64/libudev.so.1 (0x00007f18d7971000)\n\tlibhidapi-hidraw.so.0 => /lib64/libhidapi-hidraw.so.0 (0x00007f18d7968000)\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f18d794e000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f18d7205000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f18d79f9000)\n> echo $?\n0\n```\n\nThe `ldd` script uses the following code to resolve dependencies:\n\n```\nRTLDLIST=\"/lib/ld-linux.so.2 /lib64/ld-linux-x86-64.so.2 /libx32/ld-linux-x32.so.2\"\n...\nRTLD=\nret=1\nfor rtld in ${RTLDLIST}; do\n  if test -x $rtld; then\n    verify_out=`${rtld} --verify \"$file\"`\n    ret=$?\n    case $ret in\n      [02]) RTLD=${rtld}; break;;\n    esac\n  fi\ndone\n```\n\nSo, if the 32-bit library fails, the 64-bit library may work, so don't stop\nparsing the `ldd` output unconditionally when the message \"cannot execute binary\nfile\" is printed.\n\nFixes issue #2190", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b530f26368d723dcc34fb67d687c60009b06412", "commit_date": "2023-02-13T07:56:39Z", "commit_message": "fix: make iso-scan trigger udev events\n\nFixes #2183", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab07f6d1ee3cda8c735e6235e5da4c74913e5184", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "ci: enable test 60\n\nIt's hopefully stable now.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d7c0ffbd65c8d5c9fef559a51a2405a28c6f6a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): rename test 60\n\nThe test *also* checks the generation of ifcfg files, but it's primarily a test\nfor bonding, bridging and VLANs. Update the name to reflect this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e846cb1320e32db1e3d200743f8fc08732d4c9e", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): improve test 60\n\nThe test has the following issues:\n\n - it sets up a bridge on net1 and net2, however those interfaces\n   are part of the same qemu hub and this causes switching loops;\n\n - the bonds are created on two interfaces but only one has a DHCP server, and\n   this causes random failures;\n\n - the checks performed on the client are pretty limited.\n\nRework the test:\n\n - avoid the bridging loop;\n\n - update the topology to use a bond interface on the server side;\n\n - introduce additional checks on the client: start a ping and check that ports\n   are properly attached to bonds and bridge;\n\n - make it possible to return module-specific information from the client; in\n   the future this can be added for example to check that the NetworkManager or\n   systemd-networkd configuration is correct.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f44740f2c234ddb275e0a11e23d45e3678eb4a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): remove leftover link file from server rootfs\n\n01-client.link must be removed, otherwise it conflicts with 01-server.link that\nsets a different naming policy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9fb64d96ab7a7e19a7940e56e9bc0da863b46386", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): assign fixed address to bridge\n\nKernel uses the lowest MAC of all attached ports as MAC address of the\nbridge. However, after the first port gets attached, DHCP can be started on the\nbridge and it will use the MAC (and client-id) of the first port; so, the MAC\nused for DHCP depends on the order of attachment of ports, which is not\nguaranteed to be stable in general.\n\nTo make sure that the DHCP server always sees the request from the MAC of\nenp0s1, assign that MAC to the bridge from the kernel command line.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "462d9b9254d4386e9eac267547ee4e8cd2487c3d", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): bump DHCP timeout to 30 seconds\n\nThe current interval (3 seconds) is very low and causes sporadic failures\nespecially when DHCP is run on a bridge (TEST-50-MULTINIC); in that specific\ncase, interfaces take time to be attached to the bridge and before enp0s1 is\nattached all DISCOVER packets are lost.\n\nBump the timeout to a more robust value of 30 seconds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "da959483333c6ab83e4cdef837130eacec6b35d7", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): remove check on dhclient support for --timeout\n\nThe network-legacy dracut module already ignores the DHCP timeout option when\nit's not supported by dhclient. Other network modules don't use dhclient for\nDHCP.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d3993c7dabdd37c54a991c6ad9ea38365598d16a", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): adapt multinic test for new NetworkManager versions\n\nSince version 1.42, NetworkManager creates a \"external\" connection for the\nloopback interface. Ignore that connection in the multinic test.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70aeb4c1a56027bc2fe5570c080d96625b377c94", "commit_date": "2023-02-06T12:19:58Z", "commit_message": "fix(install): do not undef _FILE_OFFSET_BITS\n\n_FILE_OFFSET_BITS is a feature test macro to determine largefile\nsupport. Usually its set to 64 on systems supporting LFS. Its also\nneeded to be set to 64 for supporting 64bit time_t on glibc on 32bit\nsystems. If its undefined explicitly, then 64bit time_t can not be\nenabled.\n\nSigned-off-by: Khem Raj <raj.khem@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "18c5fb6ae0e32f11596cb365a73946eb1c9ce5e5", "commit_date": "2023-02-02T07:26:43Z", "commit_message": "chore(deps): bump docker/build-push-action from 3 to 4\n\nBumps [docker/build-push-action](https://github.com/docker/build-push-action) from 3 to 4.\n- [Release notes](https://github.com/docker/build-push-action/releases)\n- [Commits](https://github.com/docker/build-push-action/compare/v3...v4)\n\n---\nupdated-dependencies:\n- dependency-name: docker/build-push-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4a5c90ab993d2559720c2d4023d99ad43df00a", "commit_date": "2023-02-02T07:13:30Z", "commit_message": "fix(dracut.sh): --sysroot option broken if global variables not set in conf\n\nWhen `$dracutsysrootdir` is set and references an existing directory, the\ninternal global variables are never set, unless their value is assigned via\nconfiguration file.\n\nThe simple fix would be turn all:\n\n```\n[[ -d $dracutsysrootdir$var ]] || var=value\n```\ninto:\n```\n[[ -z $var || ! -d $dracutsysrootdir$var ]] && var=value\n```\n\nBut this patch also includes a refactoring, removing duplicate code using the\nsame `set_global_var` function to set and export global variables, and improving\nreadability.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "823de8fe5337cd7b8b4ce4dec3675ea44b723706", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "refactor(dracut-init.sh): remove redundant \"dracut\" from \"dracut module\" prints\n\nIn a similar fashion than \"Including module\" prints.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a10078a5c3ce9adf309962634e71ae6e186f2621", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "feat(dracut-init.sh): specify if a module cannot be found or cannot be installed\n\nDo not print the same error message for both situations.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1f84ff882fe272ef0185a284eee82e89735c833d", "commit_date": "2023-01-31T07:44:57Z", "commit_message": "fix(lsinitrd.sh): handle filenames with special characters\n\nPrinting and unpacking of specific files passed as arguments does not work if\ntheir filenames contain special characters with a hexadecimal character escape\n(\\x), which is often the case for systemd device units.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eb75861c2a1c05eb142616da1891a7fa5a2a34e1", "commit_date": "2023-01-27T15:55:03Z", "commit_message": "fix(dracut-systemd): remove unused argument\n\nThe `generator_wait_for_dev` function of the dracut rootfs systemd generator\nonly uses the first argument. Moreover, RDRETRY is unset at this point.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a109c6123ffa8506379b73a4b1aeee4d0b67866d", "commit_date": "2023-01-27T15:16:35Z", "commit_message": "feat(lvm): always include all drivers that LVM can use\n\nThis patch adds all the kernel modules that might be needed by LVM, to avoid\nhaving to rebuild the initrd in hostonly mode after a dynamic change that\nrequires new drivers to boot.\n\nFor example, LVM allows to dynamically convert a linear logical volume to a\nRAID-1 type (`lvconvert --type raid1 vg/lv`), which, in hostonly mode, will\nrequire the user to manually rebuild the initrd again to include the new RAID\ndrivers in use, otherwise the system will fail to boot.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aafcab935b7e84cea8fc3f084b6935f87b2b8a5", "commit_date": "2023-01-27T08:03:54Z", "commit_message": "fix(dracut-init.sh): correct typo in comment", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cda6b00abce0e68e353ab929b86cfaf45c3dc1c8", "commit_date": "2023-01-27T08:02:57Z", "commit_message": "fix(dracut.sh): correct --help and --version exit codes\n\nBoth are valid options that cause regular program termination without errors, so\ndracut should return 0.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e971c788f0a4a494eedf291b988d698849c36c22", "commit_date": "2023-01-27T08:01:50Z", "commit_message": "refactor(virtiofs): remove exit after die\n\nThe `die` function already ends with `exit 1`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c16c76fb51683cd70c3643b122685b7cdb4178c", "commit_date": "2023-01-19T13:22:22Z", "commit_message": "ci: fix Gentoo container used for testing", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3e8108eb75247249ec05eaba943c3f48637c04b", "commit_date": "2023-01-06T20:07:49Z", "commit_message": "fix(crypt-gpg): do not use always --card-status\n\nIf no GPG smart card is used then the card-status breaks the decryption\nof the keyfile. Therefore, use the card-status only if a smart card is\nused to decrypt the keyfie.\n\nFixes issue #2004", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f6bb4a36b763ae6de0e1aee55bc95d3d3f3ec1e1", "commit_date": "2023-01-06T04:49:37Z", "commit_message": "docs(RELEASE.md): update release docs\n\n- Remove the reference to Harald's git ci alias\n- Added a missing push to master\n- Added a warning not to add the Rendered View entry from the NEWS.md to\n  the tags. ( Github adds that to the release with no way of removing it, see 058 )\n- Added validation of the new tag ( Good practice )\n- Clarify milestone handover.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b060945c45a938af8ef53010272eb4ac3acc12df", "commit_date": "2023-01-04T09:18:08Z", "commit_message": "ci: disable test 50\n\nTest 50 (MULTINIC) seems to be the only test that prevents\nthe project from having an all passing continuous integration\ntest suite.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88fe9205de49c12ed8eaac2ca227a72830750955", "commit_date": "2023-01-04T05:38:58Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "93339444361303c15e26b6ff5cea6ef99ad0b3e0", "commit_date": "2023-01-03T14:09:12Z", "commit_message": "fix(dmsquash-live): live:/dev/*\n\nfix a bug introduced in 71cfa2e22\n\nmake sure root is set correctly for both of the following cases\n - \"root=live:/dev/*\"\n - \"rd.live.image root=/dev/*\"", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "10cf8e46f43a7a2094e4d861c1296db6af0e0fa1", "commit_date": "2022-12-30T14:13:00Z", "commit_message": "fix(load_fstype): avoid false positive searchs\n\nRefactor to avoid substring matches\n  and to speed processing.\nAlso avoid xtracing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08b63a25296d689186c6343f96e764bf893367cb", "commit_date": "2022-12-30T14:10:00Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94dcac7ccdfeb2ff7bd7c59c0f8bf46d0698ce3f", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "refactor(dracut-install): strerror(errno) -> %m", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "efd4ca271f15530d7264d2c87a104284e20b28aa", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() environment block", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "77226cb412822dc7614037c6d9225d98e64d4a55", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't reallocate {src,dst}path in hmac_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a20556f0e51249e501aeb87eb5a337a15db52253", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() excessively for dracut_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ed8337bb9fec0283af5dc745450394ba649a03", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): stat() w/unused buf -> access(F_OK) in dracut-install", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "751a110f29f07cb41246c09784c63bb26bb708c6", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): multiple single-character strstr()s -> strpbrk()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e5237dd771029ad90d921732a9805f618ed67fc", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "chore: remove src/install/hashmap.lo", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9dbbebb1339d1c3dc8e6b8835a6edbc95c66e2fe", "commit_date": "2022-12-28T07:40:23Z", "commit_message": "feat(network-wicked): remove module\n\nwicked is being phased out from openSUSE\nhttps://news.opensuse.org/2022/01/28/bash-systemd-libvirt-update-in-tw/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "master": [{"commit_oid": "6acfecae572fb457115b276b5b64d9424ad5187b", "commit_date": "2023-08-30T07:21:08Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC1087", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c80408c8644a0add1907b0593eb83f90d6247b1", "commit_date": "2023-08-30T06:47:15Z", "commit_message": "fix(dracut.sh): remove microcode check based on CONFIG_MICROCODE_[AMD|INTEL]\n\n`CONFIG_MICROCODE_AMD` and `CONFIG_MICROCODE_INTEL` are hidden since\nhttps://lore.kernel.org/all/20230810160805.081212701@linutronix.de/, therefore\nthis check is wrong and early microcode is always disabled.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b4e23ce4238821b0c2dd3c846da45f9cfeb57954", "commit_date": "2023-08-25T12:25:55Z", "commit_message": "fix(release): maintain dracut-version.sh in the source tree\n\nUpdate dracut-version.sh as part of release generation.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23389f6d48871212eba46e34db67e0c9f4368078", "commit_date": "2023-08-24T10:17:47Z", "commit_message": "docs: set KVERSION for running test suite\n\nRunning the test suite in podman will most likely require setting\n`KVERSION` because the running Linux kernel version will most likely be\ndifferent to the kernel version in the container.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b81e8eb67c80500e529ff2f845c10719b2afd87", "commit_date": "2023-08-24T06:54:01Z", "commit_message": "chore: remove unnecessary shellcheck disable for SC2154", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "166456331d55cdc23946c11315dc2c88aab15911", "commit_date": "2023-08-22T12:00:29Z", "commit_message": "feat(install.d): allow using dracut in combination with ukify\n\nThis can be simply accomplished with the KERNEL_INSTALL_INITRD_GENERATOR\nand KERNEL_INSTALL_UKI_GENERATOR variables. `60-ukify.install` looks for\nthe initrd in the KERNEL_INSTALL_STAGING_AREA and then takes care of building\nthe uki.\n\nThis change makes it possible to use a configuration like this:\n/etc/kernel/install.conf\nlayout=uki\nuki_generator=ukify\ninitrd_generator=dracut\n\nWithout this change this configuration will fail since dracut would also\ngenerate an uki instead of initrd, which will cause a problem in\n`60-ukify.install` since it can't find an initrd to use.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f78e5de23769b6c1d656b44bf3c7eb97ba73518", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support disabling KVM by setting NO_KVM\n\nKVM fails on the Ubuntu ppc64el autopkgtest runners:\n\n```\n$ /usr/bin/qemu-system-ppc64el -enable-kvm -cpu host [...]\nioctl(KVM_CREATE_VM) failed: 22 Invalid argument\nPPC KVM module is not loaded. Try modprobe kvm_hv.\nqemu-system-ppc64el: failed to initialize kvm: Invalid argument\n$ modprobe kvm_hv\nmodprobe: ERROR: could not insert 'kvm_hv': No such device\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "65f0ef52a9bd63ccb1e31ccae948b49978e5ab0e", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: set QEMU machine for ARM and PowerPC\n\nSet QEMU machine for ARM and PowerPC to run on Debian/Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f29e428bdb3068e25150bc9591a961bd2df66442", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "fix(test): only use QEMU machine q35 on x86\n\nThe QEMU machine `q35` is only available on x86:\n\n```\nqemu-system-aarch64: unsupported machine type\nUse -machine help to list supported machines\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb7d5ec4cb06b2b4435327255049e55d34301d27", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: support /boot/vmlinux\n\nOn the Ubuntu ppc64el architecture the kernel is named `/boot/vmlinux`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1e63b184517112efcce253f3962cab50fe25927", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: log qemu calls to ease debugging\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf97572bd5145a9e1192297a806dda94a3422de0", "commit_date": "2023-08-22T11:50:42Z", "commit_message": "test: introduce overridable ARCH variable in run-qemu\n\nAllow specifying the architecture for `run-qemu`. E.g. this enables\nrunning armhf containers on arm64 hosts.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a18f1335fcab1eb84fedc45e450851d093335aa", "commit_date": "2023-08-22T06:52:53Z", "commit_message": "fix(test): use bash for jobs -r parameter\n\nTest 20 - \"NFSv3 root=dhcp DHCP IP:path\" fails on Debian with following\nerror message in `server.log`:\n\n```\njobs -rp\n/sbin/init: 105: jobs: Illegal option -r\n```\n\nThe jobs parameter `-r` requires bash.\n\nPartially fixes #1901\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e9d89d9c05b4ad1d70a508a604c0b1745c1b17f", "commit_date": "2023-08-21T13:19:57Z", "commit_message": "ci: also run integration test on Ubuntu\n\nAdd a Dockerfile for Ubuntu (very similar to Debian) and run the\nintegration tests also on Ubuntu.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "31c4d284017044b72ddea767c4d35d6d70473984", "commit_date": "2023-08-21T12:39:14Z", "commit_message": "feat(Makefile): allow setting dracut version via environment variables\n\nTo ease packaging dracut for Debian/Ubuntu, please support setting the\ndracut main/full version via environment variables:\n\n```\n$ DRACUT_MAIN_VERSION=007\n$ export DRACUT_FULL_VERSION=007-bond\n$ make dracut-version.sh\n$ grep VERSION dracut-version.sh\nDRACUT_VERSION=007-bond\n```\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ddf6323145d50d33a897687474c73770328bf757", "commit_date": "2023-08-21T12:18:44Z", "commit_message": "fix: codespell", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "028f7632f8fbeb68d0414baa2ae2482bfb19f1b3", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: fix skipcpio path for installed binary\n\nThe `skipcpio` binary is installed in `${PKGLIBDIR}/skipcpio`.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbee4f37cb933fcb4eeb89eb7a2c8fd687eb9079", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: skip test 98 if dracut-util is not available\n\nBuilding `dracut-util` requires the source code to be present and\nprevents running the test against the installed system. Check that\n`dracut-util` and rely on the test environment to build `dracut-util`\nbeforehand.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0321c90fabb37145db67751c948a58afc123d75", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make package libdir configurable\n\nMake the package libdir configurable to allow running the test suite\nout-of-tree. `PKGLIBDIR` can be pointed to the installed dracut libdir.\nUse `PKGLIBDIR` for the location of `dracut-init.sh`, `dracut-install`,\n`dracut-util`, `dracut-cpio`, and `modules.d`.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9939d0e1f1e17cc5d33cba55717ac063d21a048", "commit_date": "2023-08-16T15:34:12Z", "commit_message": "test: make dracut directory configurable\n\nMake the directory of the `dracut.sh` script configurable to allow\nrunning the test suite out-of-tree.\n\nThis change is used to run the test suite against the installed dracut\nin an autopkgtest for the Debian/Ubuntu package.\n\nSigned-off-by: Benjamin Drung <benjamin.drung@canonical.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7528d84de84d9c1fb7d5f54712c692600e21b044", "commit_date": "2023-08-16T06:30:26Z", "commit_message": "fix(systemd): add new systemd-tmpfiles-setup-dev-early.service\n\n`systemd-tmpfiles-setup-dev.service`, `kmod-static-nodes.service` and\n`systemd-sysusers.service` have an ordering dependency on this new service since\nhttps://github.com/systemd/systemd/commit/353c849", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "570b9d405116c9763266aa2e88ea0a2460c734ba", "commit_date": "2023-08-16T06:26:14Z", "commit_message": "fix(systemd-udevd): add missing override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32f6f364ddeb706bf8741f2895d60022aee264e7", "commit_date": "2023-08-10T12:04:03Z", "commit_message": "fix(dracut-install): protect against broken links pointing to themselves\n\n`readlink` does not return an error if a symbolic link points to itself, which\ncan cause a stack overflow due to infinite recursion in the `get_real_file`\nfunction.\n\nAlthough this type of recursive links should not exist, we discovered this\nissue on a real system. It can be reproduced as follows:\n\n```\n> ls -l /lib64/libblkid.so\n-rwxr-xr-x 1 root root 224368 Aug  9 15:13 /lib64/libblkid.so\n> rm -f /lib64/libblkid.so\n> ln -s /lib64/libblkid.so /lib64/libblkid.so\n> ls -l /lib64/libblkid.so\nlrwxrwxrwx 1 root root 18 Aug  9 15:06 /lib64/libblkid.so -> /lib64/libblkid.so\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\n...\n[infinite recursion]\n...\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: get_real_file('/lib64/libblkid.so') => '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\n/usr/lib/dracut/dracut-init.sh: line 298: 20949 Segmentation fault      (core dumped) $DRACUT_INSTALL ${dracutsysrootdir:+-r \"$dracutsysrootdir\"} ${initdir:+-D \"$initdir\"} -a ${loginstall:+-L \"$loginstall\"} ${DRACUT_RESOLVE_DEPS:+-l} ${DRACUT_FIPS_MODE:+-f} ${_hostonly_install:+-H} \"$@\"\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.dqLmOS/initramfs -a /lib64/libblkid.so\n...\n```\n\nAfter applying this patch:\n\n```\n> dracut -f -I \"/lib64/libblkid.so\" test.img\n...\ndracut-install: Handle '/lib64/libblkid.so'\ndracut-install: dracut_install('/lib64/libblkid.so', '/lib64/libblkid.so', 0, 0, 1)\ndracut-install: get_real_file('/lib64/libblkid.so')\ndracut-install: get_real_file: readlink('/lib64/libblkid.so') returns '/lib64/libblkid.so'\ndracut-install: ERROR: '/lib64/libblkid.so' is pointing to itself.\ndracut-install: ERROR: installing '/lib64/libblkid.so'\ndracut: FAILED: /usr/lib/dracut/dracut-install --debug -D /var/tmp/dracut.4w8FVL/initramfs -a /lib64/libblkid.so\n...\n```", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2c6b584e2227e68f54c8843925dcb73aefe87ac", "commit_date": "2023-08-10T06:19:57Z", "commit_message": "fix(dracut.sh): exit if resolving executable dependencies fails\n\nWe came across an issue where, when resolving executable dependencies, a call to\na buggy glib function in `dracut-install` was causing a termination with\nSIGSEGV, but dracut didn't stop the build process, which resulted in an\nunbootable initrd, due to missing required libraries.\n\n```\ndracut: *** Resolving executable dependencies ***\nxargs: /usr/lib/dracut/dracut-install: terminated by signal 11\ndracut: *** Resolving executable dependencies done ***\n```\n\nTherefore, stop the initrd creation in this case.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fffeadedf2170563cb7c0e0cb06994b0878ed455", "commit_date": "2023-08-05T16:35:59Z", "commit_message": "feat(dracut): add --sbat option to add sbat policy to UKI\n\nTake existing .sbat section from the uefi stub and merge it\nwith vmlinux .sbat (if it exists) and user-provided .sbat parameters\nusing the new --sbat option.\n\nFor some reasons, --update-section in objcopy does not resize the\n.sbat section, so remove the section from the stub and add it\nto the UKI as new one, to avoid having incomplete SBAT strings.\n\nSigned-off-by: Emanuele Giuseppe Esposito <eesposit@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af3076a1cb527cd7800b9aaeb368c91de1362c75", "commit_date": "2023-08-03T06:18:29Z", "commit_message": "ci: run all local tests on all containers (including Gentoo)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699d51c5dc222707053bb6e423559d56c1aa072f", "commit_date": "2023-08-01T10:48:55Z", "commit_message": "chore(dracut-init.sh): remove support for obsolete syntax\n\nOld syntax dracut modules had its check install installkernel\nscripts in dedicated shell files and did not support module\ndependencies.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "83eccc742ca932733b71007f78f0da28155f68ea", "commit_date": "2023-08-01T06:36:14Z", "commit_message": "ci: change the order of lint jobs as lint_shell is more likely to fail", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d55fa8239aebb8c77ba9a8a9db0fdedf8fa6232a", "commit_date": "2023-08-01T06:21:32Z", "commit_message": "ci: migrate from systemd-boot to systemd-utils in Gentoo container\n\nSee https://www-cdn.gentoo.org/support/news-items/2022-04-19-systemd-utils.html\n\nAlso no longer include open-iscsi for musl as it fails to compile, see\nhttps://bugs.gentoo.org/908587", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "403f4e8e15da4fdc84f3d32a0f231eeb9b2e4ed0", "commit_date": "2023-07-31T09:35:20Z", "commit_message": "ci: do not run test container generation on forked repos by default\n\nIf CONTAINER Github variable set, reenable the github action\nschedule.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16855765c8ad9d3237e6d98e59d0f8e6d4c7fc62", "commit_date": "2023-07-31T08:29:06Z", "commit_message": "refactor(install): log about missing firmware only once\n\nWhen attempting to locate a firmware path under each of the firwaredirs\nparent directories, Dracut logs an error for every missing path.\nInstead, only log the error if the firmware path isn't found under any\nof the firmwaredirs.\n\nSigned-off-by: David Disseldorp <ddiss@suse.de>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c46513fb21b51934d0862a234e55b759360917cd", "commit_date": "2023-07-31T07:15:14Z", "commit_message": "test: increase test VM memory from 512M to 1024M to avoid OOM killer", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a804945f27a0ccc2f69ae694599b1afec2afe8b1", "commit_date": "2023-07-26T15:49:35Z", "commit_message": "fix(integrity): do not require ls\n\nls is not used by the integrity dracut module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e278a965733f706a87756d0a4c38245a723b9e5c", "commit_date": "2023-07-26T15:49:20Z", "commit_message": "ci: match comment with code\n\nProperly document the time container generation runs daily.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e1e924550a23b7fbbca5f752f32a749631db116", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: automate release generation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a3758704ad1c7c9646cc844936b256076e139ea7", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "ci: allow the release generation script to compute the next release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5cdd4b3502a2774f9590fcb9d2e17fe29b3ea87d", "commit_date": "2023-07-26T11:27:13Z", "commit_message": "refactor(Makefile): improve AUTHORS and CONTRIBUTORS targets\n\nMake make rules more generic to be able to use them not just in\nmanual release process but also in CI release process.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6c9f403f1c219b8e2ff62011bfcc1b5e254b411a", "commit_date": "2023-07-24T15:22:42Z", "commit_message": "fix(dracut-init.sh): `module_check` method ignores `forced` option\n\nWhen the `module_check` method is called passing 3 arguments (all calls right\nnow), the `forced` option is ignored, so the `hostonly` variable is never unset\nbefore the module's `check` method is called.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4e6eaf9c61616a2f27ef6e91cc787888afecde4", "commit_date": "2023-07-24T11:52:49Z", "commit_message": "feat(systemd-rfkill): remove module\n\nThe rfkill service and socket provided by systemd will not be activated in the\ninitrd since https://github.com/systemd/systemd/commit/49c55abc", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f11e8fffc2db1f6f02d09207a1edbf1d898249d7", "commit_date": "2023-07-24T11:50:15Z", "commit_message": "fix(man): add missing initrd-root-device.target to flow chart\n\nThis target was added since https://github.com/dracutdevs/dracut/commit/d4efc0ae\nand is ordered between `basic.target` and `sysroot.mount`, see `man bootup.7`\n(`dracut-pre-mount.service` starts after).", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1b53bb6297d83940b52e806c01030e8f5035d9f2", "commit_date": "2023-07-24T11:40:40Z", "commit_message": "fix(dracut-init.sh): use the local _ret variable\n\nUse the local _ret variable when declared.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "273e481193daba3e7aa264f36d6721313c2ee84b", "commit_date": "2023-07-24T10:25:13Z", "commit_message": "ci: install util-linux-systemd and systemd-boot into openSUSE container\n\n- `findmnt` is installed by `util-linux-systemd`\n- `/usr/lib/systemd/boot/efi/linuxx64.efi.stub` is installed by `systemd-boot`", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbdab2d87fa49c7fdd08b274d8a21e6046360cad", "commit_date": "2023-07-24T09:08:42Z", "commit_message": "fix(dracut.sh): shellcheck warning SC1004\n\nAs stated in [1] it should work without literal backslash+linefeed.\n\n[1] https://github.com/koalaman/shellcheck/issues/1246", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "33a66ed04bdc30eccb172a0cd6dcc36d9d74f825", "commit_date": "2023-07-20T12:25:46Z", "commit_message": "fix(dracut.sh): use gawk for strtonum\n\nstrtonum is a gawkism and is not available in all awks, e.g. mawk. Use gawk\nto avoid failure.\n\nFixes: f32e95bcadbc5158843530407adc1e7b700561b1\nSigned-off-by: Sam James <sam@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6af3fcfd7f699ec4bb3f1e9ac71b7a9ebb9804b3", "commit_date": "2023-07-17T06:33:19Z", "commit_message": "fix(man): remove duplicate entry\n\nDRACUT_COMPRESS_BZIP2 was mentioned several times in the list.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "81d78c4e95c13b859befc6869365b3c069e2038e", "commit_date": "2023-07-13T16:51:48Z", "commit_message": "ci: release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52351cfa049a9594d539e6a5337d591e8039ab80", "commit_date": "2023-07-07T12:24:10Z", "commit_message": "feat(livenet): add memory size check depending on live image size\n\nFor writeable live images, the memory must hold the complete image.\nThat means it must be at least the size of the image plus some RAM\nnecessary to run processes.\nWith too small RAM, the OOM Killer steps in and makes the boot hang.\nThis patch lets the system go into the emergency shell instead.\n\nThe default minimum RAM after subtracting the live image size is set to 1G.\nThe parameter rd.minmem is added to modify this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15d4f60eb1f9f704df16287ccf7bc19755a73875", "commit_date": "2023-06-29T06:25:57Z", "commit_message": "chore(gentoo.conf): remove examples to avoid confusion\n\nThese examples are not used and not maintained and changing them\nwould not have an impact on Gentoo.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7ef1302715bead649625666f92eff434082de1f", "commit_date": "2023-06-28T11:53:14Z", "commit_message": "fix(modsign): load keys to correct keyring\n\nUntil now, 03modsign module was loading keys from /lib/modules/keys/* into the\ncurrent session keyring.\nThis change makes it add keys to the secondary trusted keyring. This works\nonly as long as added certificate is signed by key from the same keyring.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "179e1a992fc2b74d55a600bef152d5df43802104", "commit_date": "2023-06-26T13:56:15Z", "commit_message": "fix(dmsquash-live-autooverlay): specify filesystemtype when it is already known", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a71b905ef32654b2bbb6fbbc58e8aa3c89c967e6", "commit_date": "2023-06-26T13:54:04Z", "commit_message": "chore: remove git2spec.pl, it is no longer used", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa332cad7196b6e05b9e2f1810dc54bb38ed2ac", "commit_date": "2023-06-26T13:39:48Z", "commit_message": "fix(fs-lib): remove quoting form the first argument of the e2fsck call\n\nFix regression.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f5cc202e998eb22bda98920b8eeeb0f027ca0b6e", "commit_date": "2023-06-26T13:24:02Z", "commit_message": "fix(Makefile): remove leftover rpm build rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ffc766d23d9175673f722a3c81e7609496167845", "commit_date": "2023-06-26T13:16:12Z", "commit_message": "fix(Makefile): no longer upload to kernel.org", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b490f6f7d7cf1c322b47af4e44d7f238612fb260", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "feat(nvmf): add code for parsing the NBFT\n\nAdd code to parse the Nvme-oF Boot Firmware Table (NBFT) according\nto the NVM Express Boot Specification 1.0 [1]. The implementation in\ndracut follows a similar general approach as iBFT support in the\niscsi module.\n\nNBFT support requires two steps:\n\n(1) Setting up the network and routing according to the\n    HFI (\"Host Fabric Interface\") records in the NBFT,\n(2) Establishing the actual NVMe-oF connection.\n\n(1) is accomplished by reading the NBFT using JSON output from\nthe \"nvme nbft show\" command, and transforming it into command\nline options (\"ip=\", \"rd.neednet\", etc.) understood by dracut's\nnetwork module and its backends. The resulting network setup code\nis backend-agnostic. It has been tested with the \"network-legacy\"\nand \"network-manager\" network backend modules. The network setup\ncode supports IPv4 and IPv6 with static, RA, or DHCP configurations,\n802.1q VLANs, and simple routing / gateway setup.\n\n(2) is done using the \"nvme connect-all\" command [2] in the netroot handler,\nwhich is invoked by networking backends when an interface gets fully\nconfigured. This patch adds support for \"netboot=nbft\". The \"nbftroot\"\nhandler calls nvmf-autoconnect.sh, which contains the actual connect\nlogic. nvmf-autoconnect.sh itself is preserved, because there are\nother NVMe-oF setups like NVMe over FC which don't depend on the\nnetwork.\n\nThe various ways to configure NVMe-oF are prioritized like this:\n\n 1 FC autoconnect from kernel commandline (rd.nvmf.discover=fc,auto)\n 2 NBFT, if present\n 3 discovery.conf or config.json, if present, and cmdline.d parameters,\n   if present (rd.nvmf.discovery=...)\n 4 FC autoconnect (without kernel command line)\n\nThe reason for this priorization is that in the initial RAM fs, we try\nto activate only those connections that are necessary to mount the root\nfile system. This avoids confusion, possible contradicting or ambiguous\nconfiguration, and timeouts from unavailable targets.\n\nA retry logic is implemented for enabling the NVMe-oF connections,\nusing the \"settled\" initqueue, the netroot handler, and eventually, the\n\"timeout\" initqueue. This is similar to the retry logic of the iscsi module.\nIn the \"timeout\" case, connection to all possible NVMe-oF subsystems\nis attempted.\n\nTwo new command line parameters are introduced to make it possible to\nchange the priorities above:\n\n - \"rd.nvmf.nonbft\" causes the NBFT to be ignored,\n - \"rd.nvmf.nostatic\" causes any statically configured NVMe-oF targets\n   (config.json, discovery.conf, and cmdline.d) to be ignored.\n\nThese parameters may be helpful to skip attempts to set up broken\nconfigurations.\n\nAt initramfs build time, the nvmf module is now enabled if an NBFT\ntable is detected in the system.\n\n[1] https://nvmexpress.org/wp-content/uploads/NVM-Express-Boot-Specification-2022.11.15-Ratified.pdf\n[2] NBFT support in nvme-cli requires the latest upstream code (> v2.4).\n\nSigned-off-by: Martin Wilck <mwilck@suse.com>\nCo-authored-by: John Meneghini <jmeneghi@redhat.com>\nCo-authored-by: Charles Rose <charles.rose@dell.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f07117d68d07d52aa4ce8b4b2549a0cb716b7f4b", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): support /etc/nvme/config.json\n\nSince nvme-cli 2.0, configuration of subsystems to connect to is\nstored under `/etc/nvme` in either `discovery.conf` or `config.json`.\nAttempt discovery also if the latter exists, but not the former.\nAlso, install \"config.json\" if it's present on the root FS.\n\nAs before, \"rd.nvmf.discover=fc,auto\" will force either file to be ignored,\nand NBFT-defined targets take precedence if found.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "902f3a8f84643e4249b9bbb2e81d1b13eaf35364", "commit_date": "2023-06-26T07:45:42Z", "commit_message": "fix(nvmf): install 8021q module unconditionally\n\nIn NBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "17b8649eb931f3f4990ac8184fe23fc257df6fa5", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect even more kernel-install vars, plus style fixes\n\n- More verbose with KERNEL_INSTALL_VERBOSE=1\n\n- Use KERNEL_INSTALL_CONF_ROOT if defined\n\n- Fallback to /usr/lib/os-release if /etc/os-release does not exist\n\n- Fallback to \"Linux $KERNEL_VERSION\" if no PRETTY_NAME found\n\n- Styling fixes\n\nCo-authored-by: Antonio Alvarez Feijoo <antonio.feijoo@suse.com>\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a037634ad71711d29828214830ebdade0c449dbc", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(install.d): respect more kernel-install env variables\n\n- If kernel-install has defined a staging area for us\n(KERNEL_INSTALL_STAGING_AREA) install generated initrd/uki.efi there.\nThe actual install is then handled by 90-loaderentry.install or\n90-uki-copy-install.\n\n- Also skip regeneration if an uki.efi already exists.\n\n- Pass --kernel-image to dracut, this is required to generate an uki (uefi=yes)\n\n- Add --no-uefi argument to dracut rescue image generation, this ensures that\nit at least installs correctly. TODO: Rework 51-dracut-rescue.install to also\nwork with uki's.\n\nThis fixes installing a kernel with uefi=yes in dracut config and layout=uki\nin kernel/install.conf.\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "09d3ec1648822d84e95b274b60cb51b80e8f49f9", "commit_date": "2023-06-26T07:39:24Z", "commit_message": "fix(dracut.sh): also prevent fsfreeze for tmpfs\n\nKERNEL_INSTALL_STAGING_AREA is often on tmpfs, it cannot be frozen\n\nSigned-off-by: Andrew Ammerlaan <andrewammerlaan@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4000a1ecff208479254be8ce88de826099e2b685", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "fix(dmsquash-live): allow other fstypes\n\nUse det_fs to determine fstype and provide fallback instead of\njust calling blkid.\n\nMany other dracut modules (e.g. fs-lib, btrfs, mdraid) are already\nusing det_fs to determine fstype.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "995ac6f887e7cb5f8bdf2d636ed3b3e715691db4", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(DMSQUASH): add test for NTFS\n\nAdd a test case for mounting the root filesystem from\na squashfs image file that is store on an NTFS drive.\n\nThe test case is using ntfs3 module to mount the NTFS drive.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d96754eaa57657b3acfe4a50612a07da8365a0a2", "commit_date": "2023-06-26T07:37:19Z", "commit_message": "test(16): check for failure after each sub-test run\n\nThe test case had a bug where it only checked for\nat least one of the passing instead of all the subtests passing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfa408c9de7cd0b0af6099b6f1e0cce2e70ec467", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): make bluetooth rules more strict\n\nOnly warn if bluetooth kernel module is loaded\nat the time of initrd generation in hostonly mode.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e84d65c5b0191582e26fe9cc150d460652b34b33", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): add missing files\n\n- org.bluez.service dbus system service\n- bluetooth.service override conf", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8079ceafcac910d0c061830769866710c3e889a8", "commit_date": "2023-06-26T07:32:39Z", "commit_message": "fix(bluetooth): include it if Appearance matches the value assigned for keyboard\n\nFollowing the Bluetooth spec [1], Assigned Numbers Document, Rev. 2023-05-04,\nSection 2.6.3, Appearance Sub-category, the Appearance value defined for\nkeyboards is 0x03C1.\n\nThis value must be checked to include the bluetooth module in hostonly mode,\nbecause some Bluetooth keyboards do not set the Class attribute.\n\n[1] https://www.bluetooth.com/specifications/assigned-numbers/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0ecb038832038523a27f989d0eb82b45fb67861c", "commit_date": "2023-06-22T17:31:01Z", "commit_message": "fix(bluetooth): warn user instead of including it by default\n\nBluetooth module can result in a known race condition at boot.\nDiscourage its usage by default.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "765e69ce4d88a4ef6c1028cc117b3f233a285f0e", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-timedated): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d083021910f0633035a056e0541549efffec896", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-resolved): correct typo in override path", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0dc7ec96b81fec100a5ab948c12846b2b9910e6", "commit_date": "2023-06-22T15:08:15Z", "commit_message": "fix(systemd-networkd): correct typos in override paths", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2f685ecb4a968d5cd889803d5a248dab89473a", "commit_date": "2023-06-22T15:08:06Z", "commit_message": "fix(dracut-init.sh): correct check in `is_qemu_virtualized` function\n\nDo not redirect `systemd-detect-virt` to /dev/null, otherwise, the `vm` variable\nis always empty. This function was working only thanks to the following /sys\ncheck.\n\nReported-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ed765dd23e4c5616c82d1cbf8b4dbceaafc7647", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): do not require module via cmdline when --no-kernel\n\ninitrd built without modules would fail when it attempts to load a\nkernel module. (Use case scenario: kernel with built-in module.)\n\nsynthesize an the cmdline only when modules are truly installed.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b47a2efe91ab8be480925c04388200a3666812c", "commit_date": "2023-06-20T14:52:02Z", "commit_message": "fix(btrfs): add missing cmdline function\n\nOtherwise `dracut --print-cmdline` does not print the command line option added\nby the btrfs module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2ff7b4702c2098f7db63b0ffb118da0b5c0723c1", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: conditionally add tgt to Gentoo container\n\nThis commit allows to run test 30 and test 35 on a Gentoo.\n\nUse the newly introduced conditional for nfs4 support as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d06153f89666e9741f587408e10fb9983385bfa5", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: re-enable lvm on Gentoo container\n\nGentoo changed it's policy and now lvm needs to be enabled explicitly.\n\nSee https://www.gentoo.org/support/news-items/2022-11-19-lvm2-default-USE-flags.html\n\nNo need to install thin-provisioning-tools explicitelly, it is\npulled in as a dependency of the lvm2 package.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a9ecb5e3256645a4059e2d2c601971e32c7cc0ff", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: disable initramfs generation inside Gentoo container\n\nDisabling initramfs generation saves installing 4 additional packages.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5803ece5c25aa0daef4260edd01630a759c69efd", "commit_date": "2023-06-19T08:15:22Z", "commit_message": "ci: add extra packages for tests to Gentoo container\n\nAdd cryptsetup, multipath-tools and open-iscsi\nto the Gentoo container for tests 10, 14, 30, 35.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6fd6b36d5e16c12ba4a040ddcf7c5e7338c34146", "commit_date": "2023-06-19T07:31:55Z", "commit_message": "ci: switching the musl test to 18 (uefi)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af31df4b365f11cf1edd92914d2d83b3bd1588e8", "commit_date": "2023-06-16T23:48:14Z", "commit_message": "test(ISCSI): make test-30 use the test dracut modules\n\nIntroduce test_dracut that is meant to be shared between tests\nin test-functions.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcf4665bfcbc910c80eeb244353ca4b9a5254719", "commit_date": "2023-06-15T06:56:44Z", "commit_message": "ci: add dependencies to Debian container\n\n- add systemd-boot-efi for test 18\n- tgt is needed for test 30 and 35\n- nbd-server is needed for test 40\n- gawk dependency has been introduced by f32e95bcadbc5158843530407adc1e7b700561b1\n- install dracut instead of initramfs-tools to match actual usage\n- remove workaround for https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=962300\nas it is now fixed on Debian 12.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ec2c7e1aa4591f4eeb0bb85aa51bf1914e18ff78", "commit_date": "2023-06-14T14:52:30Z", "commit_message": "test(UEFI): add test case for UEFI boot\n\nInclude OVMF in containers if it is not already present.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1b3f88d500f16c007de5b2e48f9bdea30c45ec9", "commit_date": "2023-06-12T11:58:19Z", "commit_message": "docs: remove rd.lvm.snapsize and rd.lvm.snapshot", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4235c035ff1abad0c22125c26cab813c42b29da0", "commit_date": "2023-06-12T11:52:41Z", "commit_message": "fix(Makefile): execute command -v instead of which", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2f961a2bd7b5f5cbff6394d6be6eace15e236b7", "commit_date": "2023-06-12T06:04:54Z", "commit_message": "fix(network-legacy): typo\n\nSigned-off-by: lilinjie <lilinjie@uniontech.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f8f115a27b2bb63f0893262b6c951a187bac8ef", "commit_date": "2023-06-09T12:55:48Z", "commit_message": "fix(network,dbus): improve dependency checking\n\nDecouple implementation details of the backend\ndependencies from the meta module.\n\nCall check_module for each submodule instead\nof reimplementing sub-package dependencies\ninside the meta module itself.\n\nAdd missing NetworkManager binary to the\nnetwork-manager dracut module check.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cd6f683d634970112a29867137431d0d57f8c957", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-pcrphase): only include systemd-pcrphase-initrd.service\n\nThe only systemd-pcrphase related unit configured to run in the initrd is\nsystemd-pcrphase-initrd.service.\nBoth systemd-pcrphase.service and systemd-pcrphase-sysinit.service contain\n`ConditionPathExists=!/etc/initrd-release`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ef00735ae4fa19684598a8f7868e8b36b6bf5fe", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-tmpfiles): do not include systemd-tmpfiles-clean.timer\n\nThe systemd-tmpfiles-clean.timer unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eff2a9398120b29fd869eec991410e254d0dcbb8", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd-journald): do not include systemd-journal-flush.service\n\nThe systemd-journal-flush.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "925febf89d54c0bef9e3c8fda3b8e5b1f8ba30cd", "commit_date": "2023-06-08T13:54:38Z", "commit_message": "fix(systemd): do not include systemd-random-seed.service\n\nThe systemd-random-seed.service unit is configured not to run in the initrd\nsince https://github.com/systemd/systemd/commit/fe7f113c\n\nAlso, the systemd-random-seed-load.service does not exist since\nhttps://github.com/systemd/systemd/commit/c35b956d", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1588995ae0d9f984ad08f2d466f7a09646c6517", "commit_date": "2023-06-08T06:21:54Z", "commit_message": "fix(dracut.sh): correct path for UEFI stub on split-usr systems\n\nsystemd always installs the UEFI stub in ${prefix}/lib/systemd/boot/efi.\n\nOn split-usr systems, systemdutildir is ${rootprefix}/lib/systemd, which\nmakes dracut look in the wrong place.\n\nInstead, grab 'prefix' from systemd.pc and store it in 'systemd_prefix'.\n\nBug: https://bugs.gentoo.org/765208\nSigned-off-by: Mike Gilbert <floppym@gentoo.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa20bbb5b1c78963331fb6261763ea4c51ebc04f", "commit_date": "2023-06-07T16:15:36Z", "commit_message": "feat(dracut-init.sh): do not print by default if an udev rule is skipped", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5e036b157eb196ad4ae80d691ef8e9b203f0494", "commit_date": "2023-06-07T14:32:30Z", "commit_message": "test: move more makeroot dependencies into test-makeroot dracut module", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "afb5717e67727d49fae0d2a1a4169e5b247387f4", "commit_date": "2023-06-06T14:33:02Z", "commit_message": "fix(kernel-modules): add interconnect drivers\n\nMany devicetree based systems require interconnect drivers to function\nproperly. Include those in the initramfs.\n\nSigned-off-by: Andrew Halaney <ahalaney@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d244b316f29143f536254b8828365dbce4388148", "commit_date": "2023-06-06T13:40:41Z", "commit_message": "test(LVM-THIN): avoid thin pool size warning\n\nAvoid the following warning by reducing thin pool size\n\n> \"Sum of all thin volume sizes exceeds the size of thin pool\n> and the size of whole volume group.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "739b9e1b38abfa998caec35048ab367a0d19ed76", "commit_date": "2023-06-06T13:36:59Z", "commit_message": "ci: cleanup containers\n\nRemove /etc/profile.d/dracut-test.sh from test containers\nNo use to override default command\nRemove references to docker. These files work just fine\nwith podman as well.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae7cd94b346ac7f4ce7ca6c236d1ecdaba1171a3", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: add empty default test_cleanup implementation", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1346763ab7c031605cf74260e6846433f40f823", "commit_date": "2023-06-06T13:00:32Z", "commit_message": "test: move more common test code to test-functions\n\nMove KVERSION and USE_NETWORK definition to test-functions.\nAdd option for qemu_add_drive_args to initialize drive with size.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ac581ef66dd8f1939e771419824137aebbc8f66", "commit_date": "2023-06-06T06:51:58Z", "commit_message": "fix(resolve-deps): check the existing file\u2014not the source\n\nCheck for dependencies on the file actually installed, otherwise,\nsuch as when the shebang is a link not equal to the initramfs link,\nthe wrong file may be tested.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07af8d58745a121052cab49c70a476f02996da1e", "commit_date": "2023-06-05T15:27:27Z", "commit_message": "fix(dracut-lib.sh): remove successful finished initqueue scripts\n\nIf some \"finished\" initscripts keep failing, dracut will start\nprinting warnings after a while. But it will warn about all scripts\nin the finished initqueue, not only those that have failed. That\nmakes it difficult to identify the script that has actually\ncaused the failure.\n\nTo avoid this, delete finished initqueue scripts when they succeed.\nAlso, instead of returning as soon as one of the scripts fails, try\nall scripts, deleting those that succeed, and return failure if at\nleast one script failed.\n\nIf a previously deleted script is recreated by some other part of\nthe code, it will be re-run the next time the check_finished() function\nis called, and will be re-deleted if it still succeeds.\n\nThe only case where I see that this might cause issues is if some\ncondition needs to be tested over and over again, because it succeeds\nand then fails later (for example, a device showing up and then being\nremoved again). But I think that this is not the intended logic.\nIn general, when a device shows up or another \"finished\" condition\nis met, we assume that this condition will hold at least until the\ninitramfs switches root and exits. If all conditions are met, the\ncurrent code will also exit the initqueue without retrying any of\nthe conditions again.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7310a641e227aae446684baeb48f878c3299ff9f", "commit_date": "2023-06-05T14:24:58Z", "commit_message": "fix(udev-rules): remove firmware.rules", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc182ed8cf779220b95d654a9a2397e991f9c16c", "commit_date": "2023-06-05T13:53:09Z", "commit_message": "docs: change ext3 to ext4\n\nPromote ext4 instead of ext3 in the manual.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a26eec5cc1f384f71226066f13db89f92913f28", "commit_date": "2023-06-05T13:49:15Z", "commit_message": "fix(dracut.sh): silence the output of hardlinking files by default", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8a703aaa7bbfe4f078fef5a4318243db059b87b", "commit_date": "2023-06-05T12:31:21Z", "commit_message": "fix(github): exempt issues in a milestone", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07b49a3ed79a792cede7e6ee21be29aba07168bc", "commit_date": "2023-06-05T12:23:27Z", "commit_message": "fix(virtiofs): add virtio_pci kernel module to virtiofs\n\nfix #2357\n\nSigned-off-by: Sergio E. Nemirowski <sergio@outerface.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c08ae406bc7c7d815b0911d9429f400719afc2ae", "commit_date": "2023-05-25T11:37:03Z", "commit_message": "ci: install multipath-tools into openSuse container", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d118754333d203303007475512aee7eb18b989fe", "commit_date": "2023-05-19T13:34:04Z", "commit_message": "test: remove references of dhcpd3 from tests\n\ndhcp3-server is no longer supported by Debian\nand it is replaced by isc-dhcp-server.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1843c16cafff005f798c379225e97dce459bc3dd", "commit_date": "2023-05-18T08:57:23Z", "commit_message": "test: move test condition to test_check\n\nThis enables skipping the test instead of failing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "006890a2c3bfbaac58f1f9f863e48212388f0ec8", "commit_date": "2023-05-13T23:34:22Z", "commit_message": "test: upgrade to ext4\n\nMost users use ext4 instead of ext3 or ext2. Upgrade tests to ext4.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "86c8a5a7c2573645e67537fb9975efab808d42c9", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): rootfs-generator cannot write outside of generator dir\n\nAlthough it was already documented in systemd.generator(7) that generators must\nnot write to locations other than those passed as arguments, since\nhttps://github.com/systemd/systemd/commit/ca6ce62d systemd executes generators\nin a mount namespace \"sandbox\", so now the hooks created by the rootfs-generator\nare lost.\n\nThese hooks are created using the root= cmdline argument, so this patch moves\nthe creation of these hooks to a cmdline hook.\n\nFixes issue #2211\nFixes issue #2225", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "acfa793b5cc035ebd36b0c5ce97ba2fd89e5745c", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): check and create generator dir outside of inner function", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a7c04716a5e528d86135bf87745054f7cbd54469", "commit_date": "2023-05-10T12:10:01Z", "commit_message": "fix(dracut-systemd): do not hardcode the systemd generator directory\n\nThe normal directory is the first argument passed to the systemd generator,\nso use it instead of hardcoding /run/systemd/generator.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cd41ab5174945253d65b61433921d5a53276683", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: add more packages to allow testing more dracut containers", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "19c5439510f9d908c0cc48d5b4a321fa9b87f67a", "commit_date": "2023-05-10T12:04:08Z", "commit_message": "ci: simplify and sort", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6178a9d83ffad67fa371cef2ff3f5bbb337bc8b7", "commit_date": "2023-05-09T02:04:09Z", "commit_message": "fix(dracut.sh): handle imagebase for uefi\n\n* UEFI creation didn't handle the ImageBase data for the PE file\n  generation. Create an UKI thanks a stub file with a non zero BaseImage\n  logs some warning ans generate a bad file offset management. The efi\n  becomes unloadable.\n* This commit parse the PE file header, get the data and apply the\n  ImageBase on the objcopy command.\n\nFixes dracutdevs#2284\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67591e8855006eb02aa0ffab7349ab770e471473", "commit_date": "2023-05-08T04:58:09Z", "commit_message": "fix(dracut-functions): avoid calling grep with PCRE (-P)\n\nInvoking grep in Perl mode requires JIT'ing the Perl regex.\nThis can run into issues with SELinix policy which will generally try to\nlimit use of execmem in general purpose scripts. This occurs since the\nJIT'd code will live in executable  memory.\n\nThe PCRE only '\\K' command in the Perl REGEX can be replaced by a call\nto awk instead.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "260883d96f33e7aced3d00c85d0ebffcec1385a1", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut-initramfs-restore.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to debug the shutdown after explicitly\nresetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "971b302d70fbbfac3b6047654b7dc7ceeb1c17e7", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(lsinitrd.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to query the initrd content after\nexplicitly resetting the /etc/machine-id file.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "97fe09769d6a86492c39e0368f088f54f7c0fa6e", "commit_date": "2023-04-26T12:18:44Z", "commit_message": "fix(dracut.sh): handle /etc/machine-id empty or uninitialized\n\nHandle the case where the user tries to generate the initrd after explicitly\nresetting the /etc/machine-id file.\n\nFixes issue #2267", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48c2cb457b1472d09453be130797bc6e0e194f7c", "commit_date": "2023-04-26T12:15:24Z", "commit_message": "feat(systemd-creds): introducing the systemd-creds module\n\nIntroducing the systemd-creds module.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "71e391ebdc8f5d88447db1b6d475c813d82d5ffb", "commit_date": "2023-04-26T12:11:00Z", "commit_message": "fix(systemd-networkd): add missing conf files and services", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a62e895db9510f0fc4c47ee81b1436096eca4d64", "commit_date": "2023-04-14T04:40:04Z", "commit_message": "fix(dracut-functions.sh): convert mmcblk to the real kernel module name\n\nIn some x86_64 platforms such as Intel Elkhartlake, an issue of missing\nnecessary modules due to udevadm drivers field unmatch the real kernel module\nname is found:\n\n  $ udevadm info -a /dev/block/179:1\n\n  looking at parent device '/devices/pci0000:00/0000:00:1a.0/mmc_host/mmc0/mmc0:0001':\n    KERNELS==\"mmc0:0001\"\n    SUBSYSTEMS==\"mmc\"\n    DRIVERS==\"mmcblk\"\n    ....\n\nThe DRIVERS field, aka mmcblk will be given to instmods to install the\ncorresponding mmc_block.ko kernel module. However mmc_block.ko cannot be\nselected by string mmcblk, as a result, mmc_block.ko cannot be installed\nin hostonly-mode strict, which will fail to bootup the machine such as in\nkdump cases:\n\n  $ /usr/lib/dracut/dracut-install -D /var/tmp --kerneldir /lib/modules/$(uname -r)/ -m mmcblk\n  dracut-install: Failed to find module 'mmcblk'\n\nIn this patch, we will convert the string mmcblk to mmc_block, so the\nkernel module can be successfully loaded.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "297525c5c0781e13c4bf86aa42e81b9f166802ad", "commit_date": "2023-04-11T06:02:40Z", "commit_message": "fix(multipath): remove dependency on multipathd.socket\n\nThis reverts commit e39ff407eca1d783ab44093c44db5ee401ff5b1d, removes\nan incorrect `Also=` directive from multipathd.service.\n\n`Also=multipathd.socket` is not the correct behavior for a\nsocket-activated service. This directive has been removed upstream\nand dracut should do the same.\n\nThis fixes #2289, #2175 where in the cleanup hook running multipath\nbinary triggers activation of multipathd.service after it is stopped\nas dracut prepares to switch root in initrd-cleanup.service.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1300a930e76dbb380c7840760207296a1e58364c", "commit_date": "2023-03-30T15:56:53Z", "commit_message": "feat(lsinitrd): notify user on missing compressor\n\nProvide a notice to user if the required compressor package is\nmissing.  This rather than failing silently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a0d14d3bc691b318507c01708bc67d9e3b9d5109", "commit_date": "2023-03-29T06:11:36Z", "commit_message": "fix(99base): adjust to allow mksh as initrd shell\n\nUse printf instead of echo in str_replace() to preserve escapes.\nFind command paths while PATH includes /usr/sbin. (switch_root was\n  not found after the original environment is restored on Fedora.)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8b951d20d409b3647c85a9c6d064ccb15cdb5fe7", "commit_date": "2023-03-28T11:33:37Z", "commit_message": "fix(base): do not quote $CLINE in the `set` command\n\nThis is needed to correctly parse init arguments.\n\nFixes: 2fabaaa62dcfd31e593ca45e1374e55adae29d6b", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df2458a6b8aec70e74757ea7ae35f672a99ddc17", "commit_date": "2023-03-22T07:13:14Z", "commit_message": "fix(systemd-ac-power): correct systemd-ac-power binary path\n\n`systemd-ac-power` has been moved from `/usr/lib/systemd` to `/usr/bin/` since\nhttps://github.com/systemd/systemd/commit/251dc2f1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f32e95bcadbc5158843530407adc1e7b700561b1", "commit_date": "2023-03-20T11:56:24Z", "commit_message": "fix(dracut.sh): use dynamically uefi's sections offset\n\n* Uefi section are creating by `objcopy` with hardcoded sections\noffset. This commit allow to have the correct offset between\neach part of the efi file, needed to create an UKI. Offsets\nare simply calculated so no sections overlap, as recommended\nin  https://wiki.archlinux.org/title/Unified_kernel_image#Manually\nMoreover, efi stub file's header is parsed to apply the correct\noffsets according the section alignment factor.\n* Remove EFI_SECTION_VMA_INITRD, no need anymore as initrd\nsection offset dynamically calculated\n\nFixes dracutdevs#2275\n\nSigned-off-by: Valentin Lefebvre <valentin.lefebvre@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b4774239989257999053033fc92cded7803896", "commit_date": "2023-03-06T10:45:47Z", "commit_message": "fix(lvmthinpool-monitor): activate lvm thin pool before extend its size\n\nThe state of lvm thin pool may change into inactived state when kdump into\n2nd kernel. As a result, lvextend will fail to extend its size. For example:\n\nIn 1st kernel:\n\n  $ lvs\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-a-tz-- 300.00m thinpool        70.54\n  thinpool vg00       twi-aotz-- 236.00m                 89.67  12.50\n  ...\n\nIn 2nd kernel:\n\n  LV       VG         Attr       LSize   Pool     Origin Data%  Meta%\n  vol      vg00       Vwi-aotz-- 300.00m thinpool        70.54\n  thinpool vg00       twi---tz-- 236.00m                 89.67  12.50\n  ...\n\nAnd the lvextend failing log:\n[  8.483878] start-thinpool-monitor[590]: lvextend using policy requires the thin pool to be active.\n\nIn this patch, we will first activate lvm thin pool before calling lvextend\nduring kdump.\n\nSigned-off-by: Tao Liu <ltao@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aca51203609954b38b41ea303a4376cbce061150", "commit_date": "2023-03-01T08:16:33Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.5.0 to 0.6.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.5.0 to 0.6.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.5.0...v0.6.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e780720efe6488c4e07af39926575ee12f40339", "commit_date": "2023-02-28T07:34:40Z", "commit_message": "fix(dmsquash-live): restore compatibility with earlier releases\n\nFollow-up to 40dd5c90e0efcb9ebaa9abb42a38c7316e9706bd .", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1ddcb137ea2a4d79491ff94f1f7802dcaa7ac381", "commit_date": "2023-02-27T13:26:40Z", "commit_message": "fix(dracut.sh): kmoddir does not handle trailing /\n\nFixes https://github.com/dracutdevs/dracut/issues/2236\n\n+(/) only works in bash interactive mode. Using any non-interactive\nbash run simply doesn't remove anything.\n\nThe solution is copied from dracut-lib.sh, trim().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d554d9b98333372aeb20fd153a42c8171979825", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old eudev specific rule\n\nRevert 64fb0900cbc47804b4225287e4622063169db360, no longer\nneeded.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d648bf805a27cbf1920f0437606c9ffb2684ec18", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old redhat specific rule\n\nThe 40-redhat.rules rule has been removed upstream in 2010.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6a33e677aca49dd81826949b61acb945d672ba84", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old edd_id extra rules\n\nThe 61-persistent-storage-edd.rules rule has been removed upstream\nin 2012.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1edc41af979e1c1097be082c357f7a4895fbbad2", "commit_date": "2023-02-27T10:24:52Z", "commit_message": "fix(udev-rules): remove old debian specific rules\n\nThe last Debian release that carried 91-permissions.rules is wheezy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f9ad06873eb50754611ece2c18a0cd0b22336c0", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "feat(test): nfs_fetch_url test into nfs test\n\nThis is to check the behavior of nfs_fetch_url() in nfs-lib.sh.\nnfs_fetch_url() calls nfs_already_mounted() internally.\nA file /nfs/client/root/fetchfile is on NFS server, which is fetched\nfrom clients for testing with nfs_fetch_url().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "966b6cec1bebd91ddd0f85c357f7ab57d3213f51", "commit_date": "2023-02-24T15:06:05Z", "commit_message": "fix(url-lib.sh): nfs_already_mounted() with trailing slash in nfs path\n\nnfs_already_mounted() doesn't work when the installation ISO and kickstart file on a same NFS share are specified with inst.repo and inst.ks boot parameter as below.\n\n   inst.repo=nfs:192.168.1.1:/home/data/rhel9.iso inst.ks=nfs:192.168.1.1:/home/data/ks.cfg\n\n   NOTE: /home/data is configured for nfs share on 192.168.1.1\n\nOne problem is a file (not a directory) was passed into nfs_already_mounted().\nnfs_already_mounted() is the function to judge if the given directory is already mounted.\nSo, filepath should be passed in nfs_fetch_url().\n\nThe other problem is about the trailing slash in the nfs path in /proc/mounts.\n\nThe /proc/mounts has an entry after nfs mount of inst.repo.\n\n   192.168.1.1:/data/   /run/install/isodir  nfs  ro,relatime,<snip>\n\nIn this case, nfs_already_mounted() returns \"/run/install/isodir//home/data/ks.cfg\" wrongly. The following is from the log.\n\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@156(nfs_fetch_url): nfs_already_mounted 192.168.122.1 /home/data/ks.cfg\n[   14.556279] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@137(nfs_already_mounted): local server=192.168.122.1 path=/home/data/ks.cfg s= p=\n...\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@140(nfs_already_mounted): '[' 192.168.122.1 = 192.168.122.1 ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@141(nfs_already_mounted): '[' /home/data/ks.cfg = /home/data/ ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@143(nfs_already_mounted): str_starts /home/data/ks.cfg /home/data/\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/dracut-lib.sh@51(str_starts): '[' ks.cfg '!=' /home/data/ks.cfg ']'\n[   14.654966] localhost.localdomain dracut-initqueue[1282]: ///lib/url-lib.sh@144(nfs_already_mounted): echo /run/install/isodir//home/data/ks.cfg\n...\n[   14.658069] localhost.localdomain dracut-initqueue[934]: //lib/url-lib.sh@156(nfs_fetch_url): mntdir=/run/install/isodir//home/data/ks.cfg\n\nThis function doesn't expect the trailiing slash of the nfs path in /proc/mounts, so it should be removed before processing it.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9bcd4d2c88985fa05e98b100e43d5630bdf0a6e", "commit_date": "2023-02-22T20:49:56Z", "commit_message": "ci: use CodeQL instead of LGTM\n\nAs LGTM is going to be shut down by EOY[0], let's move the code scanning to\nCodeQL as recommended. Thanks to GH integration the results from such\nscans will be shown both in the respective PR and in the Security ->\nCode Scanning tab[1].\n\n[0] https://github.blog/2022-08-15-the-next-step-for-lgtm-com-github-code-scanning/\n[1] https://github.com/dracutdevs/dracut/security/code-scanning", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ae88e029c6ad20248d229bebd7e8f10d3d094988", "commit_date": "2023-02-22T20:20:52Z", "commit_message": "feat(dracut): use log level indicator in console output\n\nAlso, use the same format in messages printed to console before dracut-logger\nis sourced.\n\nFixes issue #1065", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "df381b7e0cd95f78e40ac70f0f3c96a2fa8dd189", "commit_date": "2023-02-21T20:34:49Z", "commit_message": "feat(kernel-modules): driver support for macbook keyboards\n\nDiscussed in: https://bugzilla.redhat.com/show_bug.cgi?id=2166209", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "131822e26d76a3ce2028e9a545be2af066805629", "commit_date": "2023-02-21T20:05:44Z", "commit_message": "fix(dracut-install): prevent possible infinite recursion with suppliers\n\nDuring search for fw_devlink suppliers, it's possible to encounter a\nsituation where supplier A depends on supplier B, and supplier B has a\nparent node that depends on supplier A. This leads to an infinite\nrecursion.\n\nTo fix this, make sure suppliers are only processed once.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f3a7172db5dc02a6b8620a31ec36a5a3c1b540d4", "commit_date": "2023-02-16T20:15:37Z", "commit_message": "build: remove rpm spec file and build rules\n\nAs discussed in issue #2204 this patch removes the dracut.spec file from\nthe repository.  The advantage of this patch is that it creates a\ndracut-version.tar.xv file that can be more easily consumed by the\ndownstream distributions because there's no rpm spec file included in\nthe distribution.\n\nTested with a downstream rpm spec fiie:\n\n```\ncd dracut\nVERSION=`git describe --abbrev=0 --tags --always`\nmake clean\nmake dist\ncp dracut-${VERSION}.tar.xz ../\ncd ..\n\nxz -d -v dracut-${VERSION}.tar.xz\ntar rf dracut-${VERSION}.tar dracut.spec\nxz -9 dracut-${VERSION}.tar\n\nrm -rf rmpbuild\nmkdir -p rpmbuild/{BUILD,BUILDROOT,RPMS,SOURCES,SPECS,SRPMS}\nrpmbuild -ta --define \"_topdir `pwd`/rpmbuild\" -v dracut-${VERSION}.tar.xz\n```\n\nFixes issue #2204", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "89269d239f0539b7bd4339ba98a0d1b188b59962", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): add UFS drivers\n\nAdd ufs to the list of block drivers as it is used in modern embedded\nsystems.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "87a76dbb578aff473e690857d1b714eacd92b9ec", "commit_date": "2023-02-15T11:59:13Z", "commit_message": "fix(kernel-modules): use modalias info in get_dev_module()\n\nWhen calling dracut with '--hostonly-mode=strict', get_dev_module() gets\ncalled on the system's block devices to find the required drivers. The\ndriver name is retrieved using udevadm. However, the driver name\nreturned by udevadm is not necessarily the same as the module name.\nThis is the case for the Qualcomm UFS driver: udevadm returns\n'ufshcd-qcom' while the module name is 'ufs-qcom', so dracut-install is\nnot able to find the module afterwards.\n\nTo solve this, make get_dev_module() also return the module alias info\nfrom the modalias files contained in the sysfs directories parsed by\nudevadm.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c5dca3d68915cef077fda2bc5292e12f82cf6dd6", "commit_date": "2023-02-15T02:14:27Z", "commit_message": "fix(crypt): add missing libraries\n\nAdd missing libraries, closes #2137", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "61ceb35f4079ae8d0ee1635b56dd8bc88149b4a8", "commit_date": "2023-02-14T15:56:34Z", "commit_message": "revert(network-manager): avoid restarting NetworkManager\n\nThis reverts commit 77630365aed201a729c73a9ffda0733a75f3fee4.\n\nIts commit message states:\n\n  On EL8.3 the NetworkManager keep restarting even if it exits successfully\n  while waiting for Clevis to unlock. This patch ensures NetworkManager runs\n  only once in initrd.\n\nYes; NetworkManager is run multiple times, so that it's able to\nconfigure interfaces that haven't been seen previously (because bus was\nslow to scan or device took time to initialize).\n\nIt's not clear what problem was the original commit trying to fix.\nI suspect there was no problem, just a misunderstanding.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a6dd5bfb9a514a3bf650cc1e8d4311c05e9b968c", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle sbsign errors for UEFI builds\n\n`sbsign` does not issue any error if there is not enough disk space to create\nthe signed file using its `--output` option. So, verify the signed image after\nits creation using `sbverify`.\n\nFixes issue #2197", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8602df705879100be17e93fe56f5cbeb6216248f", "commit_date": "2023-02-13T18:45:51Z", "commit_message": "fix(dracut.sh): handle out of space error for UEFI builds\n\nIf `cp` fails, do not continue, print an error and exit, like it's already\nbeing done for non-UEFI builds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "726d56ca0a23e5a39de5f809da2d20ce7985d437", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): IPv6: don't wait for RA for static IPv6 assignments\n\nThis patch reverts commit\nc603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\").\nIt's not generally correct wait for a default route to be established\nfor an interface, or to wait for \"proto ra\" routes in general.\nFor example, if the system is a router itself, it will receive no\nRAs. In isolated networks, no gateway may be advertized, either.\nThis is similar in spirit to 76f6566 (\"Revert \"wait for IPv6 RA\nif using none/static IPv6 assignment\"\")\n\nWhatever c603419 (\"wait for IPv6 RA if using none/static IPv6 assignment\")\nwas supposed to achieve, it should be done differently.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b074216be93dc4512b76fcd6b77a727aef11b22b", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network-legacy): always include af_packet\n\nFor static IPv4 configurations, we use arping to check for duplicate\nIP addresses. arping requires the af_packet module to work, and if arping\nfails, the IP address will not be set and booting will fail.\naf_packet may not be loaded / required in the running system, for example if\nthe system had been booted in an IPv6 configuration, or if it had been\nmanually unloaded. Make sure it's included in initramfs in hostonly mode, too.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ff255a4488f63cf84179d4572f44fe3a1bd29ec", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(network): don't assume prefix length 64 by default\n\nAssuming a default prefix length of 64 by default if no explicit\nprefix length is given is wrong and known to cause connectivity\nproblems in some networks. A prefix length of 128 should be assumed\nin this case.\n\nSee https://www.rfc-editor.org/rfc/rfc5942 (specifically section 5)\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=684009", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3b65a493a635a3f85f9e65c4337cd4c144ff8fc", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): prefix syntax for static iBFT IPv6 addresses\n\nibft_to_cmdline() formats a static IPv6 address like this\n(without peer, gateway, hostname):\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10/64]:::::ibft0:none\"\n\nThis means that the \"mask\" field (4th) is left blank. When this is\nparsed later by parse-ip-opts.sh, it bails out with the error\nmessage \"Sorry, automatic calculation of netmask is not yet supported\".\n\nparse-ip-opts.sh rather expects the prefix in the 4th field:\n\n  ip=\"[fd09:9a46:b5c1:1fe:1::10]:::64::ibft0:none\"\n\nThis syntax will be correctly transformed to the command\n\n  ip addr add fd09:9a46:b5c1:1fe::10/64 dev ibft0\n\nThis patch fixes the formatting of the \"ip=\" line in ibft_to_cmdline().", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa5d9526eca23f642fd623d2c857fd8f9930b83d", "commit_date": "2023-02-13T15:17:45Z", "commit_message": "fix(iscsi): install 8021q module unconditionally\n\nIn iBFT setups, VLAN can be configured in the firmware.\nAdd the 8021q module in hostonly mode even if VLAN is currently\nnot used to be prepared for such configuration change.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3de4c7313260fb600507c9b87f780390b874c870", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "feat(dracut-install): add fw_devlink suppliers as module dependencies\n\nDracut currently finds kernel module dependencies using two methods:\ndepmod and softdeps. However, these are often insufficient on embedded\nsystems where a lot of driver dependencies are only described in the\ndevice tree. This is often the case for low-level devices such as\nclocks, regulators, pinctrls, etc.\n\nThis patch allows dracut to find those device tree dependencies, by\nparsing the sysfs supplier nodes populated by fw_devlink.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0c3b683270dbce933ef3d2f89d99dea7314ebf6", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add Hashmap cleanup function\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ea8cf5f56df2e2808863188450488835c17e59d", "commit_date": "2023-02-13T13:29:12Z", "commit_message": "refactor(dracut-install): add function to install one dependent module\n\nThis is prep work for adding support for fw_devlink suppliers\ndependencies.\n\nSigned-off-by: Adrien Thierry <athierry@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88aeca2a381a657787c4200e9179c3ff70b057e9", "commit_date": "2023-02-13T12:12:21Z", "commit_message": "chore(deps): bump luizm/action-sh-checker from 0.2.2 to 0.5.0\n\nBumps [luizm/action-sh-checker](https://github.com/luizm/action-sh-checker) from 0.2.2 to 0.5.0.\n- [Release notes](https://github.com/luizm/action-sh-checker/releases)\n- [Commits](https://github.com/luizm/action-sh-checker/compare/v0.2.2...v0.5.0)\n\n---\nupdated-dependencies:\n- dependency-name: luizm/action-sh-checker\n  dependency-type: direct:production\n  update-type: version-update:semver-minor\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16931f5236b44078ab2bbc60d7b3bef2ba4507d7", "commit_date": "2023-02-13T12:08:36Z", "commit_message": "chore(shfmt): update to pass with shfmt v3.5.1", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d777dd3dab50c2e383c00751fae5d9593339315f", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): move fips-boot script to pre-pivot\n\nThis is needed in s390x to be able to use the same `boot=` command line\nparameter in grub and zipl. Otherwise, `boot=` would need to be added only to\n`grub.cfg` (not `/etc/default/grub` and thereby not to `/boot/zipl/config`).\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab26ad2c2ab4a5884e392951998d40829f130387", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): only unmount /boot if it was mounted by the fips module\n\nThe `do_fips` method should only unmount /boot if it was mounted in the\n`mount_boot` method.\n\nIn addition, now the `mount_boot` method checks if /boot is already mounted.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "68d0653e35f79e78b75a71c122c091ba4f4d5759", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "feat(fips): add progress messages\n\nThis allows to better understand at what point a FIPS integrity test failed.\n\nSigned-off-by: Raymund Will <rw@suse.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fabbb6412b70bdd1aac5279b90b9a23a267ffc5", "commit_date": "2023-02-13T12:00:01Z", "commit_message": "fix(fips): do not blindly remove /boot\n\nThe `mount_boot` method called from fips-noboot.sh in the pre-pivot hook blindly\nexecutes `rm -rf /boot` if there is no `boot=` command line parameter, without\nfirst checking that /boot is not already mounted by other means.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c95075e2c792cdb0e18aac6300ae8dc0dd6a6c1b", "commit_date": "2023-02-13T11:58:52Z", "commit_message": "chore(base): remove support for <udev-176\n\nThis reverts 579238a3acd0317d7124a76dc489f19d9471fb63.\n\nKeep the support for prepare_udev_rules for out-of-tree\ndracut modules and issue a deprecation warning.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cef3f28e15a834284786c79f108b7c42481f96", "commit_date": "2023-02-13T11:18:58Z", "commit_message": "fix(plymouth): remove /etc/system-release dependency\n\n/etc/*release files should not be managed in the plymouth module\nand more importantly dracut assumes /etc/os-release not\n/etc/system-release", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3a7112bef794e2f2dd741ec2c74fa9cb9117651", "commit_date": "2023-02-13T10:57:11Z", "commit_message": "feat(resume): also consider resume= in the cmdline as enabling hibernation\n\nDon't consider noresume to disable, that's a single-boot flag\n\nCloses #924", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d8a9a73df9688989b5e47469e74ad5aa666a5bfb", "commit_date": "2023-02-13T10:54:41Z", "commit_message": "fix(network-manager): add \"After\" dependency on dbus.service\n\nDuring shutdown, there is no ordering dependency between the nm-initrd service\nand the D-Bus daemon, and so the latter can be stopped before. This causes\nissues to NetworkManager, especially when team interfaces are present because\nNM will see teamd dropping from the bus and will try to reactivate the\nconnection.\n\nAdd a \"After\" dependency to make sure the D-Bus daemon is stopped after NM on\nshutdown.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1597076887c6744b9ec69c0ac44a1134fd700700", "commit_date": "2023-02-13T10:51:42Z", "commit_message": "fix(fido2): libfido2.so depends on libz.so\n\nCo-authored-by: cs50guy2", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9a531ca044e3cfe9b670e7e4d59a7bae5bafec1e", "commit_date": "2023-02-13T10:21:53Z", "commit_message": "fix(dracut-install): continue parsing if ldd prints \"cannot execute binary file\"\n\nWhen the kernel is compiled without IA32_EMULATION and the glibc 32-bit library\nis installed on the system, `ldd` prints the following output:\n\n```\n> ldd /usr/lib64/libfido2.so.1.12.0\n/bin/ldd: line 162: /lib/ld-linux.so.2: cannot execute binary file: Exec format error\n\tlinux-vdso.so.1 (0x00007ffd627fa000)\n\tlibcbor.so.0.9 => /lib64/libcbor.so.0.9 (0x00007f18d799f000)\n\tlibcrypto.so.3 => /lib64/libcrypto.so.3 (0x00007f18d7400000)\n\tlibudev.so.1 => /lib64/libudev.so.1 (0x00007f18d7971000)\n\tlibhidapi-hidraw.so.0 => /lib64/libhidapi-hidraw.so.0 (0x00007f18d7968000)\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f18d794e000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f18d7205000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f18d79f9000)\n> echo $?\n0\n```\n\nThe `ldd` script uses the following code to resolve dependencies:\n\n```\nRTLDLIST=\"/lib/ld-linux.so.2 /lib64/ld-linux-x86-64.so.2 /libx32/ld-linux-x32.so.2\"\n...\nRTLD=\nret=1\nfor rtld in ${RTLDLIST}; do\n  if test -x $rtld; then\n    verify_out=`${rtld} --verify \"$file\"`\n    ret=$?\n    case $ret in\n      [02]) RTLD=${rtld}; break;;\n    esac\n  fi\ndone\n```\n\nSo, if the 32-bit library fails, the 64-bit library may work, so don't stop\nparsing the `ldd` output unconditionally when the message \"cannot execute binary\nfile\" is printed.\n\nFixes issue #2190", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b530f26368d723dcc34fb67d687c60009b06412", "commit_date": "2023-02-13T07:56:39Z", "commit_message": "fix: make iso-scan trigger udev events\n\nFixes #2183", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ab07f6d1ee3cda8c735e6235e5da4c74913e5184", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "ci: enable test 60\n\nIt's hopefully stable now.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d7c0ffbd65c8d5c9fef559a51a2405a28c6f6a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): rename test 60\n\nThe test *also* checks the generation of ifcfg files, but it's primarily a test\nfor bonding, bridging and VLANs. Update the name to reflect this.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e846cb1320e32db1e3d200743f8fc08732d4c9e", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): improve test 60\n\nThe test has the following issues:\n\n - it sets up a bridge on net1 and net2, however those interfaces\n   are part of the same qemu hub and this causes switching loops;\n\n - the bonds are created on two interfaces but only one has a DHCP server, and\n   this causes random failures;\n\n - the checks performed on the client are pretty limited.\n\nRework the test:\n\n - avoid the bridging loop;\n\n - update the topology to use a bond interface on the server side;\n\n - introduce additional checks on the client: start a ping and check that ports\n   are properly attached to bonds and bridge;\n\n - make it possible to return module-specific information from the client; in\n   the future this can be added for example to check that the NetworkManager or\n   systemd-networkd configuration is correct.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f44740f2c234ddb275e0a11e23d45e3678eb4a0", "commit_date": "2023-02-13T07:53:39Z", "commit_message": "fix(test): remove leftover link file from server rootfs\n\n01-client.link must be removed, otherwise it conflicts with 01-server.link that\nsets a different naming policy.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9fb64d96ab7a7e19a7940e56e9bc0da863b46386", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): assign fixed address to bridge\n\nKernel uses the lowest MAC of all attached ports as MAC address of the\nbridge. However, after the first port gets attached, DHCP can be started on the\nbridge and it will use the MAC (and client-id) of the first port; so, the MAC\nused for DHCP depends on the order of attachment of ports, which is not\nguaranteed to be stable in general.\n\nTo make sure that the DHCP server always sees the request from the MAC of\nenp0s1, assign that MAC to the bridge from the kernel command line.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "462d9b9254d4386e9eac267547ee4e8cd2487c3d", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): bump DHCP timeout to 30 seconds\n\nThe current interval (3 seconds) is very low and causes sporadic failures\nespecially when DHCP is run on a bridge (TEST-50-MULTINIC); in that specific\ncase, interfaces take time to be attached to the bridge and before enp0s1 is\nattached all DISCOVER packets are lost.\n\nBump the timeout to a more robust value of 30 seconds.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "da959483333c6ab83e4cdef837130eacec6b35d7", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): remove check on dhclient support for --timeout\n\nThe network-legacy dracut module already ignores the DHCP timeout option when\nit's not supported by dhclient. Other network modules don't use dhclient for\nDHCP.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d3993c7dabdd37c54a991c6ad9ea38365598d16a", "commit_date": "2023-02-07T13:40:11Z", "commit_message": "fix(test): adapt multinic test for new NetworkManager versions\n\nSince version 1.42, NetworkManager creates a \"external\" connection for the\nloopback interface. Ignore that connection in the multinic test.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70aeb4c1a56027bc2fe5570c080d96625b377c94", "commit_date": "2023-02-06T12:19:58Z", "commit_message": "fix(install): do not undef _FILE_OFFSET_BITS\n\n_FILE_OFFSET_BITS is a feature test macro to determine largefile\nsupport. Usually its set to 64 on systems supporting LFS. Its also\nneeded to be set to 64 for supporting 64bit time_t on glibc on 32bit\nsystems. If its undefined explicitly, then 64bit time_t can not be\nenabled.\n\nSigned-off-by: Khem Raj <raj.khem@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "18c5fb6ae0e32f11596cb365a73946eb1c9ce5e5", "commit_date": "2023-02-02T07:26:43Z", "commit_message": "chore(deps): bump docker/build-push-action from 3 to 4\n\nBumps [docker/build-push-action](https://github.com/docker/build-push-action) from 3 to 4.\n- [Release notes](https://github.com/docker/build-push-action/releases)\n- [Commits](https://github.com/docker/build-push-action/compare/v3...v4)\n\n---\nupdated-dependencies:\n- dependency-name: docker/build-push-action\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4a5c90ab993d2559720c2d4023d99ad43df00a", "commit_date": "2023-02-02T07:13:30Z", "commit_message": "fix(dracut.sh): --sysroot option broken if global variables not set in conf\n\nWhen `$dracutsysrootdir` is set and references an existing directory, the\ninternal global variables are never set, unless their value is assigned via\nconfiguration file.\n\nThe simple fix would be turn all:\n\n```\n[[ -d $dracutsysrootdir$var ]] || var=value\n```\ninto:\n```\n[[ -z $var || ! -d $dracutsysrootdir$var ]] && var=value\n```\n\nBut this patch also includes a refactoring, removing duplicate code using the\nsame `set_global_var` function to set and export global variables, and improving\nreadability.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "823de8fe5337cd7b8b4ce4dec3675ea44b723706", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "refactor(dracut-init.sh): remove redundant \"dracut\" from \"dracut module\" prints\n\nIn a similar fashion than \"Including module\" prints.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a10078a5c3ce9adf309962634e71ae6e186f2621", "commit_date": "2023-02-02T07:11:24Z", "commit_message": "feat(dracut-init.sh): specify if a module cannot be found or cannot be installed\n\nDo not print the same error message for both situations.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1f84ff882fe272ef0185a284eee82e89735c833d", "commit_date": "2023-01-31T07:44:57Z", "commit_message": "fix(lsinitrd.sh): handle filenames with special characters\n\nPrinting and unpacking of specific files passed as arguments does not work if\ntheir filenames contain special characters with a hexadecimal character escape\n(\\x), which is often the case for systemd device units.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eb75861c2a1c05eb142616da1891a7fa5a2a34e1", "commit_date": "2023-01-27T15:55:03Z", "commit_message": "fix(dracut-systemd): remove unused argument\n\nThe `generator_wait_for_dev` function of the dracut rootfs systemd generator\nonly uses the first argument. Moreover, RDRETRY is unset at this point.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a109c6123ffa8506379b73a4b1aeee4d0b67866d", "commit_date": "2023-01-27T15:16:35Z", "commit_message": "feat(lvm): always include all drivers that LVM can use\n\nThis patch adds all the kernel modules that might be needed by LVM, to avoid\nhaving to rebuild the initrd in hostonly mode after a dynamic change that\nrequires new drivers to boot.\n\nFor example, LVM allows to dynamically convert a linear logical volume to a\nRAID-1 type (`lvconvert --type raid1 vg/lv`), which, in hostonly mode, will\nrequire the user to manually rebuild the initrd again to include the new RAID\ndrivers in use, otherwise the system will fail to boot.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aafcab935b7e84cea8fc3f084b6935f87b2b8a5", "commit_date": "2023-01-27T08:03:54Z", "commit_message": "fix(dracut-init.sh): correct typo in comment", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cda6b00abce0e68e353ab929b86cfaf45c3dc1c8", "commit_date": "2023-01-27T08:02:57Z", "commit_message": "fix(dracut.sh): correct --help and --version exit codes\n\nBoth are valid options that cause regular program termination without errors, so\ndracut should return 0.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e971c788f0a4a494eedf291b988d698849c36c22", "commit_date": "2023-01-27T08:01:50Z", "commit_message": "refactor(virtiofs): remove exit after die\n\nThe `die` function already ends with `exit 1`.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c16c76fb51683cd70c3643b122685b7cdb4178c", "commit_date": "2023-01-19T13:22:22Z", "commit_message": "ci: fix Gentoo container used for testing", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e3e8108eb75247249ec05eaba943c3f48637c04b", "commit_date": "2023-01-06T20:07:49Z", "commit_message": "fix(crypt-gpg): do not use always --card-status\n\nIf no GPG smart card is used then the card-status breaks the decryption\nof the keyfile. Therefore, use the card-status only if a smart card is\nused to decrypt the keyfie.\n\nFixes issue #2004", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f6bb4a36b763ae6de0e1aee55bc95d3d3f3ec1e1", "commit_date": "2023-01-06T04:49:37Z", "commit_message": "docs(RELEASE.md): update release docs\n\n- Remove the reference to Harald's git ci alias\n- Added a missing push to master\n- Added a warning not to add the Rendered View entry from the NEWS.md to\n  the tags. ( Github adds that to the release with no way of removing it, see 058 )\n- Added validation of the new tag ( Good practice )\n- Clarify milestone handover.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b060945c45a938af8ef53010272eb4ac3acc12df", "commit_date": "2023-01-04T09:18:08Z", "commit_message": "ci: disable test 50\n\nTest 50 (MULTINIC) seems to be the only test that prevents\nthe project from having an all passing continuous integration\ntest suite.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88fe9205de49c12ed8eaac2ca227a72830750955", "commit_date": "2023-01-04T05:38:58Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "93339444361303c15e26b6ff5cea6ef99ad0b3e0", "commit_date": "2023-01-03T14:09:12Z", "commit_message": "fix(dmsquash-live): live:/dev/*\n\nfix a bug introduced in 71cfa2e22\n\nmake sure root is set correctly for both of the following cases\n - \"root=live:/dev/*\"\n - \"rd.live.image root=/dev/*\"", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "10cf8e46f43a7a2094e4d861c1296db6af0e0fa1", "commit_date": "2022-12-30T14:13:00Z", "commit_message": "fix(load_fstype): avoid false positive searchs\n\nRefactor to avoid substring matches\n  and to speed processing.\nAlso avoid xtracing.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08b63a25296d689186c6343f96e764bf893367cb", "commit_date": "2022-12-30T14:10:00Z", "commit_message": "fix: shellcheck 0.8.0", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94dcac7ccdfeb2ff7bd7c59c0f8bf46d0698ce3f", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "refactor(dracut-install): strerror(errno) -> %m", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "efd4ca271f15530d7264d2c87a104284e20b28aa", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() environment block", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "77226cb412822dc7614037c6d9225d98e64d4a55", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't reallocate {src,dst}path in hmac_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a20556f0e51249e501aeb87eb5a337a15db52253", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): don't strdup() excessively for dracut_install()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ed8337bb9fec0283af5dc745450394ba649a03", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): stat() w/unused buf -> access(F_OK) in dracut-install", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "751a110f29f07cb41246c09784c63bb26bb708c6", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "perf(dracut-install): multiple single-character strstr()s -> strpbrk()", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e5237dd771029ad90d921732a9805f618ed67fc", "commit_date": "2022-12-28T15:37:51Z", "commit_message": "chore: remove src/install/hashmap.lo", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9dbbebb1339d1c3dc8e6b8835a6edbc95c66e2fe", "commit_date": "2022-12-28T07:40:23Z", "commit_message": "feat(network-wicked): remove module\n\nwicked is being phased out from openSUSE\nhttps://news.opensuse.org/2022/01/28/bash-systemd-libvirt-update-in-tw/", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}]}