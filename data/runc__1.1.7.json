{"release-1.1": [{"commit_oid": "38547035bbfd4228c40914816a06a3bb577671b9", "commit_date": "2023-09-26T18:49:17Z", "commit_message": "Merge pull request #4028 from jrife/release-1.1\n\n[1.1 backport] Handle kmem.limit_in_bytes removal", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "016b2b4233fb6f8f4154eeeb5e22461f609048b5", "commit_date": "2023-09-26T16:16:16Z", "commit_message": "Handle kmem.limit_in_bytes removal\n\nkmem.limit_in_bytes has been removed in upstream linux and this patch\nis queued to be backported to linux 6.1 stable:\n\n- https://lore.kernel.org/linux-mm/20230705134434.GA156754@cmpxchg.org/T/\n- https://www.spinics.net/lists/stable-commits/msg316619.html\n\nWithout this change to libcontainerd, GetStats() will return an error\non the latest kernel(s). A downstream effect is that Kubernetes's\nkubelet does not start up. This fix was tested by ensuring that it\nunblocks kubelet startup when running on the latest kernel.\n\nSigned-off-by: Jordan Rife <jrife0@gmail.com>\n(cherry picked from commit 99469eba3e4488ed8eba9154529171f875cc67c1)\nSigned-off-by: Jordan Rife <jrife0@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "26a98ea20ee1e946f07fc8a9ba9f11b84b39e4a0", "commit_date": "2023-08-11T01:21:47Z", "commit_message": "merge #3981 into opencontainers/runc:release-1.1\n\nKir Kolyshkin (2):\n  VERSION: back to development\n  VERSION: release 1.1.9\n\nLGTMs: mrunalp AkihiroSuda lifubang cyphar\nCloses #3981", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "11737f554024a0db577f480a0d4c44848b3560e6", "commit_date": "2023-08-10T17:32:44Z", "commit_message": "VERSION: back to development\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ccaecfcbc907d70a7aa870a6650887b901b25b82", "commit_date": "2023-08-10T17:32:18Z", "commit_message": "VERSION: release 1.1.9\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5c09aa9e4062181ae82f7659ce4a73b44f4f0944", "commit_date": "2023-08-10T09:55:12Z", "commit_message": "Merge pull request #3978 from kolyshkin/1.1-rtd-fix\n\n[1.1] fix intelrdt", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f44190e0769c57d7c0081df13fbf3977d872a214", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: check if available iff configured\n\nUnless the container's runtime config has intelRdt configuration set,\nany checks for whether Intel RDT is supported or the resctrl filesystem\nis mounted are a waste of time as, per the OCI Runtime Spec, \"the\nruntime MUST NOT manipulate any resctrl pseudo-filesystems.\" And in the\nlikely case where Intel RDT is supported by both the hardware and\nkernel but the resctrl filesystem is not mounted, these checks can get\nexpensive as the intelrdt package needs to parse mountinfo to check\nwhether the filesystem has been mounted to a non-standard path.\nOptimize for the common case of containers with no intelRdt\nconfiguration by only performing the checks when the container has opted\nin.\n\nSigned-off-by: Cory Snider <csnider@mirantis.com>\n(cherry picked from commit ea0bd7826846da19d16d805cf1f8582f01448300)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cf9ac159eaaeeb10ada5b70f2ddce2f983adfbd", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: skip remove unless configured\n\nThe OCI runtime spec mandates \"[i]f intelRdt is not set, the runtime\nMUST NOT manipulate any resctrl pseudo-filesystems.\" Attempting to\ndelete files counts as manipulating, so stop doing that when the\ncontainer's RDT configuration is nil.\n\nSigned-off-by: Cory Snider <csnider@mirantis.com>\n(cherry picked from commit 56daf36be2c5c944f3ee7a8d37cf809c514ffcf7)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4796f49ca31dd3fa44b9d3c06b28c123bae5b67f", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: elide parsing mountinfo\n\nThe intelrdt package only needs to parse mountinfo to find the mount\npoint of the resctrl filesystem. Users are generally going to mount the\nresctrl filesystem to the pre-created /sys/fs/resctrl directory, so\nthere is a common case where mountinfo parsing is not required. Optimize\nfor the common case with a fast path which checks both for the existence\nof the /sys/fs/resctrl directory and whether the resctrl filesystem was\nmounted to that path using a single statfs syscall.\n\nSigned-off-by: Cory Snider <csnider@mirantis.com>\n(cherry picked from commit c156bde7cc9bb721f7110b987992d7f9c8b951a0)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6a7a6a5741137981ed97f5c06b6d36656da7c257", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: skip reading /proc/cpuinfo\n\nReading /proc/cpuinfo is a surprisingly expensive operation. Since\nkernel version 4.12 [1], opening /proc/cpuinfo on an x86 system can\nblock for around 20 milliseconds while the kernel samples the current\nCPU frequency. There is a very recent patch [2] which gets rid of the\ndelay, but has yet to make it into the mainline kenel. Regardless,\nkernels for which opening /proc/cpuinfo takes 20ms will continue to be\nrun in production for years to come. libcontainer only opens\n/proc/cpuinfo to read the processor feature flags so all the delays to\nget an accurate snapshot of the CPU frequency are just wasted time.\n\nIf we wanted to, we could interrogate the CPU features directly from\nuserspace using the `CPUID` instruction. However, Intel and AMD CPUs\nhave flags in different positions for their analogous sub-features and\nthere are CPU quirks [3] which would need to be accounted for. Some\nHaswell server CPUs support RDT/CAT but are missing the `CPUID` flags\nadvertising their support; the kernel checks for support on that\nprocessor family by probing the the hardware using privileged\nRDMSR/WRMSR instructions [4]. This sort of probing could not be\nimplemented in userspace so it would not be possible to check for RDT\nfeature support in userspace without false negatives on some hardware\nconfigurations.\n\nIt looks like libcontainer reads the CPU feature flags as a kind of\noptimization so that it can skip checking whether the kernel supports an\nRDT sub-feature if the hardware support is missing. As the kernel only\nexposes subtrees in the `resctrl` filesystem for RDT sub-features with\nhardware and kernel support, checking the CPU feature flags is redundant\nfrom a correctness point of view. Remove the /proc/cpuinfo check as it\nis an optimization which actually hurts performance.\n\n[1]: https://unix.stackexchange.com/a/526679\n[2]: https://lore.kernel.org/all/20220415161206.875029458@linutronix.de/\n[3]: https://github.com/torvalds/linux/blob/7cf6a8a17f5b134b7e783c2d45c53298faef82a7/arch/x86/kernel/cpu/resctrl/core.c#L834-L851\n[4]: https://github.com/torvalds/linux/blob/a6b450573b912316ad36262bfc70e7c3870c56d1/arch/x86/kernel/cpu/resctrl/core.c#L111-L153\n\nSigned-off-by: Cory Snider <csnider@mirantis.com>\n(cherry picked from commit 9f107489b0742825cd32f6d9328b30174a00aef1)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7c83dbe6ec2cec36f1962eae9f18b47d79044827", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: delete IsMBAScEnabled()\n\nThis function is unused, and removing it simplifies the changes which\nfollow this commit.\n\nSigned-off-by: Cory Snider <csnider@mirantis.com>\n(cherry picked from commit 13674f43d3ff08a6896ecefd1dd201f948cc7e0c)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ebcfa62816140c2a7a8972b4074db179694275b", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "[1.1] libct: rm intelrtd.Manager interface, NewIntelRdtManager\n\n[This is a manual port of commit dbd990d5559733bd0f33e2 to release-1.1\nbranch. Original description follows.]\n\nRemove intelrtd.Manager interface, since we only have a single\nimplementation, and do not expect another one.\n\nRename intelRdtManager to Manager, and modify its users accordingly.\n\nRemove NewIntelRdtManager from factory.\n\nRemove IntelRdtfs. Instead, make intelrdt.NewManager return nil if the\nfeature is not available.\n\nRemove TestFactoryNewIntelRdt as it is now identical to TestFactoryNew.\n\nAdd internal function newManager to be used for tests (to make sure\nsome testing is done even when the feature is not available in\nkernel/hardware).\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "69473d0af9bedb48677facc4540160c4c481a5de", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct: rm TestGetContainerStats, mockIntelRdtManager\n\nTestGetContainerStats test a function that is smaller than the test\nitself, and only calls a couple of other functions (which are\nrepresented by mocks). It does not make sense to have it.\n\nmockIntelRdtManager is only needed for TestGetContainerStats\nand TestGetContainerState, which basically tests that Path\nis called. Also, it does not make much sense to have it.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 85932850ec4062da696d93a8f16b0cb3a0ad50b6)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfdc7d078f694a1a8c9342900cb0a936e587be37", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: explain why mountinfo is required\n\nFor the Nth time I wanted to replace parsing mountinfo with\nstatfs and the check for superblock magic, but it is not possible\nsince some code relies of mount options check which can only\nbe obtained via mountinfo.\n\nAdd a note about it.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 5e201e7ce2c48ce76010d4ab056c7a9a0c9429e2)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5ba1b8ec436c193c1935d752cc9d5367182ff241", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: faster init if rdt is unsupported\n\nIn a (quite common) case RDT is not supported by the kernel/hardware,\nit does not make sense to parse /proc/cpuinfo and /proc/self/mountinfo,\nand yet the current code does it (on every runc exec, for example).\n\nFortunately, there is a quick way to check whether RDT is available --\nif so, kernel creates /sys/fs/resctrl directory. Check its existence,\nand skip all the other initialization if it's not present.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit edeb3b376c5cc763d7afd4c6a63d6e70f8f9992c)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a5407b9a364b436560c02a22a18a377ab9955fa3", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: remove findMountpointDir test\n\nThis test was written back in the day when findIntelRdtMountpointDir\nwas using its own mountinfo parser. Commit f1c1fdf911ef changed that,\nand thus this test is actually testing moby/sys/mountinfo parser, which\ndoes not make much sense.\n\nRemove the test, and drop the io.Reader argument since we no longer need\nto parse a custom file.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 6c6b14e07585b5a94c103f0c13b2cf4895184c33)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dc8d0cc17207f657dc12ef72252cd02f00d09e12", "commit_date": "2023-08-10T09:09:53Z", "commit_message": "libct/intelrdt: wrap Root in sync.Once\n\nIn case resctrl filesystem can not be found in /proc/self/mountinfo\n(which is pretty common on non-server or non-x86 hardware), subsequent\ncalls to Root() will result in parsing it again and again.\n\nUse sync.Once to avoid it. Make unit tests call it so that Root() won't\nactually parse mountinfo in tests.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 02e961bcf9423dbaa8134eac0b77e16f0550e40e)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c15e562c4a58e8ccd647e6071957a7801386aff", "commit_date": "2023-08-10T03:47:40Z", "commit_message": "Merge pull request #3977 from haircommander/v2root-1.1\n\n[1.1] libct/cg/fs2: use `file` + `anon` + `swap` for usage", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "929d04fc8b424657e83a27ef94b01d72394d1f08", "commit_date": "2023-08-10T02:20:15Z", "commit_message": "libct/cg/fs2: use `file` + `anon` + `swap` for usage\n\nThis aligns v2 usage calculations more closely with v1.\nCurrent node-level reporting for v1 vs v2 on the same\nmachine under similar load may differ by ~250-750Mi.\n\nAlso return usage as combined swap + memory usage, aligned\nwith v1 and non-root v2 cgroups.\n\n`mem_cgroup_usage` in the kernel counts NR_FILE_PAGES\n+ NR_ANON_MAPPED + `nr_swap_pages` (if swap enabled) [^0].\n\nUsing total - free results in higher \"usage\" numbers.\nThis is likely due to various types of reclaimable\nmemory technically counted as in use (e.g. inactive anon).\n\nSee also https://github.com/kubernetes/kubernetes/issues/118916 for more context\n\n[^0]: https://github.com/torvalds/linux/blob/06c2afb862f9da8dc5efa4b6076a0e48c3fbaaa5/mm/memcontrol.c#L3673-L3680\n\nSigned-off-by: Alexander Eldeib <alexeldeib@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1f3fa728b697657934bf4578789af6d39155575e", "commit_date": "2023-08-10T01:40:37Z", "commit_message": "Merge pull request #3976 from kolyshkin/1.1-go-1.21-ci\n\n[1.1] Add go 1.21 to CI", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bdbfe0425f8174fc8032998eb3dee4b411019841", "commit_date": "2023-08-09T23:44:50Z", "commit_message": "ci: bump golangci-lint, remove fixed exception\n\nThe exception was fixed by https://github.com/polyfloyd/go-errorlint/pull/12\nwhich eventually made its way into golangci-lint.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 98317c16ed1edb9405232662589fe704fff50641)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d398ad2a311040538ad810af441051727edd45d2", "commit_date": "2023-08-09T23:44:50Z", "commit_message": "gha: disable setup-go cache for golangci job\n\nSince commit e3cf217cf1fa9248d153 actions/setup-go@v4 uses caching\nimplicitly, and olangci/golangci-lint-action also uses caching.\n\nThese two caches clash, resulting in multiple warnings in CI logs.\n\nThe official golangci-lint-action solution is to disable caching\nfor setup-go job (see [1]). Do the same.\n\n[1] https://github.com/golangci/golangci-lint-action/pull/704\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 62cc13ea1abaa939e24c291d545059a1e8f12e3b)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5888c55d75f5f15b1d8dcd322db1bf93315f4b45", "commit_date": "2023-08-09T23:44:42Z", "commit_message": "ci/gha: rm actions/cache from validate/deps job\n\nSince commit e3cf217cf1fa9248d153 actions/setup-go@v4 uses caching\nimplicitly, so it is no longer required.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 083e9789b84ebd88ea15fc2a66b6eae2730f47c4)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a47c15b4525252cd83467f16d8e156caa3ad06a9", "commit_date": "2023-08-09T01:48:40Z", "commit_message": "build(deps): bump actions/setup-go from 3 to 4\n\nBumps [actions/setup-go](https://github.com/actions/setup-go) from 3 to 4.\n- [Release notes](https://github.com/actions/setup-go/releases)\n- [Commits](https://github.com/actions/setup-go/compare/v3...v4)\n\n---\nupdated-dependencies:\n- dependency-name: actions/setup-go\n  dependency-type: direct:production\n  update-type: version-update:semver-major\n...\n\nSigned-off-by: dependabot[bot] <support@github.com>\n(cherry picked from commit e3cf217cf1fa9248d153f1ebfbc456fe853bb180)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "44a53f088c879a357c054408315ad10e6d859b11", "commit_date": "2023-08-09T01:47:03Z", "commit_message": "ci: fix TestOpenat2 when no systemd is used\n\nA few cases relied on the fact that systemd is used, and thus\n/sys/fs/cgroup/user.slice is available.\n\nGuess what, in case of \"make unittest\" it might not be.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 5c6b334c88f761dca933ca58cd221cf32327e943)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cff41a893ce72208a25b47ea6c376d4e08259e85", "commit_date": "2023-08-09T01:46:40Z", "commit_message": "ci: fix TestNilResources when systemd not available\n\nSplit the test into two -- for fs and systemd cgroup managers, and only\nrun the second one if systemd is available.\n\nPrevents the following failure during `make unittest`:\n\n> === RUN   TestNilResources\n>     manager_test.go:27: systemd not running on this host, cannot use systemd cgroups manager\n> --- FAIL: TestNilResources (0.22s)\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 962019d64e578be4fbd3a2b2ce5c9f19be7346c0)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "37405ca009837fe573be45616ba6e1b698ef8b87", "commit_date": "2023-08-09T01:46:15Z", "commit_message": "Fix running tests under Docker/Podman and cgroup v2\n\nFor \"make integration\", the tests are run inside a Docker/Podman\ncontainer. Problem is, if cgroup v2 is used, the in-container\n/sys/fs/cgroup/cgroup.subtree_control is empty.\n\nThe added script, used as Docker entrypoint, moves the current process\ninto a sub-cgroup, and then adds all controllers in top-level\ncgroup.subtree_control.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit cfc801b7ed89555b5622bfc9a88ee731d0670e90)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1c524242285a047781dd4114d342bf8d97c5d7f4", "commit_date": "2023-08-09T01:44:33Z", "commit_message": "[1.1] ci/gha: rm unsup Go 1.19.x, add 1.21.x\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ac310917d530e823dcfe7c1d0523f77fcadbce24", "commit_date": "2023-08-09T01:38:38Z", "commit_message": "ci/cirrus: improve host_info\n\n1. Do not use echo, as this results in lines like this:\n\n\t...\n\techo \"-----\"\n\t-----\n\t...\n\n2. Move \"cat /proc/cpuinfo\" to be the last one, as the output is usually\n   very long.\n\n3. Add \"go version\" to CentOS jobs.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit fd1a79ffc8c6c0a5c682df2c54184d9f2636fe45)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ecccc4329cff94555fa6bbf500f23163d057caa0", "commit_date": "2023-08-09T01:38:38Z", "commit_message": "[1.1] ci/cirrus: use Go 1.19.x not 1.19\n\n[XXX 1.1 note: the above subject and the rest of the commit message\nis the original description from the cherry-picked commit which talks\nabout 1.19 -- while in fact it is now 1.20.]\n\nThis variable is used in curl to download a go release, so we are using\nthe initial Go 1.19 release in Cirrus CI, not the latest Go 1.19.x\nrelease.\n\nFrom the CI perspective, it makes more sense to use the latest release.\n\nAdd some jq magic to extract the latest minor release information\nfrom the download page, and use it.\n\nThis brings Cirrus CI jobs logic in line with all the others (GHA,\nDockerfile), where by 1.20 we actually mean \"latest 1.20.x\".\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 873d7bb3a3a135398228f6ad48f527cba69393d9)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb2401eeefd240b3ae334c00468b1f97ab9f9f09", "commit_date": "2023-08-09T01:38:30Z", "commit_message": "[1.1] ci/cirrus: use Go 1.20\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa68c400a89db049e57d33c53cf14c5152066de4", "commit_date": "2023-08-03T05:14:30Z", "commit_message": "Merge pull request #3961 from lifubang/backport-ModeStricky\n\n[1.1] Fix some file mode bits missing when doing mount syscall", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aaed58c87b4e0f0174c050803105f5a1139d2130", "commit_date": "2023-08-03T03:41:34Z", "commit_message": "add a test case about missing stricky bit\n\nSigned-off-by: lifubang <lifubang@acmcoder.com>\n(cherry picked from commit 83137c6884a4838ae03baa8b7f311729cc93c285)\nSigned-off-by: lifubang <lifubang@acmcoder.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d3a2b38b4c8c7ae5861c9341c999ab68829a9de", "commit_date": "2023-08-03T03:31:03Z", "commit_message": "fix some file mode bits missing when doing mount syscall\n\nSigned-off-by: lifubang <lifubang@acmcoder.com>\n(cherry picked from commit 6092a4b42dc0ab0df9aa55dbdb4e6db6c490e14d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0699bf314f323358f3c30efd4eef84a31748f6b0", "commit_date": "2023-08-03T01:00:24Z", "commit_message": "Merge pull request #3958 from akhilerm/upgrade-deprecate-actions\n\n[1.1] deps: Update github actions packages in validate workflow", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7c36375ae5ae6f9282b053f9654db5620d2d3402", "commit_date": "2023-08-02T11:40:10Z", "commit_message": "Update github actions packages in validate workflow\n\nResolve nodejs 12 deprecation warnings by updating\nlumaxis/shellcheck-problem-matchers and actions/upload-artifact\n\nSigned-off-by: Akhil Mohan <makhil@vmware.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd03bb89edeb399dfcd5be53080f3c48796ad54e", "commit_date": "2023-07-19T13:39:58Z", "commit_message": "merge pr #3940 into release-1.1\n\nAkihiro Suda (2):\n  VERSION: back to development\n  VERSION: release 1.1.8\n\nLGTMs: kolyshkin AkihiroSuda cyphar lifubang\nCloses #3940", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fa89476d4e28f137d461ac46a675e1c0aea2b8d", "commit_date": "2023-07-19T05:15:36Z", "commit_message": "VERSION: back to development\n\nSigned-off-by: Akihiro Suda <akihiro.suda.cz@hco.ntt.co.jp>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "82f18fe0e44a59034f3e1f45e475fa5636e539aa", "commit_date": "2023-07-19T05:15:32Z", "commit_message": "VERSION: release 1.1.8\n\nThanks to lifubang for suggesting the release name (\"\u6d77\u7eb3\u767e\u5ddd \u6709\u5bb9\u4e43\u5927\")\n\nCo-authored-by: lifubang <lifubang@acmcoder.com>\nSigned-off-by: Akihiro Suda <akihiro.suda.cz@hco.ntt.co.jp>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "096277c761f2302a26591341c02207ba31b5cdb3", "commit_date": "2023-07-16T00:16:43Z", "commit_message": "Merge pull request #3921 from jiusanzhou/1.1-bugfix/skip-update-while-frozen-faield\n\n[1.1] libct/cg/sd/v1: do not update non-frozen cgroup after frozen failed.", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "828eb47c39eff30652854e9aab264f572d2edcc4", "commit_date": "2023-07-12T05:20:45Z", "commit_message": "Merge pull request #3932 from kolyshkin/1.1-3888\n\n[1.1] runc delete: call systemd's reset-failed", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ef6491ec9f2ee6a833e4a4837f1aca067135cc4b", "commit_date": "2023-07-08T18:58:29Z", "commit_message": "tests/int/delete: make sure runc delete removes failed unit\n\nThe passing run (with the fix) looks like this:\n\n----\ndelete.bats\n \u2713 runc delete removes failed systemd unit [4556]\n   runc spec (status=0):\n\n   runc run -d --console-socket /tmp/bats-run-B08vu1/runc.lbQwU5/tty/sock test-failed-unit (status=0):\n\n   Warning: The unit file, source configuration file or drop-ins of runc-cgroups-integration-test-12869.scope changed on disk. Run 'systemctl daemon-reload' to reload units.\n   \u00d7 runc-cgroups-integration-test-12869.scope - libcontainer container integration-test-12869\n        Loaded: loaded (/run/systemd/transient/runc-cgroups-integration-test-12869.scope; transient)\n     Transient: yes\n       Drop-In: /run/systemd/transient/runc-cgroups-integration-test-12869.scope.d\n                \u2514\u250050-DevicePolicy.conf, 50-DeviceAllow.conf\n        Active: failed (Result: timeout) since Tue 2023-06-13 14:41:38 PDT; 751ms ago\n      Duration: 2.144s\n           CPU: 8ms\n\n   Jun 13 14:41:34 kir-rhat systemd[1]: Started runc-cgroups-integration-test-12869.scope - libcontainer container integration-test-12869.\n   Jun 13 14:41:37 kir-rhat systemd[1]: runc-cgroups-integration-test-12869.scope: Scope reached runtime time limit. Stopping.\n   Jun 13 14:41:38 kir-rhat systemd[1]: runc-cgroups-integration-test-12869.scope: Stopping timed out. Killing.\n   Jun 13 14:41:38 kir-rhat systemd[1]: runc-cgroups-integration-test-12869.scope: Killing process 1107438 (sleep) with signal SIGKILL.\n   Jun 13 14:41:38 kir-rhat systemd[1]: runc-cgroups-integration-test-12869.scope: Failed with result 'timeout'.\n   runc delete test-failed-unit (status=0):\n\n   Unit runc-cgroups-integration-test-12869.scope could not be found.\n----\n\nBefore the fix, the test was failing like this:\n\n----\ndelete.bats\n \u2717 runc delete removes failed systemd unit\n   (in test file tests/integration/delete.bats, line 194)\n     `run -4 systemctl status \"$SD_UNIT_NAME\"' failed, expected exit code 4, got 3\n  ....\n----\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit ad040b1caf545928a465eef69f6a6c7436cf7e57)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ebdd4fa6b17ed55541c40cde40da5d7e11438881", "commit_date": "2023-07-08T18:57:32Z", "commit_message": "[1.1] tests/int: add \"requires systemd_vNNN\"\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 58a811f6aaa6051fdf807ac1de9f95d74589dc69)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1188c5a192743aac472430c4713c1a3fe0d95a8e", "commit_date": "2023-07-08T18:54:41Z", "commit_message": "runc delete: call systemd's reset-failed\n\nrunc delete is supposed to remove all the container's artefacts.\nIn case systemd cgroup driver is used, and the systemd unit has failed\n(e.g. oom-killed), systemd won't remove the unit (that is, unless the\n\"CollectMode: inactive-or-failed\" property is set).\n\nCall reset-failed from manager.Destroy so the failed unit will be\nremoved during \"runc delete\".\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 43564a7b55a9299a8ef0ddaf5d01295b7a418928)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "71e760076896951f2ec26f4eec636fb7fd03ac60", "commit_date": "2023-07-08T18:54:20Z", "commit_message": "libct/cg/sd: remove logging from resetFailedUnit\n\nSometimes we call resetFailedUnit as a cleanup measure, and we don't\ncare if it fails or not. So, move error reporting to its callers, and\nignore error in cases we don't really expect it to succeed.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 91b4cd25b7c698ff158afddc8d918546d3966fdc)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3a4b3af661830b181136dcbd983653b7e51f4ece", "commit_date": "2023-07-08T18:53:51Z", "commit_message": "tests/int/cgroups: remove useless/wrong setting\n\nThere is no such thing as linux.resources.memorySwap (the mem+swap is\nset as linux.resources.memory.swap).\n\nAs it is not used in this test anyway, remove it.\n\nFixes: 4929c05ad18ab99686040d8b40a969c3f884717c\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit dacb3aaa0dc11b3af7d6d6ef1fb93536f3530b3a)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6bc3f22a3188c0d457028041976167c742301ae8", "commit_date": "2023-06-30T11:23:36Z", "commit_message": "libct/cg/sd/v1: do not update non-frozen cgroup after frozen failed.\n\nIn code we have frozen the cgroup to avoid the processes get\nan occasional \"permission denied\" error, while the systemd's application of device\nrules is done disruptively. When the processes in the container can not\nbe frozen over 2 seconds (which defined in fs/freezer.go),\nwe still update the cgroup which resulting the container get an occasional\n\"permission denied\" error in some cases.\n\nReturn error directly without updating cgroup, when freeze fails.\n\nFixes: #3803\n\nSigned-off-by: Zoe <hi@zoe.im>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ca73c9fd4b684a7ddec8b3bd892b5f76d6f21710", "commit_date": "2023-06-28T23:37:36Z", "commit_message": "Merge pull request #3918 from kolyshkin/1.1-3553\n\n[1.1] ci/cirrus: enable some rootless tests on cs9", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3b5356155c1947f87aa1ababdbe20f8e22e8eeb6", "commit_date": "2023-06-28T22:49:54Z", "commit_message": "Merge pull request #3917 from kolyshkin/1.1-3899\n\n[1.1] docs/systemd: fix a broken link", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cdfa95f39bc5e3ea46a498382b5376c983eed80", "commit_date": "2023-06-28T22:49:28Z", "commit_message": "Merge pull request #3905 from CARV-ICS-FORTH/release-1.1-riscv64\n\nBackport riscv64 support into 1.1.x", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d93d7d13f0e5e017e3692a354215955de45faf7", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "release: add riscv64 binary\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit a14cc4059dfaec80537964bfad577fd5e102c947)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9164fe17a774d802c6ced945a86e9ad82ac3b4bb", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "libct/seccomp: add riscv64\n\nCo-authored-by: Kir Kolyshkin <kolyshkin@gmail.com>\nSigned-off-by: Akihiro Suda <akihiro.suda.cz@hco.ntt.co.jp>\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 1d7b297128d0d8914290b458333984625c4d1180)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ed47e31a059982b2e34199e4ecac9328e0d148f8", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Makefile: set CGO_ENABLED=1 when needed\n\nIt doesn't matter whether static or dynamic linking is used, runc\nalways needs libcontainer/nsenter, which is written in C and thus\nrequires cgo. Same is true for libcontainer/integration.\n\nIn addition, contrib/pkg/seccompagent also needs cgo (if seccomp build\ntag is set), as it need to be linked against libseccomp C library.\n\nBy default, cgo is disabled when cross-compiling, meaning that\nCGO_ENABLED=1 has to be set explicitly in such cases.\n\nIn all other cases (e.g. other contrib binaries) we do not need cgo.\n\nRemove CGO_ENABLED=1 from GO_BUILD_STATIC (as it does not have anything\nto do with static linking), and add it to all targets that require it.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit dafcacb5225a0668c06fbd0a6e002da1ef2f7d69)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "923ae4da8c648e593d7d35f46949d9e75adcfb01", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Makefile: add support for static PIE\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 21e32d47d38ffe35972f845146c576461f6fb5a0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2abca872b17eced4c3546b4feeaeae18aae151b9", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Makefile: fix GO_BUILDMODE setting\n\n1. Set to empty value by default.\n\n2. Assume Linux (remove GOOS check, since we do not support other OSes).\n\n3. Instead of using a \"not-supported\" list, use a \"supported\" list\n   (as Go release notes usually say which platforms are supported).\n   As of today, -buildmode=pie is supported for:\n\n * linux/386, linux/amd64, linux/arm, linux/arm64, and linux/ppc64le\n   (since Go 1.6, see https://tip.golang.org/doc/go1.6#compiler)\n\n * linux/s390x (since Go 1.7, which adds the initial port)\n\n * linux/riscv64 (since Go 1.16, see\n   https://tip.golang.org/doc/go1.16#riscv)\n\n   NOTE this does not mean we support these architectures; it is merely\n   a way to see if -buildmode=pie can be used.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit ab5c60d02fcd9a4b7e870bcd631c3673e5b7dd2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "120ec5bda318539d9364502e44c0813e13cfc425", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Makefile: add LDFLAGS_COMMON and LDFLAGS_STATIC\n\nLDFLAGS_COMMON are used from two places, so it makes sense to dedup.\n\nLDFLAGS_STATIC is a preparation for the next commit.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit f2f6e59937486ee61b1ce6ac35caff37e76db177)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b99401136952eb53c6517e74f02b91af1ba24ccf", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Dockerfile: don't use crossbuild-essential-*\n\nAll we need is gcc, libc-dev, and binutils. In addition to that,\ncrossbuild-essential installs g++, libstdc++-dev, and a bunch of perl\npackages and libraries which we do not need.\n\nThis should speed up image building, as well as make it smaller.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit f0f1b5f9693b08e7c379db6214f29a74e204ff34)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "028fc57aaa8ef6ff581b1b34fced45eee31d8495", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Dockerfile: rm dpkg --add-architecture lines\n\nDockerfile used to install libseccomp-dev packages for different\narchitectures. This is no longer true since commit f30244ee1b222, which\nchanged to cross-compiling libseccomp (so we can get a static library\nto link against).\n\nThus, adding extra architectures is no longer needed.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 476aa18abe91586daa2822b9e49f6d2fd5c2a198)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4449ce84860ce11c96a42d0f16bd083d1975efdb", "commit_date": "2023-06-28T19:34:45Z", "commit_message": "Dockerfile: nit\n\nWe do not use all the files from scripts, only seccomp.sh and lib.sh.\n\nThis prevents unneeded rebuild of the image if e.g.\nscripts/release_build.sh has changed.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit d542ad65ba3c3bb8487ffb074f113a5401993340)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d375351b79b9a339801bd690ebf3d26aeaa0ac61", "commit_date": "2023-06-28T16:42:53Z", "commit_message": "ci/cirrus: enable rootless tests on cs9\n\nWe were not running localrootlessintegration test on CentOS Stream 9\nbecause of some failures fixed by previous commits.\n\nEnable rootless integration with both systemd and fs drivers.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 78d31a49411392f79209d8337361745e87562a39)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e1a8b52f3a6c601221ebc50d5c4f8bbea9455db3", "commit_date": "2023-06-28T16:41:58Z", "commit_message": "tests/int/cgroups: filter out rdma\n\nFilter out rdma controller since systemd is unable to delegate it.\nSimilar to commits 05272718f4ec414d and 601cf5825f6cf7cd4c360.\n\n(cherry picked from commit e83ca5191304963b66f6a917d119ac6c1fb5ef8d)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "207bd9d62aac634935302c2b61fc1bd9b4be19dd", "commit_date": "2023-06-28T16:41:50Z", "commit_message": "Merge pull request #3916 from neersighted/backport_3912\n\n[1.1] Fix tmpfs mode opts when dir already exists", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02e065efc31911c665cdafe42282b4d62ae431cf", "commit_date": "2023-06-28T16:32:22Z", "commit_message": "docs/systemd: fix a broken link\n\nApparently, developer.gnome.org/documentation no longer hosts the\ndocumentation we used to refer to. Link to docs.gtk.org instead.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 73b5dc027dc33959a3c48807ca70d9be6a64125c)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9af462e4a7ffde09db8db38d32cc3d746692042a", "commit_date": "2023-06-28T14:21:04Z", "commit_message": "Fix tmpfs mode opts when dir already exists\n\nWhen a directory already exists (or after a container is restarted) the\nperms of the directory being mounted to were being used even when a\ndifferent permission is set on the tmpfs mount options.\n\nThis prepends the original directory perms to the mount options.\nIf the perms were already set in the mount opts then those perms will\nwin.\nThis eliminates the need to perform a chmod after mount entirely.\n\nSigned-off-by: Brian Goff <cpuguy83@gmail.com>\n(cherry picked from commit 9fa8b9de3e74c306db186494187fb789f0fdab4d)\nResolved conflicts:\n\ttests/integration/run.bats\nSigned-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3ce1a1bf2c42c0f230693ee56d0c4b2fe5ba4e1", "commit_date": "2023-06-28T13:24:30Z", "commit_message": "Merge pull request #3892 from kolyshkin/1.1-3887\n\n[1.1] man/runc: fixes", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c840a980f1e74e29431ba565c227386488260e6", "commit_date": "2023-06-28T13:23:22Z", "commit_message": "Merge pull request #3909 from kolyshkin/1.1-3907\n\n[1.1] .codespellrc: update for 2.2.5", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7d1bdc7d426a4db3b88778907f241aa9cdf9c7e1", "commit_date": "2023-06-21T18:14:07Z", "commit_message": ".codespellrc: update for 2.2.5\n\nRemove some old exceptions (no longer needed), add a new one\n(codespell 2.2.5 flags \"(mis)features\" in docs/terminal.md).\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit e3627658fa92f304d72a00a21dc729571a7fd4f6)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "217744230d4ed9011df1c20eaf10126caa64ab95", "commit_date": "2023-06-12T08:52:04Z", "commit_message": "Merge pull request #3891 from kolyshkin/1.1-fix-cs9-oom\n\n[1.1] tests/int: increase num retries for oom tests", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8397943ec98ca87de17bdce8fcbaa1f2bcc1e159", "commit_date": "2023-06-08T00:29:18Z", "commit_message": "man/runc: fixes\n\n1. Fix some missing punctuation, use proper case.\n\n2. Remove \"runc init\" (previously removed from \"runc --help\" by commit\n   7a0302f0d79e32766).\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 511c76143bba15712d4b5159aeef2f4903005809)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f9da684d020cf0ac50ede30f45e9329253ca89b8", "commit_date": "2023-06-08T00:21:12Z", "commit_message": "tests/int: increase num retries for oom tests\n\nThis test is occasionally failing on CS9.\n\nThe test case always takes about 7 seconds on my laptop (decreasing\nmemory, using a different memory eater in shell etc. doesn't help).\n\nIncrease the number of iterations from 10 to 30 to make sure we don't\nsee any flakes.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit fed0b12436e652feffca4d9107c3f68c49fbc202)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7db472f1c1af8ed6cd8ffbfc5509823b00e816aa", "commit_date": "2023-06-07T18:26:07Z", "commit_message": "Merge pull request #3878 from kolyshkin/1.1-bump-vagrant\n\n[1.1] bump Fedora, Vagrant, bats", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7fa912ed2300ee559c12201bbf04ad6a2bf5406e", "commit_date": "2023-06-06T21:15:19Z", "commit_message": "ci/cirrus: limit numcpu\n\n... so we can run all four jobs in parallel.\n\nWhile at it, fix the comment in the file.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit bb4dbbc4f506a4565d08764ccec50e9bf4523142)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9c1ca081ec1a9b1099de97d0a5222893d859fc4", "commit_date": "2023-06-06T21:15:11Z", "commit_message": "Fix Vagrant caching\n\nAs of today, vagrant stopped working, my best guess is due to bad\ncaching. Here's an excerpt from logs:\n\n...\nvagrant plugin install vagrant-libvirt\nInstalling the 'vagrant-libvirt' plugin. This can take a few minutes...\nBuilding native extensions. This could take a while...\nInstalled the plugin 'vagrant-libvirt (0.12.1)'!\n...\nuname -s ; cat Vagrantfile.$DISTRO\nLinux\n...\n\nDownloaded 481Mb in 4.096201s.\nCache hit for vagrant-8be35383dc00f23d080ff00b2a724c938d650254861f26b67624c28e3fe5e6ae!\n...\nVagrant failed to initialize at a very early stage:\nThe plugins failed to initialize correctly. This may be due to manual\nmodifications made within the Vagrant home directory.\n...\nError message given during initialization: Unable to resolve dependency:\nuser requested 'vagrant-libvirt (= 0.12.0)'\n...\n\nThe problem is, vagrant cache overwrites newer plugin with an older one.\n\nLet's only cache the downloaded image.\n\nAlso, change the cache fingerprint script (remove \"Linux\").\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 650efb2c2234dd7c85191d9e051392044dd12fae)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2265a92cd7757db0c580960482e6ad447929fdd", "commit_date": "2023-06-06T21:14:59Z", "commit_message": "ci: bump bats 1.8.2 -> 1.9.0\n\nAs Fedora 38 uses bats 1.9.0, let's switch to this version in other\nplaces.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 13091eeefaea7dc5367f6ea70e8fcec6da492d8c)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bbddb6bdd7c52b00843bb7864da44089c58a8bde", "commit_date": "2023-06-06T21:14:59Z", "commit_message": "Vagrantfile.fedora: bump to 38\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit a19200096e287a72d43ed0e8a50a2ba4a9d6cc17)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27b86b4cc7b2737d5f91d580b020dc5284c85497", "commit_date": "2023-06-06T21:14:59Z", "commit_message": "ci/cirrus: use vagrant from hashicorp repo\n\nA version of vagrant available from the stock repos (2.2.19) is too old\nand contains a bug that prevents downloading Fedora 38 image (see [1]).\n\nUse packages from hashicorp repo, which currently has vagrant 2.3.4.\nThis resolves the problem of downloading the latest Fedora image.\n\nAlso, vagrant-libvirt plugin from Ubuntu repos is not working with\nvagrant from hashicorp, so switch to using \"vagrant plugin install\".\nThe downside it, this takes extra 4 minutes or so in our CI, and I\nam not sure how to cache it or speed it up.\n\n[1] https://github.com/opencontainers/runc/pull/3835#issuecomment-1519321619\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 33b6ec2925feac9146d07e7c775443d08558e2d1)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "98a1b76c5354a2a57f83d5acfabb9cca92c16c48", "commit_date": "2023-06-06T21:14:59Z", "commit_message": "tests/int: fix some checks\n\nApparently, bash with set -e deliberately ignores non-zero return codes\nfrom ! cmd, unless this is the last command. The workaround is to either\nuse \"! cmd || false', \"or run ! cmd\". Choose the latter, and require\nbash-core 1.5.0 (since this is when \"run !\" was added), replacing the\nolder check.\n\nAlas I only learned this recently from the bash-core documentation.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 9b71787be0ca628956d0ade3cd059a8ea03e4b64)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1eadcede2f75b62f1d7a8f3f0ba5961735ac9c16", "commit_date": "2023-06-06T21:14:59Z", "commit_message": "ci: bump bats 1.3.0 -> 1.8.2\n\nThis version is already used by Cirrus CI Fedora 37 job, but other CI\njobs are still using 1.3.0.\n\nBump it everywhere so we can enjoy new version features and fixes.\n\nFor one thing, I noticed that new bats is reporting error location\ncorrectly.\n\nWe will also be able to use \"run !\" and \"run -N\" commands.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>\n(cherry picked from commit 9dbb9f90b96cc383dbb86b746847d015bd7f1e3b)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bcf234b897525a84dcae44278de0b7b1a5d13976", "commit_date": "2023-05-30T12:34:20Z", "commit_message": "Merge pull request #3877 from kolyshkin/1.1-sd-rm-race\n\n[1.1] libct: fix a race with systemd removal", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6966e5da10923cd46d2ec1b2604009e4638caac0", "commit_date": "2023-05-24T04:02:32Z", "commit_message": "Merge pull request #3879 from kolyshkin/1.1-env-nul-byte\n\n[1.1] init: do not print environment variable value", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "63af8b00699fc8d40336ad2d2b03d37f076e2b94", "commit_date": "2023-05-22T21:52:57Z", "commit_message": "init: do not print environment variable value\n\nWhen given an environment variable that is invalid, it's not a good idea\nto output the contents in case they are supposed to be private (though\nsuch a container wouldn't start anyway so it seems unlikely there's a\nreal way to use this to exfiltrate environment variables you didn't\nalready know).\n\nReported-by: Carl Henrik Lunde <chlunde@ifi.uio.no>\nSigned-off-by: Aleksa Sarai <cyphar@cyphar.com>\n(cherry picked from commit 20e38fb2b1201325e7cd275afbb5c7d17ccfde60)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "404ea7ab0fcc4d457400f4862b88dbc42049631c", "commit_date": "2023-05-22T21:06:04Z", "commit_message": "libct: fix a race with systemd removal\n\nFor a previous attempt to fix that (and added test cases), see commit\n9087f2e827d971.\n\nAlas, it's not always working because of cgroup directory TOCTOU.\n\nTo solve this and avoid the race, add an error _after_ the operation.\nImplement it as a method that ignores the error that should be ignored.\nInstead of currentStatus(), use faster runType(), since we are not\ninterested in Paused status here.\n\nFor Processes(), remove the pre-op check, and only use it after getting\nan error, making the non-error path more straightforward.\n\nFor Signal(), add a second check after getting an error. The first check\nis left as is because signalAllProcesses might print a warning if the\ncgroup does not exist, and we'd like to avoid that.\n\nThis should fix an occasional failure like this one:\n\n\tnot ok 84 kill detached busybox\n\t# (in test file tests/integration/kill.bats, line 27)\n\t#   `[ \"$status\" -eq 0 ]' failed\n\t....\n\t# runc kill test_busybox KILL (status=0):\n\t# runc kill -a test_busybox 0 (status=1):\n\t# time=\"2023-04-04T18:24:27Z\" level=error msg=\"lstat /sys/fs/cgroup/devices/system.slice/runc-test_busybox.scope: no such file or directory\"\n\n(cherry picked from commit fe278b9caae21e048ae83b96815a985826b4c464)\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b6109acd4d81e8a33dd07d94e6a7f9c706d8356c", "commit_date": "2023-04-27T09:23:30Z", "commit_message": "merge #3846 into release-1.1\n\nKir Kolyshkin (2):\n  VERSION: back to development\n  VERSION: release 1.1.7\n\nLGTMs: AkihiroSuda cyphar\nCloses #3846", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0ecf30ba5c771a93275abde0f392bb2d28b5b21", "commit_date": "2023-04-26T21:49:11Z", "commit_message": "VERSION: back to development\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}]}