{"master": [{"commit_oid": "c86e0f98ef8edd3690d1e510921cab4f5910adda", "commit_date": "2023-09-21T06:57:39Z", "commit_message": "Bumping up to version-3.22.0\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "613ec38b010b88628bbb32fcaf79ec5e969bdfeb", "commit_date": "2023-09-19T12:22:23Z", "commit_message": "TESTCASES: fix policytest help command\n\nCorrect exit behavior for help command. When using the help\ncommand, the policytest tried to open a session, but had\nno slot number.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9f6f780fc333ec28b1b16588721d7f33ffc95c5", "commit_date": "2023-09-19T12:22:23Z", "commit_message": "TESTCASES: cca_export_import_test did leave RSA and EC keys over\n\nA total of 17 keys were left over in the CCA token repository\nwhen running the cca_export_import_test. Also session keys were\nnot destroyed after use.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48b93fa0af2b4f5e02ac7510a79800dcd44fc3a0", "commit_date": "2023-09-19T06:24:52Z", "commit_message": "TESTCASES: abfunc test did leave one EC key over\n\nWhen running the abfunc test, one EC private key was left over,\nbecause the test creates 16 keys, but NUMKEYS was 15.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e4ae16e68b960ba692727e436ea9124b8ccc2536", "commit_date": "2023-09-18T13:35:21Z", "commit_message": "CCA/EP11: add info about AES-XTS to token config files\n\nFor both tokens, AES-XTS is only supported via protected keys.\nOther operation modes, like ECB and CBC, are just accelerated\nvia the PKEY_MODE option.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "020fa0338699b65d8218ecdfd3ec8fd68b7d5e26", "commit_date": "2023-09-15T09:33:47Z", "commit_message": "p11sak: CA-cert attribute if certificate has BasicConstraints CA on\n\nIf a certificate to be imported has the 'BasicConstraints CA' flag on, then\nautomatically set attribute CKA_CERTIFICATE_CATEGORY to\nCK_CERTIFICATE_CATEGORY_AUTHORITY.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1396f8587f803f4521ab5f05632a7259fdc2e6b", "commit_date": "2023-09-15T09:33:47Z", "commit_message": "ICSF: Filter out attributes unknown by ICSF when creating objects\n\nICSF does not support all attributes that the PKCS#11 standard defines for\ncertificate objects. Filter out these attributes, and do not send them to\nICSF, since this would result in CKR_ATTRIBUTE_TYPE_INVALID or\nCKR_TEMPLATE_INCONSISTENT errors.\n\nAlso update the list of ULONG attributes to correctly encode those attributes.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cadfe7f2131b14ce83bab4989100acde2c19e8ee", "commit_date": "2023-09-15T06:34:24Z", "commit_message": "p11sak: CKA_SERIAL_NUMBER contains the DER encoded serial number\n\nWhen importing a x509 certificate, supply the DER encoded serial number for\nthe CKA_SERIAL_NUMBER attribute. When displaying the CKA_SERIAL_NUMBER use\na custom print routine to decode the DER encoded serial number and print the\nraw serial number.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c1dd9e450fad4f96f2675864c5b9e41bbc1715f1", "commit_date": "2023-09-13T09:15:23Z", "commit_message": "TESTCASES: Remove unused file tok_obj2.c\n\nThis seems to be an outdated copy of tok_obj.c, and it is never built nor\nused. Lets remove it.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e60f56a16cf4dff22280cd6f7b8914648d349cb7", "commit_date": "2023-09-13T09:15:23Z", "commit_message": "Makefile: Remove ccatok.conf during uninstall\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "278a65e6607ed5ddaff5308cb9a73f654fd29443", "commit_date": "2023-09-13T09:15:23Z", "commit_message": "Makefile: Fix noinst_HEADERS and EXTRA_DIST to include all headers and files\n\nHeaders not specified either in xxx_SOURCES or noinst_HEADERS will not\nbe included for 'make dist', and will cause compile errors during\n'make distcheck'. Also include several extra files into EXTRA_DIST to\nmake sure they are distributed as well.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "be691b24e543e0cef32246e2d2696ef33e48a42f", "commit_date": "2023-09-12T06:17:37Z", "commit_message": "COMMON: Fix coverty findings - unused variable assignment\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ed6d7e1e70e736bdfb3eac88b0137446293dea3", "commit_date": "2023-09-11T12:22:58Z", "commit_message": "COMMON: Fix detection of subclass for HW feature objects\n\nSimilar to keys and certificates, a HW feature object also has a 'subclass'\nattribute, i.e. CKA_HW_FEATURE_TYPE. This subclass is used when validating\nattributes during C_SetAttributeValue() and C_CopyObject().\n\nWithout this fix, setting attributes of a HW feature object, or copying a\nHW feature object will most likely fail with CKR_ATTRIBUTE_VALUE_INVALID,\nbecause the subclass is not known and thus the attribute validation fails.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "93d186a246517f3575d1270aad7f56e67fdd2286", "commit_date": "2023-09-11T12:22:58Z", "commit_message": "EP11: Also update IBM specific attributes for public key after key gen\n\nAfter an EP11 key has been created, e.g. by means of key generation, derive,\nunwrap, or import, a couple of IBM specific attributes are retrieved from the\nkey blob and are added to the key's template.\n\nDo this also for the public key during key pair generation, it was erroneously\nonly done for the private key.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76917a8f1831fa5efddf92711c11704b52fc2206", "commit_date": "2023-09-11T12:22:58Z", "commit_message": "EP11: Unwrap of AB keys must only update attrs applicable to key type\n\nCKA_VALUE_LEN is only applicable for generic secret and AES keys. Don't\nupdate or set it for other key types.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d6c3c2f470beee507824775fe30683281e34c23", "commit_date": "2023-08-30T07:54:33Z", "commit_message": "Ensure OpenSSL config is loaded before creating own library context\n\nEnsure OpenSSL is initialized and the OpenSSL config is loaded BEFORE creating\nOpenCryptoki's own library context. Otherwise the OpenSSL config is loaded\nlater, which may cause that all configured providers are also loaded into the\nlibrary context. We intentionally want to use only the default and legacy\nprovider for OpenCryptoki's software crypto operations. So loading other\nproviders into our context may cause that those other providers are used\ninstead. In worst case this may cause a recursion, e.g. when a PKCS#11 provider\nis loaded routing the crypto calls back to OpenCryptoki.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5de873f67d734b682f4548dc44982ccf4e63fc51", "commit_date": "2023-08-23T07:49:53Z", "commit_message": "p11sak: Support import of RSA-PSS keys and certificates\n\nTreat RSA-PSS keys just like RSA keys. PKCS#11 does not differentiate them,\nbut OpenSSL does.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5369b85fcd4e2afa04b0d775ec276de302f3c640", "commit_date": "2023-08-23T07:49:53Z", "commit_message": "p11sak: Unify return code display in error message\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f15b042aa3bbb6c6b1c2b1cd5a9b0deda1ac74d3", "commit_date": "2023-08-23T07:49:53Z", "commit_message": "p11sak: Fix segfault if keytype or certtype is not found\n\nCorrect the check for the end of the list. The p11sak_keytypes and\np11sak_certtypes list is terminated by a NULL pointer directly, not\nthe objtype's name is NULL.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7a9f9a5050a9e65bfb3137474133be3c3fbc9da", "commit_date": "2023-08-23T07:15:07Z", "commit_message": "p11sak: Support import and export of Edwards and Montgomery keys\n\nOnly since OpenSSL 3.0 there exists a public API to access the key components\nof Edwards and Montgomery keys. So import and export of Edwards and Montgomery\nkeys is only supported with OpenSSL 3.0 or later.\n\nCloses: https://github.com/opencryptoki/opencryptoki/issues/697\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d21f66f75ded7efd84a18ccea2cf07b4f3657fd", "commit_date": "2023-08-21T06:36:51Z", "commit_message": "p11sak: Fix error handling for extract-pubkey and extract-cert-pubkey\n\nThe return code from the add_attribute calls may me overridden by subsequent\ncalls setting the same return code variable before it is checked.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "18283901b40f5a1e35860bef93407e48427e8f97", "commit_date": "2023-08-21T06:36:51Z", "commit_message": "p11sak: Fix memory leak in extract-pubkey command\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62ebf3807a9d160d50c3c02fee574fd87510bd4d", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Add extract-pubkey command\n\nAdd the 'extract-pubkey' command to extract the public key from a private key\nobject. This requires that the private key object has attribute\nCKA_PUBLIC_KEY_INFO set.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a0bc80c2ad0a6284ebd45a18ac03887054a9bb29", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Fixes for the extract-cert-pubkey command\n\nCorrect the description of the --new-attr option to list all attributes that\nare valid for a public key, not only those that are valid for a certificate.\n\nDon't refer to the certificate type and label when parsing the attributes\nfor the to be created public key leads to no applicable attributes.\n\nDon't increase num_failed twice when parsing the new attributes fails.\nAlso, when none of the specified attributes are applicable for public keys,\ntreat this as a failure, not as a skip. With this, the data parameter is\nsuperfluous for function p11sak_extract_pubkey().\n\nMinor man page corrections.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "227e1cc662b18c2f58a3202bba63e49e39304d1c", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Simplify p11sak_extract_x509_pk() function\n\nGet the keytype from the PKEY type of the certificate, and use the keytype's\nimport_asym_pkey() function pointer to call the import function.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f6aef2a7e3f89b53d842b98a982647a2833944ee", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Allow SO to set CKA_TRUSTED to TRUE\n\nAs per PKCS#11 standard, attribute CKA_TRUSTED can only be set to TRUE\nby the SO user for secret key, public key and certificate objects. However,\nit can be set to FALSE by USER.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f2d2f88af7028b0c87ed0efff787aa25cd9c5a98", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Add --so option to login as SO (security officer)\n\nWith the '--so' option, p11sak opens a R/W SO session.\nAs per PKCS#11 standard, there is no R/O SO session, so always open\na R/W session if SO logs in.\n\nOption '-p'/'--pin' must specify the SO pin, or if the '-p'/'--pin' option\nis not specified, environment variable PKCS11_SO_PIN is used.\nIf PKCS11_SO_PIN is not set, then the user is prompted for the SO PIN.\n\nSO can only access public token objects (CKA_PRIVATE=FALSE) as per PKCS#11\nstandard.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "417d745b64abcc716ea963257cce0338d08ce1f0", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Add --no-login option to open a public PKCS#11 session\n\nWith the '--no-login' option, p11sak opens a public PKCS#11 session and\ndoes not use or prompt for a pin. With a public session, only public\nobjects (i.e. with CKA_PRIVATE=FALSE) can be accessed.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a88b444fe975e076ae98c04f9df4c8fc3de4b9da", "commit_date": "2023-08-18T08:47:27Z", "commit_message": "p11sak: Fix parsing of case insensitive arguments\n\nThe comparison was done case insensitive when case sensitive was requested,\nand vice versa.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56ccd7cf6e0a5f7a9f206de1bd81307f2631d34c", "commit_date": "2023-08-18T08:13:26Z", "commit_message": "TESTCASES: Remove EC key objects after test step\n\nRemove the created EC keys when the test step is complete, don't leave them\nhanging around.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cdbadaddd5c3465c87c276b537f7127d9583c5a", "commit_date": "2023-08-16T14:50:49Z", "commit_message": "CCA: Move CCA MK change code into separate source file\n\nNo logic change, just moving existing code into a new source file\ncca_mkchange.c. This requires that certain definitions are moved into\ncca_stdll.h, and some functions can no longer be static.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "190f69af1e14cf5c820cc9de95fb31c444b45b1d", "commit_date": "2023-08-15T12:22:44Z", "commit_message": "CCA: Ensure that the 2 key parts of an AES-XTS key are not the same\n\nFor security reasons, the 2 key parts of an AES-XTS key should not be the\nsame. Add checks to key generation and import to ensure this.\n\nIn case the random key generation results in 2 identical encrypted keys\n(very unlikely), then the generation of the key parts is repeated.\n\nIn case an AES-XTS key in imported from clear via C_CreateObject, and the\n2 key parts supplied via CKA_VALUE are identical, the operation fails with\nCKR_ATTRIBUTE_VALUE_INVALID.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e8984558e500f5a0022dfd558d9a84854d16bcb4", "commit_date": "2023-08-15T12:22:44Z", "commit_message": "EP11: Ensure that the 2 key parts of an AES-XTS key are not the same\n\nFor security reasons, the 2 key parts of an AES-XTS key should not be the\nsame. Add checks to key generation and import to ensure this.\n\nIn case the random key generation results in 2 identical key blobs (very\nunlikely), then the generation of the second key parts is repeated.\nWe compare the checksum, not the key blobs, because because the blobs are\nencrypted and use a different IV, so it can't be determined from the blob\nas such if the keys are identical. However, the checksum would be identical\nif 2 identical keys would have been generated.\n\nIn case an AES-XTS key in imported from clear via C_CreateObject, and the\n2 key parts supplied via CKA_VALUE are identical, the operation fails with\nCKR_ATTRIBUTE_VALUE_INVALID.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2b212804d6610a71ff96f150e666db26edac77c", "commit_date": "2023-08-15T12:22:44Z", "commit_message": "ICA: Ensure that the 2 key parts of an AES-XTS key are not the same\n\nFor security reasons, the 2 key parts of an AES-XTS key should not be the\nsame. Add checks to key generation and import to ensure this.\n\nIn case the random key generation results in 2 identical key parts (very\nunlikely), then the key generation is repeated.\n\nIn case an AES-XTS key in imported from clear via C_CreateObject, and the\n2 key parts supplied via CKA_VALUE are identical, the operation fails with\nCKR_ATTRIBUTE_VALUE_INVALID.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c3bdf7ef0fe9a3136197e27de54980330f78e4cb", "commit_date": "2023-08-15T12:22:44Z", "commit_message": "SOFT: Ensure that the 2 key parts of an AES-XTS key are not the same\n\nFor security reasons, the 2 key parts of an AES-XTS key should not be the\nsame. Add checks to key generation and import to ensure this.\n\nIn case the random key generation results in 2 identical key parts (very\nunlikely), then the key generation is repeated.\n\nIn case an AES-XTS key in imported from clear via C_CreateObject, and the\n2 key parts supplied via CKA_VALUE are identical, the operation fails with\nCKR_ATTRIBUTE_VALUE_INVALID.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c8418d604a593dfc05124501e7fa47a93c378d8", "commit_date": "2023-08-15T11:15:18Z", "commit_message": "CCA: Add missing \\n to trace message\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24e3a26a8b2fcea72bcf5854a5a1619d9711e2b4", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: correct some textual output in test script\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f1a17573727c6923f8fe5d6f466f6765cd5dade4", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "TESTCASES: tok_obj - add option to create a data object\n\nAdd a new option to the tok_obj test to create an object\nof class CKO_DATA. This helps p11sak testing. Data objects\nare currently not handled by p11sak but must be ignored\nwithout any error.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1339b79af14ae659f4f754c5e27eaaf1d56f81b", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix LABEL formatting in manpage\n\nUse .I LABEL, because it's an option argument.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f93687eb2e734d548c394ca6e0c882e381bd44fc", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix old manpage text\n\nNot only boolean attributes can be changed also for keys.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d55565767df09c7ab1b4aa341e9915f48390f0ee", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix set_copy_key_attr commands help text\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c342bda65a7d050720316dc9d1b9176748c735db", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix remove-key command help text\n\nATTRIBUTES section was missing in remove-key help output.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7199822d2676d43f1b4f014de6dfbca233f4a658", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix memory leak\n\nIn case of OpenSSL 3.0, ec_group is allocated by EC_GROUP_new_from_params\nand must be freed via EC_GROUP_free.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b29961b37063a62f906797030ff1e1698b23fee", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: add tests for x509 certificate support\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "14e84bdea7ddeeabe09d02978cd0f3aa1612f358", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: correct typo in test script\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a1c34956fba2aa84bb729e35b8aa51e8da33eabb", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: use new x509 print routine also for keys\n\nUse new print routine print_x509_name_attr also for\nCKA_SUBJECT attr of keys.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42000a92626a4796b6a68f9fb86a6c5d26b88740", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command extract-pubkey\n\nThis command allows to extract the public key of certificates\nin the repository and add it as a new token object.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e71ba6010c829e8a1c8135a5ebc51ddf265d5650", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command export-cert\n\nThis command allows to export X.509 public key certificates\nin PEM or binary (DER-encoded) format. Default is PEM.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7685b349a77ed419335fef87f22cb383eb856e8d", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command copy-cert\n\nThis command allows to copy certificates\nin the repository.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a4268b2d9ee28a1355ed20313dce7cd30ff2346", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command set-cert-attr\n\nThis command allows to set or update attributes\nof certificates in the repository.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d86ef123fd1d909a1f49b13ea221c006016048b", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command remove-cert\n\nThis command allows to remove certificates from the\nrepository.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "319959ebadc2fa6209c0a06d5c2aeae3b1702984", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command list-cert\n\nThis command allows to list X.509 public key certificates\nin the repository.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57689467112c16d998864e8bf7c4be85291b99a6", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: new command import-cert\n\nThis command allows to import X.509 public key certificates\nfrom PEM or binary (DER-encoded) files. The format is\nautomatically detected.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "052497dd3168336b7040ac3c34f6fb786ba7e49b", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - parse_sort_specification\n\nDistinguish between keys and certificates in routine\nparse_sort_specification.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "323ace7f4554cf2905075d5cb1a9881968d79566", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - find_attribute\n\nAlso loop over p11sak_certtypes in routine find_attribute.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0083de8bdfbcccd3d97964c186851d6080f7f400", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - p11sak_list_obj_compare\n\nAdd sort handling for common names. Certificates can be sorted\nby common name.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "611b311e62af68cff7e3d0efc0c7cdcff171792b", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - get_obj_infos\n\nGeneralize routine get_key_infos to get_obj_infos. It will\nbe used later also for certificates.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "12c88f22e9b043ff9bae6a5acce37502944e1c30", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - certificate types\n\nIntroduce certificate types along with their attributes\nand related print routines. This is needed by the\nsubsequent commits.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f96f618d096188e5de342e3fddbf4cacae12b0a9", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - print_boolean_attrs\n\nGeneralize routine print_boolean_attrs to be used for\nkeys and certificates.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b6aaef33dd24c41b768f2af318820632d47d6901", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - common_name\n\nIntroduce a new parm common_name for the various handler\nroutines. This will be needed for handling certificates.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0a9a6565e70cb0217021f120891d03f0f791eeca", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - iterate_objects\n\nGeneralize iterate_key_objects to iterate_objects. It will\nlater be extended and used to iterate over certificates\ntoo.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f380b5983410964b72c689fd6e8c7060fa4bb37e", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - print_obj_attrs\n\nGeneralize print_key_attrs to print_obj_attrs, which\nwill also be used for certificates later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cb85b5d2f7b3938e249ee502706ffe1f491bf0fd", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - handle_obj_list\n\nGeneralize handle_key_list to handle_obj_list. It will also\nbe used to list certificates later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de965e954d819ae704c5f7673824d584b3d96e10", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - handle_obj_set_attr\n\nGeneralize handle_key_set_attr to handle_obj_set_attr and use this\nroutine in p11sak_set_key_attr. It will also be used to set\ncertificate attrs later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aeb39265a5e3d823b0c74c6e408d82ae2ac41b03", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - handle_obj_copy\n\nGeneralize handle_key_copy to handle_obj_copy and use this\nroutine in p11sak_copy_key. It will also be used to copy\ncertificates later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "312b8cdffd195c68ce5cb010fb11f1db6687a2f5", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - handle_obj_remove\n\nGeneralize handle_key_remove to handle_obj_remove. It will also\nbe used to remove certificates later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a4da87aa1900c5c242ad78e9ad40f7778d7ecc29", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - rename compare func\n\nNo logic change: Rename the compare function to indicate\nit is used not only for keys, but also for any object.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32f04b8caa1ebe0ff27ee08a6abeb4f051177369", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - prepare_uri\n\nUse new field obj_typestr in routine prepare_uri.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ec7aa6750c2d4fe8a92b70b8fb554318dbe9373", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - new fields in p11sak_objtype\n\nIntroduce new fields obj_typestr and obj_liststr in struct\np11sak_objtype containing strings to be used in output\nmessages and object listing.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "78ebdcf871f390dbd2aa8cf60723a91b3320a722", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: prep for cert support - p11sak_keytype\n\nRename struct p11sak_keytype to p11sak_objtype to also include\nother object types, such as certificates. Also change the\nCKA_KEY_TYPE field to ULONG, because it will also be\nCKA_CERTIFICATE_TYPE later.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d2bb40f4842be7ab6d93ac0dbbe67c2e3e25ec6", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: bugfix: remove UNUSED macros\n\nThe keytype variable is used here.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f6458da425061276a7883c39bee8fec0d9092e1", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: update general description in manpage\n\nAdd some info about certificate support to the general tool\ndescription.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "45f8a2ffbdde8f031665a2c3cf6bef5f66b083f8", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix typos in manpage\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62356d32dd2de695a1399e056f105a091e0c4cd7", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix indention, no logic change\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe1412568ee163ba844338300d2c81cf96c94b7a", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix typo, no logic change\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ea4a668f4b6c49b150569bda3c7897ade96a7fb4", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix typo, no logic change\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "33718dcfba00afefc18392b5ba7fbbe1946c9369", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: fix typo, no logic change\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24e52670bf1bcef31ee9bb9ed8751f7ad0875be0", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: rename macro, no logic change\n\nWhen introducing certificate support, there will be a new macro\nCERT_FILTER_OPTS. For clarity, rename FILTER_OPTS to KEY_FILTER_OPTS.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "06bb50beededfaaec5a37786312059d93d212bf5", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "p11sak: rename variable, no logic change\n\nThe ckk_name variable will also be used for certificate names,\ntherefore rename it to just ck_name.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "afebc156451a4fc5df07b0fed7e885916c78843e", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "EP11: fix date format\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "839546a421bc76208855c9e56dd05b55d669f608", "commit_date": "2023-08-14T13:43:30Z", "commit_message": "common: fix checking for DSA parameters\n\nThe previous check was too strict and caused import of\n3072-bit DSA public keys to fail.\n\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7fab0a695f1a388fcd4724d0b5e64643c7b8e6ea", "commit_date": "2023-08-14T08:55:54Z", "commit_message": "CCA: Handle concurrent MK change for AES-XTS keys special cases\n\nWhen the new CCA AES master key is activated after the first part of an\nAES-XTS key has been generated or imported, but before the second part of\nthe AES-XTS key is generated or imported, special handling is required.\n\nAlso, when the first part of an AES-XTS key has been generated or imported\nwhile the new CCA AES master key was already activated, but before generating\nor importing the second part of the AES-XTS key the APQN with the new CCA AES\nmaster key gets offline, and another APQN which still has the old CCA AES\nmaster key is used to generate or import the second part of the AES-XTS key,\nboth key parts needs to be recreated (now both with the old CCA AES master\nkey).\n\nWhen importing an AES-XTS from an opaque key blob, then both parts must use\nthe same master key (i.e. the keys contain the same master key verification\npattern). If that is not the case, then the import fails with\nCKR_ATTRIBUTE_VALUE_INVALID. This check was already present in the code.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd3c1e48d235be7becf7616cb734e1c85adf1fe2", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "testcases: Update to include AES_XTS for CCA token in misc_tests\n\nThis commit contains testcase update to check exporting and importing AES XTS\nkey's CCA token. It also contains tabs to space update.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a6812751cc56e5ee1e09e41b9d56a82c3c2ca975", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "CCA: testcase changes for AES XTS mechanism.\n\nTest case changes to include AES XTS mechanism for protected keys in the CCA token.\nAlso, skip tests which try to create non protected AES XTS keys in CCA token.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54a23a6519f2240b85115ffe58c28303303b6633", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "CCA: Report the AES-XTS mechanisms as supported in the mechanism list\n\nReport the AES-XTS mechanisms as supported in the mechanism list, if the preconditions are met.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27a3c1e01a6eda6e862d351dcd7ab4a4803b658d", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "CCA: Protected key changes to support AES XTS mechanism\n\nAES XTS protected key support using CPACF functions for CCA token.\nFor CCA token, token specific AES XTS function had to be updated to include session information.\nThis had to be updated in other tokens to match the function definition.\nSecure to protected key for cca token is performed using PKEY_KBLOB2PROTK3 ioctl interface.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8f9b0ece833db0a23a18260aedb46572e670d1d3", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "CCA: AES XTS Import Clear key\n\nFor importing AES XTS clear key, two keys are separately handled.\nTwo keys are imported using the CCA library CSNBCKM function separately.\nIt is then concatenated into the CKA_IBM_OPAQUE attribute.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9ffc6bc8aa74955ec15145ff1f9a96758a07bcd1", "commit_date": "2023-08-11T08:01:17Z", "commit_message": "CCA: AES XTS Key generation changes\n\nThis commit adds token specific key generation method for AES XTS support.\nIt invokes CCA library functions CSNBKTB to Key token build and\nCSNBKGN to generate keys.\n\nSigned-off-by: Vishnudatha Kanjur <kanjur@ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "46b8786c95688ee81d846ea60e5ca0dccaccad0e", "commit_date": "2023-08-03T08:47:26Z", "commit_message": "CCA/EP11: report APQN consistency state change only once\n\nWhen an APQN event causes the APQN consistency state to change to inconsistent,\nreport that on syslog only the first time, but not if on subsequent events\nthe state also stays at inconsistent.\n\nSimilar, only report the state change from inconsistent to consistent only\nonce, and not for every event that detects a consistent state.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d1111fdf730727141497e4551eaa373ab5617f59", "commit_date": "2023-08-03T08:47:26Z", "commit_message": "CCA: Don't remember serialno of adapter as it can change during runtime\n\nThe CCA token queries the serial number of the current CCA adapter during\ntoken initialization. This serial number is then later used to select\nthe adapter during cca_iterate_adapters().\n\nUnfortunately, the underlying adapter may change during runtime, and thus\nthe serialno may change as well. Query the current serialno freshly within\ncca_iterate_adapters() and not depend on a remembered, and now possibly\nincorrect serialno.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2ba0f41ef5e14d4b509c8854e27cf98e3ee89445", "commit_date": "2023-07-11T13:33:49Z", "commit_message": "p11sak: Fix parsing of slot number 0\n\nRunning command 'p11sak list-key aes --slot 0' may result in\n'p11sak: Invalid argument '0' for option '-s/--slot''\n\nThis is because of the error checking after strtoul() within function\nprocess_number_argument(). In case errno is not zero, it treats a\nparsed value of zero as an error.\n\nUnder certain circumstances, errno is non-zero already before calling\nstrtoul(), and stays non-zero in case of strtoul() succeeds. This leads to\nan incorrect error checking, and it is treated as error.\n\nInitialize errno to zero before calling strtoul() to avoid such false error\ndetection.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "92999f344a3ad99a67a1bcfd9ad28f28c33e51bc", "commit_date": "2023-07-11T13:33:49Z", "commit_message": "p11sak: Fix listing of key objects when other object types are present\n\nA command like 'p11sak list-key all --slot N ...' fails with\n\n  p11sak: Attribute CKA_KEY_TYPE is not available in key object\n  p11sak: Failed to iterate over key objects for key type All: 0xD0: CKR_TEMPLATE_INCOMPLETE\n  p11sak: Failed to perform the 'list-key' command: CKR_TEMPLATE_INCOMPLETE\n\nwhen the object repository contains other, non-key objects, e.g. certificates.\n\nWhen 'all' is used as key type, then no filter for CKA_KEY_TYPE is used\nwith C_FindObjects(), and thus other non-key objects also match the filter.\nWhen a specific key type is specified, then only such objects match that\nhave the desired CKA_KEY_TYPE attribute value.\n\nFix this by checking the object class in get_key_infos() and skip the object,\nif it is not a key object.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52dd9953b68b43341697298ec994f460daf79fc9", "commit_date": "2023-06-07T08:44:39Z", "commit_message": "EP11: Re-enciphering session-bound key blobs require the session to be logged in\n\nWhen re-enciphering session-bound key blobs, the EP11 session must be logged\nin into the APQN where the re-encipher command is performed with. In case the\nsession is not logged in CKR_SESSION_CLOSED is returned.\n\nPass the corresponding session to the re-encipher function and add a retry\nlogic in case of CKR_SESSION_CLOSED to re-login the session.\n\nRe-enciphering token objects happens in a thread inside the pkcshsm_mk_change\ntool, so pass the R/W USER session that the tool must have open and logged in\nto the re-encipher function when iterating over the token objects.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94ee665ddefc6d523c597590950a6556ecc3fb38", "commit_date": "2023-06-02T07:43:45Z", "commit_message": "testcases: test p11sak EC key import and export with secp521r1 curve\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f71f3d2515f71c2c2031fbcdd10cbdaddc7b21cd", "commit_date": "2023-06-02T07:43:45Z", "commit_message": "p11sak: fix length handling when importing and exporting an EC public key\n\nA 521-bit EC key has a public key length of 133 bytes. Here, the BER encoding\nof the EC-point needs a full byte for the length, and thus must use the long\nform length with a 1 byte length field. This needs 3 bytes for the BER encoding.\n\nReported-by: Joerg Schmidbauer <jschmidb@de.ibm.com>\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f71a7862d2142e4e1c36a04f5be558f580b8200e", "commit_date": "2023-05-30T14:12:12Z", "commit_message": "EP11: Move EP11 MK change code into separate source file\n\nNo logic change, just moving existing code into a new source file\nep11_mkchange.c. This requires that certain definitions are moved into\nep11_specific.h, and some functions can no longer be static.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ce0ee464146006696258bac4d3759a8bdced165", "commit_date": "2023-05-30T14:12:12Z", "commit_message": "EP11: Move EP11 session code into separate source file\n\nNo logic change, just moving existing code into a new source file\nep11_session.c. This requires that certain definitions are moved into\nep11_specific.h, and some functions can no longer be static.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8ddcd5ba7e5b0bab00dedc89021147ec55b41b3", "commit_date": "2023-05-25T14:21:31Z", "commit_message": "p11sak: Fix segfault in PEM_write_bio() on OpenSSL 1.1.1\n\nOn OpenSSL version before 1.1.1r function PEM_write_bio() segfaults when the\n'header' argument is NULL. This was fixed in OpenSSL 1.1.1r with commit\nhttps://github.com/openssl/openssl/commit/3b9082c844913d3a0efada9fac0bd2924ce1a8f2\n\nAs a workaround, specify an empty string instead of NULL, which results in the\nsame output.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4c47f8b159957410166686a73b8ea917db4916d5", "commit_date": "2023-05-25T14:21:31Z", "commit_message": "testcases: fix p11sak_test.sh to find dsa-param.pem file\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85fd0a7560d32a98ed9cadc5b4c8ab7d4704b3b6", "commit_date": "2023-05-25T14:21:31Z", "commit_message": "travis: Disable -Wunused-but-set-variable error for x86\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd40bb884a6ff23b42a48237f74eb0df4d1daec1", "commit_date": "2023-05-25T14:21:31Z", "commit_message": "pkcsstats: Fix handling of user name\n\nThe struct passwd returned by getpwuid() is a pointer to a static area, that\nmay get overwritten by subsequent calls to getpwuid() or similar.\nActually, C_Initialize() itself is using getpwuid() internally, and thus will\ninterfere with the getpwuid() usage in pkcsstats.\n\nMake a copy of the returned user name before calling C_Initialize() in\ninit_ock() to ensure to work with the desired user name, and not with anything\nleft over from previous calls.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43a4dc59a574bf056e6eeb96503d404e47e3d3d5", "commit_date": "2023-05-25T14:21:31Z", "commit_message": "p11sak: Fix user confirmation prompt behavior when stdin is closed\n\nTreat any error during user confirmation prompt as 'cancel' and skip all\noperations.\n\nOne can for example close stdin during a user prompt via CTRL+D. This was\nerroneously treated as positive confirmation and therefore caused the\noperation to be performed on the current key object and all further objects\nmatching the filter as well, instead of canceling the operation entirely.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eeed5b5ef4cd41560be0d889032fb22b1bc8ab92", "commit_date": "2023-05-22T09:28:46Z", "commit_message": "common: Correctly set default attributes for certificates\n\nThe code did not set a default value for CKA_JAVA_MIDP_SECURITY_DOMAIN, but\nincorrectly set CKA_TRUSTED twice.\n\nSimilar CKA_NAME_HASH_ALGORITHM was not set, but CKA_CERTIFICATE_CATEGORY\nwas set twice, and with a wrong size.\n\nSigned-off-by: Ingo Franzki <ifranzki@linux.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}]}