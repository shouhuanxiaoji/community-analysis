{"debian/bookworm": [{"commit_oid": "8c6bd503d7110f4e9929fb73c42d37b02188dfef", "commit_date": "2023-07-15T15:28:30Z", "commit_message": "debian: note this being bookworm stable\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "90359bc5be89992a4e8b7c16624f4495cf6980de", "commit_date": "2023-07-12T12:29:10Z", "commit_message": "debian: 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "524f9a394a0c7e30a446b9b37dc2f50a14794b4e", "commit_date": "2023-07-12T12:09:06Z", "commit_message": "debian: fill in changelog for 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de99518747e2f3d9739c1e797e7316fe179f91ff", "commit_date": "2023-07-12T12:01:50Z", "commit_message": "debian: start 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f7c0efa0c0f32d804f72269fdc48d8e281df49a", "commit_date": "2023-07-12T12:00:51Z", "commit_message": "debian: merge tag 'frr-8.4.4' into debian/master\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "45e36c0c00a517ad1606135b18c5753e210cfc0d", "commit_date": "2023-06-16T04:41:18Z", "commit_message": "FRR Release 8.4.4\n\n    This a convenience release/tag for house keeping. We currently don't plan to publish\n    binary packages with this release.\n\n    Changelog:\n\nbfdd\n    Fix malformed session with vrf\n    Remove redundant nb destroy callbacks\n\nbgpd\n    Aggregate-address memory leak fix\n    Bmp fix peer-up ports byte order\n    Check 7 bytes for long-lived graceful-restart capability\n    Conform bgp_packet.h with coding standards\n    Copy the password from the previous peer on peer_xfer_config()\n    Do not allow a `no router bgp xxx` when autoimport is happening\n    Do not allow l3vni changes when shutting down\n    Do not announce routes immediatelly on filter updates\n    Ensure stream received has enough data\n    Fix bgpd core when unintern attr\n    Fix crash for `show bgp ... neighbor received-routes detail|prefix`\n    Fix debug output for route-map names when using a unsuppress-map\n    Fix ecommunity parsing for as4\n    Fix for ain->attr corruption during path update\n    Fix lcom->str string length to correctly cover aliases\n    Increase buffer size used for dumping bgp to mrt files\n    Limit flowspec to no attribute means a implicit withdrawal\n    Make bgp_keepalives.c not use mtype_tmp\n    Prevent null pointer deref when outputting data\n    Treat withdraw variable as a bool\n    Use interface name instead of pointer value\n    Use the actual pointer type instead of a void\n\nlib\n    Adjust only `any` flag for prefix-list entries if destroying\n    Destroy `any` flag when creating a prefix-list entry with prefix\n    Fix link state memory leak\n    Fix vtysh core when handling questionmark\n    On bfd peer shutdown actually stop event\n\nospf6d\n    Stop using mtype_tmp in some cases\n\nospfd, ospf6d\n    Add more logging details\n\nospfd, ospfclient\n    Do not just include .c files in another .c\n\nospfd\n    Cleanup some memory leaks on shutdown in ospf_apiserver.c\n    Fix for vitual-link crash in signal handler\n    Fix interface param type update\n    Fix memory leaks w/ `show ip ospf int x json` commands\n    Fix ospf_lsa memory leak\n    Fix ospf_ti_lfa drop of an entire table\n    Fixing summary origination after range configuration\n    Free up q_space in early return path\n    Log adjacency changes with neighbor ip in addition to neighbor id\n    Ospf opaque lsa stale processing fix and topotests.\n    Remove mtype_tmp\n    Respect loopback's cost that is set and set loopback costs to 0\n\npbrd\n    Fix mismatching in match src-dst\n\npimd\n    Fix use after free issue for ifp's moving vrfs\n    Pim not sending register packets after changing from non dr to dr\n    Process no-forward bsm packet\n\nripd\n    Fix memory leak for ripd's route-map\n\ntests\n    Add test to validate 4-byte ecomm parsing\n    Check if prefix-lists with ipv6 any works fine\n    Check if route-map works correctly if modifying prefix-lists\n\ntools\n    Fix list value remove in frr-reload\n    Fix missing remote-as configuration when reload\n    Make check flag really work for reload\n\nvtysh\n    Give actual pam error messages\n\nzebra\n    Cleanup ctx leak on shutdown and turn off event\n    Evpn handle del event for dup detected mac\n    Fix evpn dup detected local mac del event\n    Fix for heap-use-after-free in evpn\n    Fix race during shutdown\n    Install directly connected route after interface flap\n    Reduce creation and fix memory leak of frrscripting pointers\n    Unlock the route node when sending route notifications\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7be8757b855a4abcda22a70f54d87cf44bef27ef", "commit_date": "2023-06-13T19:08:00Z", "commit_message": "Merge pull request #13782 from FRRouting/mergify/bp/stable/8.4/pr-12454\n\nbgpd: Ensure stream received has enough data (backport #12454)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f61f92105288a9ddb349f27a3edf9d6594dd03c", "commit_date": "2023-06-13T19:06:11Z", "commit_message": "Merge pull request #13785 from FRRouting/mergify/bp/stable/8.4/pr-13612\n\nospfd: fix interface param type update (backport #13612)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9da5c285de38fe11ebf96f01df0d4fa8079e8ad6", "commit_date": "2023-06-13T13:55:51Z", "commit_message": "ospfd: fix interface param type update\n\ninterface link update event needs\nto be handle properly in ospf interface\ncache.\n\nExample:\nWhen vrf (interface) is created its default type\nwould be set to BROADCAST because ifp->status\nis not set to VRF.\nSubsequent link event sets ifp->status to vrf,\nospf interface update need to compare current type\nto new default type which would be VRF (OSPF_IFTYPE_LOOPBACK).\nSince ospf type param was created in first add event,\nifp vrf link event didn't update ospf type param which\nleads to treat vrf as non loopback interface.\n\nTicket:#3459451\nTesting Done:\n\nRunning config suppose to bypass rendering default\nnetwork broadcast for loopback/vrf types.\n\nBefore fix:\n\nvrf vrf1\n vni 4001\nexit-vrf\n!\ninterface vrf1\n ip ospf network broadcast\nexit\n\nAfter fix: (interface vrf1 is not displayed).\n\nvrf vrf1\n vni 4001\nexit-vrf\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 0d005b2d5c294d9d0a8db9d8beca83b97e0fd8ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "406de643d7a943fe11a3eea9cd9ae6a8b12369bb", "commit_date": "2023-06-13T13:07:43Z", "commit_message": "bgpd: Ensure stream received has enough data\n\nBGP_PREFIX_SID_SRV6_L3_SERVICE attributes must not\nfully trust the length value specified in the nlri.\nAlways ensure that the amount of data we need to read\ncan be fullfilled.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 06431bfa7570f169637ebb5898f0b0cc3b010802)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a6f6fca206f6bfd469bd3004e00f4cfa7c24b70", "commit_date": "2023-06-09T06:10:50Z", "commit_message": "Merge pull request #13737 from FRRouting/mergify/bp/stable/8.4/pr-13645\n\nbfdd: remove redundant nb destroy callbacks (backport #13645)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c49818bedcb427eefe54b6c067e264efc3637f6", "commit_date": "2023-06-08T15:20:16Z", "commit_message": "bfdd: remove redundant nb destroy callbacks\n\nFixes warning logs:\n```\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/profile/minimum-ttl'\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/sessions/multi-hop/minimum-ttl'\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit f7884aedf7a1249e3aae71b6a66c9a0f0915c4ef)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "30d9f81aaaad73f736dc70b3782009020ae19c88", "commit_date": "2023-06-07T12:07:31Z", "commit_message": "Merge pull request #13713 from FRRouting/mergify/bp/stable/8.4/pr-13693\n\ntools: fix list value remove in frr-reload (backport #13693)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "03c65e7f7f94b0be052c98d942a5cdc8ee1d3cd6", "commit_date": "2023-06-07T06:23:54Z", "commit_message": "tools: fix list value remove in frr-reload\n\nThere might be a time element(s) from\ntemporary list are removed more than once\nwhich leads to valueError in certain python3\nversion.\n\ncommit-id 1543f58b5 did not handle valueError\nproperly. This caused regression where\nprefix-list config leads to delete followed\nby add.\n\nThe new fix should just pass the exception as\nvalue removal from list_to_add or list_to_del\nis best effort.\nThis allows prefix-list config has no change\nthen removes the lines from lines_to_del and\nlines_to_add properly.\n\nTicket:#3490252\nTesting:\n\nConfigure prefix-list in frr.conf and perform\nmultiple frr-reload. After first reload operatoin\nsubsequent ones should not result in delete followed\nby add of the prefix-list but rather no-op operation.\n\n(Pdb) lines_to_add\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_add_to_del\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) c\n> /usr/lib/frr/frr-reload.py(1562)ignore_delete_re_add_lines()\n-> return (lines_to_add, lines_to_del)\n(Pdb) lines_to_add\n[]\n(Pdb) lines_to_del\n[]\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 9845c09d61a7e509bfae369648cb5f9893455ac4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b78b57674f17399dffc40ff1c3e0236a8d5a965", "commit_date": "2023-06-06T08:08:04Z", "commit_message": "Merge pull request #13695 from FRRouting/mergify/bp/stable/8.4/pr-13649\n\nzebra: Unlock the route node when sending route notifications (backport #13649)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e995236a343e390b526512e77aa20d8e25021a6", "commit_date": "2023-06-06T05:53:21Z", "commit_message": "zebra: Unlock the route node when sending route notifications\n\nWhen using a context to send route notifications to upper\nlevel protocols, the code was using a locking function to\nget the route node.  There is no need for this to be locked\nas such FRR should free it up.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 82c6e4fea54eb65e153e6bc45bb718367b0b5132)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a4b1a2b1fad9cc0af8c44db5c2d088dbe271b9d", "commit_date": "2023-06-02T00:32:52Z", "commit_message": "Merge pull request #13663 from FRRouting/mergify/bp/stable/8.4/pr-13637\n\nlib: fix vtysh core when handling questionmark (backport #13637)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8986db7d91d8ee88a00402ec9d2f54b88cedc465", "commit_date": "2023-06-01T19:31:31Z", "commit_message": "lib: fix vtysh core when handling questionmark\n\nWhen issue vtysh command with ?, the initial buf size for the\nelement is 16. Then it would loop through each element in the cmd\noutput vector. If the required size for printing out the next\nelement is larger than the current buf size, realloc the buf memory\nby doubling the current buf size regardless of the actual size\nthat's needed. This would cause vtysh core when the doubled size\nis not enough for the next element.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit f8aa257997a6a6f69ec5d5715ab04d7cbfae1d1c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27177c81869fb3e2272cf50d8b1a008d5138ae6e", "commit_date": "2023-05-31T08:10:00Z", "commit_message": "Merge pull request #13643 from FRRouting/mergify/bp/stable/8.4/pr-13634\n\nbgpd: fix bgpd core when unintern attr (backport #13634)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a458561282fdf90eff4442aaf2966c345d3666c8", "commit_date": "2023-05-31T05:58:21Z", "commit_message": "bgpd: fix bgpd core when unintern attr\n\nWhen the remote peer is neither EBGP nor confed, aspath is the\nshadow copy of attr->aspath in bgp_packet_attribute(). Striping\nAS4_PATH should not be done on the aspath directly, since\nthat would lead to bgpd core dump when unintern the attr.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit 32af4995aae647cf9d7c70347ec37b57279ea807)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9147e8c02a1db3aeb22afbd5fdda324de55bde77", "commit_date": "2023-05-27T17:05:17Z", "commit_message": "Merge pull request #13615 from FRRouting/mergify/bp/stable/8.4/pr-13608\n\nvtysh: Give actual pam error messages (backport #13608)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dba2bf943254bc7bdf4645f095502957c19cdc32", "commit_date": "2023-05-27T12:36:06Z", "commit_message": "vtysh: Give actual pam error messages\n\nCode was was written where the pam error message put out\nwas the result from a previous call to the pam modules\ninstead of the current call to the pam module.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8495b425bd056d405704df9e756560942d6815c1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bbc049481e2461a83dfc7b653d01c08846e6421f", "commit_date": "2023-05-22T19:05:56Z", "commit_message": "Merge pull request #13572 from FRRouting/mergify/bp/stable/8.4/pr-13506\n\nbfdd: Fix malformed session with vrf (backport #13506)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d8eaf6668ed4bad9b126b662f61751b3e51c0d4", "commit_date": "2023-05-22T11:25:56Z", "commit_message": "bfdd: Fix malformed session with vrf\n\nWith this configuration:\n\n```\nbfd\n peer 33:33::66 local-address 33:33::88 vrf vrf8 interface enp1s0\n exit\n !\nexit\n```\n\nThe bfd session can't be established with error:\n\n```\nbfdd[18663]: [YA0Q5-C0BPV] control-packet: wrong vrfid. [mhop:no peer:33:33::66 local:33:33::88 port:2 vrf:61]\n```\n\nThe vrf check should use the carefully adjusted `vrfid`, which is\nbased on globally/reliable interface.  We can't believe the\n`bvrf->vrf->vrf_id` because the `/proc/sys/net/ipv4/udp_l3mdev_accept`\nmaybe is set \"1\" in VRF-lite backend even with security drawback.\n\nJust correct the vrf check.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit b17c179664da7331a4669a1cf548e4e9c48a5477)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6c72a07aed870990de43d796c994e42d17f7a5c", "commit_date": "2023-05-11T04:00:27Z", "commit_message": "Merge pull request #13503 from FRRouting/mergify/bp/stable/8.4/pr-13489\n\nospfd: OSPF opaque LSA stale processing fix and topotests. (backport #13489)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "947b69eb17d0344b4e5a9ea8388ece4481200edd", "commit_date": "2023-05-10T20:52:06Z", "commit_message": "        ospfd: OSPF opaque LSA stale processing fix and topotests.\n\n        1. Fix OSPF opaque LSA processing to preserve the stale opaque\n            LSAs in the Link State Database for 60 seconds consistent with\n            what is done for other LSA types.\n         2. Add a topotest that tests for cases where ospfd is restarted\n            and a stale OSPF opaque LSA exists in the OSPF routing domain\n            both when the LSA is purged and when the LSA is reoriginagted\n            with a more recent instance.\n\nSigned-off-by: Acee <aceelindem@gmail.com>\n(cherry picked from commit 4e7eb1e62ce54ebcf78622682de962fdeff20b80)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcaac2a2a559c80ba13b5a38a98438d101e0cad7", "commit_date": "2023-05-10T18:23:47Z", "commit_message": "Merge pull request #13501 from FRRouting/mergify/bp/stable/8.4/pr-13485\n\nospfd: Respect loopback's cost that is set and set loopback costs to 0 (backport #13485)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b9c56b644d6beed1354aea9f9a75c29196bf2e33", "commit_date": "2023-05-10T16:13:57Z", "commit_message": "ospfd: Respect loopback's cost that is set and set loopback costs to 0\n\nWhen setting an loopback's cost, set the value to 0, unless the operator\nhas assigned a value for the loopback's cost.\n\nRFC states:\n\nIf the state of the interface is Loopback, add a Type 3\nlink (stub network) as long as this is not an interface\nto an unnumbered point-to-point network. The Link ID\nshould be set to the IP interface address, the Link Data\nset to the mask 0xffffffff (indicating a host route),\nand the cost set to 0.\n\nFRR is going to allow this to be overridden if the operator specifically\nsets a value too.\n\nFixes: #13472\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dd2bc4fb406cc9284d35ef623ebb8838cb158bc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "183dabba65ec90ebcc1a367a20bb7376a34f8e02", "commit_date": "2023-05-09T17:31:10Z", "commit_message": "Merge pull request #13482 from FRRouting/mergify/bp/stable/8.4/pr-13445\n\nzebra: Reduce creation and fix memory leak of frrscripting pointers (backport #13445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a49643612006672a03de4c0b13fa4298dc3f58de", "commit_date": "2023-05-09T12:38:58Z", "commit_message": "zebra: Reduce creation and fix memory leak of frrscripting pointers\n\nThere are two issues being addressed:\n\na) The ZEBRA_ON_RIB_PROCESS_HOOK_CALL script point\nwas creating a fs pointer per dplane ctx in\nrib_process_dplane_results().\n\nb) The fs pointer was not being deleted and directly\nleaked.\n\nFor (a) Move the creation of the fs to outside\nthe do while loop.\n\nFor (b) At function end ensure that the pointer\nis actually deleted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit d8be1399720ca36485b6a2209b143679b01b83cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc0a43da5a1a4e87964dbe08ca07bac34a2ffa7b", "commit_date": "2023-05-05T16:49:22Z", "commit_message": "Merge pull request #13443 from FRRouting/mergify/bp/stable/8.4/pr-13436\n\nospfd: Fix memory leaks w/ `show ip ospf int X json` commands (backport #13436)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6498b758e9db4d2ec0660d6ae263ed429c136dea", "commit_date": "2023-05-05T12:14:57Z", "commit_message": "ospfd: Fix memory leaks w/ `show ip ospf int X json` commands\n\nFRR has a memory leak in the case when int X does not\nexist and a memory leak when int X does exist.  Fix\nthese\n\nFixes: #13434\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 74e21732db129f7287d5ab227e45f305c5dbf34e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "39319b7d9eaf49ffe88901be7e5f147ec4dea724", "commit_date": "2023-05-04T14:00:46Z", "commit_message": "Merge pull request #13419 from FRRouting/mergify/bp/stable/8.4/pr-13020\n\npimd: PIM not sending register packets after changing from non DR to DR (backport #13020)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eaf0abf7b65d813a19f879714ed8b0d33debc672", "commit_date": "2023-05-02T15:56:34Z", "commit_message": "pimd: PIM not sending register packets after changing from non DR to DR\n\nWhen the router is non dr for an interface, it installs mroute to drop\nthe packets from directly connected source. This was done to avoid packets\ncoming to cpu as nocache hit. Later when it gets change from non-DR to DR,\nthese entries are not cleared. So the packets are still dropped.\nThis causes register packets not getting generated.\nSo cleaning up the mroute entries and channel oil without\nupstream reference which was created to drop.\n\nCo-authored-by: Saravanan K <saravanank@vmware.com>\nSigned-off-by: Sai Gomathi N <nsaigomathi@vmware.com>\n(cherry picked from commit 1c883aef96013753f5467ba5e5028dee0f0a82c5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7dddd66b4c0707a15ff55f03c933afd97f80115", "commit_date": "2023-04-24T18:28:33Z", "commit_message": "Merge pull request #13372 from FRRouting/mergify/bp/stable/8.4/pr-13330\n\nzebra: EVPN handle duplicate detected local mac delete event (backport #13330)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "192e5449be1772ae55a0c0bf9d1dac4ef92993f9", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra:fix evpn dup detected local mac del event\n\nThe current local mac delete event send to flag with force\nalways which breaks the duplicate detected MACs where\nit requires to be resynced from bgpd to earlier state.\n\nTicket:#3233019\nIssue:3233019\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 89844a967858d34de99bad8dcb410b4ab4e1dece)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2a3dd84bbf166ffc89485f300e38ef120670027", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra: evpn handle del event for dup detected mac\n\nUpon receiving local mobility event for MAC + NEIGH,\nboth are detected as duplicate upon hitting DAD threshold.\n\nDuplicated detected ( freezed) MAC + NEIGH are not known\nto bgpd.\n\nIf locally learnt MAC + NEIGH are deleted in kernel,\nthe MAC is marked as AUTO after sending delete event\nto bgpd.\n\nBgpd only reinstalls best route for MAC_IP route (NEIGH)\nbut not for MAC event.\nThis puts a situation where MAC is AUTO state and\nassociated neigh as remote.\n\nFix:\nDUPLICATE + LOCAL MAC deletion, set MAC delete request\nas reinstall from bgpd.\n\nTicket:#2873307\nReviewed By:\nTesting Done:\n\nFreeze MAC + two NEIGHs in local mobility event.\nDelete MAC and NEIGH from kerenl.\nbgp rsync remote mac route which puts MAC to remote state.\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit ad7685de2871996469d370192af7afafc234a3ca)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "673957c79a2eea952b7a76fa2db0fd0b2f6f08a0", "commit_date": "2023-04-21T11:10:23Z", "commit_message": "Merge pull request #13343 from FRRouting/mergify/bp/stable/8.4/pr-13341\n\nbgpd: Fix lcom->str string length to correctly cover aliases (backport #13341)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b2ace35bb53737686e0dab54f72dbffb611d705", "commit_date": "2023-04-21T06:23:18Z", "commit_message": "bgpd: Fix lcom->str string length to correctly cover aliases\n\nIf you have a very large number of large communities whose\nstring length happened to be greater than BUFSIZ FRR's bgpd\nwould crash.  This is because bgpd would write beyond\nthe end of the string.\n\nOriginally the code auto-calculated the string size appropriately\nbut commit ed0e57e3f079352714c3a3a8a5b0dddf4aadfe1d modified\nthe string length to be a hard coded BUFSIZ.  When a route-map\nlike this is added:\n\nroute-map LARGE-OUT permit 10\n set large-community 4635:0:0 4635:1:906 4635:1:2906 4635:1:4515 4635:1:4594 4635:1:4641 4635:1:4760 4635:1:7979 4635:1:9253 4635:1:9293 4635:1:9304 4635:1:9908 4635:1:13335 4635:1:16265 4635:1:17924 4635:1:18013 4635:1:20940 4635:1:22822 4635:1:24429 4635:1:24482 4635:1:32590 4635:1:32934 4635:1:36692 4635:1:38008 4635:1:38819 4635:1:41378 4635:1:45753 4635:1:46489 4635:1:49544 4635:1:51847 4635:1:54574 4635:1:54994 4635:1:55720 4635:1:56059 4635:1:57724 4635:1:65021 4635:1:134823 4635:1:136907 4635:1:146961 24115:0:24115 24115:1:906 24115:1:2906 24115:1:4515 24115:1:4594 24115:1:4641 24115:1:4760 24115:1:7979 24115:1:9253 24115:1:9293 24115:1:9304 24115:1:9908 24115:1:13335 24115:1:16265 24115:1:17924 24115:1:18013 24115:1:20940 24115:1:22822 24115:1:24429 24115:1:24482 24115:1:32590 24115:1:32934 24115:1:36692 24115:1:38008 24115:1:38819 24115:1:41378 24115:1:45753 24115:1:46489 24115:1:49544 24115:1:51847 24115:1:54574 24115:1:54994 24115:1:55720 24115:1:56059 24115:1:57724 24115:1:65021 24115:1:134823 24115:1:136907 24115:1:100000 24115:1:100001 24115:1:100002\nexit\n\nBGP would have issues and crash.\n\nModify the code to correctly determine the string length of the communities\nand to also double check if the string has an alias and ensure that the\nstring is still sufficiently large enough.  If not auto size it again.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8cb4892c0669d916557d693b878420faec8e6e2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "948e134d2c2cfb0904d4b607954304407195181d", "commit_date": "2023-04-20T04:06:34Z", "commit_message": "Merge pull request #13339 from FRRouting/mergify/bp/stable/8.4/pr-13329\n\nbgpd: Fix for ain->attr corruption during path update (backport #13329)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd5755610d8f489345d7cf472a1e63faae09e5ad", "commit_date": "2023-04-19T18:49:16Z", "commit_message": "bgpd: Fix for ain->attr corruption during path update\n\n1. Consider a established L2VPN EVPN BGP peer with soft-reconfiguartion\n   inbound configured\n\n2. When the interface of this directly connected BGP peer is shutdown,\n   bgp_soft_reconfig_table_update() is called, which memsets the evpn buffer\n   and calls bgp_update() with received attributes stored in ain table(ain->attr).\n   In bgp_update(), evpn_overlay attribute in ain->attr (which is an interned\n   attr) was modified by doing a memcpy\n\n3. Above action causes 2 attributes in the attrhash (which were previously different)\n   to match!\n\n4. Later during fsm change event of the peer, bgp_adj_in_remove() is called\n   to clean up the ain->attr. But, because 2 attrs in attrhash match, it causes\n   BGP to assert in bgp_attr_unintern()\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 6e076ba5231cba2e22dcbdc48a9c13df046a2e47)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ce238b421e8334e65c2d38df24338eeb0a3745", "commit_date": "2023-04-16T15:58:15Z", "commit_message": "Merge pull request #13316 from FRRouting/mergify/bp/stable/8.4/pr-13302\n\ntools: fix missing remote-as configuration when reload (backport #13302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94ffb7f5d29f7b61ea8cd99d70f8039bde804fe3", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: Make check flag really work for reload\n\nThe check flag of `found_pg_cmd` is already there, but not used.\nSo, make it really work for reload.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 9ea17a5d4978eb3d8ab3d192dd1cc8abf3e414e2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91e45e002a4e0d1ea3fd6063b8cc8d5fd6018e96", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: fix missing remote-as configuration when reload\n\nFrom commit `411d1a2`, `bgp_delete_nbr_remote_as_line()` is added to\nremove some specific bgp neighbors.  But, when reloading the following\nconfiguration, it will wrongly remove some good ones:\n`neighbor 66.66.66.6 remote-as internal`:\n\n```\nrouter bgp 66\n bgp router-id 172.16.204.6\n neighbor ANLAN peer-group\n neighbor ANLAN remote-as internal\n neighbor 66.66.66.6 remote-as internal <- LOST\n neighbor 66.66.66.60 peer-group ANLAN\n```\n\nThe reason is that \"66.66.66.6\" is included in \"66.66.66.60\" literally,\nthen it is mistakenly thought to be a match.  Just fix it with\nexcat match.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit a70895e83ae49b15f13e0801e0743d788b0cb595)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ee0c0acb82ff1b3bf52dc1e12fbd53a4e2fabb1", "commit_date": "2023-04-14T13:54:20Z", "commit_message": "Merge pull request #13306 from FRRouting/mergify/bp/stable/8.4/pr-13301\n\nbgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX (backport #13301)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0fc3078f9b7dea1d8703b57c6eaefec4cc2994b", "commit_date": "2023-04-14T13:04:48Z", "commit_message": "bgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX`\n\nBGP: Received signal 11 at 1681287514 (si_addr 0x8, PC 0x559ab42eb1d9); aborting...\nBGP: /lib/libfrr.so.0(zlog_backtrace_sigsafe+0x71) [0x7f4356b19af1]\nBGP: /lib/libfrr.so.0(zlog_signal+0xf9) [0x7f4356b19cf9]\nBGP: /lib/libfrr.so.0(+0xf5af5) [0x7f4356b4baf5]\nBGP: /lib/x86_64-linux-gnu/libpthread.so.0(+0x14420) [0x7f43568ab420]\nBGP: /usr/lib/frr/bgpd(prefix_rd2str+0x29) [0x559ab42eb1d9]\nBGP: /usr/lib/frr/bgpd(route_vty_out_detail_header+0x7ca) [0x559ab43061ba]\nBGP: /usr/lib/frr/bgpd(+0x1771a6) [0x559ab430a1a6]\nBGP: /usr/lib/frr/bgpd(+0x177f06) [0x559ab430af06]\nBGP: /usr/lib/frr/bgpd(+0x178c8b) [0x559ab430bc8b]\nBGP: /usr/lib/frr/bgpd(+0x179e7e) [0x559ab430ce7e]\nBGP: /lib/libfrr.so.0(+0x9417e) [0x7f4356aea17e]\nBGP: /lib/libfrr.so.0(cmd_execute_command+0x111) [0x7f4356aea321]\nBGP: /lib/libfrr.so.0(cmd_execute+0xd0) [0x7f4356aea4c0]\nBGP: /lib/libfrr.so.0(+0x10d5de) [0x7f4356b635de]\nBGP: /lib/libfrr.so.0(+0x10d81d) [0x7f4356b6381d]\nBGP: /lib/libfrr.so.0(+0x110b03) [0x7f4356b66b03]\nBGP: /lib/libfrr.so.0(event_call+0x81) [0x7f4356b5df91]\nBGP: /lib/libfrr.so.0(frr_run+0xe8) [0x7f4356b11b58]\nBGP: /usr/lib/frr/bgpd(main+0x385) [0x559ab4281d55]\nBGP: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f43566c9083]\nBGP: /usr/lib/frr/bgpd(_start+0x2e) [0x559ab428437e]\nBGP: in thread vtysh_read scheduled from lib/vty.c:2833 vty_event()\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ea5a8e4d5846778611fe1fd6e395bf3cbb33ebaa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "653078c53622ed02a01d442c0b43dae660444204", "commit_date": "2023-04-13T14:38:54Z", "commit_message": "Merge pull request #13294 from FRRouting/mergify/bp/stable/8.4/pr-13244\n\npimd: Process no-forward BSM packet (backport #13244)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "312c97ae18ef6260e8ccbc932a1fd1fc88cbd6fb", "commit_date": "2023-04-13T11:37:38Z", "commit_message": "pimd: Process no-forward BSM packet\n\nTopology Used:\n=============\nCisco---FRR4----FRR2\n\nInitially PIM nbr is down between FRR4----FRR2 from FRR2 side\nCisco is sending BSR packet to FRR4.\n\nProblem Statement:\n=================\nNo shutdown the PIM neighbor on FRR2 towards FRR4.\nFRR2, receives BSR packet immediately as the new neighbor\ncomes up. This BSR packet is having no-forward bit set.\nFRR2 is not able to process the BSR packet, and drop the\nBSR packet.\n\nRoot Cause:\n==========\nWhen PIMD comes up, we start BSM timer for 60 seconds.\nHere, the value accept_nofwd_bsm is setting to false.\n\nFRR2, when receives no-forward BSR packet, it is getting\naccept_nofwd_bsm value as false.\n\nSo, it drops, the no-forward BSM packet.\n\nFix:\n===\nSet accept_nofwd_bsm as false after first BSM packet received.\n\nSigned-off-by: Sarita Patra <saritap@vmware.com>\n(cherry picked from commit 8b462d557905200d98c7a8965b3d223637c3c5dd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "25463613552393cce5fbba4a6453947727f14f82", "commit_date": "2023-04-13T04:09:32Z", "commit_message": "Merge pull request #13281 from FRRouting/mergify/bp/stable/8.4/pr-13193\n\nlib: link state leak fix (backport #13193)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c4cc8fa5c24ee35153e0bdc8dd2a467b9c0cfa5", "commit_date": "2023-04-12T18:23:39Z", "commit_message": "Merge pull request #13277 from FRRouting/mergify/bp/stable/8.4/pr-13269\n\nospfd: Fix ospf_lsa memory leak (backport #13269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d917a966d2e27e0b9269da979ade532c3340b007", "commit_date": "2023-04-12T18:11:15Z", "commit_message": "Merge pull request #13264 from mjstapp/fix_dplane_shut_race_8_4\n\nzebra: fix race during shutdown", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3508b45fa1c66a143ef5cfa8d2a2bbed21145fc5", "commit_date": "2023-04-12T17:32:06Z", "commit_message": "Merge pull request #13275 from FRRouting/mergify/bp/stable/8.4/pr-13249\n\nzebra: Mark connected route as installed after interface flap event (backport #13249)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4bfefd4d919df0a0a88e3480c5e5fdb18356ee4", "commit_date": "2023-04-12T15:58:18Z", "commit_message": "lib: Fix link state memory leak\n\nFree link message data when a delete event is recorded.\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c123d2dee012620b8f43711062a10c49b9247a9c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfaaae0e04d5f62916b31cabe381086d2ae5fada", "commit_date": "2023-04-12T15:40:12Z", "commit_message": "ospfd: Fix ospf_lsa memory leak\n\nFree translated LSA when LSA installation fails\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c0ccfbfd45514251bb1f91ec9138dca138f88f57)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699e76c231a83b276e0e8f748d13583d359f88be", "commit_date": "2023-04-12T15:04:16Z", "commit_message": "zebra: Install directly connected route after interface flap\n\nIssue:\nAfter vlan flap, zebra was not marking the selected/best route as installed.\n\nAs a result, when a static route was configured with nexthop as directly\nconnected interface's(vlan) IP, the static route was not being installed\nin the kernel since its nexthop was unresolved. The nexthop was marked\nunresolved because zebra failed to mark the best route as installed after\ninterface flap.\n\nThis was happening because, in dplane_route_update_internal() if the old and\nnew context type, and nexthop group id are the same, then zebra doesn't send\ndown a route replace request to kernel. But, the installed (ROUTE_ENTRY_INSTALLED)\nflag is set when zebra receives a response from kernel. Since the\nrequest to kernel was being skipped for the route entry, installed flag\nwas not being set\n\nFix:\nIn dplane_route_update_internal() if the old and new context type, and\nnexthop group id are the same, then before returning, installed flag will\nbe set on the route-entry if it's not set already.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit e25a0b138a196c7daf389989ebffbd09d345cd53)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08aff7f17572b3b4333cc497c21e27a13a5dd17c", "commit_date": "2023-04-11T19:51:32Z", "commit_message": "zebra: fix race during shutdown\n\nDuring shutdown, the main pthread stops the dplane pthread\nbefore exiting. Don't try to clean up any events scheduled\nto the dplane pthread at that point - just let the thread\nexit and clean up. This is the 8.4 version.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc6697fa12660eafab4b3f724bcbaecfdd33b616", "commit_date": "2023-04-11T14:19:58Z", "commit_message": "Merge pull request #13256 from FRRouting/mergify/bp/stable/8.4/pr-13226\n\nripd: Fix memory leak for ripd's route-map (backport #13226)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "21eec745361aa704789fa9bf8a65b40b6142c029", "commit_date": "2023-04-11T11:44:36Z", "commit_message": "Merge pull request #13252 from FRRouting/mergify/bp/stable/8.4/pr-13247\n\nEvpn crashes and other ilk (backport #13247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8b3fc3d17fb4cdb92524f2d0b1e947a1eb04472", "commit_date": "2023-04-11T11:38:25Z", "commit_message": "ripd: Fix memory leak for ripd's route-map\n\nWhen cleaning `ripd`, it should free `ctx->name` of `struct if_rmap_ctx`,\nnot `ctx` itself.  Otherwise, it will lead to memory leak.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit d3ec0066e5ea0edd691b939806cd7b879ac6a32a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "182a164b1e4a784b794331ce0c187651a67bbf90", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow a `no router bgp XXX` when autoimport is happening\n\nWhen we have these sequence of events causing a crash in\nevpn_type5_test_topo1:\n\n(A) no router bgp vrf RED 100\n   this schedules for deletion the vrf RED instance\n(B) a l3vni change event from zebra\n   this creates a bgp instance for VRF RED in some cases\n   additionally it auto imports evpn routes into VRF RED\n   Please note this is desired behavior to allow for the\n   auto importation of evpn vrf routes\n(C) no router bgp 100\n   The code was allowing the deletion of the default\n   instance and causing tests to crash.\n\nEffectively the test in bgp_vty to allow/dissallow\nthe removal of the default instance was not correct\nfor the case when (B) happens.\n\nLet's just not allow the command to succeed in this case as that\nthe test was wrong.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 746e0522f3d5c8b1c6d5b698ff8cf861203bd9f6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d57481211ffd8cdd06bddb2a46501c4de831621", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow l3vni changes when shutting down\n\nWhen a `no router bgp XXX` is issued and the bgp instance\nis in the process of shutting down, do not allow a l3vni\nchange coming up from zebra to do anything.  We can just\nsafely ignore it at this point in time.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5a7c43c77ed27522e1e655795d5451c888abb10e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3235edd171af74afdc1166d31cf03f723b20447e", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Use the actual pointer type instead of a void\n\nLet's cut to the chase, we know the pointer type and\nit allows us to not to some gyrations.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit ef96e3753fe47de1edd0d5640bc30329ae55508a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7692f6a663f5ad0f24c59a17796422a9c61844a3", "commit_date": "2023-04-07T19:27:50Z", "commit_message": "Merge pull request #13231 from FRRouting/mergify/bp/stable/8.4/pr-13222\n\nLimit scope (backport #13222)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ce79c129ef21cb67f9ab503b9df401ec6f17806c", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Treat withdraw variable as a bool\n\nUsed as a bool, treated as a bool.  Make it a bool\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit aa056a2a6481aba66c727794d0ee988724be9316)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0a12b878082f77b67ad5d9b4782846ac738575a2", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Limit flowspec to no attribute means a implicit withdrawal\n\nAll other parsing functions done from bgp_nlri_parse() assume\nno attributes == an implicit withdrawal.  Let's move\nbgp_nlri_parse_flowspec() into the same alignment.\n\nReported-by: Matteo Memelli <mmemelli@amazon.it>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cfd04dcb3e689754a72507d086ba3b9709fc5ed8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272ea5a3ac12f2a12343555f8cd3f2c7eee665af", "commit_date": "2023-04-07T07:15:39Z", "commit_message": "bgpd: Conform bgp_packet.h with coding standards\n\nFRR's standards state that function declarations should\nhave actual variable names for parameters passed in.\nLet's make this so for bgp_packet.h\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 78745b8700f25187995ef010ff7486eb4c53296d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ef5db7e3958bd5390df8a8df24725ab83e64db47", "commit_date": "2023-04-06T13:52:12Z", "commit_message": "Merge pull request #13189 from FRRouting/mergify/bp/stable/8.4/pr-13175\n\nzebra: Cleanup ctx leak on shutdown and turn off event (backport #13175)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d5510fb6c519b9a49a83b10bb9e5c6fec0ab2b37", "commit_date": "2023-04-05T13:24:47Z", "commit_message": "zebra: Cleanup ctx leak on shutdown and turn off event\n\ntwo things:\n\nOn shutdown cleanup any events associated with the update walker.\nAlso do not allow new events to be created.\n\nFixes this mem-leak:\n\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790:Direct leak of 8 byte(s) in 1 object(s) allocated from:\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #0 0x7f0dd0b08037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #1 0x7f0dd06c19f9 in qcalloc lib/memory.c:105\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #2 0x55b42fb605bc in rib_update_ctx_init zebra/zebra_rib.c:4383\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #3 0x55b42fb6088f in rib_update zebra/zebra_rib.c:4421\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #4 0x55b42fa00344 in netlink_link_change zebra/if_netlink.c:2221\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #5 0x55b42fa24622 in netlink_information_fetch zebra/kernel_netlink.c:399\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #6 0x55b42fa28c02 in netlink_parse_info zebra/kernel_netlink.c:1183\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #7 0x55b42fa24951 in kernel_read zebra/kernel_netlink.c:493\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #8 0x7f0dd0797f0c in event_call lib/event.c:1995\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #9 0x7f0dd0684fd9 in frr_run lib/libfrr.c:1185\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #10 0x55b42fa30caa in main zebra/main.c:465\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #11 0x7f0dd01b5d09 in __libc_start_main ../csu/libc-start.c:308\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-SUMMARY: AddressSanitizer: 8 byte(s) leaked in 1 allocation(s).\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 3cd0accb5051e900ab343d5fa7c59360c0c1a812)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c9d7a8bc4c61b02a90bc6b8bb3cd4fb15b6c7d2d", "commit_date": "2023-04-05T06:57:21Z", "commit_message": "Merge pull request #13212 from FRRouting/mergify/bp/stable/8.4/pr-13181\n\nbgpd: fix ecommunity parsing for AS4 (backport #13181)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4fafe6aac5bc41dcce1c7330ceb06bcf1921c062", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "tests: add test to validate 4-byte ecomm parsing\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit f615e6dc409c214e66863e8c2ef94775edcac050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "34fdeb0ed34147933125d1bb4f8ab90c1f2a7ca0", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "bgpd: fix ecommunity parsing for AS4\n\nThe parser for extended communities was incorrectly disallowing an\noperator from configuring \"Route Origin\" extended communities\n(e.g. RD/RT/SoO) with a 4-byte value matching BGP_AS4_MAX (UINT32_MAX)\nand allowed the user to overflow UINT32_MAX. This updates the parser to\nread the value as a uint64_t so that we can do proper checks on the\nupper bounds (> BGP_AS4_MAX || errno).\n\nbefore:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 0:65\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\n% Malformed SoO extended community\nTORC11(config-router-af)#\n```\n\nafter:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\n% Malformed SoO extended community\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)#\n```\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit b571d79d6482217c599c53976cb8cf0ec77b847f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "49826030152d629308679819dc748e6c10d2119f", "commit_date": "2023-04-04T10:52:08Z", "commit_message": "Merge pull request #13204 from FRRouting/mergify/bp/stable/8.4/pr-13198\n\nbgpd: bmp fix peer-up ports byte order (backport #13198)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fbe7264546e4c3a5605edb13201e00ffd8dc33c", "commit_date": "2023-04-04T07:49:56Z", "commit_message": "bgpd: bmp fix peer-up ports byte order\n\nadded htons to ports in the peer-up message to fix byte order\n\nSigned-off-by: Maxence Younsi <mx.yns@outlook.fr>\n(cherry picked from commit 9e681c84fa07d768d41fb8fba269c965c8c08a4b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c497beba694937a9e6099bc6ee27bd8d3d818101", "commit_date": "2023-03-31T11:47:11Z", "commit_message": "Merge pull request #13170 from FRRouting/mergify/bp/stable/8.4/pr-13148\n\nbgpd : memory leak fix for aggregate-address on cleanup (backport #13148)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a8fdaa0a8c73a6c9b3b6663c9ff393998e27ec3e", "commit_date": "2023-03-31T08:41:51Z", "commit_message": "Merge pull request #13167 from FRRouting/mergify/bp/stable/8.4/pr-13153\n\nbgpd: increase buffer size used for dumping BGP to MRT files (backport #13153)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e64171d46fd5f0c8b488990ff38e1d06e57d834", "commit_date": "2023-03-31T08:12:07Z", "commit_message": "bgpd : aggregate-address memory leak fix\n\nMemory leaks are observed in the cleanup code. When \u201cno router bgp\" is executed,\ncleanup in that flow for aggregate-address command is not taken care.\n\nfixes the below leak:\n    --\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1e55 in aggregate_addressv6_magic bgpd/bgp_route.c:8592\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42be3f5 in aggregate_addressv6 bgpd/bgp_route_clippy.c:341\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1cde in aggregate_addressv4_magic bgpd/bgp_route.c:8543\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42bd258 in aggregate_addressv4 bgpd/bgp_route_clippy.c:255\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-SUMMARY: AddressSanitizer: 304 byte(s) leaked in 2 allocation(s).\n\nSigned-off-by: Samanvitha B Bhargav <bsamanvitha@vmware.com>\n(cherry picked from commit 7a70d99038a67f693c40d4f1c03027a2b05bfaf8)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a04f44cd90fa0571963bca5330c5438c0b069b05", "commit_date": "2023-03-31T06:25:13Z", "commit_message": "bgpd: increase buffer size used for dumping BGP to MRT files\n\nSigned-off-by: James Clarke (jamclar2) <jamclar2@cisco.com>\n(cherry picked from commit 461b6cd4d7f27624569f7a557f9abf91a85ab3cc)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc8baaf503a7c34eeab77491cdc7bfb8bd6f3b2b", "commit_date": "2023-03-30T10:17:31Z", "commit_message": "Merge pull request #13138 from FRRouting/mergify/bp/stable/8.4/pr-13124\n\nbgpd: Do not announce routes immediatelly on prefix/distribute/filter changes (backport #13124)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "90b54e70f9d2afe3c4168569fad1056ac41ff367", "commit_date": "2023-03-30T06:38:43Z", "commit_message": "bgpd: Do not announce routes immediatelly on filter updates\n\nIf we set `bgp route-map delay-timer X`, we should ignore starting to announce\nroutes immediately, and wait for delay timer to expire (or ignore at all if set\nto zero).\n\nf1aa49293a4a8302b70989aaa9ceb715385c3a7e broke this because we always sent\nroute refresh and on receiving BoRR before sending back EoRR.\n\nLet's get fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4d8e44c7538c6479ac99ec842bebc42a1e6b2ebc)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5620fe8de0f3dcb6001d67d9895bd0f31d89a027", "commit_date": "2023-03-29T07:25:54Z", "commit_message": "Merge pull request #13135 from FRRouting/mergify/bp/stable/8.4/pr-13120\n\nospfd: Fix for vitual-link crash in signal handler (backport #13120)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2755893d5c61f64543f64dfd1b24ba9bfbf90f65", "commit_date": "2023-03-29T04:19:40Z", "commit_message": "ospfd: Fix for vitual-link crash in signal handler\n\nWhenever OSPF virtual-link is created, a virtual interface is\nassociated with it. Name of the virtual interface is derived by\ncombining \"VLINK\" string with the value of vlink_count, which is a global\nvariable.\n\nProblem:\nConsider a scenario where 2 virtual links A and B are created in OSPF with\nvirtual interfaces VLINK0 and VLINK1 respectively. When virtual-link A is unconfigured\nand reconfigured, new interface name derived for it will be VLINK1, which is already\nassociated with virtual-link B. Due to this, both virtual-links A and B will\npoint to the same interface, VLINK1.\n\nDuring FRR restart when signal handler is called, OSPF goes through all the virtual\nlinks and deletes the interface(oi) associated with it. During the deletion of interface\nfor virtual-link B,it accesses the interface which was deleted already(which was deleted\nduring deletion of virual-link A) and whose fields were set to NULL. This\nleads to OSPF crash.\n\nFixed it by not decrementing vlink_count during unconfig/deletion for virtual-link.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 19f451913ed73810e4b02774eae37782c8c36f24)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7f92592633a5a91f3c200e4e03804286a286fbe8", "commit_date": "2023-03-29T04:17:47Z", "commit_message": "Merge pull request #13128 from FRRouting/mergify/bp/stable/8.4/pr-13118\n\nbgpd: Copy the password from the previous peer on peer_xfer_config() (backport #13118)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "906e8addd515b584d476b6e19d399dc64273baac", "commit_date": "2023-03-29T04:17:29Z", "commit_message": "Merge pull request #13127 from FRRouting/mergify/bp/stable/8.4/pr-13123\n\nbgpd: Fix debug output for route-map names when using a unsuppress-map (backport #13123)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677a2f20540b267b6bef0dc493d99ab826fb4c9", "commit_date": "2023-03-28T15:22:23Z", "commit_message": "bgpd: Copy the password from the previous peer on peer_xfer_config()\n\nWe copy the password only if an existing peer structure didn't have it.\n\nBut it might be the case when it exists, and we skip here.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b5b6f11fcb90219cbc69e5845872f2769d42bb2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "96bb0d80579fc93e7e41b20eeae1cc59b3f64f93", "commit_date": "2023-03-28T15:19:44Z", "commit_message": "bgpd: Fix debug output for route-map names when using a unsuppress-map\n\nLog is printing this with this config:\n\n2023-03-28 07:36:47.007 [DEBG] bgpd: [Q9J6Z-09HRR] 192.168.119.120 [Update:SEND] 1.2.3.33/32 is filtered by route-map '(null)'\n\nHere's the config:\n\n address-family ipv4 unicast\n  network 1.2.3.33/32\n  network 1.2.3.34/32\n  aggregate-address 1.2.3.0/24 summary-only\n  redistribute table 33 route-map foo\n  neighbor 192.168.119.120 route-map DENY in\n  neighbor 192.168.119.120 unsuppress-map UNSUPPRESS\n\nip prefix-list UNSUPPRESS seq 5 permit 1.2.3.4/32\nip prefix-list UNSUPPRESS seq 10 permit 1.2.3.5/32\nip prefix-list UNSUPPRESS seq 15 permit 1.2.3.6/32\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8e8ed2e1fb8adbe86135f2b9bcb47fcba6936ed3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9f1ba873637fd6ce4a2d366eafcf41402775852b", "commit_date": "2023-03-26T12:19:57Z", "commit_message": "Merge pull request #13104 from FRRouting/mergify/bp/stable/8.4/pr-13100\n\nbgpd: Check 7 bytes for Long-lived Graceful-Restart capability (backport #13100)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c69bee3ab252228accd4db36691f8739a230119c", "commit_date": "2023-03-24T16:00:24Z", "commit_message": "Merge pull request #13103 from FRRouting/mergify/bp/stable/8.4/pr-13088\n\npimd: Fix use after free issue for ifp's moving vrfs (backport #13088)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d5069143974e5a8935a6e6889aef452c46dccd2", "commit_date": "2023-03-24T14:23:33Z", "commit_message": "bgpd: Check 7 bytes for Long-lived Graceful-Restart capability\n\nIt's not 4 bytes, it was assuming the same as Graceful-Restart tuples.\n\nLLGR has more 3 bytes (Long-lived Stale Time).\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b1d33ec293e8e36fbb8766252f3b016d268e31ce)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ed5f28c765dd4531f7c131b8a45c4f4a4f049491", "commit_date": "2023-03-24T13:15:34Z", "commit_message": "Merge pull request #13095 from FRRouting/mergify/bp/stable/8.4/pr-13065\n\nospfd: Fixing Summary origination after range configuration (backport #13065)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1bc74a10434cfb7bd6304abbf53df271b576f79e", "commit_date": "2023-03-24T13:03:31Z", "commit_message": "pimd: Fix use after free issue for ifp's moving vrfs\n\nWe have this valgrind trace:\n\n==1125== Invalid read of size 4\n==1125==    at 0x170A7D: pim_if_delete (pim_iface.c:203)\n==1125==    by 0x170C01: pim_if_terminate (pim_iface.c:80)\n==1125==    by 0x174F34: pim_instance_terminate (pim_instance.c:68)\n==1125==    by 0x17535B: pim_vrf_terminate (pim_instance.c:260)\n==1125==    by 0x1941CF: pim_terminate (pimd.c:161)\n==1125==    by 0x1B476D: pim_sigint (pim_signals.c:44)\n==1125==    by 0x4910C22: frr_sigevent_process (sigevent.c:133)\n==1125==    by 0x49220A4: thread_fetch (thread.c:1777)\n==1125==    by 0x48DC8E2: frr_run (libfrr.c:1222)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Address 0x6274d28 is 1,192 bytes inside a block of size 1,752 free'd\n==1125==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x174FF1: pim_vrf_delete (pim_instance.c:181)\n==1125==    by 0x4925480: vrf_delete (vrf.c:264)\n==1125==    by 0x4925480: vrf_delete (vrf.c:238)\n==1125==    by 0x49332C7: zclient_vrf_delete (zclient.c:2187)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Block was alloc'd at\n==1125==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x48E80AF: qcalloc (memory.c:116)\n==1125==    by 0x1750DA: pim_instance_init (pim_instance.c:90)\n==1125==    by 0x1750DA: pim_vrf_new (pim_instance.c:161)\n==1125==    by 0x4924FDC: vrf_get (vrf.c:183)\n==1125==    by 0x493334C: zclient_vrf_add (zclient.c:2157)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n\nand you do this series of events:\n\na) Create a vrf, put an interface in it\nb) Turn on pim on that interface and turn on pim in that vrf\nc) Delete the vrf\nd) Do anything with the interface, in this case shutdown the system\n\nThe move of the interface to a new vrf is leaving the pim_ifp->pim pointer pointing\nat the old pim instance, which was just deleted, so the instance pointer was freed.\n\nLet's clean up the pim pointer in the interface pointer as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit e60308f498c356227df5dbc6cc04015a3b213f1d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57ae44234b0cb887dae7fea0cc6d3fc3250ad588", "commit_date": "2023-03-23T23:57:49Z", "commit_message": "ospfd: Fixing Summary origination after range configuration\n\nDescription:\n\tAfter area range config, summary lsas are aggerated to configured\n\troute but later it was being flushed instead of the actual summary\n\tlsa. This was seen when prefix-id of the aggregated route is same\n\tas one of the actual summary route.\n\tHere, aggregated summary lsa need to be returned to set the flag\n\tSUMMARY_APPROVE after originating aggregated summary lsa but its not.\n\tWhich is being cleaned up as part of unapproved summary cleanup.\n\tCorrected this now.\n\nIssue: #13028\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit c8c1a240ab9653d74b3af009f850e150909f784e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f3bea895e5a17154fd2bc0b04114a06353b912f", "commit_date": "2023-03-21T13:24:33Z", "commit_message": "Merge pull request #13071 from FRRouting/mergify/bp/stable/8.4/pr-13062\n\nzebra: Fix for heap-use-after-free in EVPN (backport #13062)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b55182a05f614896096a37fc168a7a44e176b67", "commit_date": "2023-03-21T11:05:09Z", "commit_message": "zebra: Fix for heap-use-after-free in EVPN\n\nIssue:\nWhen a netns is deleted, since zebra doesn\u2019t receive interface down/delete\nnotifications from kernel, it manually deletes the interface without removing\nthe association between zebra_l3vni and the interface that is being deleted\n(i.e it deletes the interface without setting \u201czl3vni->vxlan_if\u201d to NULL).\n\nLater, during the deletion of netns, when zl3vni_rmac_uninstall() is called to\nuninstall the remote RMAC from the kernel, zebra ends up accessing stale\n\u201czl3vni->vxlan_if\u201d pointer, which now points to freed memory.\nThis was causing heap use-after-free.\n\nFix:\nBefore zebra starts deleting the interfaces when it receives netns delete notification,\nappropriate functions() are being called to remove the association between evpn structs\nand interface and set \u201czl3vni->vxlan_if\u201d to NULL. This ensures that when\nzl3vni_rmac_uninstall() is called during netns deletion, it will bail because\n\u201czl3vni->vxlan_if\u201d is NULL.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 7eefea98ba5d42dc3f042b509fe0f18a0e1d5548)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "017c4f79b3471463452f1792a525f010f4a9d20d", "commit_date": "2023-03-21T10:58:59Z", "commit_message": "Merge pull request #13068 from FRRouting/mergify/bp/stable/8.4/pr-13061\n\nlib: on bfd peer shutdown actually stop event (backport #13061)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aaf031b33a799aeab9ff2f87353b9bf7e3b624d", "commit_date": "2023-03-21T07:00:30Z", "commit_message": "lib: on bfd peer shutdown actually stop event\n\nWhen deleting a bfd peer during shutdown, let's ensure\nthat any scheduled events are actually stopped.\n\n==7759== Invalid read of size 4\n==7759==    at 0x48BF700: _bfd_sess_valid (bfd.c:419)\n==7759==    by 0x48BF700: _bfd_sess_send (bfd.c:470)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Address 0xfb687a4 is 4 bytes inside a block of size 272 free'd\n==7759==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48BFA5A: bfd_sess_free (bfd.c:535)\n==7759==    by 0x2B7034: bgp_peer_remove_bfd (bgp_bfd.c:339)\n==7759==    by 0x29FF8A: peer_free (bgpd.c:1160)\n==7759==    by 0x29FF8A: peer_unlock_with_caller (bgpd.c:1192)\n==7759==    by 0x2A0506: peer_delete (bgpd.c:2633)\n==7759==    by 0x208190: bgp_stop (bgp_fsm.c:1639)\n==7759==    by 0x20C082: bgp_event_update (bgp_fsm.c:2751)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Block was alloc'd at\n==7759==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48F53AF: qcalloc (memory.c:116)\n==7759==    by 0x48BF98D: bfd_sess_new (bfd.c:397)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:298)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:279)\n==7759==    by 0x29BA06: peer_group2peer_config_copy (bgpd.c:2803)\n==7759==    by 0x2A3D96: peer_create_bind_dynamic_neighbor (bgpd.c:4107)\n==7759==    by 0x2A4195: peer_lookup_dynamic_neighbor (bgpd.c:4239)\n==7759==    by 0x21AB72: bgp_accept (bgp_network.c:422)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n\ntl;dr -> Effectively, in this test setup we have 300 dynamic bgp\nsessions all of which are using bfd.  When a peer collision is detected\nor we remove the peers, if an event has been scheduled but not actually\nexecuted yet the event event was not actually being stopped, leaving\nthe bsp pointer on the thread->arg and causing a crash when it is\nexecuted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f83431c7e8767abc01b3bc2c9a98bd712b55b67f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32a5096efdf5f2867106825068598833e19c06df", "commit_date": "2023-03-20T23:51:53Z", "commit_message": "Merge pull request #13057 from opensourcerouting/fix/bgp_null_deref_8.4\n\nbgpd: Prevent Null pointer deref when outputting data", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d7aca27af69589bd7c45cbf871300ed2ed8c262", "commit_date": "2023-03-20T14:10:56Z", "commit_message": "bgpd: Prevent Null pointer deref when outputting data\n\nCrash:\n\n(gdb) bt\n0  0x00007fee27de15cb in raise () from /lib/x86_64-linux-gnu/libpthread.so.0\n1  0x00007fee280ecd9c in core_handler (signo=11, siginfo=0x7ffe56001bb0, context=<optimized out>) at lib/sigevent.c:264\n2  <signal handler called>\n3  0x0000555e321c41b2 in prefix_rd2str (prd=0x10, buf=buf@entry=0x7ffe56002080 \"27.0.0.R\\340\\373\\062\\062^U\", size=size@entry=28) at bgpd/bgp_rd.c:168\n4  0x0000555e321c431a in printfrr_prd (buf=0x7ffe560021a0, ea=<optimized out>, ptr=<optimized out>) at bgpd/bgp_rd.c:224\n5  0x00007fee2812069b in vbprintfrr (cb_in=cb_in@entry=0x7ffe56002330, fmt0=fmt0@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/vfprintf.c:564\n6  0x00007fee28122ef7 in vasnprintfrr (mt=mt@entry=0x7fee281cb5e0 <MTYPE_VTY_OUT_BUF>, out=out@entry=0x7ffe560023f0 \" RD: : R\\n\", outsz=outsz@entry=1024, fmt=fmt@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/glue.c:103\n7  0x00007fee28103504 in vty_out (vty=vty@entry=0x555e33f82d10, format=format@entry=0x555e3229a3ad \" RD: %pRD\\n\") at lib/vty.c:190\n8  0x0000555e32185156 in bgp_evpn_es_show_entry_detail (vty=0x555e33f82d10, es=0x555e33c38420, json=<optimized out>) at bgpd/bgp_evpn_mh.c:2655\n9  0x0000555e32188fe5 in bgp_evpn_es_show (vty=vty@entry=0x555e33f82d10, uj=false, detail=true) at bgpd/bgp_evpn_mh.c:2721\nnotice prd=0x10 in #3.  This is because in bgp_evpn_mh.c we are sending &es->es_base_frag->prd.\n\nThere is one spot in the code where during output the es->es_base_frag is checked for non nullness\nLet's just make sure it's right in all the places.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3504210c3a194a1c19f9872de4695ee78661c009", "commit_date": "2023-03-20T13:43:03Z", "commit_message": "Merge pull request #13051 from FRRouting/mergify/bp/stable/8.4/pr-13049\n\nlib: IPv6 prefix-list entry handling with `any` (backport #13049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d000e49c6d20999cf95b44788c6849112d7b3d3e", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "lib: Destroy `any` flag when creating a prefix-list entry with prefix\n\nThe same as 61c07b9d43529f69f48ca54f4f0213cff52b5d0a, but forgot to put IPv6\nin place.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 14c1e0a16959ba8718bb7831c7720707e1d73555)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba257dc803b2d4c4c9fa48883e5717a56cabb770", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "tests: Check if prefix-lists with IPv6 any works fine\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit d8986f0134887f5d8916e71993ab378efaee4306)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "78ff98ae526b39a5cc34bfa1007cc964bcfbff03", "commit_date": "2023-03-20T11:26:36Z", "commit_message": "Merge pull request #13053 from FRRouting/mergify/bp/stable/8.4/pr-12445\n\nMore mtype tmp (backport #12445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b01240e8a516bf29ae4cddb2e437559273f92877", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "bgpd: Make bgp_keepalives.c not use MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 19a713be1db59d757d3d08b72636e4efe0a3e0c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a7eee2676306ac788173e728a30de8d379fe448", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "ospf6d: Stop using MTYPE_TMP in some cases\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 4898cbaf1dee95f687cf6aa6d0490a336fb7dceb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d7402780ebbd43e0ddb51aed8fb3a7232775ed7", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd, ospfclient: Do not just include .c files in another .c\n\nospfclient.c includes .c files directly from ospfd.  Let's separate\nthese out a bit.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 253113bcb80b7b489eb848988a90459403f870de)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "73850c562f7644cc3df339607f0a592940c64d2c", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd: Remove MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 29a1a53d6c3023841b8289f9ff7b15219ec0b05c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cbd7f85c580ea914e76eb3e6170984178bbf88", "commit_date": "2023-03-19T22:39:12Z", "commit_message": "Merge pull request #13040 from FRRouting/mergify/bp/stable/8.4/pr-13038", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c92eda8ab9aa230faa9698d2d9b440ad3f96f0f", "commit_date": "2023-03-19T20:58:10Z", "commit_message": "Merge pull request #13042 from FRRouting/mergify/bp/stable/8.4/pr-13026\n\npbrd:fix mismatching in match src-dst (backport #13026)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "511a5fb70619659d31ae7a5dc742edadfcf38e80", "commit_date": "2023-03-19T20:57:58Z", "commit_message": "Merge pull request #13044 from FRRouting/mergify/bp/stable/8.4/pr-13025\n\nOspf ti lfa leaks (backport #13025)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02d5f199d92da06dc674fc48b98e5052452f8c2f", "commit_date": "2023-03-19T04:45:22Z", "commit_message": "ospfd: Free up q_space in early return path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 52ff0e3ed4ea671f42e3ab5d6d97dd6312e2f87f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b63a91e2518dcff5671877cc90555956f6678b5d", "commit_date": "2023-03-19T04:45:21Z", "commit_message": "ospfd: Fix ospf_ti_lfa drop of an entire table\n\nThe new_rtrs variable was just generated and then dropped.  Let's\nfix that entirely\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit eb7e14011fa19f4ecc18b0108c556cc1d82ee381)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e83375e55ea5d447ea78cf2c87a00964305a628", "commit_date": "2023-03-19T04:43:01Z", "commit_message": "pbrd:fix mismatching in match src-dst\n\nupstream commit 67765a232d has incorect\naddress family check which prevent from\ndeleting src/dst config under pbr rule.\n\nTicket:#3405024\nIssue:3405024\nTesting Done:\n\nConfig:\n\npbr-map map6 seq 1\n match src-ip 2000::200:100:100:0/96\n match dst-ip 2000::100:100:100:0/96\n set nexthop-group group3\n\nBefore:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\nCannot mismatch families within match src/dst\n\nAfter:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\ntorc-12(config-pbr-map)#\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 03494887eddaa255d9b6a217bfff60cc63cede42)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e21e733b82b5a2f4d0cc8a575c15ca4a3ee09c9e", "commit_date": "2023-03-19T04:29:21Z", "commit_message": "ospfd: Cleanup some memory leaks on shutdown in ospf_apiserver.c\n\nClean up some memory leaks found in ospf_apiserver.c  Also\na crash in the original implementation.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7773d0071ab4eb1b725581c525c3e152f2c806c7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5c24b1fe10d79df26a8e4f0aaa83fd475f27309d", "commit_date": "2023-03-18T17:15:09Z", "commit_message": "Merge pull request #13034 from FRRouting/mergify/bp/stable/8.4/pr-13024\n\nlib: Adjust only any flag for prefix-list entries if destroying (backport #13024)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d827df53e1a1ac8cdf5934e763be08dc207666da", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "lib: Adjust only `any` flag for prefix-list entries if destroying\n\nBefore this patch, if we destroy `any` flag for a prefix-list entry, we always\nset destination as 0.0.0.0/0 and/or ::/0.\n\nThis means that, if we switch from `ip prefix-list r1-2 seq 5 deny any` to\n`ip prefix-list r1-2 seq 5 permit 10.10.10.10/32` we will have\n`permit any` eventually, which broke ACLs.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 61c07b9d43529f69f48ca54f4f0213cff52b5d0a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "04bb4249829ee3be1711e9464c83566a9d2295b4", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "tests: Check if route-map works correctly if modifying prefix-lists\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit a1e538178cb1ed09f6bbc0612605c5980bb9a3df)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dd7ec08225994a8d21102e9f82aab59e42f921c", "commit_date": "2023-03-17T22:04:42Z", "commit_message": "Merge pull request #13014 from FRRouting/mergify/bp/stable/8.4/pr-13009\n\nbgpd: Use interface name instead of pointer value (backport #13009)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ac3cbdf3889243c1aebf47c35b34fee74a0adcb9", "commit_date": "2023-03-17T22:04:16Z", "commit_message": "Merge pull request #13022 from FRRouting/mergify/bp/stable/8.4/pr-13016\n\nospfd, ospfd6: Add more logging (backport #13016)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "079fbc793054e115175e406745f8e69d2fb619b4", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd: Log Adjacency Changes with Neighbor IP in addition to Neighbor ID\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 386d232a1a706310f4425d1a0ad6f08c32646e10)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e327d9630cabdca69985969c8fdb0d54000f3fb", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd, ospf6d: Add more logging details\n\nBasically just router-id or interface/IP.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ba427e63489757756cd2b244315b1a911071bbc2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "706ec3d3c19fab5fbc1b7bf343397db6059e9f5e", "commit_date": "2023-03-17T07:56:44Z", "commit_message": "bgpd: Use interface name instead of pointer value\n\nLog message is borked in a manner that makes it unusable:\nbgpd[52]: [VX6SM-8YE5W][EC 33554460] 2000:31:0:53::2: nexthop_set failed, resetting connection - intf 0x561eb9005a30\n\nLet's print out the interface name instead.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 50e049db76573210e3b9ccfa962e5259452ccbe3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "933b8347fb4aadf53bd23aaae6bee6edc6ce72b8", "commit_date": "2023-03-15T21:42:09Z", "commit_message": "FRR Release 8.4.3\n\nThis a convenience release/tag for house keeping. We currently don't plan to publish\nbinary packages with this release.\n\nChangelog:\n\nbabeld\n    Fix filtering against all interfaces\n\nbgpd\n    Avoid double aspath_dup() for confederation when remote-as != as_specified\n    Convert evpn output to not pretty print json\n    Evpn route detail json display non prett\n    Fix deterministic-med check for stale paths\n    Fix use-after-free crash for evpn\n    Flowspec overflow issue\n    Free rfapi callback object always\n    Increment version number even when no data is sent\n    Intern default-originate attributes to avoid use-after-free\n    Pass global asn for confederation peers if not as_specified\n    Prevent multipathing among evpn and non-evpn paths\n\nlib, bgpd\n    Add ability to specify that some json output should not be pretty\n\nlib\n    Fix non-use of option\n    Free dnode before returning if yang translator model is already loaded\n    Release memory of yang translation module on error\n\nospfclient\n    Bugfix and no implicit register\n    Remove register \"ready\" requirement\n\nospfd\n    Compare prefix values in host order\n    Inc. opaque data in `show opaque info detail json` output\n    Small bugfix for miscounting a[s]brs\n\npbrd\n    Fix large tableids displayed as negative\n\npceplib\n    Add <time.h> include for time_t\n\npimd\n    In_multicast needs host order\n    Make logs useful for input drops\n    Try to reinstall mfc when we get nocache\n    V6 intentionally turned off route-maps.  turn it on.\n\ntests\n    Check if bgp confederation works with as_external (!as_specified)\n    Improve the ospfapi test (move to square topology)\n\ntools\n    Fix missing pbrd in rsyslog.d 45-frr.conf file\n    Frr-reload fix list value not present\n\nvrrpd\n    Give null when using null ifp to lookup vr\n\nzebrad\n    Add debug for bridge capability\n    Fix other table inactive when ip import-table is on\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c4bc751002555894fb1b7b8b75269dee0d665d2", "commit_date": "2023-03-15T17:20:26Z", "commit_message": "Merge pull request #13000 from FRRouting/mergify/bp/stable/8.4/pr-12996\n\ntools: frr-reload fix list value not present (backport #12996)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76bbd96c52f81467f8469026225528ba51f02805", "commit_date": "2023-03-15T12:00:33Z", "commit_message": "tools: frr-reload fix list value not present\n\nCheck for value present in list before removing\nas in certain python3 ValueError traceback is observed.\n\nTraceback (most recent call last):\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 2278, in <module>\n    (lines_to_add, lines_to_del, restart_frr)\n\t= compare_context_objects(newconf, running)\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1933, in compare_context_objects\n    lines_to_add, lines_to_del\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1549, in ignore_delete_re_add_lines\n    lines_to_del.remove((ctx_keys, line))\nValueError: list.remove(x): x not in list\n\nTicket:#3389979\nIssue:3389979\n\nTesting Done:\nWith fix perform frr-relaod on frr.conf config where earlier\ntraceback was seen.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 1543f58b5541c0ddb5e53bb7994136dcb5f836cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16706bc59f5733dd28192b7220b2e5f1de720372", "commit_date": "2023-03-14T08:08:51Z", "commit_message": "Merge pull request #12988 from FRRouting/mergify/bp/stable/8.4/pr-12978\n\npimd: IN_MULTICAST needs host order (backport #12978)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "642073dc8a7c58c21b695e21cdefc0f6f045f083", "commit_date": "2023-03-14T05:49:02Z", "commit_message": "pimd: IN_MULTICAST needs host order\n\nNew correct behavior:\n\neva# conf\neva(config)# ip pim rp 192.168.1.224 224.0.0.0/24\nNo Path to RP address specified: 192.168.1.224\neva(config)# ip pim rp 224.1.2.3 224.0.0.0/24\n% Bad RP address specified: 224.1.2.3\neva(config)#\n\nFixes: #12970\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8083e713562a44744c4c2f4a0aa5cc6e2b2170ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9ac1b3fa6440e2efb63a171275c0b6b4d89fa49f", "commit_date": "2023-03-13T05:11:21Z", "commit_message": "Merge pull request #12981 from FRRouting/mergify/bp/stable/8.4/pr-12974\n\nbgpd: Increment version number even when no data is sent (backport #12974)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "84b56b4b142f9f5ddaeb49918c7911a516663ff5", "commit_date": "2023-03-12T19:49:38Z", "commit_message": "bgpd: Increment version number even when no data is sent\n\nWhen an update group decides to not send a prefix\nannouncement because it has not changed, still increment\nthe version number.  Why?  To allow for the situation\nwhere you have say 2 peers in 1 peer group and shortly\nafter they come up a 3rd peer comes up.  It will be\nplaced into a separate update group and could be\ncoalesced down, when it finishes updating all data\nto it.  Now imagine that a single prefix changes at\nthis point in time as well.  Then first 2 peers may\ndecide to not send the data, since nothing has changed.\nWhile the 3rd peer will and since the versions numbers\nnever match they will never coalesce.  So when the decision\nis made to skip, update the version number as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8038460bd2b413a0c082fbd629cdae00708b133)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2cf050ffc0a2cdf9792f9982375dc26974473716", "commit_date": "2023-02-26T12:22:24Z", "commit_message": "Merge pull request #12901 from FRRouting/mergify/bp/stable/8.4/pr-12900\n\nbgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED (backport #12900)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4f01db503a828760fa81680263f7c0077cbbae87", "commit_date": "2023-02-25T00:18:04Z", "commit_message": "bgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED\n\nJust was blind when not seing it's already dup'ed above:\n\n```\tif (peer->sort == BGP_PEER_EBGP\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_AS_PATH_UNCHANGED)\n\t\t|| attr->aspath->segments == NULL)\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_RSERVER_CLIENT))) {\n\t\taspath = aspath_dup(attr->aspath); <<<<<<<<<<<<<<<\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 9930441c66131d26fd7c51d9684b9e6a228c38d7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a053fecd291590bf55b53a4bfd980ec40d54776", "commit_date": "2023-02-24T14:20:30Z", "commit_message": "Merge pull request #12892 from FRRouting/mergify/bp/stable/8.4/pr-12884\n\nbgpd: Flowspec overflow issue (backport #12884)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "301bdc3dad12eb5329f40bf236acb66eabb4eb0a", "commit_date": "2023-02-24T09:40:45Z", "commit_message": "Merge pull request #12882 from FRRouting/mergify/bp/stable/8.4/pr-12878\n\npimd: bughunting improvements (backport #12878)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a4e6637fc0621e90daa4decb4ee887a0af8ee24", "commit_date": "2023-02-24T07:53:36Z", "commit_message": "bgpd: Flowspec overflow issue\n\nAccording to the flowspec RFC 8955 a flowspec nlri is <length, <nlri data>>\nSpecifying 0 as a length makes BGP get all warm on the inside.  Which\nin this case is not a good thing at all.  Prevent warmth, stay cold\non the inside.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 0b999c886e241c52bd1f7ef0066700e4b618ebb3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d279b4317aa0ca1b997a8fb0d19b85b4aa613cd", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: try to reinstall MFC when we get NOCACHE\n\nWhether due to a pimd bug, some expiry, or someone just deleting MFC\nentries, when we're in NOCACHE we *know* there's no MFC entry.  Add an\ninstall call to make sure pimd's MFC view aligns with the actual kernel\nMFC.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57cbb1cc331854816eb51d35f2134f698040f60c", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: make logs useful for input drops\n\nThis path here is pretty far on top of the list of issues that operators\nwill run into and have to debug when setting up PIM.  Make the log\nmessages actually tell what's going on.  Also escalate some from\n`debug mroute detail` to `debug mroute`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a93a1e6969ff577b063f326af61d8c404925c740", "commit_date": "2023-02-23T04:49:25Z", "commit_message": "Merge pull request #12874 from FRRouting/mergify/bp/stable/8.4/pr-12865\n\nbgpd: free rfapi callback object always (backport #12865)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ffbcc741535f66be497ae4a72b6791a32fef58e", "commit_date": "2023-02-22T20:42:04Z", "commit_message": "Merge pull request #12872 from FRRouting/mergify/bp/stable/8.4/pr-12861\n\nbgpd: Confederation fixes with remote-as external/internal (backport #12861)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbe2cfc547a4e5a2594defbb18456eef54166212", "commit_date": "2023-02-22T20:13:13Z", "commit_message": "Merge pull request #12870 from FRRouting/mergify/bp/stable/8.4/pr-12850\n\nospfd client api bugfix and refinements (backport #12850)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e98fbcadb2e682248bd92bd212112f11aa69462a", "commit_date": "2023-02-22T19:50:27Z", "commit_message": "bgpd: free rfapi callback object always\n\nAn rfapi timer callback is responsible for the memory in a\ncontext object, even in special-case exit paths. Always\nfree that object.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit 870d3d2cb8e2fa6ff9329ec7126265d1e25a38ae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7db7e747656a20ac0fa72623c0290df7bfd73310", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "tests: Check if BGP confederation works with AS_EXTERNAL (!AS_SPECIFIED)\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit caf65e4a27539b1ecc0f6820994d36278c0e63e6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2a841adeea864dd7898be3126e815c272ea1ae", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "bgpd: Pass global ASN for confederation peers if not AS_SPECIFIED\n\nWhen we specify remote-as as external/internal, we need to set local_as to\nbgp->as, instead of bgp->confed_id. Before this patch, (bgp->as != *as) is\nalways valid for such a case because *as is always 0.\n\nAlso, append peer->local_as as CONFED_SEQ to avoid other side withdrawing\nthe routes due to confederation own AS received and/or malformed as-path.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit db5a5ee6e4665b5f951ed2a37398820da4b762f1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6550c0bcec1559f189c6aa9f9966d70b32d9790d", "commit_date": "2023-02-22T16:55:09Z", "commit_message": "tests: improve the ospfapi test (move to square topology)\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 663a0c96d9c52895189bef7579a308a1b14120fa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "126c452757a5aa6a73451557f319b2b947047895", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: remove register \"READY\" requirement\n\n- also add ability of the apibin to process commands on stdin\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 6efa8fd5c1653372cea1b25a9fa764269960bb91)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59346a3a4ceb2fbb439d3018871fdaabb2af7701", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: bugfix and no implicit register\n\n- dont delete the callback on opaque data delete\n- require explicit registration\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 703d2c0a3e30c18acd2426b50f97ea8c91c479f9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "652dd9bbc98e729fb3e3d0aaa344865b0632dda3", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: compare prefix values in host order\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 156a904cae87a1ea1cd51de5012c9bddc0d63747)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6e6b7c02d7a4d7e58a578cbff4e76d17612d2096", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: small bugfix for miscounting A[S]BRs\n\n- improve the debug for the second add router call.\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1eea62bb1c439ee66d502ef808695554370032e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de3c7c000c694086c12ae754e8cb0dbebe1deca9", "commit_date": "2023-02-22T16:55:06Z", "commit_message": "ospfd: inc. opaque data in `show opaque info detail json` output\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1794afe01030b3111e83e26986cd004dce290049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2bea6210453f08329d70442b93a45953313f43b0", "commit_date": "2023-02-22T08:56:31Z", "commit_message": "Merge pull request #12858 from FRRouting/mergify/bp/stable/8.4/pr-12818\n\nzebra: Fix other table inactive when ip import-table is on (backport #12818)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42a89db1aa6eed18e339efdc38826eb673fc00ed", "commit_date": "2023-02-21T16:38:15Z", "commit_message": "zebra: Fix other table inactive when ip import-table is on\n\nIn `rib_link`, if is_zebra_import_table_enabled returns\ntrue, `rib_queue_add` will not called, resulting in other\ntable route node never processed. This actually should not\nbe dependent on whether the route is imported.\n\nIn `rib_delnode`, if is_zebra_import_table_enabled returns\ntrue, it will use `rib_unlink` instead of enqueuing the\nroute node for process. There is no reason that imported\nroute nodes should not be reprocessed. Long ago, the\nbehaviour was dependent on whether the route_entry comes\nfrom a table other than main.\n\nSigned-off-by: zyxwvu Shi <i@shiyc.cn>\n(cherry picked from commit 207207c0c03e1108d1bae5cf345b7a29850e6ffd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "410d78b7a4f2c8b4d4c3736c6d6cdb710287ca80", "commit_date": "2023-02-17T14:37:08Z", "commit_message": "Merge pull request #12825 from FRRouting/mergify/bp/stable/8.4/pr-12817\n\nsome missed upstream commits (backport #12817)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b44db730c5b68af0f3e4809139c24ea3208c2f9b", "commit_date": "2023-02-17T10:09:21Z", "commit_message": "Merge pull request #12745 from opensourcerouting/fix/no_pretty_picks\n\nbgpd: Convert evpn output to not pretty print json", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc87d3d082faeb4fd9f478b57b6c83cb2614ca1e", "commit_date": "2023-02-16T20:16:02Z", "commit_message": "lib: Fix non-use of option\n\nCommit d7c6467ba2f55d1055babbb7fe82716ca3efdc7e added the\nability to specify non pretty printing but unfortunately\nforgot to use the option variable to make the whole\nthing work.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3749235319b75ef3fab75da0147b3f5a10dd3626", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "zebra: Add debug for bridge capability\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nTicket: #2609944\n(cherry picked from commit f88889ba7a48c6126e7f389b023cd232cdee5078)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa36056fb57d29eda8f09276c82383b5971b816", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "bgpd: Prevent multipathing among EVPN and non-EVPN paths\n\nEnsure that a multipath set is fully comprised of EVPN paths (i.e.,\npaths imported into the VRF from EVPN address-family) or non-EVPN\npaths. This is actually a condition that existed already in the code\nbut was not properly enforced.\n\nThis change, as a side effect, eliminates the known trigger condition\nfor bad or missing RMAC programming in an EVPN deployment, described\nin tickets CM-29043 and CM-31222. Routes (actually, paths) in a VRF\nrouting table that require VXLAN tunneling to the next hop currently\nneed some special handling in zebra to deal with the nexthop (neigh)\nand RMAC programming, and this is implemented for the entire route\n(prefix), not per-path. This can lead to the bad or missing RMAC\nsituation, which is now eliminated by ensuring all paths in the route\nare 'similar'.\n\nThe longer-term solution in CL 5.x will be to deal with the special\nprogramming by means of explicit communication between bgpd and zebra.\nThis is already implemented for EVPN-MH via CM-31398. These changes\nwill be extended to non-MH also and the special code in zebra removed\nor refined.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\nAcked-by:      Trey Aspelund <taspelund@nvidia.com>\nAcked-by:      Anuradha Karuppiah <anuradhak@nvidia.com>\nAcked-by:      Chirag Shah <chirag@nvidia.com>\n\nTicket: CM-29043\nTesting Done:\n1. Manual testing\n2. precommit on both MLX and BCM platforms\n3. evpn-smoke - BCM and VX\n\nResults described in the ticket\n\n(cherry picked from commit d2d71b042edc628cb6edae0b25d0a49aa9ad2050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38efc4b35e43fa2b6ad2a6d4bb41f3fcb3a5d559", "commit_date": "2023-02-16T19:46:36Z", "commit_message": "bgpd: Fix deterministic-med check for stale paths\n\nWhen performing deterministic MED processing, ensure that the peer\nstatus is not checked when we encounter a stale path. Otherwise, this\npath will be skipped from the DMED consideration leading to it potentially\nnot being installed.\n\nTest scenario: Consider a prefix with 2 (multi)paths. The peer that\nannounces the path with the winning DMED undergoes a graceful-restart.\nBefore it comes back up, the other path goes away. Prior to the fix, a\nthird router that receives both these paths would have ended up not\nhaving any path installed to the prefix after the above events.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nFor internal use:\nTicket: CM-32032\nTesting done: Multiple manual testing\n\n(cherry picked from commit de692a4ebe0b8ea8e191d8ac1f3b41a386edd577)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15135ce2b71182d41378fc9f1336599b1b415549", "commit_date": "2023-02-14T20:19:44Z", "commit_message": "Merge pull request #12804 from FRRouting/mergify/bp/stable/8.4/pr-12790\n\nvrrpd: give null when using null ifp to lookup vr (backport #12790)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "170851737d9833400ceaa3c60456b50654029006", "commit_date": "2023-02-14T14:30:38Z", "commit_message": "vrrpd: give null when using null ifp to lookup vr\n\nThis is still causing crashes somehow.\n\nSigned-off-by: Quentin Young <qlyoung@cumulusnetworks.com>\n(cherry picked from commit ed331629de425914568c1d5c114018878627cdaf)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1925536fe16527b4d9ecea08763ee1693152d3eb", "commit_date": "2023-02-10T13:03:51Z", "commit_message": "Merge pull request #12787 from opensourcerouting/fix/backport_e9340ff429f5f1a255e89a50867a04a370cd56bb\n\nbgpd: Intern default-originate attributes to avoid use-after-free", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c6be72a69c2294bf93e1c7aa640ca44faeb04b6f", "commit_date": "2023-02-10T09:00:58Z", "commit_message": "bgpd: Intern default-originate attributes to avoid use-after-free\n\nWhen we receive a default route from a peer and we originate default route\nusing `neighbor default-originate`, we do not track of struct attr we use,\nand when we do `no neighbor default-originate` we withdraw our generated\ndefault route, but we announce default-route from the peer.\n\nAfter we do this, we unintern aspath (which was used for default-originate),\nBUT it was used also for peer's default route we received.\n\nAnd here we have a use-after-free crash, because bgp_process_main_one()\nreaps old paths that are marked as BGP_PATH_REMOVED with aspath->refcnt > 0,\nbut here it's 0.\n\n```\n0 0x55c24bbcd022 in aspath_key_make bgpd/bgp_aspath.c:2070\n1 0x55c24b8f1140 in attrhash_key_make bgpd/bgp_attr.c:777\n2 0x7f52322e66c9 in hash_release lib/hash.c:220\n3 0x55c24b8f6017 in bgp_attr_unintern bgpd/bgp_attr.c:1271\n4 0x55c24ba0acaa in bgp_path_info_free_with_caller bgpd/bgp_route.c:283\n5 0x55c24ba0a7de in bgp_path_info_unlock bgpd/bgp_route.c:309\n6 0x55c24ba0af6d in bgp_path_info_reap bgpd/bgp_route.c:426\n7 0x55c24ba17b9a in bgp_process_main_one bgpd/bgp_route.c:3333\n8 0x55c24ba18a1d in bgp_process_wq bgpd/bgp_route.c:3425\n9 0x7f52323c2cd5 in work_queue_run lib/workqueue.c:282\n10 0x7f52323aab92 in thread_call lib/thread.c:2006\n11 0x7f5232300dc7 in frr_run lib/libfrr.c:1198\n12 0x55c24b8ea792 in main bgpd/bgp_main.c:520\n13 0x7f5231c3a082 in __libc_start_main ../csu/libc-start.c:308\n14 0x55c24b8ef0bd in _start (/usr/lib/frr/bgpd+0x2c90bd)\n    ```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4f647ff1f8dae3359fbab40cdb4a031b615a04", "commit_date": "2023-02-10T08:14:35Z", "commit_message": "Merge pull request #12783 from FRRouting/mergify/bp/stable/8.4/pr-12781\n\nlib: Release memory of YANG translation module on error (backport #12781)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bcc9e7a548115da1b5ab5c0ebe41f0d74373f839", "commit_date": "2023-02-10T00:25:47Z", "commit_message": "lib: Free dnode before returning if YANG translator model is already loaded\n\nSeems just a missed one because at `goto error` we release dnode.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ecf82aa41e76ecfbaf3f5762af1e90ebc9263721)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8093cc4b63c880f13c16a8d846722e5831cd2310", "commit_date": "2023-02-10T00:25:46Z", "commit_message": "lib: Release memory of YANG translation module on error\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b9941b3fec21eca413c4ca9460a264eb9afb7e34)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd635cd3ae34536c506287b1056dea516be7c4b0", "commit_date": "2023-02-09T13:12:00Z", "commit_message": "Merge pull request #12779 from FRRouting/mergify/bp/stable/8.4/pr-12773\n\npbrd: fix large tableids displayed as negative (backport #12773)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b70772dbd7c89a3a64d1e69461e76f35d66e869", "commit_date": "2023-02-09T10:48:49Z", "commit_message": "pbrd: fix large tableids displayed as negative\n\nTicket: 2699411\nSigned-off-by: Wesley Coakley <wcoakley@nvidia.com>\n(cherry picked from commit 8dc2001c914956f1b493c4e04499b520362dd053)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f4af9196d963c3615b08ac966828cd8b689853c7", "commit_date": "2023-02-09T07:47:01Z", "commit_message": "Merge pull request #12774 from FRRouting/mergify/bp/stable/8.4/pr-12769\n\ntools: Fix missing pbrd in rsyslog.d 45-frr.conf file (backport #12769)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b520b4f6800d2049440cc770c03a8438a60fb31", "commit_date": "2023-02-09T01:18:09Z", "commit_message": "tools: Fix missing pbrd in rsyslog.d 45-frr.conf file\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7386031781858b3a43bc66484b53d57be3ee28e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5b3be313db17d6d705872fc535adff6197391f34", "commit_date": "2023-02-08T11:54:40Z", "commit_message": "Merge pull request #12766 from FRRouting/mergify/bp/stable/8.4/pr-12761\n\nbgpd: fix use-after-free crash for evpn (backport #12761)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "850fe41c793f6b8c5487a01108aeaf67255899f5", "commit_date": "2023-02-08T08:09:37Z", "commit_message": "bgpd: fix use-after-free crash for evpn\n\n```\nanlan(config-router-af)# vni 33\nanlan(config-router-af-vni)# route-target both 44:55\nanlan(config-router-af-vni)# no route-target both 44:55\nvtysh: error reading from bgpd: Resource temporarily unavailable (11)Warning: closing connection to bgpd because of an I/O error!\n```\n\nWhen `bgp_evpn_vni_rt_cmd` deals with \"both\" type, it wrongly created\nonly one node ( should be two nodes ) for lists of both `vpn->import_rtl` and\n`vpn->export_rtl`.  At this time, the two lists are already wrong.\n\nIn `no route-target both RT`, it will free the single node from lists of both\n`vpn->import_rtl` and `vpn->export_rtl`.  After freed from `vpn->import_rtl`,\nit is \"use-after-free\" at the time of freeing it from `vpn->export_rtl`.\nIt causes crash sometimes, or other unexpected behaviours.\n\nThis issue is introduced by commit `3b7e8d`, which have adjusted both\n`bgp_evpn_vni_rt_cmd` and `bgp_evpn_vrf_rt_cmd`.\n\nSince `bgp_evpn_vrf_rt_cmd/no_bgp_evpn_vrf_rt_cmd` works well again\nunintentionally with commit `7022da`, only `bgp_evpn_vni_rt_cmd` needs to\nmodify - add two nodes for \"both\" type and some explicit comments for this\nspecial case of \"both\" type.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 432ff4b036860fb626f3027a7798038d594b8042)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c8119a01157327eac334d7370b8f56aa0e3ff42", "commit_date": "2023-02-07T11:28:28Z", "commit_message": "Merge pull request #12752 from FRRouting/mergify/bp/stable/8.4/pr-12741\n\npceplib: add <time.h> include for time_t (backport #12741)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "641899baf55f233898e52b042a3351f4005c6668", "commit_date": "2023-02-07T09:07:05Z", "commit_message": "pceplib: add <time.h> include for time_t\n\nFixes build on musl. Used for time_t in the header.\n\nBug: https://bugs.gentoo.org/862558\nSigned-off-by: Sam James <sam@gentoo.org>\n(cherry picked from commit 3c8c112df4d72d98c8646df1495cf26a84c2c3b7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48bb8903873da49f7dd43f291f34ab1d974db0d6", "commit_date": "2023-02-06T16:34:27Z", "commit_message": "Merge pull request #12746 from FRRouting/mergify/bp/stable/8.4/pr-12740\n\nbabeld: Fix filtering against all interfaces (backport #12740)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59d91332b9f0cfaa535f39e14520eb6fc44e8f08", "commit_date": "2023-02-06T13:25:50Z", "commit_message": "babeld: Fix filtering against all interfaces\n\nThe first argument of `access_list_lookup` and `prefix_list_lookup`\nshould be `AFI_` constants instead of `AF_` constants.\n\nSigned-off-by: Yuxiang Zhu <vfreex@gmail.com>\n(cherry picked from commit 0f9650ca955d4c9a5c3d9de72a9306cb429079f2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8cc8e056d63949769994bae0b745198f77a8412e", "commit_date": "2023-02-06T10:48:13Z", "commit_message": "bgpd: Convert evpn output to not pretty print json\n\nCommit: 3cdb03fba7b40240fb38469a12b7b05a11043e09\nchanged the vty_json output to not be pretty printing.\nThe previous commit in the tree added vty_json_no_pretty\nlet's use that instead\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2c512e1bc9ac7bee58da01fe7e12218aea75699c", "commit_date": "2023-02-06T10:48:10Z", "commit_message": "lib, bgpd: Add ability to specify that some json output should not be pretty\n\nInitial commit: 23b2a7ef524c9fe083b217c7f6ebaec0effc8f52\nchanged the json output of `show bgp <afi> <safi> json` to\nnot have pretty print because when under a situation where\nthere are a bunch of routes with a large scale ecmp show\noutput was taking forever and this commit cut 2 minutes out\nof vtysh run time.\n\nSubusequent commit: f4ec52f7cc99f709756d9030623a20c98a086125\nchanged this back.\n\nWhen upgrading to latest version the long run time was noticed\ndue to testing.  Let's add back this functionality such that\nFRR can have reduced run times with vtysh when it's really\nneeded.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a758370a5a2b1215c9c8df368554fae5c302429", "commit_date": "2023-02-06T10:47:56Z", "commit_message": "bgpd: evpn route detail json display non prett\n\nFor BGP evpn route table detail json to use\nnon pretty form of display.\n\nProblem:\nIn scaled evpn route table detail json dump\noccupies high resources (CPU + memory) of the system.\nIn high scale evpn route dump using pretty form\nhogs CPU for a while which can trigger watchfrr\nto kill bgpd.\n\nSolution:\nAvoid pretty JSON print for detail version dump\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c362f673bae8c7e0735da7d6a922d6a5996a8c21", "commit_date": "2023-02-01T12:12:29Z", "commit_message": "Merge pull request #12719 from FRRouting/mergify/bp/stable/8.4/pr-12704\n\npimd: v6 intentionally turned off route-maps.  Turn it on. (backport #12704)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b6d5278bac3c13ac5cb53b88157d1e1be74d6a", "commit_date": "2023-01-31T19:02:27Z", "commit_message": "pimd: v6 intentionally turned off route-maps.  Turn it on.\n\nWhy?\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f51c430a17b79bff56bae4b8425711c16cd45300)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62ac43de9f3bc470586cf4f51fadf013bf542b32", "commit_date": "2023-01-10T15:02:10Z", "commit_message": "FRR Release 8.4.2\n\nBug fixes:\n\n- bfdd: fix ipv4 socket source selection\n- bgpd : fix crash for `set ipv4/ipv6 vpn next-hop` command\n- bgpd: stop overriding nexthop when bgp unnumbered\n- bgpd: fix aggregated routes are withdrawn abnormally\n- bgpd: fix a few memory leaks\n- build: enable pim6d by default\n- build: fix sed regex in lua macro\n- doc : add freebsd 13 build docs\n- isisd: fix memory leak\n- lib:  disable vrf before terminating interfaces\n- lib: do not log `echo ping` commands from watchfrr\n- ospf6d:  fix infinite loop when adding asbr route\n- ospfd: fix rfc conformance test cases 25.19 and 27.6\n- ospfd: fix typo and report the P2P link name in the warning\n- ospfd: report the router IP with opaque capability mismatch\n- ospfd: fixing memory leak\n- pimd: consistently ignore prefix list mask len\n- staticd: do not crash when modifying an existing static route with color\n- zebra: free all memory associated ctx->u.iptable.interface_name_list\n- zebra: fix tracepoint changes for lttng\n- zebra: free up route map name memory on vrf deletion event\n- zebra: use `mpls enable`, not `mpls` when generating a config\n- tools: Ignore agentx command for frr-reload.py\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eae0855f541f0a4e8996dfe19ed3f312499375f7", "commit_date": "2023-01-09T20:56:34Z", "commit_message": "Merge pull request #12610 from FRRouting/mergify/bp/stable/8.4/pr-12606\n\n*: various build fixes (backport #12606)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e465af711c3da9267de8c5870d8242b353e8ba", "commit_date": "2023-01-09T18:27:03Z", "commit_message": "build: add doc files missing from dist tarball\n\nThe override.css/js files for sphinx docs were not being included into\nthe tarball created by `make dist`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 26eaf6e386ed2b960c0004d2f927b586e516f587)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e0f65db75fb879805065feade4e888f1aaa56e02", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib/clippy: fix symbol validity check\n\nIf symvalid is false, looking at symidx is bogus.\n\nThis fixes a build-time SEGV on mips64el.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit a185874504654a691aa7c204b87ee2f9e3b8a49a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1a89a6f79db101b15299ae19d36d459d2e9673d9", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib: disable xref ELF note on mips64el\n\nmips64el does not have a 64-bit PC-relative relocation, which is needed\nto emit the ELF note for xrefs.  Disabling the ELF note means clippy\ntakes the fallback path using section headers, so everything does still\nwork (... unless you strip the section headers.)\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ee4a6b9f654fbd4e07485037481ad6b4766bbc6d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "00624c9564457eb62adcd908b310f4df65b0efe5", "commit_date": "2023-01-09T18:27:01Z", "commit_message": "zebra: do not load/store wider-than-ptr atomics\n\nMost 32-bit architectures cannot do atomic loads and stores of data\nwider than their pointer size, i.e. 32 bit.  Funnily enough they\ngenerally *can* do a CAS2, i.e., 64-bit compare-and-swap, but while a\nCAS can emulate atomic add/bitops, loads and stores aren't available.\n\nReplace with a mutex;  since this is 99% used from the zserv thread, the\nmutex should take the local-to-thread fast path anyway.  And while one\natomic might be faster than a mutex lock/unlock, we're doing several\nhere, and at some point a mutex wins on speed anyway.\n\nThis fixes build on armel, mipsel, m68k, powerpc, and sh4.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ccac11096c385d269ecd15ad24ac88d469e7577c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c2853adde61305528383ea656852bf55a83d82f6", "commit_date": "2023-01-09T17:36:11Z", "commit_message": "Merge pull request #12607 from FRRouting/mergify/bp/stable/8.4/pr-12605\n\nospfd: report the router IP with opaque capability mismatch (backport #12605)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2e0a2a46b477ddee454ef41179fb4d3e9bc44bf8", "commit_date": "2023-01-07T18:44:06Z", "commit_message": "ospfd: report the router IP with Opaque capability mismatch\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit 8935b0fac623c84665282e81b59302b02388ad48)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "edc5dce610484cc4f20839a921dad1ee5c49c232", "commit_date": "2023-01-05T11:42:55Z", "commit_message": "Merge pull request #12598 from FRRouting/mergify/bp/stable/8.4/pr-12557\n\nvtysh: Remove double retrieve of env VTYSH_HISTFILE (backport #12557)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8df1306e2a490478250315c066d4d3e01d7a1143", "commit_date": "2023-01-05T08:32:42Z", "commit_message": "Merge pull request #12593 from FRRouting/mergify/bp/stable/8.4/pr-12458\n\nbgpd: Fix aggregated routes are withdrawn abnormally. (backport #12458)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8d472da36100a5b86f1d32d71b24c9163607daf8", "commit_date": "2023-01-05T08:32:35Z", "commit_message": "vtysh: Remove double retrieve of env VTYSH_HISTFILE\n\nThe code is double checking the VTYSH_HISTFILE env variable,\nadditionally clang-15 when running SA over it doesn't fully\nunderstand the code pattern.  Reduce the double check to\none check to reduce program run-time (ha!) and make SA happy.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 99a9f25ce8c1e070f7f37c4cbd439c11bb7432eb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2865946b03feada837020d6dcbca06f28581efc8", "commit_date": "2023-01-04T20:51:17Z", "commit_message": "    bgpd: Fix aggregated routes are withdrawn abnormally.\n\n    The withdraw message and announcement message of a prefix are received continuously within 50ms, which may lead to abnormal aggregation route reference count.\n    Steps to reproduce:\n    --------------------------\n    step1:\n    local config aggregate route 111.0.0.0/24\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:2\n\n    step2:\n    peer withdraw 111.0.0.1/32 and network 111.0.0.1/32 in 50ms\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:1\n\n    step3:\n    peer withdraw 111.0.0.1/32\n    received route\uff1a111.0.0.02/32\n    ref_count:0\n    aggregate route will be withdrawn abnormally\n\nSigned-off-by: liuze03 <liuze03@baidu.com>\n(cherry picked from commit 704e189e594418571463c80a3efcc2c1020adcf4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9594783741cc342d7612024bce57feb75813012f", "commit_date": "2023-01-03T07:17:53Z", "commit_message": "Merge pull request #12585 from FRRouting/mergify/bp/stable/8.4/pr-12566\n\nospfd: add advertising router IP to Opaque capability mismatch err msg (backport #12566)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a3acab2e123677c8490539464f6cf031cadcd24", "commit_date": "2023-01-02T21:13:09Z", "commit_message": "ospfd: add advertising router IP to Opaque capability mismatch error message\n\nSubmitted-by Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit eab190351fc4460477274cec106989392bcff1b5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "408cdb0011da5a0d9c3b63592e933eeb23e2ce53", "commit_date": "2023-01-02T20:42:30Z", "commit_message": "Merge pull request #12565 from FRRouting/mergify/bp/stable/8.4/pr-12560\n\ntools: Ignore agentx command for frr-reload.py (backport #12560)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bccbd54ecc147e1dbc67b97f1e4575c1b71960ab", "commit_date": "2022-12-28T11:12:26Z", "commit_message": "Merge pull request #12570 from FRRouting/mergify/bp/stable/8.4/pr-12558\n\nbgpd: static routes are leaked on shutdown (backport #12558)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f94ed4fdbbdf644be4ab12f2df04e5044717eff", "commit_date": "2022-12-27T20:07:55Z", "commit_message": "bgpd: bgp_connected_add memory was being leaked in some cases\n\nOn shutdown, bgp calls an unlock for the bnc connected table,\nvia the bgp_connected_cleanup function.  This function is\nonly ever called on shutdown, so we know that bgp is going\naway.  The refcount for the connected data can be more than\n1.  Let's not worry about the refcount on shutdown and\njust delete the nodes instead of leaving them around.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1c225152c0f19d2d52c38e8cdc982750e50f72e0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cec86b9c6e00bd65d0d0be220e7d7afbf949523", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: rfapi properly free a couple lists\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit c560f0698f425d4c054e13eccc9df87431cdb73f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2fdad4aef49a2a82f220f19b5bb611d05026fa31", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: static routes are leaked on shutdown\n\nShutdown of bgp results in both the bgp_path_info,\nbgp_dest and bgp_table's not being freed because\nthe bgp_path_info remains locked.\n\nEffectively static routes are scheduled for deletion but bgp_process\nskips the work because the work queue sees that the bgp router\nis marked for deletion.  Effectively not doing any work and leaving\ndata on the floor.\n\nModify the code when attempting to put into the work queue to\nnotice and not do so but just unlock the path info.\n\nThis is effectively the same as what goes on for normal peering\nas that it checks for shutdown and just calls bgp_path_info_free\ntoo.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f9d6087c51fbeafc76f3c7f1b72681cbab7f3651)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fd97bf31256815124e7c9d5fbd718eb0f7ba50c", "commit_date": "2022-12-25T01:48:51Z", "commit_message": "tools: Ignore agentx command for frr-reload.py\n\nagentx can't be disabled once enabled, so we should ignore it for frr-reload.py.\n\n```\n$ /usr/lib/frr/frr-reload.py --reload /etc/frr/bgpd.conf --bindir /usr/local/bin\n\"no agentx\" we failed to remove this command\nSNMP AgentX support cannot be disabled once enabled\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4a9ea00a27c4edfb21e1efaed468a9eefc389d79)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "930d04ad1c6e1980f24805738499df47fc6e9ac8", "commit_date": "2022-12-20T07:51:42Z", "commit_message": "Merge pull request #12545 from FRRouting/mergify/bp/stable/8.4/pr-12438\n\nbgpd: Stop overriding nexthop in vpn_leak_from_vrf_update when the peer is BGP unnumberred (backport #12438)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c16d0acc3d30eebbd597d4a55cffd9a5170d357d", "commit_date": "2022-12-19T21:29:49Z", "commit_message": "tests: Add topotest bgp_vrf_leaking_5549_routes\n\nTo verify previous changes, this PR introduces topotest to verify\nwhether imported routes learnt from BGP unnumbered peers will be active\non VPN RIB and other VRF RIB.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 2b0efccd057752a14e88c71f142a5b8bc0ad93a8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a809a704d9ff5a4500a938f57874278698e443", "commit_date": "2022-12-19T21:29:48Z", "commit_message": "bgpd: Stop overriding nexthop when BGP unnumberred\n\nWhen we use vrf-to-vrf export, the nexthop has already not been\noverridden when the peer is BGP unnumberred. However, when we use normal\nexport, the nexthop will be oberridden. This behavior will make the VPN\nroutes invalid in VPN RIB.\n\nThis PR stops overriding nexthop even if we use normal export.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit f784007d677ee20e4dbd20366928652be2a0b23c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa0c54afbca317d6d04da199dd637ce97aaac9cc", "commit_date": "2022-12-14T11:51:29Z", "commit_message": "Merge pull request #12512 from FRRouting/mergify/bp/stable/8.4/pr-12498\n\nospfd: fix typo and report the link name in the warning (backport #12498)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4842032026a7208ce26a0ca92158a42c6153ec0d", "commit_date": "2022-12-14T04:07:51Z", "commit_message": "Merge pull request #12514 from donaldsharp/cleanup_8.4\n\nzebra: Remove badly backported TC code", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272686633b651cd57adcca00b5b6b4e7181b6b1d", "commit_date": "2022-12-13T20:13:37Z", "commit_message": "zebra: Remove badly backported TC code\n\nSome TC code for the dplane got backported that should\nnot have been.  Remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64ce24a9e456154c8249dd4d0ce642c8926892d5", "commit_date": "2022-12-13T18:04:32Z", "commit_message": "ospfd: fix typo and report the link name in the warning\n\nSubmitted-by: Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit bf8d8a5451b869a07c147ae1b31d2c2b52458b2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "886d57d0b4a284b0a4c0dc2a0cefacc5c9bd0aef", "commit_date": "2022-12-12T12:25:21Z", "commit_message": "Merge pull request #12493 from FRRouting/mergify/bp/stable/8.4/pr-12466\n\nbuild: FreeBSD fixes (backport #12466)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "211c53670ac5967d8108b38540129492940fa37a", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "doc: add FreeBSD 13 build docs\n\nSome minor changes since FreeBSD 11, mostly fewer extra sauce.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d3135b0189f3b99b5eb327d821bb9a40d09988e1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8e6418c554c2be8a9b1636c42200ce1ad4d20ec", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: pim6d is Linux only\n\nThis stops breaking build on FreeBSD.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d9a2d546da40fa6eb5b546eff34e07b8e67c2247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e5abbaabae9e3a712eb35c34f06859fece6fbf19", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: fix sed regex in Lua macro\n\nUsing `\\s` to match whitespace is not portable, use `[[:space:]]`\ninstead.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 9e46405ca2c7b3d5380dc6ab619666a6d32bbbfb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd3f7171043acf9ed856efd9719dfc1676a20d97", "commit_date": "2022-12-11T19:35:23Z", "commit_message": "Merge pull request #12486 from FRRouting/mergify/bp/stable/8.4/pr-12482\n\nMem this (backport #12482)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dab73b7601d995179fe54c5f6963aa420dce398", "commit_date": "2022-12-10T02:20:13Z", "commit_message": "zebra: Free up routemap name memory on vrf deletion event\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cda0f501fb9a3b0dca429dac628ea4cc9566e233)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de7500cd06d415497471afcc292a7900f9d2ed21", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "lib: Hide list macros in linklist.c\n\nThe LISTNODE_ATTACH|DELETE macros are only used in\nlinklist.c.  Let's remove temptation from people\nto use them.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit b3faf1aab6029caf272475122fd99f7f0b0b39c9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c348fec83b0d834f5993ab5b375432b8d398f3b9", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "ospf6d: Don't allocate json memory in non-json path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 21c6569d6f4dca71b4ddf7e6499e296efaf819c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d92bdd385cb0de935ab27e1582e1dd811b90a544", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "zebra: Actually free all memory associated ctx->u.iptable.interface_name_list\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1cc380679e4cbca5c0c4259653c57da1f47dbafe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "436bf68e016ef2679b96f4f1e465655ce8038925", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "isisd: Fix sadj memory leak\n\nIn some cases the sadj was directly dropped.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 63e6e11f9f8a5e60fc9f6aaf54d33ba04cc3a6b4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64f5d73a3cbac6fe32c414a2cf30e940b97f6e7c", "commit_date": "2022-12-02T08:43:20Z", "commit_message": "Merge pull request #12428 from FRRouting/mergify/bp/stable/8.4/pr-12427\n\nbuild: enable pim6d by default (backport #12427)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7bea90ebbc8f76993417b59a967b36e2cdf4094a", "commit_date": "2022-12-02T05:56:24Z", "commit_message": "build: enable pim6d by default\n\nChange configure.ac so that pim6d is enabled by default; a\ncommand-line option can disable it.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit cee45b84f4648750cdfae314cca7b91ee3a696a2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7d7b33a0281b233757606bb1fa4e9c056c57084f", "commit_date": "2022-11-29T19:32:49Z", "commit_message": "Merge pull request #12419 from FRRouting/mergify/bp/stable/8.4/pr-12386\n\nbfdd: fix IPv4 socket source selection (backport #12386)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa4d0a699aaee28649a9e13ab3054d95cc49cad1", "commit_date": "2022-11-29T19:32:34Z", "commit_message": "Merge pull request #12420 from FRRouting/mergify/bp/stable/8.4/pr-12367\n\nospfd: Fixing a memleak. (backport #12367)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bdf19f7a057618ebf82c21965d7cd21070273a3c", "commit_date": "2022-11-29T16:24:12Z", "commit_message": "ospfd: Fixing memleak.\n\nDescription:\n\tAs part of signal handler ospf_finish_final(),  lsas are originated\n\tand added to refresh queues are not freed.\n\n\tOne such leak is :\n\t==2869285== 432 (40 direct, 392 indirect) bytes in 1 blocks are definitely lost in loss record 159 of 221\n\t==2869285==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n\t==2869285==    by 0x4910EC3: qcalloc (memory.c:116)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:4017)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:3979)\n\t==2869285==    by 0x19A37F: ospf_network_lsa_install (ospf_lsa.c:2680)\n\t==2869285==    by 0x19A37F: ospf_lsa_install (ospf_lsa.c:2941)\n\t==2869285==    by 0x19C18F: ospf_network_lsa_update (ospf_lsa.c:1099)\n\t==2869285==    by 0x1931ED: ism_change_state (ospf_ism.c:556)\n\t==2869285==    by 0x1931ED: ospf_ism_event (ospf_ism.c:596)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19FBC6: nsm_change_state (ospf_nsm.c:695)\n\t==2869285==    by 0x19FBC6: ospf_nsm_event (ospf_nsm.c:861)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19020B: ospf_if_cleanup (ospf_interface.c:322)\n\t==2869285==    by 0x192D0C: ism_interface_down (ospf_ism.c:393)\n\t==2869285==    by 0x193028: ospf_ism_event (ospf_ism.c:584)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x190F10: ospf_if_down (ospf_interface.c:851)\n\t==2869285==    by 0x1911D6: ospf_if_free (ospf_interface.c:341)\n\t==2869285==    by 0x1E6E98: ospf_finish_final (ospfd.c:748)\n\t==2869285==    by 0x1E6E98: ospf_deferred_shutdown_finish (ospfd.c:578)\n\t==2869285==    by 0x1E7727: ospf_finish (ospfd.c:682)\n\t==2869285==    by 0x1E7727: ospf_terminate (ospfd.c:652)\n\t==2869285==    by 0x18852B: sigint (ospf_main.c:105)\n\t==2869285==    by 0x493BE12: frr_sigevent_process (sigevent.c:130)\n\t==2869285==    by 0x494DCD4: thread_fetch (thread.c:1775)\n\t==2869285==    by 0x4905022: frr_run (libfrr.c:1197)\n\t==2869285==    by 0x187891: main (ospf_main.c:235)\n\n\tAdded a fix to cleanup all these queue pointers and corresponing lsas in it.\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit 594f80c83f40935b6dfcd15c8a3c28f1b4e3d423)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "836c3a35f6d434335b75753cf8c34f6f5eead359", "commit_date": "2022-11-29T15:04:29Z", "commit_message": "bfdd: fix IPv4 socket source selection\n\nThe imported BFD code had some logic to ignore the source address when\nusing single hop IPv4. The BFD peer socket function should allow the\nsource to be selected so we can:\n1. Select the source address in the outgoing packets\n2. Only receive packets from that specific source\n\nSigned-off-by: Rafael Zalamena <rzalamena@opensourcerouting.org>\n(cherry picked from commit f68114c1c397a939fd758af072c37d535f1de92f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "37ea1e70143f012e0469a8a4af81407f4460ff63", "commit_date": "2022-11-28T19:00:58Z", "commit_message": "Merge pull request #12411 from FRRouting/mergify/bp/stable/8.4/pr-12408\n\nzebra: Use `mpls enable`, not `mpls` when generating a config (backport #12408)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2070aa87deee83df5a0753788cae1b00d04db94", "commit_date": "2022-11-28T19:00:49Z", "commit_message": "Merge pull request #12412 from FRRouting/mergify/bp/stable/8.4/pr-12389\n\nospf6d: fix infinite loop when adding ASBR route (backport #12389)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "176f7aa788ac627daa572e3ad4c4a60f4148702a", "commit_date": "2022-11-28T13:46:35Z", "commit_message": "ospf6d: fix infinite loop when adding ASBR route\n\nCommit 8f359e1593c414322 removed a check that prevented the same route\nfrom being added twice. In certain topologies, that change resulted in\nthe following infinite loop when adding an ASBR route:\n\nospf6_route_add\n ospf6_top_brouter_hook_add\n  ospf6_abr_examin_brouter\n   ospf6_abr_examin_summary\n    ospf6_route_add\n     (repeat until stack overflow)\n\nRevert the offending commit and update `ospf6_route_is_identical()` to\nnot do comparison using `memcmp()`.\n\nSigned-off-by: Renato Westphal <renato@opensourcerouting.org>\n(cherry picked from commit 4dfe15200ab1a84a8d77fcbc33085c373d556eae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "400304b63eafbb9c8d31b2f258ff2d378af43928", "commit_date": "2022-11-28T12:48:59Z", "commit_message": "zebra: Use `mpls enable`, not `mpls` when generating a config\n\nIf we enable MPLS for an interface via sysctl, we should write `mpls enable`,\nnot `mpls`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 35c46a8718948850f67ec6c3ec00551b2b839310)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e717bd02472b6c8bb52155db2292aa158d8064b", "commit_date": "2022-11-28T10:39:12Z", "commit_message": "Merge pull request #12407 from FRRouting/mergify/bp/stable/8.4/pr-12403\n\nEcho exclusion (backport #12403)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8191b7c00bce5a4e037d76ec6d8f3a71eb633b3", "commit_date": "2022-11-28T08:08:46Z", "commit_message": "lib: Do not log `echo PING` commands from watchfrr\n\nSince the `echo PING` commands are from watchfrr and are sent\na whole bunch when an operator has `log commands` on the amount\nof logging done is quite significant.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8a0f80b634208c878e15335948810e1d532d1e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfe07a821f58ff45573dd7f0e11fc46fec8aa00d", "commit_date": "2022-11-28T08:08:45Z", "commit_message": "zebra: Fix tracepoint changes for lttng\n\nThe recent tracepoint additions in c317d3f246769e8261df0f9d1eb787bea7b5da06\ndid not properly setup the tracepoints for lttng.  Fix this.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit bcb486dd3cbce01dd1d9085006305cfcd738f9e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2801239675c84e0a674d6c3905c8e6e9e9220bc7", "commit_date": "2022-11-27T14:50:33Z", "commit_message": "Merge pull request #12404 from FRRouting/mergify/bp/stable/8.4/pr-12399\n\nstaticd: Fix crash for an existing route with color (backport #12399)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d438b0f5ed2682affc6bef0fba2daea87729792", "commit_date": "2022-11-26T19:26:16Z", "commit_message": "staticd: Do not crash when modifying an existing static route with color\n\n```\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65 color 123'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n123\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n0\n```\n\nBefore this patch:\n```\nSTATIC: Received signal 6 at 1666938633 (si_addr 0x4e1a, PC 0x7f295139c438); aborting...\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_backtrace_sigsafe+0x70) [0x7f29519ef0a0]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_signal+0xec) [0x7f29519ef28c]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xccee2) [0x7f2951a1aee2]\nSTATIC: /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390) [0x7f2951742390]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38) [0x7f295139c438]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a) [0x7f295139e03a]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(_zlog_assert_failed+0xe6) [0x7f2951a46766]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xae7ee) [0x7f29519fc7ee]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(routing_control_plane_protocols_control_plane_protocol_staticd_route_list_src_\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xaf264) [0x7f29519fd264]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xafb4f) [0x7f29519fdb4f]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit_apply+0x33) [0x7f29519fde33]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit+0x9e) [0x7f29519fdf6e]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb0469) [0x7f29519fe469]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb3055) [0x7f2951a01055]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_cli_apply_changes+0xd8) [0x7f2951a01358]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x407ec2]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x40a307]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0x74923) [0x7f29519c2923]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute_command+0xe4) [0x7f29519c2aa4]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute+0xc9) [0x7f29519c2c49]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4184) [0x7f2951a32184]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4436) [0x7f2951a32436]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe6fcc) [0x7f2951a34fcc]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(thread_call+0x98) [0x7f2951a2cc28]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(frr_run+0xe8) [0x7f29519e7518]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(main+0xda) [0x40572a]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7f2951387840]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(_start+0x29) [0x4058e9]\nSTATIC: in thread vtysh_read scheduled from lib/vty.c:2710 vty_event()\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 3278956b1741e9af38b92d74f84a8e48b1b6943e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "29a911093b96ea0aa330367a486d331e2a8fcc9c", "commit_date": "2022-11-26T19:19:06Z", "commit_message": "Merge pull request #12400 from FRRouting/mergify/bp/stable/8.4/pr-12370\n\nbgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command (backport #12370)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b635d08603230d57caf746c5b3440c95cd439efa", "commit_date": "2022-11-25T15:19:23Z", "commit_message": "bgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command\n\nCrash when using for example:\n\n```\nroute-map test permit 10\n set ipv6 vpn next-hop 10.10.10.10\n```\n\n```\nbgpd[30843]: libyang: Unsatisfied pattern - \"1.1.1.1\" does not conform to \"((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}((([0-9a-fA-F]{0,4}:)?(:|[0-9a-fA-F]{0,4}))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])))(%[\\p{N}\\p{L}]+)?\". (Schema location /frr-route-map:lib/route-map/entry/set-action/rmap-set-action/set-action/frr-bgp-route-map:ipv6-address/ipv6-address.)\nbgpd[30843]: [JEA2K-29RPH][EC 100663345] nb_candidate_edit: lyd_new_path(/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address) failed: 7\nbgpd[30843]: [ZDEA9-V1X7W][EC 100663341] nb_cli_apply_changes_internal: failed to edit candidate configuration: operation [modify] xpath [/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address]\nbgpd[30843]: [SZNR8-V24R3][EC 100663326] yang_dnode_xpath_get_canon: couldn't find ./rmap-set-action/frr-bgp-route-map:ipv6-address\nbgpd[30843]: Backtrace for 20 stack frames:\nbgpd[30843]: [bt 0] /usr/local/lib/libfrr.so.0(zlog_backtrace+0x3a) [0x7f539c87c95a]\nbgpd[30843]: [bt 1] /usr/local/lib/libfrr.so.0(+0xed022) [0x7f539c8c8022]\nbgpd[30843]: [bt 2] /usr/local/lib/libfrr.so.0(yang_dnode_get_string+0x96) [0x7f539c8c9ea6]\nbgpd[30843]: [bt 3] /usr/local/lib/libfrr.so.0(route_map_action_show+0xc40) [0x7f539c8a4540]\nbgpd[30843]: [bt 4] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x5c) [0x7f539c88fa8c]\nbgpd[30843]: [bt 5] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 6] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x1a3) [0x7f539c88fbd3]\nbgpd[30843]: [bt 7] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 8] /usr/local/lib/libfrr.so.0(+0xc4d47) [0x7f539c89fd47]\nbgpd[30843]: [bt 9] /usr/local/lib/libfrr.so.0(+0x7274a) [0x7f539c84d74a]\nbgpd[30843]: [bt 10] /usr/local/lib/libfrr.so.0(+0x72cb0) [0x7f539c84dcb0]\nbgpd[30843]: [bt 11] /usr/local/lib/libfrr.so.0(+0x74c40) [0x7f539c84fc40]\nbgpd[30843]: [bt 12] /usr/local/lib/libfrr.so.0(cmd_execute_command+0xa4) [0x7f539c84fd74]\nbgpd[30843]: [bt 13] /usr/local/lib/libfrr.so.0(cmd_execute+0x142) [0x7f539c84ffe2]\nbgpd[30843]: [bt 14] /usr/local/lib/libfrr.so.0(+0xe51b7) [0x7f539c8c01b7]\nbgpd[30843]: [bt 15] /usr/local/lib/libfrr.so.0(+0xe53f0) [0x7f539c8c03f0]\nbgpd[30843]: [bt 16] /usr/local/lib/libfrr.so.0(+0xe8078) [0x7f539c8c3078]\nbgpd[30843]: [bt 17] /usr/local/lib/libfrr.so.0(thread_call+0x7d) [0x7f539c8bacbd]\nbgpd[30843]: [bt 18] /usr/local/lib/libfrr.so.0(frr_run+0xe8) [0x7f539c8749b8]\nbgpd[30843]: [bt 19] /usr/lib/frr/bgpd(main+0x3f1) [0x55f887e97d71]\nBGP[30843]: Received signal 6 at 1669121170 (si_addr 0x7f0000787b, PC 0x7f539ba58e87); aborting...\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 7be9666f9a1aeda292694fc936394977ada65724)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85db584ff85c46cc3c5a33fdf548e7667f915c96", "commit_date": "2022-11-25T06:55:15Z", "commit_message": "Merge pull request #12382 from FRRouting/mergify/bp/stable/8.4/pr-12374\n\nlib: disable vrf before terminating interfaces (backport #12374)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15ca0cb7f29a5e0161530c36683f4dcf419ae8be", "commit_date": "2022-11-25T06:55:06Z", "commit_message": "Merge pull request #12387 from FRRouting/mergify/bp/stable/8.4/pr-12317\n\nospfd: Fix RFC conformance test cases 25.19 and 27.6 (backport #12317)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2237bac834178971bfd6d60ac5c40f7cead21a1", "commit_date": "2022-11-24T15:22:11Z", "commit_message": "ospfd: Fix RFC conformance test cases 25.19 and 27.6\n\nSteps to reproduce:\n--------------------------\n1. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-A on DIface-0 with DUT as DR.\n2. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n3. DUT: Send <OSPF-LSU> packet.\n4. ANVL: Verify that the received <OSPF-LSU> packet contains a Network- LSA for network N1\n   originated by DUT, and the LS Sequence Number is set to <InitialSequenceNumber>.\n5. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-B on DIface-0 with DUT as DR.\n6. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n7. DUT: Send <OSPF-LSU> packet.\n8. ANVL: Verify that the received <OSPF-LSU> packet contains a new instance of the\n   Network-LSA for network N1 originated by DUT, and the LS Sequence Number\n   is set to (<InitialSequenceNumber> + 1).\n\nBoth the test cases were failing while verifying the initial sequence number for network LSA.\n\nThis is because currently OSPF does not reset its LSA sequence number when it is going down.\n\nSigned-off-by: Mobashshera Rasool <mrasool@vmware.com>\n(cherry picked from commit ca5997cd018ec66534285130d02de168a3a4ed5c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02b684b8f74d1f2e6f333c1b8ad70b8f6a8010b1", "commit_date": "2022-11-24T07:29:24Z", "commit_message": "lib: disable vrf before terminating interfaces\n\nWe must disable the vrf before we start terminating interfaces.\n\nOn termination, we free the 'zebra_if' struct from the interface ->info\npointer. We rely on that for subsystems like vxlan for cleanup when\nshutting down.\n\n'''\n==497406== Invalid read of size 8\n==497406==    at 0x47E70A: zebra_evpn_del (zebra_evpn.c:1103)\n==497406==    by 0x47F004: zebra_evpn_cleanup_all (zebra_evpn.c:1363)\n==497406==    by 0x4F2404: zebra_evpn_vxlan_cleanup_all (zebra_vxlan.c:1158)\n==497406==    by 0x4917041: hash_iterate (hash.c:267)\n==497406==    by 0x4F25E2: zebra_vxlan_cleanup_tables (zebra_vxlan.c:5676)\n==497406==    by 0x4D52EC: zebra_vrf_disable (zebra_vrf.c:209)\n==497406==    by 0x49A247F: vrf_disable (vrf.c:340)\n==497406==    by 0x49A2521: vrf_delete (vrf.c:245)\n==497406==    by 0x49A2E2B: vrf_terminate_single (vrf.c:533)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==  Address 0x6d68c68 is 200 bytes inside a block of size 272 free'd\n==497406==    at 0x48470E4: free (vg_replace_malloc.c:872)\n==497406==    by 0x4942CF0: qfree (memory.c:141)\n==497406==    by 0x49196A9: if_delete (if.c:293)\n==497406==    by 0x491C54C: if_terminate (if.c:1031)\n==497406==    by 0x49A2E22: vrf_terminate_single (vrf.c:532)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==    by 0x499A5F0: thread_fetch (thread.c:1775)\n==497406==    by 0x492850E: frr_run (libfrr.c:1197)\n==497406==    by 0x441746: main (main.c:476)\n==497406==  Block was alloc'd at\n==497406==    at 0x4849464: calloc (vg_replace_malloc.c:1328)\n==497406==    by 0x49429A5: qcalloc (memory.c:116)\n==497406==    by 0x491D971: if_new (if.c:174)\n==497406==    by 0x491ACC8: if_create_name (if.c:228)\n==497406==    by 0x491ABEB: if_get_by_name (if.c:613)\n==497406==    by 0x427052: netlink_interface (if_netlink.c:1178)\n==497406==    by 0x43BC18: netlink_parse_info (kernel_netlink.c:1188)\n==497406==    by 0x4266D7: interface_lookup_netlink (if_netlink.c:1288)\n==497406==    by 0x42B634: interface_list (if_netlink.c:2368)\n==497406==    by 0x4ABF83: zebra_ns_enable (zebra_ns.c:127)\n==497406==    by 0x4AC17E: zebra_ns_init (zebra_ns.c:216)\n==497406==    by 0x44166C: main (main.c:408)\n'''\n\nSigned-off-by: Stephen Worley <sworley@nvidia.com>\n(cherry picked from commit b14fa9c4dca1846d64ced5a9710faa1345da4ca0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a6176ac3a223f29ea6f40dedc186eb54da68c14", "commit_date": "2022-11-24T07:13:07Z", "commit_message": "Merge pull request #12381 from FRRouting/mergify/bp/stable/8.4/pr-12377\n\nzebra: Replace TC definitions for dplane (backport #12377)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e2017f84fd06dcfcb8dc2bcfe2085b4462809c", "commit_date": "2022-11-24T05:26:32Z", "commit_message": "Merge pull request #12378 from FRRouting/mergify/bp/stable/8.4/pr-12260\n\npimd: consistently ignore prefix list mask len (backport #12260)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ad1dca166d4640fe55ee6a685c7845d5bb941c5", "commit_date": "2022-11-23T20:54:21Z", "commit_message": "zebra: Replace TC definitions for dplane\n\nThey were replaced, but forgot for `--enable-scripting`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 2272627571681ba01585fc3f25a3ebfda1b7da30)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8766ccbf073303ef998a3355136a9f08420033b", "commit_date": "2022-11-23T18:15:12Z", "commit_message": "pimd: consistently ignore prefix list mask len\n\n... the prefix length wasn't ignored as expected.  Both S and G are\nalways /32.  But expecting \"le 32\" in prefix-list config is unexpected &\ncounterintuitive.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ab2f9e89b44642af568c3542e1f2b14378fb5ec2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56a3ac3b5d96e507340cee29467ebf28e868d081", "commit_date": "2022-11-22T16:31:01Z", "commit_message": "Merge pull request #12360 from FRRouting/mergify/bp/stable/8.4/pr-12347\n\nsnapcraft: Add pim6 daemon for PIM IPv6 to snap package (backport #12347)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e0a4cda6dd3832a587d10acf94650fec05fa3ba", "commit_date": "2022-11-21T18:55:59Z", "commit_message": "snapcraft: Add pim6 daemon for PIM IPv6 to snap package\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\n(cherry picked from commit feeaf30fde211fcff4231807fc9e52c4bbd3000e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70151e264bbb697a10fed711aa8c937d4f0009b1", "commit_date": "2022-11-18T05:31:08Z", "commit_message": "FRR Release 8.4.1\n\n- zebra: reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n- zebra: fix build without AF_MPLS\n- ospfd: get route-map name for default-information originate\n- ospfd: allow unnumbered and numbered addresses to co-exist better\n- ospfd: prevent from crashing when processing external lsa\n- bgpd: fix \"storing the address of local variable\"\n- bgpd: rpki was decrementing the node lock one time too many\n- bgpd: do not send Deconfig/Shutdown message when restarting\n- pimd: convert zlog_warn to debug\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b72cc20086bf75fa492e3de79facf3cac6d6aba", "commit_date": "2022-11-17T20:21:43Z", "commit_message": "Merge pull request #12332 from FRRouting/mergify/bp/stable/8.4/pr-12309\n\nbgpd: fix invalid ipv4-vpn nexthop for IPv6 peer (backport #12309)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8dff1be53318034b88a8bc1308d2f5eae985db7b", "commit_date": "2022-11-17T15:05:49Z", "commit_message": "bgpd: fix invalid ipv4-vpn nexthop for IPv6 peer\n\nGiven that two routers are connected each other and they have IPv6\naddresses and they establish BGP peer with extended-nexthop capability\nand one router tries to advertise locally-generated IPv4-VPN routes to\nother router.\n\nIn this situation, bgpd on the router that tries to advertise IPv4-VPN\nroutes will be crashed with \"invalid MP nexthop length (AFI IP6)\".\n\nThis issue is happened because MP_REACH_NLRI path attribute is not\ngenerated correctly when ipv4-vpn routes are advertised to IPv6 peer.\nWhen IPv4 routes are leaked from VRF RIB, the nexthop of these routes\nare also IPv4 address (0.0.0.0/0 or specific addresses). However,\nbgp_packet_mpattr_start only covers the case of IPv6 nexthop (for IPv6\npeer).\n\nipv4-unicast routes were not affected by this issue because the case of\nIPv4 nexthop is covered in `else` block.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 63e7ddb509435d9e178cf51a9a288273fb91bf7e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "daa21266dc5f4318d3e0fa6db9f401ff9619f48a", "commit_date": "2022-11-17T15:05:48Z", "commit_message": "tests: Add topotest for l3vpn over ipv6 peer\n\nTo check the effect of the next patch, I added topotest.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 3db8aa8750d1be675f6df1ed765afeb101b6402b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43b7aec4ef7dc476e027339a98f6844cdb0746b4", "commit_date": "2022-11-17T14:42:01Z", "commit_message": "Merge pull request #12331 from FRRouting/mergify/bp/stable/8.4/pr-12302\n\nisisd: fix area NULL pointer in isis_route_update (backport #12302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935c3f3930cdda66e72cb5518d0cce43d653082f", "commit_date": "2022-11-17T12:14:58Z", "commit_message": "Merge pull request #12330 from FRRouting/mergify/bp/stable/8.4/pr-12312\n\nbgpd: authorise to select bgp self peer prefix on rr case (backport #12312)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a07501ff1127f1726c9aadb17d8f3cd506521f8", "commit_date": "2022-11-17T11:26:22Z", "commit_message": "isisd: fix area NULL pointer in isis_route_update\n\nFix the case area is NULL.\n\nFixes: acc0029779 (\"isisd: fix potential access to NULL pointer in isis_route_update\")\nSigned-off-by: Louis Scalbert <louis.scalbert@6wind.com>\n(cherry picked from commit 41c2bf853f072008330a929480bf235ac840212a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56dd706e9b3a5eb790fa695e8f6f71e73b843aab", "commit_date": "2022-11-17T02:58:49Z", "commit_message": "bgpd: authorise to select bgp self peer prefix on rr case\n\nThis commit addresses an issue that happens when using bgp\npeering with a rr client, with a received prefix which is the\nlocal ip address of the bgp session.\n\nWhen using bgp ipv4 unicast session, the local prefix is\nreceived by a peer, and finds out that the proposed prefix\nand its next-hop are the same. To avoid a route loop locally,\nno nexthop entry is referenced for that prefix, and the route\nwill not be selected.\n\nWhen the received peer is a route reflector, the prefix has\nto be selected, even if the route can not be installed locally.\n\nFixes: (\"fb8ae704615c\") bgpd: prevent routes loop through itself\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit f874552557cf2577ae91b297f422e307084f22d3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23f40f230d1fe293eb519aafb0825444ea44f0e0", "commit_date": "2022-11-15T16:02:43Z", "commit_message": "Merge pull request #12320 from FRRouting/mergify/bp/stable/8.4/pr-12307\n\ntools: remove backslash from declare check regex (backport #12307)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "47c5955841fef46d921ff10b2d70691c2f439851", "commit_date": "2022-11-15T09:28:25Z", "commit_message": "Merge pull request #12319 from FRRouting/mergify/bp/stable/8.4/pr-12315\n\nDplane sorry (backport #12315)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677fefbf71907d0cad2a11f6cdf762678667a25", "commit_date": "2022-11-15T07:14:19Z", "commit_message": "tools: remove backslash from declare check regex\n\nThe backslash in `grep -q '^declare \\-a'` is not needed and\ncauses `grep: warning: stray \\ before -` warning in grep-3.8.\n\nSigned-off-by: Marius Tomaschewski <mt@suse.com>\n(cherry picked from commit 5216a05b32390a64efeb598051411e1776042624)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f97e6d92b33df5c1648382c73f2c6d64a1a0c275", "commit_date": "2022-11-15T07:12:23Z", "commit_message": "zebra: Fix dplane_fpm_nl to allow for fast configuration\n\nIf you have this order in your configuration file:\n\nno fpm use-next-hop-groups\nfpm address 127.0.0.1\n\nthe dplane code was using the same event thread t_event and the second\nadd event in the code was going, you already have an event scheduled\nand as such the second event does not overwrite it.  Leaving\nno code to actually start the whole processing.  There are probably\nother cli iterations that will cause this fun as well, but I'm\nnot going to spend the time sussing them out at the moment.\n\nFixes: #12314\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 551fa8c3549e24020dfce33d06ade4a14f72abfe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5a35dd3a499c59672656eb2429a85bb271b46fbd", "commit_date": "2022-11-15T07:12:22Z", "commit_message": "zebra: Use the enum, luke\n\nUse the enum and let the compiler help us figure out\nwhat cases are being missed.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dc31de93e1a79b4a138b474d3c4fdb44cdfee6f3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72e7872400817cb19b5b825cde70df50c6d2c86a", "commit_date": "2022-11-11T08:47:46Z", "commit_message": "Merge pull request #12305 from FRRouting/mergify/bp/stable/8.4/pr-12303\n\nzebra: relax if_type check to allow early ES config creation (backport #12303)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a87740235ec8b61d56c713c069d4485dc44529", "commit_date": "2022-11-11T06:15:27Z", "commit_message": "zebra: relax if_type check to allow early ES config creation\n\nThe API for configuring ES in zebra had a strict check for if_type\n\"isBond\" that prevented the ES config from being created before the\ninterface.\n\nTicket: CM-29454\n\nSigned-off-by: Anuradha Karuppiah <anuradhak@cumulusnetworks.com>\n(cherry picked from commit 3fa177eed287823bbe1d6c7bd9856d1d19435db3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c2f57d6bb20eae4a1ee78a0bde94b93bb4404a2", "commit_date": "2022-11-10T22:20:57Z", "commit_message": "Merge pull request #12304 from FRRouting/mergify/bp/stable/8.4/pr-12269\n\nospfd: prevent from crashing when processing external lsa (backport #12269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24da77c557d2678bca891310ca2e7d4b994349e2", "commit_date": "2022-11-10T19:21:36Z", "commit_message": "ospfd: prevent from crashing when processing external lsa\n\nWhen using debug mode, the ei parameter may be NULL. In that\ncase, do not display the log trace, otherwise a crash will\nhappen.\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit e5309c1a6e366f5dc95cbc3bbbe5c7ce1d46625c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b87dfd9eb7b87c8c16705c953c3ecf4e9680c533", "commit_date": "2022-11-10T04:55:42Z", "commit_message": "Merge pull request #12299 from FRRouting/mergify/bp/stable/8.4/pr-12297\n\npimd: Convert zlog_warn to debug (backport #12297)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0fe0a9b5afd02c8596e06e1f62098a89c192b8a", "commit_date": "2022-11-09T22:18:05Z", "commit_message": "pimd: Convert zlog_warn to debug\n\nThe unable to find a nexthop should not be a warning it should\nbe a debug.  Switching over.\n\nSigned-off-by: Donald Sharp <sharpd@cumulusnetworks.com>\n(cherry picked from commit 7d7206a534eec49b83ff0ef95fe1ba04e5507fc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0cb4f4db970f4cd79f89332bbdd40a7c074d08cd", "commit_date": "2022-11-09T14:46:50Z", "commit_message": "Merge pull request #12293 from donaldsharp/rpki_crash_to_8.4\n\nbgpd: rpki was decrementing the node lock one time too many", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fcbb9447c52e65faf887f2c55a55a0afec2c41c1", "commit_date": "2022-11-09T12:26:26Z", "commit_message": "bgpd: rpki was decrementing the node lock one time too many\n\nThe code was this:\n\n1)        match = bgp_table_subtree_lookup(rrp->bgp->rib[rrp->afi][rrp->safi],\n                                         &rrp->prefix);\n\n2)        node = match;\n\n        while (node) {\n                if (bgp_dest_has_bgp_path_info_data(node)) {\n                        revalidate_bgp_node(node, rrp->afi, rrp->safi);\n                }\n\n3)               node = bgp_route_next_until(node, match);\n        }\n\n\tif (match)\n4)              bgp_dest_unlock_node(match);\n\nAt 1) match was locked and became +1\nAt 2) match and node are now equal\nAt 3) On first iteration, match is decremented( as that node points\nat it ) and the next item is locked, if it is found, and returned which becomes node\n\nIf 3 is run again because node is non-null then, current node is decremented\nand the next node found is incremented and returned which becomes node again.\n\nSo if we get to 4) match is unlocked again which is now a double unlock\nwhich, frankly, is not good.  In all code paths that I can see the\ntest for `if (match) ...` is not needed so let's just remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "36c54fce566f1eaeeb61a2170f22e3b459cc8ef8", "commit_date": "2022-11-09T09:20:28Z", "commit_message": "Merge pull request #12290 from FRRouting/mergify/bp/stable/8.4/pr-12286\n\nzebra/netconf_netlink.c: fix build without AF_MPLS (backport #12286)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eed83c07cc2c08d1b7eb33effa396d4732b20dc1", "commit_date": "2022-11-09T05:25:17Z", "commit_message": "zebra/netconf_netlink.c: fix build without AF_MPLS\n\nFix the following build failure raised since version 8.4 and\nhttps://github.com/FRRouting/frr/commit/d53dc9bd8164ba40242e2013d382fb01eb0b96ed:\n\nzebra/netconf_netlink.c: In function 'netlink_netconf_change':\nzebra/netconf_netlink.c:109:32: error: 'AF_MPLS' undeclared (first use in this function)\n  109 |         if (ncm->ncm_family == AF_MPLS)\n      |                                ^~~~~~~\n\nSigned-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>\n(cherry picked from commit fa60f2c2fac9ff6d71e8bddab92f78a6d558035b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf74460ce359c430ac1368bc54e46e2258e733d2", "commit_date": "2022-11-08T19:24:53Z", "commit_message": "Merge pull request #12285 from FRRouting/mergify/bp/stable/8.4/pr-12258\n\nbgpd: fix \"storing the address of local variable\" (backport #12258)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "debian/master": [{"commit_oid": "90359bc5be89992a4e8b7c16624f4495cf6980de", "commit_date": "2023-07-12T12:29:10Z", "commit_message": "debian: 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "524f9a394a0c7e30a446b9b37dc2f50a14794b4e", "commit_date": "2023-07-12T12:09:06Z", "commit_message": "debian: fill in changelog for 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de99518747e2f3d9739c1e797e7316fe179f91ff", "commit_date": "2023-07-12T12:01:50Z", "commit_message": "debian: start 8.4.4-1\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f7c0efa0c0f32d804f72269fdc48d8e281df49a", "commit_date": "2023-07-12T12:00:51Z", "commit_message": "debian: merge tag 'frr-8.4.4' into debian/master\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "45e36c0c00a517ad1606135b18c5753e210cfc0d", "commit_date": "2023-06-16T04:41:18Z", "commit_message": "FRR Release 8.4.4\n\n    This a convenience release/tag for house keeping. We currently don't plan to publish\n    binary packages with this release.\n\n    Changelog:\n\nbfdd\n    Fix malformed session with vrf\n    Remove redundant nb destroy callbacks\n\nbgpd\n    Aggregate-address memory leak fix\n    Bmp fix peer-up ports byte order\n    Check 7 bytes for long-lived graceful-restart capability\n    Conform bgp_packet.h with coding standards\n    Copy the password from the previous peer on peer_xfer_config()\n    Do not allow a `no router bgp xxx` when autoimport is happening\n    Do not allow l3vni changes when shutting down\n    Do not announce routes immediatelly on filter updates\n    Ensure stream received has enough data\n    Fix bgpd core when unintern attr\n    Fix crash for `show bgp ... neighbor received-routes detail|prefix`\n    Fix debug output for route-map names when using a unsuppress-map\n    Fix ecommunity parsing for as4\n    Fix for ain->attr corruption during path update\n    Fix lcom->str string length to correctly cover aliases\n    Increase buffer size used for dumping bgp to mrt files\n    Limit flowspec to no attribute means a implicit withdrawal\n    Make bgp_keepalives.c not use mtype_tmp\n    Prevent null pointer deref when outputting data\n    Treat withdraw variable as a bool\n    Use interface name instead of pointer value\n    Use the actual pointer type instead of a void\n\nlib\n    Adjust only `any` flag for prefix-list entries if destroying\n    Destroy `any` flag when creating a prefix-list entry with prefix\n    Fix link state memory leak\n    Fix vtysh core when handling questionmark\n    On bfd peer shutdown actually stop event\n\nospf6d\n    Stop using mtype_tmp in some cases\n\nospfd, ospf6d\n    Add more logging details\n\nospfd, ospfclient\n    Do not just include .c files in another .c\n\nospfd\n    Cleanup some memory leaks on shutdown in ospf_apiserver.c\n    Fix for vitual-link crash in signal handler\n    Fix interface param type update\n    Fix memory leaks w/ `show ip ospf int x json` commands\n    Fix ospf_lsa memory leak\n    Fix ospf_ti_lfa drop of an entire table\n    Fixing summary origination after range configuration\n    Free up q_space in early return path\n    Log adjacency changes with neighbor ip in addition to neighbor id\n    Ospf opaque lsa stale processing fix and topotests.\n    Remove mtype_tmp\n    Respect loopback's cost that is set and set loopback costs to 0\n\npbrd\n    Fix mismatching in match src-dst\n\npimd\n    Fix use after free issue for ifp's moving vrfs\n    Pim not sending register packets after changing from non dr to dr\n    Process no-forward bsm packet\n\nripd\n    Fix memory leak for ripd's route-map\n\ntests\n    Add test to validate 4-byte ecomm parsing\n    Check if prefix-lists with ipv6 any works fine\n    Check if route-map works correctly if modifying prefix-lists\n\ntools\n    Fix list value remove in frr-reload\n    Fix missing remote-as configuration when reload\n    Make check flag really work for reload\n\nvtysh\n    Give actual pam error messages\n\nzebra\n    Cleanup ctx leak on shutdown and turn off event\n    Evpn handle del event for dup detected mac\n    Fix evpn dup detected local mac del event\n    Fix for heap-use-after-free in evpn\n    Fix race during shutdown\n    Install directly connected route after interface flap\n    Reduce creation and fix memory leak of frrscripting pointers\n    Unlock the route node when sending route notifications\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7be8757b855a4abcda22a70f54d87cf44bef27ef", "commit_date": "2023-06-13T19:08:00Z", "commit_message": "Merge pull request #13782 from FRRouting/mergify/bp/stable/8.4/pr-12454\n\nbgpd: Ensure stream received has enough data (backport #12454)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f61f92105288a9ddb349f27a3edf9d6594dd03c", "commit_date": "2023-06-13T19:06:11Z", "commit_message": "Merge pull request #13785 from FRRouting/mergify/bp/stable/8.4/pr-13612\n\nospfd: fix interface param type update (backport #13612)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9da5c285de38fe11ebf96f01df0d4fa8079e8ad6", "commit_date": "2023-06-13T13:55:51Z", "commit_message": "ospfd: fix interface param type update\n\ninterface link update event needs\nto be handle properly in ospf interface\ncache.\n\nExample:\nWhen vrf (interface) is created its default type\nwould be set to BROADCAST because ifp->status\nis not set to VRF.\nSubsequent link event sets ifp->status to vrf,\nospf interface update need to compare current type\nto new default type which would be VRF (OSPF_IFTYPE_LOOPBACK).\nSince ospf type param was created in first add event,\nifp vrf link event didn't update ospf type param which\nleads to treat vrf as non loopback interface.\n\nTicket:#3459451\nTesting Done:\n\nRunning config suppose to bypass rendering default\nnetwork broadcast for loopback/vrf types.\n\nBefore fix:\n\nvrf vrf1\n vni 4001\nexit-vrf\n!\ninterface vrf1\n ip ospf network broadcast\nexit\n\nAfter fix: (interface vrf1 is not displayed).\n\nvrf vrf1\n vni 4001\nexit-vrf\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 0d005b2d5c294d9d0a8db9d8beca83b97e0fd8ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "406de643d7a943fe11a3eea9cd9ae6a8b12369bb", "commit_date": "2023-06-13T13:07:43Z", "commit_message": "bgpd: Ensure stream received has enough data\n\nBGP_PREFIX_SID_SRV6_L3_SERVICE attributes must not\nfully trust the length value specified in the nlri.\nAlways ensure that the amount of data we need to read\ncan be fullfilled.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 06431bfa7570f169637ebb5898f0b0cc3b010802)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a6f6fca206f6bfd469bd3004e00f4cfa7c24b70", "commit_date": "2023-06-09T06:10:50Z", "commit_message": "Merge pull request #13737 from FRRouting/mergify/bp/stable/8.4/pr-13645\n\nbfdd: remove redundant nb destroy callbacks (backport #13645)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c49818bedcb427eefe54b6c067e264efc3637f6", "commit_date": "2023-06-08T15:20:16Z", "commit_message": "bfdd: remove redundant nb destroy callbacks\n\nFixes warning logs:\n```\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/profile/minimum-ttl'\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/sessions/multi-hop/minimum-ttl'\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit f7884aedf7a1249e3aae71b6a66c9a0f0915c4ef)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "30d9f81aaaad73f736dc70b3782009020ae19c88", "commit_date": "2023-06-07T12:07:31Z", "commit_message": "Merge pull request #13713 from FRRouting/mergify/bp/stable/8.4/pr-13693\n\ntools: fix list value remove in frr-reload (backport #13693)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "03c65e7f7f94b0be052c98d942a5cdc8ee1d3cd6", "commit_date": "2023-06-07T06:23:54Z", "commit_message": "tools: fix list value remove in frr-reload\n\nThere might be a time element(s) from\ntemporary list are removed more than once\nwhich leads to valueError in certain python3\nversion.\n\ncommit-id 1543f58b5 did not handle valueError\nproperly. This caused regression where\nprefix-list config leads to delete followed\nby add.\n\nThe new fix should just pass the exception as\nvalue removal from list_to_add or list_to_del\nis best effort.\nThis allows prefix-list config has no change\nthen removes the lines from lines_to_del and\nlines_to_add properly.\n\nTicket:#3490252\nTesting:\n\nConfigure prefix-list in frr.conf and perform\nmultiple frr-reload. After first reload operatoin\nsubsequent ones should not result in delete followed\nby add of the prefix-list but rather no-op operation.\n\n(Pdb) lines_to_add\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_add_to_del\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) c\n> /usr/lib/frr/frr-reload.py(1562)ignore_delete_re_add_lines()\n-> return (lines_to_add, lines_to_del)\n(Pdb) lines_to_add\n[]\n(Pdb) lines_to_del\n[]\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 9845c09d61a7e509bfae369648cb5f9893455ac4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b78b57674f17399dffc40ff1c3e0236a8d5a965", "commit_date": "2023-06-06T08:08:04Z", "commit_message": "Merge pull request #13695 from FRRouting/mergify/bp/stable/8.4/pr-13649\n\nzebra: Unlock the route node when sending route notifications (backport #13649)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e995236a343e390b526512e77aa20d8e25021a6", "commit_date": "2023-06-06T05:53:21Z", "commit_message": "zebra: Unlock the route node when sending route notifications\n\nWhen using a context to send route notifications to upper\nlevel protocols, the code was using a locking function to\nget the route node.  There is no need for this to be locked\nas such FRR should free it up.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 82c6e4fea54eb65e153e6bc45bb718367b0b5132)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a4b1a2b1fad9cc0af8c44db5c2d088dbe271b9d", "commit_date": "2023-06-02T00:32:52Z", "commit_message": "Merge pull request #13663 from FRRouting/mergify/bp/stable/8.4/pr-13637\n\nlib: fix vtysh core when handling questionmark (backport #13637)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8986db7d91d8ee88a00402ec9d2f54b88cedc465", "commit_date": "2023-06-01T19:31:31Z", "commit_message": "lib: fix vtysh core when handling questionmark\n\nWhen issue vtysh command with ?, the initial buf size for the\nelement is 16. Then it would loop through each element in the cmd\noutput vector. If the required size for printing out the next\nelement is larger than the current buf size, realloc the buf memory\nby doubling the current buf size regardless of the actual size\nthat's needed. This would cause vtysh core when the doubled size\nis not enough for the next element.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit f8aa257997a6a6f69ec5d5715ab04d7cbfae1d1c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27177c81869fb3e2272cf50d8b1a008d5138ae6e", "commit_date": "2023-05-31T08:10:00Z", "commit_message": "Merge pull request #13643 from FRRouting/mergify/bp/stable/8.4/pr-13634\n\nbgpd: fix bgpd core when unintern attr (backport #13634)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a458561282fdf90eff4442aaf2966c345d3666c8", "commit_date": "2023-05-31T05:58:21Z", "commit_message": "bgpd: fix bgpd core when unintern attr\n\nWhen the remote peer is neither EBGP nor confed, aspath is the\nshadow copy of attr->aspath in bgp_packet_attribute(). Striping\nAS4_PATH should not be done on the aspath directly, since\nthat would lead to bgpd core dump when unintern the attr.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit 32af4995aae647cf9d7c70347ec37b57279ea807)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9147e8c02a1db3aeb22afbd5fdda324de55bde77", "commit_date": "2023-05-27T17:05:17Z", "commit_message": "Merge pull request #13615 from FRRouting/mergify/bp/stable/8.4/pr-13608\n\nvtysh: Give actual pam error messages (backport #13608)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dba2bf943254bc7bdf4645f095502957c19cdc32", "commit_date": "2023-05-27T12:36:06Z", "commit_message": "vtysh: Give actual pam error messages\n\nCode was was written where the pam error message put out\nwas the result from a previous call to the pam modules\ninstead of the current call to the pam module.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8495b425bd056d405704df9e756560942d6815c1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bbc049481e2461a83dfc7b653d01c08846e6421f", "commit_date": "2023-05-22T19:05:56Z", "commit_message": "Merge pull request #13572 from FRRouting/mergify/bp/stable/8.4/pr-13506\n\nbfdd: Fix malformed session with vrf (backport #13506)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d8eaf6668ed4bad9b126b662f61751b3e51c0d4", "commit_date": "2023-05-22T11:25:56Z", "commit_message": "bfdd: Fix malformed session with vrf\n\nWith this configuration:\n\n```\nbfd\n peer 33:33::66 local-address 33:33::88 vrf vrf8 interface enp1s0\n exit\n !\nexit\n```\n\nThe bfd session can't be established with error:\n\n```\nbfdd[18663]: [YA0Q5-C0BPV] control-packet: wrong vrfid. [mhop:no peer:33:33::66 local:33:33::88 port:2 vrf:61]\n```\n\nThe vrf check should use the carefully adjusted `vrfid`, which is\nbased on globally/reliable interface.  We can't believe the\n`bvrf->vrf->vrf_id` because the `/proc/sys/net/ipv4/udp_l3mdev_accept`\nmaybe is set \"1\" in VRF-lite backend even with security drawback.\n\nJust correct the vrf check.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit b17c179664da7331a4669a1cf548e4e9c48a5477)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6c72a07aed870990de43d796c994e42d17f7a5c", "commit_date": "2023-05-11T04:00:27Z", "commit_message": "Merge pull request #13503 from FRRouting/mergify/bp/stable/8.4/pr-13489\n\nospfd: OSPF opaque LSA stale processing fix and topotests. (backport #13489)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "947b69eb17d0344b4e5a9ea8388ece4481200edd", "commit_date": "2023-05-10T20:52:06Z", "commit_message": "        ospfd: OSPF opaque LSA stale processing fix and topotests.\n\n        1. Fix OSPF opaque LSA processing to preserve the stale opaque\n            LSAs in the Link State Database for 60 seconds consistent with\n            what is done for other LSA types.\n         2. Add a topotest that tests for cases where ospfd is restarted\n            and a stale OSPF opaque LSA exists in the OSPF routing domain\n            both when the LSA is purged and when the LSA is reoriginagted\n            with a more recent instance.\n\nSigned-off-by: Acee <aceelindem@gmail.com>\n(cherry picked from commit 4e7eb1e62ce54ebcf78622682de962fdeff20b80)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcaac2a2a559c80ba13b5a38a98438d101e0cad7", "commit_date": "2023-05-10T18:23:47Z", "commit_message": "Merge pull request #13501 from FRRouting/mergify/bp/stable/8.4/pr-13485\n\nospfd: Respect loopback's cost that is set and set loopback costs to 0 (backport #13485)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b9c56b644d6beed1354aea9f9a75c29196bf2e33", "commit_date": "2023-05-10T16:13:57Z", "commit_message": "ospfd: Respect loopback's cost that is set and set loopback costs to 0\n\nWhen setting an loopback's cost, set the value to 0, unless the operator\nhas assigned a value for the loopback's cost.\n\nRFC states:\n\nIf the state of the interface is Loopback, add a Type 3\nlink (stub network) as long as this is not an interface\nto an unnumbered point-to-point network. The Link ID\nshould be set to the IP interface address, the Link Data\nset to the mask 0xffffffff (indicating a host route),\nand the cost set to 0.\n\nFRR is going to allow this to be overridden if the operator specifically\nsets a value too.\n\nFixes: #13472\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dd2bc4fb406cc9284d35ef623ebb8838cb158bc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "183dabba65ec90ebcc1a367a20bb7376a34f8e02", "commit_date": "2023-05-09T17:31:10Z", "commit_message": "Merge pull request #13482 from FRRouting/mergify/bp/stable/8.4/pr-13445\n\nzebra: Reduce creation and fix memory leak of frrscripting pointers (backport #13445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a49643612006672a03de4c0b13fa4298dc3f58de", "commit_date": "2023-05-09T12:38:58Z", "commit_message": "zebra: Reduce creation and fix memory leak of frrscripting pointers\n\nThere are two issues being addressed:\n\na) The ZEBRA_ON_RIB_PROCESS_HOOK_CALL script point\nwas creating a fs pointer per dplane ctx in\nrib_process_dplane_results().\n\nb) The fs pointer was not being deleted and directly\nleaked.\n\nFor (a) Move the creation of the fs to outside\nthe do while loop.\n\nFor (b) At function end ensure that the pointer\nis actually deleted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit d8be1399720ca36485b6a2209b143679b01b83cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc0a43da5a1a4e87964dbe08ca07bac34a2ffa7b", "commit_date": "2023-05-05T16:49:22Z", "commit_message": "Merge pull request #13443 from FRRouting/mergify/bp/stable/8.4/pr-13436\n\nospfd: Fix memory leaks w/ `show ip ospf int X json` commands (backport #13436)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6498b758e9db4d2ec0660d6ae263ed429c136dea", "commit_date": "2023-05-05T12:14:57Z", "commit_message": "ospfd: Fix memory leaks w/ `show ip ospf int X json` commands\n\nFRR has a memory leak in the case when int X does not\nexist and a memory leak when int X does exist.  Fix\nthese\n\nFixes: #13434\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 74e21732db129f7287d5ab227e45f305c5dbf34e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "39319b7d9eaf49ffe88901be7e5f147ec4dea724", "commit_date": "2023-05-04T14:00:46Z", "commit_message": "Merge pull request #13419 from FRRouting/mergify/bp/stable/8.4/pr-13020\n\npimd: PIM not sending register packets after changing from non DR to DR (backport #13020)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eaf0abf7b65d813a19f879714ed8b0d33debc672", "commit_date": "2023-05-02T15:56:34Z", "commit_message": "pimd: PIM not sending register packets after changing from non DR to DR\n\nWhen the router is non dr for an interface, it installs mroute to drop\nthe packets from directly connected source. This was done to avoid packets\ncoming to cpu as nocache hit. Later when it gets change from non-DR to DR,\nthese entries are not cleared. So the packets are still dropped.\nThis causes register packets not getting generated.\nSo cleaning up the mroute entries and channel oil without\nupstream reference which was created to drop.\n\nCo-authored-by: Saravanan K <saravanank@vmware.com>\nSigned-off-by: Sai Gomathi N <nsaigomathi@vmware.com>\n(cherry picked from commit 1c883aef96013753f5467ba5e5028dee0f0a82c5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7dddd66b4c0707a15ff55f03c933afd97f80115", "commit_date": "2023-04-24T18:28:33Z", "commit_message": "Merge pull request #13372 from FRRouting/mergify/bp/stable/8.4/pr-13330\n\nzebra: EVPN handle duplicate detected local mac delete event (backport #13330)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "192e5449be1772ae55a0c0bf9d1dac4ef92993f9", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra:fix evpn dup detected local mac del event\n\nThe current local mac delete event send to flag with force\nalways which breaks the duplicate detected MACs where\nit requires to be resynced from bgpd to earlier state.\n\nTicket:#3233019\nIssue:3233019\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 89844a967858d34de99bad8dcb410b4ab4e1dece)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2a3dd84bbf166ffc89485f300e38ef120670027", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra: evpn handle del event for dup detected mac\n\nUpon receiving local mobility event for MAC + NEIGH,\nboth are detected as duplicate upon hitting DAD threshold.\n\nDuplicated detected ( freezed) MAC + NEIGH are not known\nto bgpd.\n\nIf locally learnt MAC + NEIGH are deleted in kernel,\nthe MAC is marked as AUTO after sending delete event\nto bgpd.\n\nBgpd only reinstalls best route for MAC_IP route (NEIGH)\nbut not for MAC event.\nThis puts a situation where MAC is AUTO state and\nassociated neigh as remote.\n\nFix:\nDUPLICATE + LOCAL MAC deletion, set MAC delete request\nas reinstall from bgpd.\n\nTicket:#2873307\nReviewed By:\nTesting Done:\n\nFreeze MAC + two NEIGHs in local mobility event.\nDelete MAC and NEIGH from kerenl.\nbgp rsync remote mac route which puts MAC to remote state.\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit ad7685de2871996469d370192af7afafc234a3ca)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "673957c79a2eea952b7a76fa2db0fd0b2f6f08a0", "commit_date": "2023-04-21T11:10:23Z", "commit_message": "Merge pull request #13343 from FRRouting/mergify/bp/stable/8.4/pr-13341\n\nbgpd: Fix lcom->str string length to correctly cover aliases (backport #13341)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b2ace35bb53737686e0dab54f72dbffb611d705", "commit_date": "2023-04-21T06:23:18Z", "commit_message": "bgpd: Fix lcom->str string length to correctly cover aliases\n\nIf you have a very large number of large communities whose\nstring length happened to be greater than BUFSIZ FRR's bgpd\nwould crash.  This is because bgpd would write beyond\nthe end of the string.\n\nOriginally the code auto-calculated the string size appropriately\nbut commit ed0e57e3f079352714c3a3a8a5b0dddf4aadfe1d modified\nthe string length to be a hard coded BUFSIZ.  When a route-map\nlike this is added:\n\nroute-map LARGE-OUT permit 10\n set large-community 4635:0:0 4635:1:906 4635:1:2906 4635:1:4515 4635:1:4594 4635:1:4641 4635:1:4760 4635:1:7979 4635:1:9253 4635:1:9293 4635:1:9304 4635:1:9908 4635:1:13335 4635:1:16265 4635:1:17924 4635:1:18013 4635:1:20940 4635:1:22822 4635:1:24429 4635:1:24482 4635:1:32590 4635:1:32934 4635:1:36692 4635:1:38008 4635:1:38819 4635:1:41378 4635:1:45753 4635:1:46489 4635:1:49544 4635:1:51847 4635:1:54574 4635:1:54994 4635:1:55720 4635:1:56059 4635:1:57724 4635:1:65021 4635:1:134823 4635:1:136907 4635:1:146961 24115:0:24115 24115:1:906 24115:1:2906 24115:1:4515 24115:1:4594 24115:1:4641 24115:1:4760 24115:1:7979 24115:1:9253 24115:1:9293 24115:1:9304 24115:1:9908 24115:1:13335 24115:1:16265 24115:1:17924 24115:1:18013 24115:1:20940 24115:1:22822 24115:1:24429 24115:1:24482 24115:1:32590 24115:1:32934 24115:1:36692 24115:1:38008 24115:1:38819 24115:1:41378 24115:1:45753 24115:1:46489 24115:1:49544 24115:1:51847 24115:1:54574 24115:1:54994 24115:1:55720 24115:1:56059 24115:1:57724 24115:1:65021 24115:1:134823 24115:1:136907 24115:1:100000 24115:1:100001 24115:1:100002\nexit\n\nBGP would have issues and crash.\n\nModify the code to correctly determine the string length of the communities\nand to also double check if the string has an alias and ensure that the\nstring is still sufficiently large enough.  If not auto size it again.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8cb4892c0669d916557d693b878420faec8e6e2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "948e134d2c2cfb0904d4b607954304407195181d", "commit_date": "2023-04-20T04:06:34Z", "commit_message": "Merge pull request #13339 from FRRouting/mergify/bp/stable/8.4/pr-13329\n\nbgpd: Fix for ain->attr corruption during path update (backport #13329)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd5755610d8f489345d7cf472a1e63faae09e5ad", "commit_date": "2023-04-19T18:49:16Z", "commit_message": "bgpd: Fix for ain->attr corruption during path update\n\n1. Consider a established L2VPN EVPN BGP peer with soft-reconfiguartion\n   inbound configured\n\n2. When the interface of this directly connected BGP peer is shutdown,\n   bgp_soft_reconfig_table_update() is called, which memsets the evpn buffer\n   and calls bgp_update() with received attributes stored in ain table(ain->attr).\n   In bgp_update(), evpn_overlay attribute in ain->attr (which is an interned\n   attr) was modified by doing a memcpy\n\n3. Above action causes 2 attributes in the attrhash (which were previously different)\n   to match!\n\n4. Later during fsm change event of the peer, bgp_adj_in_remove() is called\n   to clean up the ain->attr. But, because 2 attrs in attrhash match, it causes\n   BGP to assert in bgp_attr_unintern()\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 6e076ba5231cba2e22dcbdc48a9c13df046a2e47)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ce238b421e8334e65c2d38df24338eeb0a3745", "commit_date": "2023-04-16T15:58:15Z", "commit_message": "Merge pull request #13316 from FRRouting/mergify/bp/stable/8.4/pr-13302\n\ntools: fix missing remote-as configuration when reload (backport #13302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94ffb7f5d29f7b61ea8cd99d70f8039bde804fe3", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: Make check flag really work for reload\n\nThe check flag of `found_pg_cmd` is already there, but not used.\nSo, make it really work for reload.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 9ea17a5d4978eb3d8ab3d192dd1cc8abf3e414e2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91e45e002a4e0d1ea3fd6063b8cc8d5fd6018e96", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: fix missing remote-as configuration when reload\n\nFrom commit `411d1a2`, `bgp_delete_nbr_remote_as_line()` is added to\nremove some specific bgp neighbors.  But, when reloading the following\nconfiguration, it will wrongly remove some good ones:\n`neighbor 66.66.66.6 remote-as internal`:\n\n```\nrouter bgp 66\n bgp router-id 172.16.204.6\n neighbor ANLAN peer-group\n neighbor ANLAN remote-as internal\n neighbor 66.66.66.6 remote-as internal <- LOST\n neighbor 66.66.66.60 peer-group ANLAN\n```\n\nThe reason is that \"66.66.66.6\" is included in \"66.66.66.60\" literally,\nthen it is mistakenly thought to be a match.  Just fix it with\nexcat match.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit a70895e83ae49b15f13e0801e0743d788b0cb595)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ee0c0acb82ff1b3bf52dc1e12fbd53a4e2fabb1", "commit_date": "2023-04-14T13:54:20Z", "commit_message": "Merge pull request #13306 from FRRouting/mergify/bp/stable/8.4/pr-13301\n\nbgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX (backport #13301)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0fc3078f9b7dea1d8703b57c6eaefec4cc2994b", "commit_date": "2023-04-14T13:04:48Z", "commit_message": "bgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX`\n\nBGP: Received signal 11 at 1681287514 (si_addr 0x8, PC 0x559ab42eb1d9); aborting...\nBGP: /lib/libfrr.so.0(zlog_backtrace_sigsafe+0x71) [0x7f4356b19af1]\nBGP: /lib/libfrr.so.0(zlog_signal+0xf9) [0x7f4356b19cf9]\nBGP: /lib/libfrr.so.0(+0xf5af5) [0x7f4356b4baf5]\nBGP: /lib/x86_64-linux-gnu/libpthread.so.0(+0x14420) [0x7f43568ab420]\nBGP: /usr/lib/frr/bgpd(prefix_rd2str+0x29) [0x559ab42eb1d9]\nBGP: /usr/lib/frr/bgpd(route_vty_out_detail_header+0x7ca) [0x559ab43061ba]\nBGP: /usr/lib/frr/bgpd(+0x1771a6) [0x559ab430a1a6]\nBGP: /usr/lib/frr/bgpd(+0x177f06) [0x559ab430af06]\nBGP: /usr/lib/frr/bgpd(+0x178c8b) [0x559ab430bc8b]\nBGP: /usr/lib/frr/bgpd(+0x179e7e) [0x559ab430ce7e]\nBGP: /lib/libfrr.so.0(+0x9417e) [0x7f4356aea17e]\nBGP: /lib/libfrr.so.0(cmd_execute_command+0x111) [0x7f4356aea321]\nBGP: /lib/libfrr.so.0(cmd_execute+0xd0) [0x7f4356aea4c0]\nBGP: /lib/libfrr.so.0(+0x10d5de) [0x7f4356b635de]\nBGP: /lib/libfrr.so.0(+0x10d81d) [0x7f4356b6381d]\nBGP: /lib/libfrr.so.0(+0x110b03) [0x7f4356b66b03]\nBGP: /lib/libfrr.so.0(event_call+0x81) [0x7f4356b5df91]\nBGP: /lib/libfrr.so.0(frr_run+0xe8) [0x7f4356b11b58]\nBGP: /usr/lib/frr/bgpd(main+0x385) [0x559ab4281d55]\nBGP: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f43566c9083]\nBGP: /usr/lib/frr/bgpd(_start+0x2e) [0x559ab428437e]\nBGP: in thread vtysh_read scheduled from lib/vty.c:2833 vty_event()\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ea5a8e4d5846778611fe1fd6e395bf3cbb33ebaa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "653078c53622ed02a01d442c0b43dae660444204", "commit_date": "2023-04-13T14:38:54Z", "commit_message": "Merge pull request #13294 from FRRouting/mergify/bp/stable/8.4/pr-13244\n\npimd: Process no-forward BSM packet (backport #13244)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "312c97ae18ef6260e8ccbc932a1fd1fc88cbd6fb", "commit_date": "2023-04-13T11:37:38Z", "commit_message": "pimd: Process no-forward BSM packet\n\nTopology Used:\n=============\nCisco---FRR4----FRR2\n\nInitially PIM nbr is down between FRR4----FRR2 from FRR2 side\nCisco is sending BSR packet to FRR4.\n\nProblem Statement:\n=================\nNo shutdown the PIM neighbor on FRR2 towards FRR4.\nFRR2, receives BSR packet immediately as the new neighbor\ncomes up. This BSR packet is having no-forward bit set.\nFRR2 is not able to process the BSR packet, and drop the\nBSR packet.\n\nRoot Cause:\n==========\nWhen PIMD comes up, we start BSM timer for 60 seconds.\nHere, the value accept_nofwd_bsm is setting to false.\n\nFRR2, when receives no-forward BSR packet, it is getting\naccept_nofwd_bsm value as false.\n\nSo, it drops, the no-forward BSM packet.\n\nFix:\n===\nSet accept_nofwd_bsm as false after first BSM packet received.\n\nSigned-off-by: Sarita Patra <saritap@vmware.com>\n(cherry picked from commit 8b462d557905200d98c7a8965b3d223637c3c5dd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "25463613552393cce5fbba4a6453947727f14f82", "commit_date": "2023-04-13T04:09:32Z", "commit_message": "Merge pull request #13281 from FRRouting/mergify/bp/stable/8.4/pr-13193\n\nlib: link state leak fix (backport #13193)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c4cc8fa5c24ee35153e0bdc8dd2a467b9c0cfa5", "commit_date": "2023-04-12T18:23:39Z", "commit_message": "Merge pull request #13277 from FRRouting/mergify/bp/stable/8.4/pr-13269\n\nospfd: Fix ospf_lsa memory leak (backport #13269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d917a966d2e27e0b9269da979ade532c3340b007", "commit_date": "2023-04-12T18:11:15Z", "commit_message": "Merge pull request #13264 from mjstapp/fix_dplane_shut_race_8_4\n\nzebra: fix race during shutdown", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3508b45fa1c66a143ef5cfa8d2a2bbed21145fc5", "commit_date": "2023-04-12T17:32:06Z", "commit_message": "Merge pull request #13275 from FRRouting/mergify/bp/stable/8.4/pr-13249\n\nzebra: Mark connected route as installed after interface flap event (backport #13249)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4bfefd4d919df0a0a88e3480c5e5fdb18356ee4", "commit_date": "2023-04-12T15:58:18Z", "commit_message": "lib: Fix link state memory leak\n\nFree link message data when a delete event is recorded.\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c123d2dee012620b8f43711062a10c49b9247a9c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfaaae0e04d5f62916b31cabe381086d2ae5fada", "commit_date": "2023-04-12T15:40:12Z", "commit_message": "ospfd: Fix ospf_lsa memory leak\n\nFree translated LSA when LSA installation fails\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c0ccfbfd45514251bb1f91ec9138dca138f88f57)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699e76c231a83b276e0e8f748d13583d359f88be", "commit_date": "2023-04-12T15:04:16Z", "commit_message": "zebra: Install directly connected route after interface flap\n\nIssue:\nAfter vlan flap, zebra was not marking the selected/best route as installed.\n\nAs a result, when a static route was configured with nexthop as directly\nconnected interface's(vlan) IP, the static route was not being installed\nin the kernel since its nexthop was unresolved. The nexthop was marked\nunresolved because zebra failed to mark the best route as installed after\ninterface flap.\n\nThis was happening because, in dplane_route_update_internal() if the old and\nnew context type, and nexthop group id are the same, then zebra doesn't send\ndown a route replace request to kernel. But, the installed (ROUTE_ENTRY_INSTALLED)\nflag is set when zebra receives a response from kernel. Since the\nrequest to kernel was being skipped for the route entry, installed flag\nwas not being set\n\nFix:\nIn dplane_route_update_internal() if the old and new context type, and\nnexthop group id are the same, then before returning, installed flag will\nbe set on the route-entry if it's not set already.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit e25a0b138a196c7daf389989ebffbd09d345cd53)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08aff7f17572b3b4333cc497c21e27a13a5dd17c", "commit_date": "2023-04-11T19:51:32Z", "commit_message": "zebra: fix race during shutdown\n\nDuring shutdown, the main pthread stops the dplane pthread\nbefore exiting. Don't try to clean up any events scheduled\nto the dplane pthread at that point - just let the thread\nexit and clean up. This is the 8.4 version.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc6697fa12660eafab4b3f724bcbaecfdd33b616", "commit_date": "2023-04-11T14:19:58Z", "commit_message": "Merge pull request #13256 from FRRouting/mergify/bp/stable/8.4/pr-13226\n\nripd: Fix memory leak for ripd's route-map (backport #13226)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "21eec745361aa704789fa9bf8a65b40b6142c029", "commit_date": "2023-04-11T11:44:36Z", "commit_message": "Merge pull request #13252 from FRRouting/mergify/bp/stable/8.4/pr-13247\n\nEvpn crashes and other ilk (backport #13247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8b3fc3d17fb4cdb92524f2d0b1e947a1eb04472", "commit_date": "2023-04-11T11:38:25Z", "commit_message": "ripd: Fix memory leak for ripd's route-map\n\nWhen cleaning `ripd`, it should free `ctx->name` of `struct if_rmap_ctx`,\nnot `ctx` itself.  Otherwise, it will lead to memory leak.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit d3ec0066e5ea0edd691b939806cd7b879ac6a32a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "182a164b1e4a784b794331ce0c187651a67bbf90", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow a `no router bgp XXX` when autoimport is happening\n\nWhen we have these sequence of events causing a crash in\nevpn_type5_test_topo1:\n\n(A) no router bgp vrf RED 100\n   this schedules for deletion the vrf RED instance\n(B) a l3vni change event from zebra\n   this creates a bgp instance for VRF RED in some cases\n   additionally it auto imports evpn routes into VRF RED\n   Please note this is desired behavior to allow for the\n   auto importation of evpn vrf routes\n(C) no router bgp 100\n   The code was allowing the deletion of the default\n   instance and causing tests to crash.\n\nEffectively the test in bgp_vty to allow/dissallow\nthe removal of the default instance was not correct\nfor the case when (B) happens.\n\nLet's just not allow the command to succeed in this case as that\nthe test was wrong.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 746e0522f3d5c8b1c6d5b698ff8cf861203bd9f6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d57481211ffd8cdd06bddb2a46501c4de831621", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow l3vni changes when shutting down\n\nWhen a `no router bgp XXX` is issued and the bgp instance\nis in the process of shutting down, do not allow a l3vni\nchange coming up from zebra to do anything.  We can just\nsafely ignore it at this point in time.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5a7c43c77ed27522e1e655795d5451c888abb10e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3235edd171af74afdc1166d31cf03f723b20447e", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Use the actual pointer type instead of a void\n\nLet's cut to the chase, we know the pointer type and\nit allows us to not to some gyrations.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit ef96e3753fe47de1edd0d5640bc30329ae55508a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7692f6a663f5ad0f24c59a17796422a9c61844a3", "commit_date": "2023-04-07T19:27:50Z", "commit_message": "Merge pull request #13231 from FRRouting/mergify/bp/stable/8.4/pr-13222\n\nLimit scope (backport #13222)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ce79c129ef21cb67f9ab503b9df401ec6f17806c", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Treat withdraw variable as a bool\n\nUsed as a bool, treated as a bool.  Make it a bool\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit aa056a2a6481aba66c727794d0ee988724be9316)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0a12b878082f77b67ad5d9b4782846ac738575a2", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Limit flowspec to no attribute means a implicit withdrawal\n\nAll other parsing functions done from bgp_nlri_parse() assume\nno attributes == an implicit withdrawal.  Let's move\nbgp_nlri_parse_flowspec() into the same alignment.\n\nReported-by: Matteo Memelli <mmemelli@amazon.it>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cfd04dcb3e689754a72507d086ba3b9709fc5ed8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272ea5a3ac12f2a12343555f8cd3f2c7eee665af", "commit_date": "2023-04-07T07:15:39Z", "commit_message": "bgpd: Conform bgp_packet.h with coding standards\n\nFRR's standards state that function declarations should\nhave actual variable names for parameters passed in.\nLet's make this so for bgp_packet.h\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 78745b8700f25187995ef010ff7486eb4c53296d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ef5db7e3958bd5390df8a8df24725ab83e64db47", "commit_date": "2023-04-06T13:52:12Z", "commit_message": "Merge pull request #13189 from FRRouting/mergify/bp/stable/8.4/pr-13175\n\nzebra: Cleanup ctx leak on shutdown and turn off event (backport #13175)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d5510fb6c519b9a49a83b10bb9e5c6fec0ab2b37", "commit_date": "2023-04-05T13:24:47Z", "commit_message": "zebra: Cleanup ctx leak on shutdown and turn off event\n\ntwo things:\n\nOn shutdown cleanup any events associated with the update walker.\nAlso do not allow new events to be created.\n\nFixes this mem-leak:\n\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790:Direct leak of 8 byte(s) in 1 object(s) allocated from:\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #0 0x7f0dd0b08037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #1 0x7f0dd06c19f9 in qcalloc lib/memory.c:105\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #2 0x55b42fb605bc in rib_update_ctx_init zebra/zebra_rib.c:4383\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #3 0x55b42fb6088f in rib_update zebra/zebra_rib.c:4421\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #4 0x55b42fa00344 in netlink_link_change zebra/if_netlink.c:2221\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #5 0x55b42fa24622 in netlink_information_fetch zebra/kernel_netlink.c:399\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #6 0x55b42fa28c02 in netlink_parse_info zebra/kernel_netlink.c:1183\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #7 0x55b42fa24951 in kernel_read zebra/kernel_netlink.c:493\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #8 0x7f0dd0797f0c in event_call lib/event.c:1995\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #9 0x7f0dd0684fd9 in frr_run lib/libfrr.c:1185\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #10 0x55b42fa30caa in main zebra/main.c:465\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #11 0x7f0dd01b5d09 in __libc_start_main ../csu/libc-start.c:308\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-SUMMARY: AddressSanitizer: 8 byte(s) leaked in 1 allocation(s).\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 3cd0accb5051e900ab343d5fa7c59360c0c1a812)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c9d7a8bc4c61b02a90bc6b8bb3cd4fb15b6c7d2d", "commit_date": "2023-04-05T06:57:21Z", "commit_message": "Merge pull request #13212 from FRRouting/mergify/bp/stable/8.4/pr-13181\n\nbgpd: fix ecommunity parsing for AS4 (backport #13181)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4fafe6aac5bc41dcce1c7330ceb06bcf1921c062", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "tests: add test to validate 4-byte ecomm parsing\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit f615e6dc409c214e66863e8c2ef94775edcac050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "34fdeb0ed34147933125d1bb4f8ab90c1f2a7ca0", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "bgpd: fix ecommunity parsing for AS4\n\nThe parser for extended communities was incorrectly disallowing an\noperator from configuring \"Route Origin\" extended communities\n(e.g. RD/RT/SoO) with a 4-byte value matching BGP_AS4_MAX (UINT32_MAX)\nand allowed the user to overflow UINT32_MAX. This updates the parser to\nread the value as a uint64_t so that we can do proper checks on the\nupper bounds (> BGP_AS4_MAX || errno).\n\nbefore:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 0:65\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\n% Malformed SoO extended community\nTORC11(config-router-af)#\n```\n\nafter:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\n% Malformed SoO extended community\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)#\n```\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit b571d79d6482217c599c53976cb8cf0ec77b847f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "49826030152d629308679819dc748e6c10d2119f", "commit_date": "2023-04-04T10:52:08Z", "commit_message": "Merge pull request #13204 from FRRouting/mergify/bp/stable/8.4/pr-13198\n\nbgpd: bmp fix peer-up ports byte order (backport #13198)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fbe7264546e4c3a5605edb13201e00ffd8dc33c", "commit_date": "2023-04-04T07:49:56Z", "commit_message": "bgpd: bmp fix peer-up ports byte order\n\nadded htons to ports in the peer-up message to fix byte order\n\nSigned-off-by: Maxence Younsi <mx.yns@outlook.fr>\n(cherry picked from commit 9e681c84fa07d768d41fb8fba269c965c8c08a4b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c497beba694937a9e6099bc6ee27bd8d3d818101", "commit_date": "2023-03-31T11:47:11Z", "commit_message": "Merge pull request #13170 from FRRouting/mergify/bp/stable/8.4/pr-13148\n\nbgpd : memory leak fix for aggregate-address on cleanup (backport #13148)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a8fdaa0a8c73a6c9b3b6663c9ff393998e27ec3e", "commit_date": "2023-03-31T08:41:51Z", "commit_message": "Merge pull request #13167 from FRRouting/mergify/bp/stable/8.4/pr-13153\n\nbgpd: increase buffer size used for dumping BGP to MRT files (backport #13153)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e64171d46fd5f0c8b488990ff38e1d06e57d834", "commit_date": "2023-03-31T08:12:07Z", "commit_message": "bgpd : aggregate-address memory leak fix\n\nMemory leaks are observed in the cleanup code. When \u201cno router bgp\" is executed,\ncleanup in that flow for aggregate-address command is not taken care.\n\nfixes the below leak:\n    --\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1e55 in aggregate_addressv6_magic bgpd/bgp_route.c:8592\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42be3f5 in aggregate_addressv6 bgpd/bgp_route_clippy.c:341\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1cde in aggregate_addressv4_magic bgpd/bgp_route.c:8543\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42bd258 in aggregate_addressv4 bgpd/bgp_route_clippy.c:255\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-SUMMARY: AddressSanitizer: 304 byte(s) leaked in 2 allocation(s).\n\nSigned-off-by: Samanvitha B Bhargav <bsamanvitha@vmware.com>\n(cherry picked from commit 7a70d99038a67f693c40d4f1c03027a2b05bfaf8)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a04f44cd90fa0571963bca5330c5438c0b069b05", "commit_date": "2023-03-31T06:25:13Z", "commit_message": "bgpd: increase buffer size used for dumping BGP to MRT files\n\nSigned-off-by: James Clarke (jamclar2) <jamclar2@cisco.com>\n(cherry picked from commit 461b6cd4d7f27624569f7a557f9abf91a85ab3cc)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc8baaf503a7c34eeab77491cdc7bfb8bd6f3b2b", "commit_date": "2023-03-30T10:17:31Z", "commit_message": "Merge pull request #13138 from FRRouting/mergify/bp/stable/8.4/pr-13124\n\nbgpd: Do not announce routes immediatelly on prefix/distribute/filter changes (backport #13124)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "90b54e70f9d2afe3c4168569fad1056ac41ff367", "commit_date": "2023-03-30T06:38:43Z", "commit_message": "bgpd: Do not announce routes immediatelly on filter updates\n\nIf we set `bgp route-map delay-timer X`, we should ignore starting to announce\nroutes immediately, and wait for delay timer to expire (or ignore at all if set\nto zero).\n\nf1aa49293a4a8302b70989aaa9ceb715385c3a7e broke this because we always sent\nroute refresh and on receiving BoRR before sending back EoRR.\n\nLet's get fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4d8e44c7538c6479ac99ec842bebc42a1e6b2ebc)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5620fe8de0f3dcb6001d67d9895bd0f31d89a027", "commit_date": "2023-03-29T07:25:54Z", "commit_message": "Merge pull request #13135 from FRRouting/mergify/bp/stable/8.4/pr-13120\n\nospfd: Fix for vitual-link crash in signal handler (backport #13120)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2755893d5c61f64543f64dfd1b24ba9bfbf90f65", "commit_date": "2023-03-29T04:19:40Z", "commit_message": "ospfd: Fix for vitual-link crash in signal handler\n\nWhenever OSPF virtual-link is created, a virtual interface is\nassociated with it. Name of the virtual interface is derived by\ncombining \"VLINK\" string with the value of vlink_count, which is a global\nvariable.\n\nProblem:\nConsider a scenario where 2 virtual links A and B are created in OSPF with\nvirtual interfaces VLINK0 and VLINK1 respectively. When virtual-link A is unconfigured\nand reconfigured, new interface name derived for it will be VLINK1, which is already\nassociated with virtual-link B. Due to this, both virtual-links A and B will\npoint to the same interface, VLINK1.\n\nDuring FRR restart when signal handler is called, OSPF goes through all the virtual\nlinks and deletes the interface(oi) associated with it. During the deletion of interface\nfor virtual-link B,it accesses the interface which was deleted already(which was deleted\nduring deletion of virual-link A) and whose fields were set to NULL. This\nleads to OSPF crash.\n\nFixed it by not decrementing vlink_count during unconfig/deletion for virtual-link.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 19f451913ed73810e4b02774eae37782c8c36f24)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7f92592633a5a91f3c200e4e03804286a286fbe8", "commit_date": "2023-03-29T04:17:47Z", "commit_message": "Merge pull request #13128 from FRRouting/mergify/bp/stable/8.4/pr-13118\n\nbgpd: Copy the password from the previous peer on peer_xfer_config() (backport #13118)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "906e8addd515b584d476b6e19d399dc64273baac", "commit_date": "2023-03-29T04:17:29Z", "commit_message": "Merge pull request #13127 from FRRouting/mergify/bp/stable/8.4/pr-13123\n\nbgpd: Fix debug output for route-map names when using a unsuppress-map (backport #13123)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677a2f20540b267b6bef0dc493d99ab826fb4c9", "commit_date": "2023-03-28T15:22:23Z", "commit_message": "bgpd: Copy the password from the previous peer on peer_xfer_config()\n\nWe copy the password only if an existing peer structure didn't have it.\n\nBut it might be the case when it exists, and we skip here.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b5b6f11fcb90219cbc69e5845872f2769d42bb2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "96bb0d80579fc93e7e41b20eeae1cc59b3f64f93", "commit_date": "2023-03-28T15:19:44Z", "commit_message": "bgpd: Fix debug output for route-map names when using a unsuppress-map\n\nLog is printing this with this config:\n\n2023-03-28 07:36:47.007 [DEBG] bgpd: [Q9J6Z-09HRR] 192.168.119.120 [Update:SEND] 1.2.3.33/32 is filtered by route-map '(null)'\n\nHere's the config:\n\n address-family ipv4 unicast\n  network 1.2.3.33/32\n  network 1.2.3.34/32\n  aggregate-address 1.2.3.0/24 summary-only\n  redistribute table 33 route-map foo\n  neighbor 192.168.119.120 route-map DENY in\n  neighbor 192.168.119.120 unsuppress-map UNSUPPRESS\n\nip prefix-list UNSUPPRESS seq 5 permit 1.2.3.4/32\nip prefix-list UNSUPPRESS seq 10 permit 1.2.3.5/32\nip prefix-list UNSUPPRESS seq 15 permit 1.2.3.6/32\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8e8ed2e1fb8adbe86135f2b9bcb47fcba6936ed3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9f1ba873637fd6ce4a2d366eafcf41402775852b", "commit_date": "2023-03-26T12:19:57Z", "commit_message": "Merge pull request #13104 from FRRouting/mergify/bp/stable/8.4/pr-13100\n\nbgpd: Check 7 bytes for Long-lived Graceful-Restart capability (backport #13100)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c69bee3ab252228accd4db36691f8739a230119c", "commit_date": "2023-03-24T16:00:24Z", "commit_message": "Merge pull request #13103 from FRRouting/mergify/bp/stable/8.4/pr-13088\n\npimd: Fix use after free issue for ifp's moving vrfs (backport #13088)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d5069143974e5a8935a6e6889aef452c46dccd2", "commit_date": "2023-03-24T14:23:33Z", "commit_message": "bgpd: Check 7 bytes for Long-lived Graceful-Restart capability\n\nIt's not 4 bytes, it was assuming the same as Graceful-Restart tuples.\n\nLLGR has more 3 bytes (Long-lived Stale Time).\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b1d33ec293e8e36fbb8766252f3b016d268e31ce)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ed5f28c765dd4531f7c131b8a45c4f4a4f049491", "commit_date": "2023-03-24T13:15:34Z", "commit_message": "Merge pull request #13095 from FRRouting/mergify/bp/stable/8.4/pr-13065\n\nospfd: Fixing Summary origination after range configuration (backport #13065)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1bc74a10434cfb7bd6304abbf53df271b576f79e", "commit_date": "2023-03-24T13:03:31Z", "commit_message": "pimd: Fix use after free issue for ifp's moving vrfs\n\nWe have this valgrind trace:\n\n==1125== Invalid read of size 4\n==1125==    at 0x170A7D: pim_if_delete (pim_iface.c:203)\n==1125==    by 0x170C01: pim_if_terminate (pim_iface.c:80)\n==1125==    by 0x174F34: pim_instance_terminate (pim_instance.c:68)\n==1125==    by 0x17535B: pim_vrf_terminate (pim_instance.c:260)\n==1125==    by 0x1941CF: pim_terminate (pimd.c:161)\n==1125==    by 0x1B476D: pim_sigint (pim_signals.c:44)\n==1125==    by 0x4910C22: frr_sigevent_process (sigevent.c:133)\n==1125==    by 0x49220A4: thread_fetch (thread.c:1777)\n==1125==    by 0x48DC8E2: frr_run (libfrr.c:1222)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Address 0x6274d28 is 1,192 bytes inside a block of size 1,752 free'd\n==1125==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x174FF1: pim_vrf_delete (pim_instance.c:181)\n==1125==    by 0x4925480: vrf_delete (vrf.c:264)\n==1125==    by 0x4925480: vrf_delete (vrf.c:238)\n==1125==    by 0x49332C7: zclient_vrf_delete (zclient.c:2187)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Block was alloc'd at\n==1125==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x48E80AF: qcalloc (memory.c:116)\n==1125==    by 0x1750DA: pim_instance_init (pim_instance.c:90)\n==1125==    by 0x1750DA: pim_vrf_new (pim_instance.c:161)\n==1125==    by 0x4924FDC: vrf_get (vrf.c:183)\n==1125==    by 0x493334C: zclient_vrf_add (zclient.c:2157)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n\nand you do this series of events:\n\na) Create a vrf, put an interface in it\nb) Turn on pim on that interface and turn on pim in that vrf\nc) Delete the vrf\nd) Do anything with the interface, in this case shutdown the system\n\nThe move of the interface to a new vrf is leaving the pim_ifp->pim pointer pointing\nat the old pim instance, which was just deleted, so the instance pointer was freed.\n\nLet's clean up the pim pointer in the interface pointer as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit e60308f498c356227df5dbc6cc04015a3b213f1d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57ae44234b0cb887dae7fea0cc6d3fc3250ad588", "commit_date": "2023-03-23T23:57:49Z", "commit_message": "ospfd: Fixing Summary origination after range configuration\n\nDescription:\n\tAfter area range config, summary lsas are aggerated to configured\n\troute but later it was being flushed instead of the actual summary\n\tlsa. This was seen when prefix-id of the aggregated route is same\n\tas one of the actual summary route.\n\tHere, aggregated summary lsa need to be returned to set the flag\n\tSUMMARY_APPROVE after originating aggregated summary lsa but its not.\n\tWhich is being cleaned up as part of unapproved summary cleanup.\n\tCorrected this now.\n\nIssue: #13028\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit c8c1a240ab9653d74b3af009f850e150909f784e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f3bea895e5a17154fd2bc0b04114a06353b912f", "commit_date": "2023-03-21T13:24:33Z", "commit_message": "Merge pull request #13071 from FRRouting/mergify/bp/stable/8.4/pr-13062\n\nzebra: Fix for heap-use-after-free in EVPN (backport #13062)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b55182a05f614896096a37fc168a7a44e176b67", "commit_date": "2023-03-21T11:05:09Z", "commit_message": "zebra: Fix for heap-use-after-free in EVPN\n\nIssue:\nWhen a netns is deleted, since zebra doesn\u2019t receive interface down/delete\nnotifications from kernel, it manually deletes the interface without removing\nthe association between zebra_l3vni and the interface that is being deleted\n(i.e it deletes the interface without setting \u201czl3vni->vxlan_if\u201d to NULL).\n\nLater, during the deletion of netns, when zl3vni_rmac_uninstall() is called to\nuninstall the remote RMAC from the kernel, zebra ends up accessing stale\n\u201czl3vni->vxlan_if\u201d pointer, which now points to freed memory.\nThis was causing heap use-after-free.\n\nFix:\nBefore zebra starts deleting the interfaces when it receives netns delete notification,\nappropriate functions() are being called to remove the association between evpn structs\nand interface and set \u201czl3vni->vxlan_if\u201d to NULL. This ensures that when\nzl3vni_rmac_uninstall() is called during netns deletion, it will bail because\n\u201czl3vni->vxlan_if\u201d is NULL.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 7eefea98ba5d42dc3f042b509fe0f18a0e1d5548)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "017c4f79b3471463452f1792a525f010f4a9d20d", "commit_date": "2023-03-21T10:58:59Z", "commit_message": "Merge pull request #13068 from FRRouting/mergify/bp/stable/8.4/pr-13061\n\nlib: on bfd peer shutdown actually stop event (backport #13061)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aaf031b33a799aeab9ff2f87353b9bf7e3b624d", "commit_date": "2023-03-21T07:00:30Z", "commit_message": "lib: on bfd peer shutdown actually stop event\n\nWhen deleting a bfd peer during shutdown, let's ensure\nthat any scheduled events are actually stopped.\n\n==7759== Invalid read of size 4\n==7759==    at 0x48BF700: _bfd_sess_valid (bfd.c:419)\n==7759==    by 0x48BF700: _bfd_sess_send (bfd.c:470)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Address 0xfb687a4 is 4 bytes inside a block of size 272 free'd\n==7759==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48BFA5A: bfd_sess_free (bfd.c:535)\n==7759==    by 0x2B7034: bgp_peer_remove_bfd (bgp_bfd.c:339)\n==7759==    by 0x29FF8A: peer_free (bgpd.c:1160)\n==7759==    by 0x29FF8A: peer_unlock_with_caller (bgpd.c:1192)\n==7759==    by 0x2A0506: peer_delete (bgpd.c:2633)\n==7759==    by 0x208190: bgp_stop (bgp_fsm.c:1639)\n==7759==    by 0x20C082: bgp_event_update (bgp_fsm.c:2751)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Block was alloc'd at\n==7759==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48F53AF: qcalloc (memory.c:116)\n==7759==    by 0x48BF98D: bfd_sess_new (bfd.c:397)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:298)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:279)\n==7759==    by 0x29BA06: peer_group2peer_config_copy (bgpd.c:2803)\n==7759==    by 0x2A3D96: peer_create_bind_dynamic_neighbor (bgpd.c:4107)\n==7759==    by 0x2A4195: peer_lookup_dynamic_neighbor (bgpd.c:4239)\n==7759==    by 0x21AB72: bgp_accept (bgp_network.c:422)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n\ntl;dr -> Effectively, in this test setup we have 300 dynamic bgp\nsessions all of which are using bfd.  When a peer collision is detected\nor we remove the peers, if an event has been scheduled but not actually\nexecuted yet the event event was not actually being stopped, leaving\nthe bsp pointer on the thread->arg and causing a crash when it is\nexecuted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f83431c7e8767abc01b3bc2c9a98bd712b55b67f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32a5096efdf5f2867106825068598833e19c06df", "commit_date": "2023-03-20T23:51:53Z", "commit_message": "Merge pull request #13057 from opensourcerouting/fix/bgp_null_deref_8.4\n\nbgpd: Prevent Null pointer deref when outputting data", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d7aca27af69589bd7c45cbf871300ed2ed8c262", "commit_date": "2023-03-20T14:10:56Z", "commit_message": "bgpd: Prevent Null pointer deref when outputting data\n\nCrash:\n\n(gdb) bt\n0  0x00007fee27de15cb in raise () from /lib/x86_64-linux-gnu/libpthread.so.0\n1  0x00007fee280ecd9c in core_handler (signo=11, siginfo=0x7ffe56001bb0, context=<optimized out>) at lib/sigevent.c:264\n2  <signal handler called>\n3  0x0000555e321c41b2 in prefix_rd2str (prd=0x10, buf=buf@entry=0x7ffe56002080 \"27.0.0.R\\340\\373\\062\\062^U\", size=size@entry=28) at bgpd/bgp_rd.c:168\n4  0x0000555e321c431a in printfrr_prd (buf=0x7ffe560021a0, ea=<optimized out>, ptr=<optimized out>) at bgpd/bgp_rd.c:224\n5  0x00007fee2812069b in vbprintfrr (cb_in=cb_in@entry=0x7ffe56002330, fmt0=fmt0@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/vfprintf.c:564\n6  0x00007fee28122ef7 in vasnprintfrr (mt=mt@entry=0x7fee281cb5e0 <MTYPE_VTY_OUT_BUF>, out=out@entry=0x7ffe560023f0 \" RD: : R\\n\", outsz=outsz@entry=1024, fmt=fmt@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/glue.c:103\n7  0x00007fee28103504 in vty_out (vty=vty@entry=0x555e33f82d10, format=format@entry=0x555e3229a3ad \" RD: %pRD\\n\") at lib/vty.c:190\n8  0x0000555e32185156 in bgp_evpn_es_show_entry_detail (vty=0x555e33f82d10, es=0x555e33c38420, json=<optimized out>) at bgpd/bgp_evpn_mh.c:2655\n9  0x0000555e32188fe5 in bgp_evpn_es_show (vty=vty@entry=0x555e33f82d10, uj=false, detail=true) at bgpd/bgp_evpn_mh.c:2721\nnotice prd=0x10 in #3.  This is because in bgp_evpn_mh.c we are sending &es->es_base_frag->prd.\n\nThere is one spot in the code where during output the es->es_base_frag is checked for non nullness\nLet's just make sure it's right in all the places.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3504210c3a194a1c19f9872de4695ee78661c009", "commit_date": "2023-03-20T13:43:03Z", "commit_message": "Merge pull request #13051 from FRRouting/mergify/bp/stable/8.4/pr-13049\n\nlib: IPv6 prefix-list entry handling with `any` (backport #13049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d000e49c6d20999cf95b44788c6849112d7b3d3e", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "lib: Destroy `any` flag when creating a prefix-list entry with prefix\n\nThe same as 61c07b9d43529f69f48ca54f4f0213cff52b5d0a, but forgot to put IPv6\nin place.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 14c1e0a16959ba8718bb7831c7720707e1d73555)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba257dc803b2d4c4c9fa48883e5717a56cabb770", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "tests: Check if prefix-lists with IPv6 any works fine\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit d8986f0134887f5d8916e71993ab378efaee4306)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "78ff98ae526b39a5cc34bfa1007cc964bcfbff03", "commit_date": "2023-03-20T11:26:36Z", "commit_message": "Merge pull request #13053 from FRRouting/mergify/bp/stable/8.4/pr-12445\n\nMore mtype tmp (backport #12445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b01240e8a516bf29ae4cddb2e437559273f92877", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "bgpd: Make bgp_keepalives.c not use MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 19a713be1db59d757d3d08b72636e4efe0a3e0c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a7eee2676306ac788173e728a30de8d379fe448", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "ospf6d: Stop using MTYPE_TMP in some cases\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 4898cbaf1dee95f687cf6aa6d0490a336fb7dceb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d7402780ebbd43e0ddb51aed8fb3a7232775ed7", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd, ospfclient: Do not just include .c files in another .c\n\nospfclient.c includes .c files directly from ospfd.  Let's separate\nthese out a bit.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 253113bcb80b7b489eb848988a90459403f870de)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "73850c562f7644cc3df339607f0a592940c64d2c", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd: Remove MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 29a1a53d6c3023841b8289f9ff7b15219ec0b05c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cbd7f85c580ea914e76eb3e6170984178bbf88", "commit_date": "2023-03-19T22:39:12Z", "commit_message": "Merge pull request #13040 from FRRouting/mergify/bp/stable/8.4/pr-13038", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c92eda8ab9aa230faa9698d2d9b440ad3f96f0f", "commit_date": "2023-03-19T20:58:10Z", "commit_message": "Merge pull request #13042 from FRRouting/mergify/bp/stable/8.4/pr-13026\n\npbrd:fix mismatching in match src-dst (backport #13026)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "511a5fb70619659d31ae7a5dc742edadfcf38e80", "commit_date": "2023-03-19T20:57:58Z", "commit_message": "Merge pull request #13044 from FRRouting/mergify/bp/stable/8.4/pr-13025\n\nOspf ti lfa leaks (backport #13025)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02d5f199d92da06dc674fc48b98e5052452f8c2f", "commit_date": "2023-03-19T04:45:22Z", "commit_message": "ospfd: Free up q_space in early return path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 52ff0e3ed4ea671f42e3ab5d6d97dd6312e2f87f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b63a91e2518dcff5671877cc90555956f6678b5d", "commit_date": "2023-03-19T04:45:21Z", "commit_message": "ospfd: Fix ospf_ti_lfa drop of an entire table\n\nThe new_rtrs variable was just generated and then dropped.  Let's\nfix that entirely\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit eb7e14011fa19f4ecc18b0108c556cc1d82ee381)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e83375e55ea5d447ea78cf2c87a00964305a628", "commit_date": "2023-03-19T04:43:01Z", "commit_message": "pbrd:fix mismatching in match src-dst\n\nupstream commit 67765a232d has incorect\naddress family check which prevent from\ndeleting src/dst config under pbr rule.\n\nTicket:#3405024\nIssue:3405024\nTesting Done:\n\nConfig:\n\npbr-map map6 seq 1\n match src-ip 2000::200:100:100:0/96\n match dst-ip 2000::100:100:100:0/96\n set nexthop-group group3\n\nBefore:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\nCannot mismatch families within match src/dst\n\nAfter:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\ntorc-12(config-pbr-map)#\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 03494887eddaa255d9b6a217bfff60cc63cede42)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e21e733b82b5a2f4d0cc8a575c15ca4a3ee09c9e", "commit_date": "2023-03-19T04:29:21Z", "commit_message": "ospfd: Cleanup some memory leaks on shutdown in ospf_apiserver.c\n\nClean up some memory leaks found in ospf_apiserver.c  Also\na crash in the original implementation.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7773d0071ab4eb1b725581c525c3e152f2c806c7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5c24b1fe10d79df26a8e4f0aaa83fd475f27309d", "commit_date": "2023-03-18T17:15:09Z", "commit_message": "Merge pull request #13034 from FRRouting/mergify/bp/stable/8.4/pr-13024\n\nlib: Adjust only any flag for prefix-list entries if destroying (backport #13024)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d827df53e1a1ac8cdf5934e763be08dc207666da", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "lib: Adjust only `any` flag for prefix-list entries if destroying\n\nBefore this patch, if we destroy `any` flag for a prefix-list entry, we always\nset destination as 0.0.0.0/0 and/or ::/0.\n\nThis means that, if we switch from `ip prefix-list r1-2 seq 5 deny any` to\n`ip prefix-list r1-2 seq 5 permit 10.10.10.10/32` we will have\n`permit any` eventually, which broke ACLs.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 61c07b9d43529f69f48ca54f4f0213cff52b5d0a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "04bb4249829ee3be1711e9464c83566a9d2295b4", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "tests: Check if route-map works correctly if modifying prefix-lists\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit a1e538178cb1ed09f6bbc0612605c5980bb9a3df)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dd7ec08225994a8d21102e9f82aab59e42f921c", "commit_date": "2023-03-17T22:04:42Z", "commit_message": "Merge pull request #13014 from FRRouting/mergify/bp/stable/8.4/pr-13009\n\nbgpd: Use interface name instead of pointer value (backport #13009)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ac3cbdf3889243c1aebf47c35b34fee74a0adcb9", "commit_date": "2023-03-17T22:04:16Z", "commit_message": "Merge pull request #13022 from FRRouting/mergify/bp/stable/8.4/pr-13016\n\nospfd, ospfd6: Add more logging (backport #13016)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "079fbc793054e115175e406745f8e69d2fb619b4", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd: Log Adjacency Changes with Neighbor IP in addition to Neighbor ID\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 386d232a1a706310f4425d1a0ad6f08c32646e10)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e327d9630cabdca69985969c8fdb0d54000f3fb", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd, ospf6d: Add more logging details\n\nBasically just router-id or interface/IP.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ba427e63489757756cd2b244315b1a911071bbc2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "706ec3d3c19fab5fbc1b7bf343397db6059e9f5e", "commit_date": "2023-03-17T07:56:44Z", "commit_message": "bgpd: Use interface name instead of pointer value\n\nLog message is borked in a manner that makes it unusable:\nbgpd[52]: [VX6SM-8YE5W][EC 33554460] 2000:31:0:53::2: nexthop_set failed, resetting connection - intf 0x561eb9005a30\n\nLet's print out the interface name instead.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 50e049db76573210e3b9ccfa962e5259452ccbe3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "933b8347fb4aadf53bd23aaae6bee6edc6ce72b8", "commit_date": "2023-03-15T21:42:09Z", "commit_message": "FRR Release 8.4.3\n\nThis a convenience release/tag for house keeping. We currently don't plan to publish\nbinary packages with this release.\n\nChangelog:\n\nbabeld\n    Fix filtering against all interfaces\n\nbgpd\n    Avoid double aspath_dup() for confederation when remote-as != as_specified\n    Convert evpn output to not pretty print json\n    Evpn route detail json display non prett\n    Fix deterministic-med check for stale paths\n    Fix use-after-free crash for evpn\n    Flowspec overflow issue\n    Free rfapi callback object always\n    Increment version number even when no data is sent\n    Intern default-originate attributes to avoid use-after-free\n    Pass global asn for confederation peers if not as_specified\n    Prevent multipathing among evpn and non-evpn paths\n\nlib, bgpd\n    Add ability to specify that some json output should not be pretty\n\nlib\n    Fix non-use of option\n    Free dnode before returning if yang translator model is already loaded\n    Release memory of yang translation module on error\n\nospfclient\n    Bugfix and no implicit register\n    Remove register \"ready\" requirement\n\nospfd\n    Compare prefix values in host order\n    Inc. opaque data in `show opaque info detail json` output\n    Small bugfix for miscounting a[s]brs\n\npbrd\n    Fix large tableids displayed as negative\n\npceplib\n    Add <time.h> include for time_t\n\npimd\n    In_multicast needs host order\n    Make logs useful for input drops\n    Try to reinstall mfc when we get nocache\n    V6 intentionally turned off route-maps.  turn it on.\n\ntests\n    Check if bgp confederation works with as_external (!as_specified)\n    Improve the ospfapi test (move to square topology)\n\ntools\n    Fix missing pbrd in rsyslog.d 45-frr.conf file\n    Frr-reload fix list value not present\n\nvrrpd\n    Give null when using null ifp to lookup vr\n\nzebrad\n    Add debug for bridge capability\n    Fix other table inactive when ip import-table is on\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c4bc751002555894fb1b7b8b75269dee0d665d2", "commit_date": "2023-03-15T17:20:26Z", "commit_message": "Merge pull request #13000 from FRRouting/mergify/bp/stable/8.4/pr-12996\n\ntools: frr-reload fix list value not present (backport #12996)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76bbd96c52f81467f8469026225528ba51f02805", "commit_date": "2023-03-15T12:00:33Z", "commit_message": "tools: frr-reload fix list value not present\n\nCheck for value present in list before removing\nas in certain python3 ValueError traceback is observed.\n\nTraceback (most recent call last):\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 2278, in <module>\n    (lines_to_add, lines_to_del, restart_frr)\n\t= compare_context_objects(newconf, running)\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1933, in compare_context_objects\n    lines_to_add, lines_to_del\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1549, in ignore_delete_re_add_lines\n    lines_to_del.remove((ctx_keys, line))\nValueError: list.remove(x): x not in list\n\nTicket:#3389979\nIssue:3389979\n\nTesting Done:\nWith fix perform frr-relaod on frr.conf config where earlier\ntraceback was seen.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 1543f58b5541c0ddb5e53bb7994136dcb5f836cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16706bc59f5733dd28192b7220b2e5f1de720372", "commit_date": "2023-03-14T08:08:51Z", "commit_message": "Merge pull request #12988 from FRRouting/mergify/bp/stable/8.4/pr-12978\n\npimd: IN_MULTICAST needs host order (backport #12978)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "642073dc8a7c58c21b695e21cdefc0f6f045f083", "commit_date": "2023-03-14T05:49:02Z", "commit_message": "pimd: IN_MULTICAST needs host order\n\nNew correct behavior:\n\neva# conf\neva(config)# ip pim rp 192.168.1.224 224.0.0.0/24\nNo Path to RP address specified: 192.168.1.224\neva(config)# ip pim rp 224.1.2.3 224.0.0.0/24\n% Bad RP address specified: 224.1.2.3\neva(config)#\n\nFixes: #12970\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8083e713562a44744c4c2f4a0aa5cc6e2b2170ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9ac1b3fa6440e2efb63a171275c0b6b4d89fa49f", "commit_date": "2023-03-13T05:11:21Z", "commit_message": "Merge pull request #12981 from FRRouting/mergify/bp/stable/8.4/pr-12974\n\nbgpd: Increment version number even when no data is sent (backport #12974)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "84b56b4b142f9f5ddaeb49918c7911a516663ff5", "commit_date": "2023-03-12T19:49:38Z", "commit_message": "bgpd: Increment version number even when no data is sent\n\nWhen an update group decides to not send a prefix\nannouncement because it has not changed, still increment\nthe version number.  Why?  To allow for the situation\nwhere you have say 2 peers in 1 peer group and shortly\nafter they come up a 3rd peer comes up.  It will be\nplaced into a separate update group and could be\ncoalesced down, when it finishes updating all data\nto it.  Now imagine that a single prefix changes at\nthis point in time as well.  Then first 2 peers may\ndecide to not send the data, since nothing has changed.\nWhile the 3rd peer will and since the versions numbers\nnever match they will never coalesce.  So when the decision\nis made to skip, update the version number as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8038460bd2b413a0c082fbd629cdae00708b133)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2cf050ffc0a2cdf9792f9982375dc26974473716", "commit_date": "2023-02-26T12:22:24Z", "commit_message": "Merge pull request #12901 from FRRouting/mergify/bp/stable/8.4/pr-12900\n\nbgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED (backport #12900)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4f01db503a828760fa81680263f7c0077cbbae87", "commit_date": "2023-02-25T00:18:04Z", "commit_message": "bgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED\n\nJust was blind when not seing it's already dup'ed above:\n\n```\tif (peer->sort == BGP_PEER_EBGP\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_AS_PATH_UNCHANGED)\n\t\t|| attr->aspath->segments == NULL)\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_RSERVER_CLIENT))) {\n\t\taspath = aspath_dup(attr->aspath); <<<<<<<<<<<<<<<\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 9930441c66131d26fd7c51d9684b9e6a228c38d7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a053fecd291590bf55b53a4bfd980ec40d54776", "commit_date": "2023-02-24T14:20:30Z", "commit_message": "Merge pull request #12892 from FRRouting/mergify/bp/stable/8.4/pr-12884\n\nbgpd: Flowspec overflow issue (backport #12884)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "301bdc3dad12eb5329f40bf236acb66eabb4eb0a", "commit_date": "2023-02-24T09:40:45Z", "commit_message": "Merge pull request #12882 from FRRouting/mergify/bp/stable/8.4/pr-12878\n\npimd: bughunting improvements (backport #12878)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a4e6637fc0621e90daa4decb4ee887a0af8ee24", "commit_date": "2023-02-24T07:53:36Z", "commit_message": "bgpd: Flowspec overflow issue\n\nAccording to the flowspec RFC 8955 a flowspec nlri is <length, <nlri data>>\nSpecifying 0 as a length makes BGP get all warm on the inside.  Which\nin this case is not a good thing at all.  Prevent warmth, stay cold\non the inside.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 0b999c886e241c52bd1f7ef0066700e4b618ebb3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d279b4317aa0ca1b997a8fb0d19b85b4aa613cd", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: try to reinstall MFC when we get NOCACHE\n\nWhether due to a pimd bug, some expiry, or someone just deleting MFC\nentries, when we're in NOCACHE we *know* there's no MFC entry.  Add an\ninstall call to make sure pimd's MFC view aligns with the actual kernel\nMFC.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57cbb1cc331854816eb51d35f2134f698040f60c", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: make logs useful for input drops\n\nThis path here is pretty far on top of the list of issues that operators\nwill run into and have to debug when setting up PIM.  Make the log\nmessages actually tell what's going on.  Also escalate some from\n`debug mroute detail` to `debug mroute`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a93a1e6969ff577b063f326af61d8c404925c740", "commit_date": "2023-02-23T04:49:25Z", "commit_message": "Merge pull request #12874 from FRRouting/mergify/bp/stable/8.4/pr-12865\n\nbgpd: free rfapi callback object always (backport #12865)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ffbcc741535f66be497ae4a72b6791a32fef58e", "commit_date": "2023-02-22T20:42:04Z", "commit_message": "Merge pull request #12872 from FRRouting/mergify/bp/stable/8.4/pr-12861\n\nbgpd: Confederation fixes with remote-as external/internal (backport #12861)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbe2cfc547a4e5a2594defbb18456eef54166212", "commit_date": "2023-02-22T20:13:13Z", "commit_message": "Merge pull request #12870 from FRRouting/mergify/bp/stable/8.4/pr-12850\n\nospfd client api bugfix and refinements (backport #12850)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e98fbcadb2e682248bd92bd212112f11aa69462a", "commit_date": "2023-02-22T19:50:27Z", "commit_message": "bgpd: free rfapi callback object always\n\nAn rfapi timer callback is responsible for the memory in a\ncontext object, even in special-case exit paths. Always\nfree that object.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit 870d3d2cb8e2fa6ff9329ec7126265d1e25a38ae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7db7e747656a20ac0fa72623c0290df7bfd73310", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "tests: Check if BGP confederation works with AS_EXTERNAL (!AS_SPECIFIED)\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit caf65e4a27539b1ecc0f6820994d36278c0e63e6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2a841adeea864dd7898be3126e815c272ea1ae", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "bgpd: Pass global ASN for confederation peers if not AS_SPECIFIED\n\nWhen we specify remote-as as external/internal, we need to set local_as to\nbgp->as, instead of bgp->confed_id. Before this patch, (bgp->as != *as) is\nalways valid for such a case because *as is always 0.\n\nAlso, append peer->local_as as CONFED_SEQ to avoid other side withdrawing\nthe routes due to confederation own AS received and/or malformed as-path.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit db5a5ee6e4665b5f951ed2a37398820da4b762f1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6550c0bcec1559f189c6aa9f9966d70b32d9790d", "commit_date": "2023-02-22T16:55:09Z", "commit_message": "tests: improve the ospfapi test (move to square topology)\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 663a0c96d9c52895189bef7579a308a1b14120fa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "126c452757a5aa6a73451557f319b2b947047895", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: remove register \"READY\" requirement\n\n- also add ability of the apibin to process commands on stdin\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 6efa8fd5c1653372cea1b25a9fa764269960bb91)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59346a3a4ceb2fbb439d3018871fdaabb2af7701", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: bugfix and no implicit register\n\n- dont delete the callback on opaque data delete\n- require explicit registration\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 703d2c0a3e30c18acd2426b50f97ea8c91c479f9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "652dd9bbc98e729fb3e3d0aaa344865b0632dda3", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: compare prefix values in host order\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 156a904cae87a1ea1cd51de5012c9bddc0d63747)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6e6b7c02d7a4d7e58a578cbff4e76d17612d2096", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: small bugfix for miscounting A[S]BRs\n\n- improve the debug for the second add router call.\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1eea62bb1c439ee66d502ef808695554370032e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de3c7c000c694086c12ae754e8cb0dbebe1deca9", "commit_date": "2023-02-22T16:55:06Z", "commit_message": "ospfd: inc. opaque data in `show opaque info detail json` output\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1794afe01030b3111e83e26986cd004dce290049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2bea6210453f08329d70442b93a45953313f43b0", "commit_date": "2023-02-22T08:56:31Z", "commit_message": "Merge pull request #12858 from FRRouting/mergify/bp/stable/8.4/pr-12818\n\nzebra: Fix other table inactive when ip import-table is on (backport #12818)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42a89db1aa6eed18e339efdc38826eb673fc00ed", "commit_date": "2023-02-21T16:38:15Z", "commit_message": "zebra: Fix other table inactive when ip import-table is on\n\nIn `rib_link`, if is_zebra_import_table_enabled returns\ntrue, `rib_queue_add` will not called, resulting in other\ntable route node never processed. This actually should not\nbe dependent on whether the route is imported.\n\nIn `rib_delnode`, if is_zebra_import_table_enabled returns\ntrue, it will use `rib_unlink` instead of enqueuing the\nroute node for process. There is no reason that imported\nroute nodes should not be reprocessed. Long ago, the\nbehaviour was dependent on whether the route_entry comes\nfrom a table other than main.\n\nSigned-off-by: zyxwvu Shi <i@shiyc.cn>\n(cherry picked from commit 207207c0c03e1108d1bae5cf345b7a29850e6ffd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "410d78b7a4f2c8b4d4c3736c6d6cdb710287ca80", "commit_date": "2023-02-17T14:37:08Z", "commit_message": "Merge pull request #12825 from FRRouting/mergify/bp/stable/8.4/pr-12817\n\nsome missed upstream commits (backport #12817)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b44db730c5b68af0f3e4809139c24ea3208c2f9b", "commit_date": "2023-02-17T10:09:21Z", "commit_message": "Merge pull request #12745 from opensourcerouting/fix/no_pretty_picks\n\nbgpd: Convert evpn output to not pretty print json", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc87d3d082faeb4fd9f478b57b6c83cb2614ca1e", "commit_date": "2023-02-16T20:16:02Z", "commit_message": "lib: Fix non-use of option\n\nCommit d7c6467ba2f55d1055babbb7fe82716ca3efdc7e added the\nability to specify non pretty printing but unfortunately\nforgot to use the option variable to make the whole\nthing work.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3749235319b75ef3fab75da0147b3f5a10dd3626", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "zebra: Add debug for bridge capability\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nTicket: #2609944\n(cherry picked from commit f88889ba7a48c6126e7f389b023cd232cdee5078)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa36056fb57d29eda8f09276c82383b5971b816", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "bgpd: Prevent multipathing among EVPN and non-EVPN paths\n\nEnsure that a multipath set is fully comprised of EVPN paths (i.e.,\npaths imported into the VRF from EVPN address-family) or non-EVPN\npaths. This is actually a condition that existed already in the code\nbut was not properly enforced.\n\nThis change, as a side effect, eliminates the known trigger condition\nfor bad or missing RMAC programming in an EVPN deployment, described\nin tickets CM-29043 and CM-31222. Routes (actually, paths) in a VRF\nrouting table that require VXLAN tunneling to the next hop currently\nneed some special handling in zebra to deal with the nexthop (neigh)\nand RMAC programming, and this is implemented for the entire route\n(prefix), not per-path. This can lead to the bad or missing RMAC\nsituation, which is now eliminated by ensuring all paths in the route\nare 'similar'.\n\nThe longer-term solution in CL 5.x will be to deal with the special\nprogramming by means of explicit communication between bgpd and zebra.\nThis is already implemented for EVPN-MH via CM-31398. These changes\nwill be extended to non-MH also and the special code in zebra removed\nor refined.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\nAcked-by:      Trey Aspelund <taspelund@nvidia.com>\nAcked-by:      Anuradha Karuppiah <anuradhak@nvidia.com>\nAcked-by:      Chirag Shah <chirag@nvidia.com>\n\nTicket: CM-29043\nTesting Done:\n1. Manual testing\n2. precommit on both MLX and BCM platforms\n3. evpn-smoke - BCM and VX\n\nResults described in the ticket\n\n(cherry picked from commit d2d71b042edc628cb6edae0b25d0a49aa9ad2050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38efc4b35e43fa2b6ad2a6d4bb41f3fcb3a5d559", "commit_date": "2023-02-16T19:46:36Z", "commit_message": "bgpd: Fix deterministic-med check for stale paths\n\nWhen performing deterministic MED processing, ensure that the peer\nstatus is not checked when we encounter a stale path. Otherwise, this\npath will be skipped from the DMED consideration leading to it potentially\nnot being installed.\n\nTest scenario: Consider a prefix with 2 (multi)paths. The peer that\nannounces the path with the winning DMED undergoes a graceful-restart.\nBefore it comes back up, the other path goes away. Prior to the fix, a\nthird router that receives both these paths would have ended up not\nhaving any path installed to the prefix after the above events.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nFor internal use:\nTicket: CM-32032\nTesting done: Multiple manual testing\n\n(cherry picked from commit de692a4ebe0b8ea8e191d8ac1f3b41a386edd577)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15135ce2b71182d41378fc9f1336599b1b415549", "commit_date": "2023-02-14T20:19:44Z", "commit_message": "Merge pull request #12804 from FRRouting/mergify/bp/stable/8.4/pr-12790\n\nvrrpd: give null when using null ifp to lookup vr (backport #12790)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "170851737d9833400ceaa3c60456b50654029006", "commit_date": "2023-02-14T14:30:38Z", "commit_message": "vrrpd: give null when using null ifp to lookup vr\n\nThis is still causing crashes somehow.\n\nSigned-off-by: Quentin Young <qlyoung@cumulusnetworks.com>\n(cherry picked from commit ed331629de425914568c1d5c114018878627cdaf)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1925536fe16527b4d9ecea08763ee1693152d3eb", "commit_date": "2023-02-10T13:03:51Z", "commit_message": "Merge pull request #12787 from opensourcerouting/fix/backport_e9340ff429f5f1a255e89a50867a04a370cd56bb\n\nbgpd: Intern default-originate attributes to avoid use-after-free", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c6be72a69c2294bf93e1c7aa640ca44faeb04b6f", "commit_date": "2023-02-10T09:00:58Z", "commit_message": "bgpd: Intern default-originate attributes to avoid use-after-free\n\nWhen we receive a default route from a peer and we originate default route\nusing `neighbor default-originate`, we do not track of struct attr we use,\nand when we do `no neighbor default-originate` we withdraw our generated\ndefault route, but we announce default-route from the peer.\n\nAfter we do this, we unintern aspath (which was used for default-originate),\nBUT it was used also for peer's default route we received.\n\nAnd here we have a use-after-free crash, because bgp_process_main_one()\nreaps old paths that are marked as BGP_PATH_REMOVED with aspath->refcnt > 0,\nbut here it's 0.\n\n```\n0 0x55c24bbcd022 in aspath_key_make bgpd/bgp_aspath.c:2070\n1 0x55c24b8f1140 in attrhash_key_make bgpd/bgp_attr.c:777\n2 0x7f52322e66c9 in hash_release lib/hash.c:220\n3 0x55c24b8f6017 in bgp_attr_unintern bgpd/bgp_attr.c:1271\n4 0x55c24ba0acaa in bgp_path_info_free_with_caller bgpd/bgp_route.c:283\n5 0x55c24ba0a7de in bgp_path_info_unlock bgpd/bgp_route.c:309\n6 0x55c24ba0af6d in bgp_path_info_reap bgpd/bgp_route.c:426\n7 0x55c24ba17b9a in bgp_process_main_one bgpd/bgp_route.c:3333\n8 0x55c24ba18a1d in bgp_process_wq bgpd/bgp_route.c:3425\n9 0x7f52323c2cd5 in work_queue_run lib/workqueue.c:282\n10 0x7f52323aab92 in thread_call lib/thread.c:2006\n11 0x7f5232300dc7 in frr_run lib/libfrr.c:1198\n12 0x55c24b8ea792 in main bgpd/bgp_main.c:520\n13 0x7f5231c3a082 in __libc_start_main ../csu/libc-start.c:308\n14 0x55c24b8ef0bd in _start (/usr/lib/frr/bgpd+0x2c90bd)\n    ```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4f647ff1f8dae3359fbab40cdb4a031b615a04", "commit_date": "2023-02-10T08:14:35Z", "commit_message": "Merge pull request #12783 from FRRouting/mergify/bp/stable/8.4/pr-12781\n\nlib: Release memory of YANG translation module on error (backport #12781)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bcc9e7a548115da1b5ab5c0ebe41f0d74373f839", "commit_date": "2023-02-10T00:25:47Z", "commit_message": "lib: Free dnode before returning if YANG translator model is already loaded\n\nSeems just a missed one because at `goto error` we release dnode.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ecf82aa41e76ecfbaf3f5762af1e90ebc9263721)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8093cc4b63c880f13c16a8d846722e5831cd2310", "commit_date": "2023-02-10T00:25:46Z", "commit_message": "lib: Release memory of YANG translation module on error\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b9941b3fec21eca413c4ca9460a264eb9afb7e34)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd635cd3ae34536c506287b1056dea516be7c4b0", "commit_date": "2023-02-09T13:12:00Z", "commit_message": "Merge pull request #12779 from FRRouting/mergify/bp/stable/8.4/pr-12773\n\npbrd: fix large tableids displayed as negative (backport #12773)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b70772dbd7c89a3a64d1e69461e76f35d66e869", "commit_date": "2023-02-09T10:48:49Z", "commit_message": "pbrd: fix large tableids displayed as negative\n\nTicket: 2699411\nSigned-off-by: Wesley Coakley <wcoakley@nvidia.com>\n(cherry picked from commit 8dc2001c914956f1b493c4e04499b520362dd053)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f4af9196d963c3615b08ac966828cd8b689853c7", "commit_date": "2023-02-09T07:47:01Z", "commit_message": "Merge pull request #12774 from FRRouting/mergify/bp/stable/8.4/pr-12769\n\ntools: Fix missing pbrd in rsyslog.d 45-frr.conf file (backport #12769)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b520b4f6800d2049440cc770c03a8438a60fb31", "commit_date": "2023-02-09T01:18:09Z", "commit_message": "tools: Fix missing pbrd in rsyslog.d 45-frr.conf file\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7386031781858b3a43bc66484b53d57be3ee28e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5b3be313db17d6d705872fc535adff6197391f34", "commit_date": "2023-02-08T11:54:40Z", "commit_message": "Merge pull request #12766 from FRRouting/mergify/bp/stable/8.4/pr-12761\n\nbgpd: fix use-after-free crash for evpn (backport #12761)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "850fe41c793f6b8c5487a01108aeaf67255899f5", "commit_date": "2023-02-08T08:09:37Z", "commit_message": "bgpd: fix use-after-free crash for evpn\n\n```\nanlan(config-router-af)# vni 33\nanlan(config-router-af-vni)# route-target both 44:55\nanlan(config-router-af-vni)# no route-target both 44:55\nvtysh: error reading from bgpd: Resource temporarily unavailable (11)Warning: closing connection to bgpd because of an I/O error!\n```\n\nWhen `bgp_evpn_vni_rt_cmd` deals with \"both\" type, it wrongly created\nonly one node ( should be two nodes ) for lists of both `vpn->import_rtl` and\n`vpn->export_rtl`.  At this time, the two lists are already wrong.\n\nIn `no route-target both RT`, it will free the single node from lists of both\n`vpn->import_rtl` and `vpn->export_rtl`.  After freed from `vpn->import_rtl`,\nit is \"use-after-free\" at the time of freeing it from `vpn->export_rtl`.\nIt causes crash sometimes, or other unexpected behaviours.\n\nThis issue is introduced by commit `3b7e8d`, which have adjusted both\n`bgp_evpn_vni_rt_cmd` and `bgp_evpn_vrf_rt_cmd`.\n\nSince `bgp_evpn_vrf_rt_cmd/no_bgp_evpn_vrf_rt_cmd` works well again\nunintentionally with commit `7022da`, only `bgp_evpn_vni_rt_cmd` needs to\nmodify - add two nodes for \"both\" type and some explicit comments for this\nspecial case of \"both\" type.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 432ff4b036860fb626f3027a7798038d594b8042)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c8119a01157327eac334d7370b8f56aa0e3ff42", "commit_date": "2023-02-07T11:28:28Z", "commit_message": "Merge pull request #12752 from FRRouting/mergify/bp/stable/8.4/pr-12741\n\npceplib: add <time.h> include for time_t (backport #12741)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "641899baf55f233898e52b042a3351f4005c6668", "commit_date": "2023-02-07T09:07:05Z", "commit_message": "pceplib: add <time.h> include for time_t\n\nFixes build on musl. Used for time_t in the header.\n\nBug: https://bugs.gentoo.org/862558\nSigned-off-by: Sam James <sam@gentoo.org>\n(cherry picked from commit 3c8c112df4d72d98c8646df1495cf26a84c2c3b7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48bb8903873da49f7dd43f291f34ab1d974db0d6", "commit_date": "2023-02-06T16:34:27Z", "commit_message": "Merge pull request #12746 from FRRouting/mergify/bp/stable/8.4/pr-12740\n\nbabeld: Fix filtering against all interfaces (backport #12740)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59d91332b9f0cfaa535f39e14520eb6fc44e8f08", "commit_date": "2023-02-06T13:25:50Z", "commit_message": "babeld: Fix filtering against all interfaces\n\nThe first argument of `access_list_lookup` and `prefix_list_lookup`\nshould be `AFI_` constants instead of `AF_` constants.\n\nSigned-off-by: Yuxiang Zhu <vfreex@gmail.com>\n(cherry picked from commit 0f9650ca955d4c9a5c3d9de72a9306cb429079f2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8cc8e056d63949769994bae0b745198f77a8412e", "commit_date": "2023-02-06T10:48:13Z", "commit_message": "bgpd: Convert evpn output to not pretty print json\n\nCommit: 3cdb03fba7b40240fb38469a12b7b05a11043e09\nchanged the vty_json output to not be pretty printing.\nThe previous commit in the tree added vty_json_no_pretty\nlet's use that instead\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2c512e1bc9ac7bee58da01fe7e12218aea75699c", "commit_date": "2023-02-06T10:48:10Z", "commit_message": "lib, bgpd: Add ability to specify that some json output should not be pretty\n\nInitial commit: 23b2a7ef524c9fe083b217c7f6ebaec0effc8f52\nchanged the json output of `show bgp <afi> <safi> json` to\nnot have pretty print because when under a situation where\nthere are a bunch of routes with a large scale ecmp show\noutput was taking forever and this commit cut 2 minutes out\nof vtysh run time.\n\nSubusequent commit: f4ec52f7cc99f709756d9030623a20c98a086125\nchanged this back.\n\nWhen upgrading to latest version the long run time was noticed\ndue to testing.  Let's add back this functionality such that\nFRR can have reduced run times with vtysh when it's really\nneeded.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a758370a5a2b1215c9c8df368554fae5c302429", "commit_date": "2023-02-06T10:47:56Z", "commit_message": "bgpd: evpn route detail json display non prett\n\nFor BGP evpn route table detail json to use\nnon pretty form of display.\n\nProblem:\nIn scaled evpn route table detail json dump\noccupies high resources (CPU + memory) of the system.\nIn high scale evpn route dump using pretty form\nhogs CPU for a while which can trigger watchfrr\nto kill bgpd.\n\nSolution:\nAvoid pretty JSON print for detail version dump\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c362f673bae8c7e0735da7d6a922d6a5996a8c21", "commit_date": "2023-02-01T12:12:29Z", "commit_message": "Merge pull request #12719 from FRRouting/mergify/bp/stable/8.4/pr-12704\n\npimd: v6 intentionally turned off route-maps.  Turn it on. (backport #12704)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b6d5278bac3c13ac5cb53b88157d1e1be74d6a", "commit_date": "2023-01-31T19:02:27Z", "commit_message": "pimd: v6 intentionally turned off route-maps.  Turn it on.\n\nWhy?\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f51c430a17b79bff56bae4b8425711c16cd45300)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62ac43de9f3bc470586cf4f51fadf013bf542b32", "commit_date": "2023-01-10T15:02:10Z", "commit_message": "FRR Release 8.4.2\n\nBug fixes:\n\n- bfdd: fix ipv4 socket source selection\n- bgpd : fix crash for `set ipv4/ipv6 vpn next-hop` command\n- bgpd: stop overriding nexthop when bgp unnumbered\n- bgpd: fix aggregated routes are withdrawn abnormally\n- bgpd: fix a few memory leaks\n- build: enable pim6d by default\n- build: fix sed regex in lua macro\n- doc : add freebsd 13 build docs\n- isisd: fix memory leak\n- lib:  disable vrf before terminating interfaces\n- lib: do not log `echo ping` commands from watchfrr\n- ospf6d:  fix infinite loop when adding asbr route\n- ospfd: fix rfc conformance test cases 25.19 and 27.6\n- ospfd: fix typo and report the P2P link name in the warning\n- ospfd: report the router IP with opaque capability mismatch\n- ospfd: fixing memory leak\n- pimd: consistently ignore prefix list mask len\n- staticd: do not crash when modifying an existing static route with color\n- zebra: free all memory associated ctx->u.iptable.interface_name_list\n- zebra: fix tracepoint changes for lttng\n- zebra: free up route map name memory on vrf deletion event\n- zebra: use `mpls enable`, not `mpls` when generating a config\n- tools: Ignore agentx command for frr-reload.py\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eae0855f541f0a4e8996dfe19ed3f312499375f7", "commit_date": "2023-01-09T20:56:34Z", "commit_message": "Merge pull request #12610 from FRRouting/mergify/bp/stable/8.4/pr-12606\n\n*: various build fixes (backport #12606)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e465af711c3da9267de8c5870d8242b353e8ba", "commit_date": "2023-01-09T18:27:03Z", "commit_message": "build: add doc files missing from dist tarball\n\nThe override.css/js files for sphinx docs were not being included into\nthe tarball created by `make dist`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 26eaf6e386ed2b960c0004d2f927b586e516f587)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e0f65db75fb879805065feade4e888f1aaa56e02", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib/clippy: fix symbol validity check\n\nIf symvalid is false, looking at symidx is bogus.\n\nThis fixes a build-time SEGV on mips64el.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit a185874504654a691aa7c204b87ee2f9e3b8a49a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1a89a6f79db101b15299ae19d36d459d2e9673d9", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib: disable xref ELF note on mips64el\n\nmips64el does not have a 64-bit PC-relative relocation, which is needed\nto emit the ELF note for xrefs.  Disabling the ELF note means clippy\ntakes the fallback path using section headers, so everything does still\nwork (... unless you strip the section headers.)\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ee4a6b9f654fbd4e07485037481ad6b4766bbc6d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "00624c9564457eb62adcd908b310f4df65b0efe5", "commit_date": "2023-01-09T18:27:01Z", "commit_message": "zebra: do not load/store wider-than-ptr atomics\n\nMost 32-bit architectures cannot do atomic loads and stores of data\nwider than their pointer size, i.e. 32 bit.  Funnily enough they\ngenerally *can* do a CAS2, i.e., 64-bit compare-and-swap, but while a\nCAS can emulate atomic add/bitops, loads and stores aren't available.\n\nReplace with a mutex;  since this is 99% used from the zserv thread, the\nmutex should take the local-to-thread fast path anyway.  And while one\natomic might be faster than a mutex lock/unlock, we're doing several\nhere, and at some point a mutex wins on speed anyway.\n\nThis fixes build on armel, mipsel, m68k, powerpc, and sh4.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ccac11096c385d269ecd15ad24ac88d469e7577c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c2853adde61305528383ea656852bf55a83d82f6", "commit_date": "2023-01-09T17:36:11Z", "commit_message": "Merge pull request #12607 from FRRouting/mergify/bp/stable/8.4/pr-12605\n\nospfd: report the router IP with opaque capability mismatch (backport #12605)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2e0a2a46b477ddee454ef41179fb4d3e9bc44bf8", "commit_date": "2023-01-07T18:44:06Z", "commit_message": "ospfd: report the router IP with Opaque capability mismatch\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit 8935b0fac623c84665282e81b59302b02388ad48)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "edc5dce610484cc4f20839a921dad1ee5c49c232", "commit_date": "2023-01-05T11:42:55Z", "commit_message": "Merge pull request #12598 from FRRouting/mergify/bp/stable/8.4/pr-12557\n\nvtysh: Remove double retrieve of env VTYSH_HISTFILE (backport #12557)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8df1306e2a490478250315c066d4d3e01d7a1143", "commit_date": "2023-01-05T08:32:42Z", "commit_message": "Merge pull request #12593 from FRRouting/mergify/bp/stable/8.4/pr-12458\n\nbgpd: Fix aggregated routes are withdrawn abnormally. (backport #12458)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8d472da36100a5b86f1d32d71b24c9163607daf8", "commit_date": "2023-01-05T08:32:35Z", "commit_message": "vtysh: Remove double retrieve of env VTYSH_HISTFILE\n\nThe code is double checking the VTYSH_HISTFILE env variable,\nadditionally clang-15 when running SA over it doesn't fully\nunderstand the code pattern.  Reduce the double check to\none check to reduce program run-time (ha!) and make SA happy.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 99a9f25ce8c1e070f7f37c4cbd439c11bb7432eb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2865946b03feada837020d6dcbca06f28581efc8", "commit_date": "2023-01-04T20:51:17Z", "commit_message": "    bgpd: Fix aggregated routes are withdrawn abnormally.\n\n    The withdraw message and announcement message of a prefix are received continuously within 50ms, which may lead to abnormal aggregation route reference count.\n    Steps to reproduce:\n    --------------------------\n    step1:\n    local config aggregate route 111.0.0.0/24\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:2\n\n    step2:\n    peer withdraw 111.0.0.1/32 and network 111.0.0.1/32 in 50ms\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:1\n\n    step3:\n    peer withdraw 111.0.0.1/32\n    received route\uff1a111.0.0.02/32\n    ref_count:0\n    aggregate route will be withdrawn abnormally\n\nSigned-off-by: liuze03 <liuze03@baidu.com>\n(cherry picked from commit 704e189e594418571463c80a3efcc2c1020adcf4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9594783741cc342d7612024bce57feb75813012f", "commit_date": "2023-01-03T07:17:53Z", "commit_message": "Merge pull request #12585 from FRRouting/mergify/bp/stable/8.4/pr-12566\n\nospfd: add advertising router IP to Opaque capability mismatch err msg (backport #12566)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a3acab2e123677c8490539464f6cf031cadcd24", "commit_date": "2023-01-02T21:13:09Z", "commit_message": "ospfd: add advertising router IP to Opaque capability mismatch error message\n\nSubmitted-by Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit eab190351fc4460477274cec106989392bcff1b5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "408cdb0011da5a0d9c3b63592e933eeb23e2ce53", "commit_date": "2023-01-02T20:42:30Z", "commit_message": "Merge pull request #12565 from FRRouting/mergify/bp/stable/8.4/pr-12560\n\ntools: Ignore agentx command for frr-reload.py (backport #12560)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bccbd54ecc147e1dbc67b97f1e4575c1b71960ab", "commit_date": "2022-12-28T11:12:26Z", "commit_message": "Merge pull request #12570 from FRRouting/mergify/bp/stable/8.4/pr-12558\n\nbgpd: static routes are leaked on shutdown (backport #12558)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f94ed4fdbbdf644be4ab12f2df04e5044717eff", "commit_date": "2022-12-27T20:07:55Z", "commit_message": "bgpd: bgp_connected_add memory was being leaked in some cases\n\nOn shutdown, bgp calls an unlock for the bnc connected table,\nvia the bgp_connected_cleanup function.  This function is\nonly ever called on shutdown, so we know that bgp is going\naway.  The refcount for the connected data can be more than\n1.  Let's not worry about the refcount on shutdown and\njust delete the nodes instead of leaving them around.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1c225152c0f19d2d52c38e8cdc982750e50f72e0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cec86b9c6e00bd65d0d0be220e7d7afbf949523", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: rfapi properly free a couple lists\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit c560f0698f425d4c054e13eccc9df87431cdb73f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2fdad4aef49a2a82f220f19b5bb611d05026fa31", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: static routes are leaked on shutdown\n\nShutdown of bgp results in both the bgp_path_info,\nbgp_dest and bgp_table's not being freed because\nthe bgp_path_info remains locked.\n\nEffectively static routes are scheduled for deletion but bgp_process\nskips the work because the work queue sees that the bgp router\nis marked for deletion.  Effectively not doing any work and leaving\ndata on the floor.\n\nModify the code when attempting to put into the work queue to\nnotice and not do so but just unlock the path info.\n\nThis is effectively the same as what goes on for normal peering\nas that it checks for shutdown and just calls bgp_path_info_free\ntoo.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f9d6087c51fbeafc76f3c7f1b72681cbab7f3651)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fd97bf31256815124e7c9d5fbd718eb0f7ba50c", "commit_date": "2022-12-25T01:48:51Z", "commit_message": "tools: Ignore agentx command for frr-reload.py\n\nagentx can't be disabled once enabled, so we should ignore it for frr-reload.py.\n\n```\n$ /usr/lib/frr/frr-reload.py --reload /etc/frr/bgpd.conf --bindir /usr/local/bin\n\"no agentx\" we failed to remove this command\nSNMP AgentX support cannot be disabled once enabled\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4a9ea00a27c4edfb21e1efaed468a9eefc389d79)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "930d04ad1c6e1980f24805738499df47fc6e9ac8", "commit_date": "2022-12-20T07:51:42Z", "commit_message": "Merge pull request #12545 from FRRouting/mergify/bp/stable/8.4/pr-12438\n\nbgpd: Stop overriding nexthop in vpn_leak_from_vrf_update when the peer is BGP unnumberred (backport #12438)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c16d0acc3d30eebbd597d4a55cffd9a5170d357d", "commit_date": "2022-12-19T21:29:49Z", "commit_message": "tests: Add topotest bgp_vrf_leaking_5549_routes\n\nTo verify previous changes, this PR introduces topotest to verify\nwhether imported routes learnt from BGP unnumbered peers will be active\non VPN RIB and other VRF RIB.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 2b0efccd057752a14e88c71f142a5b8bc0ad93a8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a809a704d9ff5a4500a938f57874278698e443", "commit_date": "2022-12-19T21:29:48Z", "commit_message": "bgpd: Stop overriding nexthop when BGP unnumberred\n\nWhen we use vrf-to-vrf export, the nexthop has already not been\noverridden when the peer is BGP unnumberred. However, when we use normal\nexport, the nexthop will be oberridden. This behavior will make the VPN\nroutes invalid in VPN RIB.\n\nThis PR stops overriding nexthop even if we use normal export.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit f784007d677ee20e4dbd20366928652be2a0b23c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa0c54afbca317d6d04da199dd637ce97aaac9cc", "commit_date": "2022-12-14T11:51:29Z", "commit_message": "Merge pull request #12512 from FRRouting/mergify/bp/stable/8.4/pr-12498\n\nospfd: fix typo and report the link name in the warning (backport #12498)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4842032026a7208ce26a0ca92158a42c6153ec0d", "commit_date": "2022-12-14T04:07:51Z", "commit_message": "Merge pull request #12514 from donaldsharp/cleanup_8.4\n\nzebra: Remove badly backported TC code", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272686633b651cd57adcca00b5b6b4e7181b6b1d", "commit_date": "2022-12-13T20:13:37Z", "commit_message": "zebra: Remove badly backported TC code\n\nSome TC code for the dplane got backported that should\nnot have been.  Remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "886d57d0b4a284b0a4c0dc2a0cefacc5c9bd0aef", "commit_date": "2022-12-12T12:25:21Z", "commit_message": "Merge pull request #12493 from FRRouting/mergify/bp/stable/8.4/pr-12466\n\nbuild: FreeBSD fixes (backport #12466)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "211c53670ac5967d8108b38540129492940fa37a", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "doc: add FreeBSD 13 build docs\n\nSome minor changes since FreeBSD 11, mostly fewer extra sauce.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d3135b0189f3b99b5eb327d821bb9a40d09988e1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8e6418c554c2be8a9b1636c42200ce1ad4d20ec", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: pim6d is Linux only\n\nThis stops breaking build on FreeBSD.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d9a2d546da40fa6eb5b546eff34e07b8e67c2247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e5abbaabae9e3a712eb35c34f06859fece6fbf19", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: fix sed regex in Lua macro\n\nUsing `\\s` to match whitespace is not portable, use `[[:space:]]`\ninstead.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 9e46405ca2c7b3d5380dc6ab619666a6d32bbbfb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd3f7171043acf9ed856efd9719dfc1676a20d97", "commit_date": "2022-12-11T19:35:23Z", "commit_message": "Merge pull request #12486 from FRRouting/mergify/bp/stable/8.4/pr-12482\n\nMem this (backport #12482)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dab73b7601d995179fe54c5f6963aa420dce398", "commit_date": "2022-12-10T02:20:13Z", "commit_message": "zebra: Free up routemap name memory on vrf deletion event\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cda0f501fb9a3b0dca429dac628ea4cc9566e233)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de7500cd06d415497471afcc292a7900f9d2ed21", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "lib: Hide list macros in linklist.c\n\nThe LISTNODE_ATTACH|DELETE macros are only used in\nlinklist.c.  Let's remove temptation from people\nto use them.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit b3faf1aab6029caf272475122fd99f7f0b0b39c9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c348fec83b0d834f5993ab5b375432b8d398f3b9", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "ospf6d: Don't allocate json memory in non-json path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 21c6569d6f4dca71b4ddf7e6499e296efaf819c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d92bdd385cb0de935ab27e1582e1dd811b90a544", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "zebra: Actually free all memory associated ctx->u.iptable.interface_name_list\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1cc380679e4cbca5c0c4259653c57da1f47dbafe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "436bf68e016ef2679b96f4f1e465655ce8038925", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "isisd: Fix sadj memory leak\n\nIn some cases the sadj was directly dropped.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 63e6e11f9f8a5e60fc9f6aaf54d33ba04cc3a6b4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64f5d73a3cbac6fe32c414a2cf30e940b97f6e7c", "commit_date": "2022-12-02T08:43:20Z", "commit_message": "Merge pull request #12428 from FRRouting/mergify/bp/stable/8.4/pr-12427\n\nbuild: enable pim6d by default (backport #12427)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7bea90ebbc8f76993417b59a967b36e2cdf4094a", "commit_date": "2022-12-02T05:56:24Z", "commit_message": "build: enable pim6d by default\n\nChange configure.ac so that pim6d is enabled by default; a\ncommand-line option can disable it.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit cee45b84f4648750cdfae314cca7b91ee3a696a2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7d7b33a0281b233757606bb1fa4e9c056c57084f", "commit_date": "2022-11-29T19:32:49Z", "commit_message": "Merge pull request #12419 from FRRouting/mergify/bp/stable/8.4/pr-12386\n\nbfdd: fix IPv4 socket source selection (backport #12386)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa4d0a699aaee28649a9e13ab3054d95cc49cad1", "commit_date": "2022-11-29T19:32:34Z", "commit_message": "Merge pull request #12420 from FRRouting/mergify/bp/stable/8.4/pr-12367\n\nospfd: Fixing a memleak. (backport #12367)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bdf19f7a057618ebf82c21965d7cd21070273a3c", "commit_date": "2022-11-29T16:24:12Z", "commit_message": "ospfd: Fixing memleak.\n\nDescription:\n\tAs part of signal handler ospf_finish_final(),  lsas are originated\n\tand added to refresh queues are not freed.\n\n\tOne such leak is :\n\t==2869285== 432 (40 direct, 392 indirect) bytes in 1 blocks are definitely lost in loss record 159 of 221\n\t==2869285==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n\t==2869285==    by 0x4910EC3: qcalloc (memory.c:116)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:4017)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:3979)\n\t==2869285==    by 0x19A37F: ospf_network_lsa_install (ospf_lsa.c:2680)\n\t==2869285==    by 0x19A37F: ospf_lsa_install (ospf_lsa.c:2941)\n\t==2869285==    by 0x19C18F: ospf_network_lsa_update (ospf_lsa.c:1099)\n\t==2869285==    by 0x1931ED: ism_change_state (ospf_ism.c:556)\n\t==2869285==    by 0x1931ED: ospf_ism_event (ospf_ism.c:596)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19FBC6: nsm_change_state (ospf_nsm.c:695)\n\t==2869285==    by 0x19FBC6: ospf_nsm_event (ospf_nsm.c:861)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19020B: ospf_if_cleanup (ospf_interface.c:322)\n\t==2869285==    by 0x192D0C: ism_interface_down (ospf_ism.c:393)\n\t==2869285==    by 0x193028: ospf_ism_event (ospf_ism.c:584)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x190F10: ospf_if_down (ospf_interface.c:851)\n\t==2869285==    by 0x1911D6: ospf_if_free (ospf_interface.c:341)\n\t==2869285==    by 0x1E6E98: ospf_finish_final (ospfd.c:748)\n\t==2869285==    by 0x1E6E98: ospf_deferred_shutdown_finish (ospfd.c:578)\n\t==2869285==    by 0x1E7727: ospf_finish (ospfd.c:682)\n\t==2869285==    by 0x1E7727: ospf_terminate (ospfd.c:652)\n\t==2869285==    by 0x18852B: sigint (ospf_main.c:105)\n\t==2869285==    by 0x493BE12: frr_sigevent_process (sigevent.c:130)\n\t==2869285==    by 0x494DCD4: thread_fetch (thread.c:1775)\n\t==2869285==    by 0x4905022: frr_run (libfrr.c:1197)\n\t==2869285==    by 0x187891: main (ospf_main.c:235)\n\n\tAdded a fix to cleanup all these queue pointers and corresponing lsas in it.\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit 594f80c83f40935b6dfcd15c8a3c28f1b4e3d423)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "836c3a35f6d434335b75753cf8c34f6f5eead359", "commit_date": "2022-11-29T15:04:29Z", "commit_message": "bfdd: fix IPv4 socket source selection\n\nThe imported BFD code had some logic to ignore the source address when\nusing single hop IPv4. The BFD peer socket function should allow the\nsource to be selected so we can:\n1. Select the source address in the outgoing packets\n2. Only receive packets from that specific source\n\nSigned-off-by: Rafael Zalamena <rzalamena@opensourcerouting.org>\n(cherry picked from commit f68114c1c397a939fd758af072c37d535f1de92f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "37ea1e70143f012e0469a8a4af81407f4460ff63", "commit_date": "2022-11-28T19:00:58Z", "commit_message": "Merge pull request #12411 from FRRouting/mergify/bp/stable/8.4/pr-12408\n\nzebra: Use `mpls enable`, not `mpls` when generating a config (backport #12408)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2070aa87deee83df5a0753788cae1b00d04db94", "commit_date": "2022-11-28T19:00:49Z", "commit_message": "Merge pull request #12412 from FRRouting/mergify/bp/stable/8.4/pr-12389\n\nospf6d: fix infinite loop when adding ASBR route (backport #12389)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "176f7aa788ac627daa572e3ad4c4a60f4148702a", "commit_date": "2022-11-28T13:46:35Z", "commit_message": "ospf6d: fix infinite loop when adding ASBR route\n\nCommit 8f359e1593c414322 removed a check that prevented the same route\nfrom being added twice. In certain topologies, that change resulted in\nthe following infinite loop when adding an ASBR route:\n\nospf6_route_add\n ospf6_top_brouter_hook_add\n  ospf6_abr_examin_brouter\n   ospf6_abr_examin_summary\n    ospf6_route_add\n     (repeat until stack overflow)\n\nRevert the offending commit and update `ospf6_route_is_identical()` to\nnot do comparison using `memcmp()`.\n\nSigned-off-by: Renato Westphal <renato@opensourcerouting.org>\n(cherry picked from commit 4dfe15200ab1a84a8d77fcbc33085c373d556eae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "400304b63eafbb9c8d31b2f258ff2d378af43928", "commit_date": "2022-11-28T12:48:59Z", "commit_message": "zebra: Use `mpls enable`, not `mpls` when generating a config\n\nIf we enable MPLS for an interface via sysctl, we should write `mpls enable`,\nnot `mpls`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 35c46a8718948850f67ec6c3ec00551b2b839310)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e717bd02472b6c8bb52155db2292aa158d8064b", "commit_date": "2022-11-28T10:39:12Z", "commit_message": "Merge pull request #12407 from FRRouting/mergify/bp/stable/8.4/pr-12403\n\nEcho exclusion (backport #12403)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8191b7c00bce5a4e037d76ec6d8f3a71eb633b3", "commit_date": "2022-11-28T08:08:46Z", "commit_message": "lib: Do not log `echo PING` commands from watchfrr\n\nSince the `echo PING` commands are from watchfrr and are sent\na whole bunch when an operator has `log commands` on the amount\nof logging done is quite significant.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8a0f80b634208c878e15335948810e1d532d1e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfe07a821f58ff45573dd7f0e11fc46fec8aa00d", "commit_date": "2022-11-28T08:08:45Z", "commit_message": "zebra: Fix tracepoint changes for lttng\n\nThe recent tracepoint additions in c317d3f246769e8261df0f9d1eb787bea7b5da06\ndid not properly setup the tracepoints for lttng.  Fix this.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit bcb486dd3cbce01dd1d9085006305cfcd738f9e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2801239675c84e0a674d6c3905c8e6e9e9220bc7", "commit_date": "2022-11-27T14:50:33Z", "commit_message": "Merge pull request #12404 from FRRouting/mergify/bp/stable/8.4/pr-12399\n\nstaticd: Fix crash for an existing route with color (backport #12399)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d438b0f5ed2682affc6bef0fba2daea87729792", "commit_date": "2022-11-26T19:26:16Z", "commit_message": "staticd: Do not crash when modifying an existing static route with color\n\n```\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65 color 123'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n123\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n0\n```\n\nBefore this patch:\n```\nSTATIC: Received signal 6 at 1666938633 (si_addr 0x4e1a, PC 0x7f295139c438); aborting...\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_backtrace_sigsafe+0x70) [0x7f29519ef0a0]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_signal+0xec) [0x7f29519ef28c]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xccee2) [0x7f2951a1aee2]\nSTATIC: /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390) [0x7f2951742390]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38) [0x7f295139c438]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a) [0x7f295139e03a]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(_zlog_assert_failed+0xe6) [0x7f2951a46766]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xae7ee) [0x7f29519fc7ee]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(routing_control_plane_protocols_control_plane_protocol_staticd_route_list_src_\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xaf264) [0x7f29519fd264]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xafb4f) [0x7f29519fdb4f]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit_apply+0x33) [0x7f29519fde33]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit+0x9e) [0x7f29519fdf6e]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb0469) [0x7f29519fe469]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb3055) [0x7f2951a01055]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_cli_apply_changes+0xd8) [0x7f2951a01358]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x407ec2]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x40a307]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0x74923) [0x7f29519c2923]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute_command+0xe4) [0x7f29519c2aa4]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute+0xc9) [0x7f29519c2c49]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4184) [0x7f2951a32184]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4436) [0x7f2951a32436]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe6fcc) [0x7f2951a34fcc]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(thread_call+0x98) [0x7f2951a2cc28]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(frr_run+0xe8) [0x7f29519e7518]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(main+0xda) [0x40572a]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7f2951387840]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(_start+0x29) [0x4058e9]\nSTATIC: in thread vtysh_read scheduled from lib/vty.c:2710 vty_event()\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 3278956b1741e9af38b92d74f84a8e48b1b6943e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "29a911093b96ea0aa330367a486d331e2a8fcc9c", "commit_date": "2022-11-26T19:19:06Z", "commit_message": "Merge pull request #12400 from FRRouting/mergify/bp/stable/8.4/pr-12370\n\nbgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command (backport #12370)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b635d08603230d57caf746c5b3440c95cd439efa", "commit_date": "2022-11-25T15:19:23Z", "commit_message": "bgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command\n\nCrash when using for example:\n\n```\nroute-map test permit 10\n set ipv6 vpn next-hop 10.10.10.10\n```\n\n```\nbgpd[30843]: libyang: Unsatisfied pattern - \"1.1.1.1\" does not conform to \"((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}((([0-9a-fA-F]{0,4}:)?(:|[0-9a-fA-F]{0,4}))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])))(%[\\p{N}\\p{L}]+)?\". (Schema location /frr-route-map:lib/route-map/entry/set-action/rmap-set-action/set-action/frr-bgp-route-map:ipv6-address/ipv6-address.)\nbgpd[30843]: [JEA2K-29RPH][EC 100663345] nb_candidate_edit: lyd_new_path(/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address) failed: 7\nbgpd[30843]: [ZDEA9-V1X7W][EC 100663341] nb_cli_apply_changes_internal: failed to edit candidate configuration: operation [modify] xpath [/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address]\nbgpd[30843]: [SZNR8-V24R3][EC 100663326] yang_dnode_xpath_get_canon: couldn't find ./rmap-set-action/frr-bgp-route-map:ipv6-address\nbgpd[30843]: Backtrace for 20 stack frames:\nbgpd[30843]: [bt 0] /usr/local/lib/libfrr.so.0(zlog_backtrace+0x3a) [0x7f539c87c95a]\nbgpd[30843]: [bt 1] /usr/local/lib/libfrr.so.0(+0xed022) [0x7f539c8c8022]\nbgpd[30843]: [bt 2] /usr/local/lib/libfrr.so.0(yang_dnode_get_string+0x96) [0x7f539c8c9ea6]\nbgpd[30843]: [bt 3] /usr/local/lib/libfrr.so.0(route_map_action_show+0xc40) [0x7f539c8a4540]\nbgpd[30843]: [bt 4] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x5c) [0x7f539c88fa8c]\nbgpd[30843]: [bt 5] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 6] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x1a3) [0x7f539c88fbd3]\nbgpd[30843]: [bt 7] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 8] /usr/local/lib/libfrr.so.0(+0xc4d47) [0x7f539c89fd47]\nbgpd[30843]: [bt 9] /usr/local/lib/libfrr.so.0(+0x7274a) [0x7f539c84d74a]\nbgpd[30843]: [bt 10] /usr/local/lib/libfrr.so.0(+0x72cb0) [0x7f539c84dcb0]\nbgpd[30843]: [bt 11] /usr/local/lib/libfrr.so.0(+0x74c40) [0x7f539c84fc40]\nbgpd[30843]: [bt 12] /usr/local/lib/libfrr.so.0(cmd_execute_command+0xa4) [0x7f539c84fd74]\nbgpd[30843]: [bt 13] /usr/local/lib/libfrr.so.0(cmd_execute+0x142) [0x7f539c84ffe2]\nbgpd[30843]: [bt 14] /usr/local/lib/libfrr.so.0(+0xe51b7) [0x7f539c8c01b7]\nbgpd[30843]: [bt 15] /usr/local/lib/libfrr.so.0(+0xe53f0) [0x7f539c8c03f0]\nbgpd[30843]: [bt 16] /usr/local/lib/libfrr.so.0(+0xe8078) [0x7f539c8c3078]\nbgpd[30843]: [bt 17] /usr/local/lib/libfrr.so.0(thread_call+0x7d) [0x7f539c8bacbd]\nbgpd[30843]: [bt 18] /usr/local/lib/libfrr.so.0(frr_run+0xe8) [0x7f539c8749b8]\nbgpd[30843]: [bt 19] /usr/lib/frr/bgpd(main+0x3f1) [0x55f887e97d71]\nBGP[30843]: Received signal 6 at 1669121170 (si_addr 0x7f0000787b, PC 0x7f539ba58e87); aborting...\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 7be9666f9a1aeda292694fc936394977ada65724)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85db584ff85c46cc3c5a33fdf548e7667f915c96", "commit_date": "2022-11-25T06:55:15Z", "commit_message": "Merge pull request #12382 from FRRouting/mergify/bp/stable/8.4/pr-12374\n\nlib: disable vrf before terminating interfaces (backport #12374)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15ca0cb7f29a5e0161530c36683f4dcf419ae8be", "commit_date": "2022-11-25T06:55:06Z", "commit_message": "Merge pull request #12387 from FRRouting/mergify/bp/stable/8.4/pr-12317\n\nospfd: Fix RFC conformance test cases 25.19 and 27.6 (backport #12317)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2237bac834178971bfd6d60ac5c40f7cead21a1", "commit_date": "2022-11-24T15:22:11Z", "commit_message": "ospfd: Fix RFC conformance test cases 25.19 and 27.6\n\nSteps to reproduce:\n--------------------------\n1. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-A on DIface-0 with DUT as DR.\n2. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n3. DUT: Send <OSPF-LSU> packet.\n4. ANVL: Verify that the received <OSPF-LSU> packet contains a Network- LSA for network N1\n   originated by DUT, and the LS Sequence Number is set to <InitialSequenceNumber>.\n5. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-B on DIface-0 with DUT as DR.\n6. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n7. DUT: Send <OSPF-LSU> packet.\n8. ANVL: Verify that the received <OSPF-LSU> packet contains a new instance of the\n   Network-LSA for network N1 originated by DUT, and the LS Sequence Number\n   is set to (<InitialSequenceNumber> + 1).\n\nBoth the test cases were failing while verifying the initial sequence number for network LSA.\n\nThis is because currently OSPF does not reset its LSA sequence number when it is going down.\n\nSigned-off-by: Mobashshera Rasool <mrasool@vmware.com>\n(cherry picked from commit ca5997cd018ec66534285130d02de168a3a4ed5c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02b684b8f74d1f2e6f333c1b8ad70b8f6a8010b1", "commit_date": "2022-11-24T07:29:24Z", "commit_message": "lib: disable vrf before terminating interfaces\n\nWe must disable the vrf before we start terminating interfaces.\n\nOn termination, we free the 'zebra_if' struct from the interface ->info\npointer. We rely on that for subsystems like vxlan for cleanup when\nshutting down.\n\n'''\n==497406== Invalid read of size 8\n==497406==    at 0x47E70A: zebra_evpn_del (zebra_evpn.c:1103)\n==497406==    by 0x47F004: zebra_evpn_cleanup_all (zebra_evpn.c:1363)\n==497406==    by 0x4F2404: zebra_evpn_vxlan_cleanup_all (zebra_vxlan.c:1158)\n==497406==    by 0x4917041: hash_iterate (hash.c:267)\n==497406==    by 0x4F25E2: zebra_vxlan_cleanup_tables (zebra_vxlan.c:5676)\n==497406==    by 0x4D52EC: zebra_vrf_disable (zebra_vrf.c:209)\n==497406==    by 0x49A247F: vrf_disable (vrf.c:340)\n==497406==    by 0x49A2521: vrf_delete (vrf.c:245)\n==497406==    by 0x49A2E2B: vrf_terminate_single (vrf.c:533)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==  Address 0x6d68c68 is 200 bytes inside a block of size 272 free'd\n==497406==    at 0x48470E4: free (vg_replace_malloc.c:872)\n==497406==    by 0x4942CF0: qfree (memory.c:141)\n==497406==    by 0x49196A9: if_delete (if.c:293)\n==497406==    by 0x491C54C: if_terminate (if.c:1031)\n==497406==    by 0x49A2E22: vrf_terminate_single (vrf.c:532)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==    by 0x499A5F0: thread_fetch (thread.c:1775)\n==497406==    by 0x492850E: frr_run (libfrr.c:1197)\n==497406==    by 0x441746: main (main.c:476)\n==497406==  Block was alloc'd at\n==497406==    at 0x4849464: calloc (vg_replace_malloc.c:1328)\n==497406==    by 0x49429A5: qcalloc (memory.c:116)\n==497406==    by 0x491D971: if_new (if.c:174)\n==497406==    by 0x491ACC8: if_create_name (if.c:228)\n==497406==    by 0x491ABEB: if_get_by_name (if.c:613)\n==497406==    by 0x427052: netlink_interface (if_netlink.c:1178)\n==497406==    by 0x43BC18: netlink_parse_info (kernel_netlink.c:1188)\n==497406==    by 0x4266D7: interface_lookup_netlink (if_netlink.c:1288)\n==497406==    by 0x42B634: interface_list (if_netlink.c:2368)\n==497406==    by 0x4ABF83: zebra_ns_enable (zebra_ns.c:127)\n==497406==    by 0x4AC17E: zebra_ns_init (zebra_ns.c:216)\n==497406==    by 0x44166C: main (main.c:408)\n'''\n\nSigned-off-by: Stephen Worley <sworley@nvidia.com>\n(cherry picked from commit b14fa9c4dca1846d64ced5a9710faa1345da4ca0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a6176ac3a223f29ea6f40dedc186eb54da68c14", "commit_date": "2022-11-24T07:13:07Z", "commit_message": "Merge pull request #12381 from FRRouting/mergify/bp/stable/8.4/pr-12377\n\nzebra: Replace TC definitions for dplane (backport #12377)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e2017f84fd06dcfcb8dc2bcfe2085b4462809c", "commit_date": "2022-11-24T05:26:32Z", "commit_message": "Merge pull request #12378 from FRRouting/mergify/bp/stable/8.4/pr-12260\n\npimd: consistently ignore prefix list mask len (backport #12260)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ad1dca166d4640fe55ee6a685c7845d5bb941c5", "commit_date": "2022-11-23T20:54:21Z", "commit_message": "zebra: Replace TC definitions for dplane\n\nThey were replaced, but forgot for `--enable-scripting`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 2272627571681ba01585fc3f25a3ebfda1b7da30)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8766ccbf073303ef998a3355136a9f08420033b", "commit_date": "2022-11-23T18:15:12Z", "commit_message": "pimd: consistently ignore prefix list mask len\n\n... the prefix length wasn't ignored as expected.  Both S and G are\nalways /32.  But expecting \"le 32\" in prefix-list config is unexpected &\ncounterintuitive.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ab2f9e89b44642af568c3542e1f2b14378fb5ec2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56a3ac3b5d96e507340cee29467ebf28e868d081", "commit_date": "2022-11-22T16:31:01Z", "commit_message": "Merge pull request #12360 from FRRouting/mergify/bp/stable/8.4/pr-12347\n\nsnapcraft: Add pim6 daemon for PIM IPv6 to snap package (backport #12347)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e0a4cda6dd3832a587d10acf94650fec05fa3ba", "commit_date": "2022-11-21T18:55:59Z", "commit_message": "snapcraft: Add pim6 daemon for PIM IPv6 to snap package\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\n(cherry picked from commit feeaf30fde211fcff4231807fc9e52c4bbd3000e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70151e264bbb697a10fed711aa8c937d4f0009b1", "commit_date": "2022-11-18T05:31:08Z", "commit_message": "FRR Release 8.4.1\n\n- zebra: reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n- zebra: fix build without AF_MPLS\n- ospfd: get route-map name for default-information originate\n- ospfd: allow unnumbered and numbered addresses to co-exist better\n- ospfd: prevent from crashing when processing external lsa\n- bgpd: fix \"storing the address of local variable\"\n- bgpd: rpki was decrementing the node lock one time too many\n- bgpd: do not send Deconfig/Shutdown message when restarting\n- pimd: convert zlog_warn to debug\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b72cc20086bf75fa492e3de79facf3cac6d6aba", "commit_date": "2022-11-17T20:21:43Z", "commit_message": "Merge pull request #12332 from FRRouting/mergify/bp/stable/8.4/pr-12309\n\nbgpd: fix invalid ipv4-vpn nexthop for IPv6 peer (backport #12309)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8dff1be53318034b88a8bc1308d2f5eae985db7b", "commit_date": "2022-11-17T15:05:49Z", "commit_message": "bgpd: fix invalid ipv4-vpn nexthop for IPv6 peer\n\nGiven that two routers are connected each other and they have IPv6\naddresses and they establish BGP peer with extended-nexthop capability\nand one router tries to advertise locally-generated IPv4-VPN routes to\nother router.\n\nIn this situation, bgpd on the router that tries to advertise IPv4-VPN\nroutes will be crashed with \"invalid MP nexthop length (AFI IP6)\".\n\nThis issue is happened because MP_REACH_NLRI path attribute is not\ngenerated correctly when ipv4-vpn routes are advertised to IPv6 peer.\nWhen IPv4 routes are leaked from VRF RIB, the nexthop of these routes\nare also IPv4 address (0.0.0.0/0 or specific addresses). However,\nbgp_packet_mpattr_start only covers the case of IPv6 nexthop (for IPv6\npeer).\n\nipv4-unicast routes were not affected by this issue because the case of\nIPv4 nexthop is covered in `else` block.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 63e7ddb509435d9e178cf51a9a288273fb91bf7e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "daa21266dc5f4318d3e0fa6db9f401ff9619f48a", "commit_date": "2022-11-17T15:05:48Z", "commit_message": "tests: Add topotest for l3vpn over ipv6 peer\n\nTo check the effect of the next patch, I added topotest.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 3db8aa8750d1be675f6df1ed765afeb101b6402b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43b7aec4ef7dc476e027339a98f6844cdb0746b4", "commit_date": "2022-11-17T14:42:01Z", "commit_message": "Merge pull request #12331 from FRRouting/mergify/bp/stable/8.4/pr-12302\n\nisisd: fix area NULL pointer in isis_route_update (backport #12302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935c3f3930cdda66e72cb5518d0cce43d653082f", "commit_date": "2022-11-17T12:14:58Z", "commit_message": "Merge pull request #12330 from FRRouting/mergify/bp/stable/8.4/pr-12312\n\nbgpd: authorise to select bgp self peer prefix on rr case (backport #12312)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a07501ff1127f1726c9aadb17d8f3cd506521f8", "commit_date": "2022-11-17T11:26:22Z", "commit_message": "isisd: fix area NULL pointer in isis_route_update\n\nFix the case area is NULL.\n\nFixes: acc0029779 (\"isisd: fix potential access to NULL pointer in isis_route_update\")\nSigned-off-by: Louis Scalbert <louis.scalbert@6wind.com>\n(cherry picked from commit 41c2bf853f072008330a929480bf235ac840212a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56dd706e9b3a5eb790fa695e8f6f71e73b843aab", "commit_date": "2022-11-17T02:58:49Z", "commit_message": "bgpd: authorise to select bgp self peer prefix on rr case\n\nThis commit addresses an issue that happens when using bgp\npeering with a rr client, with a received prefix which is the\nlocal ip address of the bgp session.\n\nWhen using bgp ipv4 unicast session, the local prefix is\nreceived by a peer, and finds out that the proposed prefix\nand its next-hop are the same. To avoid a route loop locally,\nno nexthop entry is referenced for that prefix, and the route\nwill not be selected.\n\nWhen the received peer is a route reflector, the prefix has\nto be selected, even if the route can not be installed locally.\n\nFixes: (\"fb8ae704615c\") bgpd: prevent routes loop through itself\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit f874552557cf2577ae91b297f422e307084f22d3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23f40f230d1fe293eb519aafb0825444ea44f0e0", "commit_date": "2022-11-15T16:02:43Z", "commit_message": "Merge pull request #12320 from FRRouting/mergify/bp/stable/8.4/pr-12307\n\ntools: remove backslash from declare check regex (backport #12307)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "47c5955841fef46d921ff10b2d70691c2f439851", "commit_date": "2022-11-15T09:28:25Z", "commit_message": "Merge pull request #12319 from FRRouting/mergify/bp/stable/8.4/pr-12315\n\nDplane sorry (backport #12315)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677fefbf71907d0cad2a11f6cdf762678667a25", "commit_date": "2022-11-15T07:14:19Z", "commit_message": "tools: remove backslash from declare check regex\n\nThe backslash in `grep -q '^declare \\-a'` is not needed and\ncauses `grep: warning: stray \\ before -` warning in grep-3.8.\n\nSigned-off-by: Marius Tomaschewski <mt@suse.com>\n(cherry picked from commit 5216a05b32390a64efeb598051411e1776042624)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f97e6d92b33df5c1648382c73f2c6d64a1a0c275", "commit_date": "2022-11-15T07:12:23Z", "commit_message": "zebra: Fix dplane_fpm_nl to allow for fast configuration\n\nIf you have this order in your configuration file:\n\nno fpm use-next-hop-groups\nfpm address 127.0.0.1\n\nthe dplane code was using the same event thread t_event and the second\nadd event in the code was going, you already have an event scheduled\nand as such the second event does not overwrite it.  Leaving\nno code to actually start the whole processing.  There are probably\nother cli iterations that will cause this fun as well, but I'm\nnot going to spend the time sussing them out at the moment.\n\nFixes: #12314\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 551fa8c3549e24020dfce33d06ade4a14f72abfe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5a35dd3a499c59672656eb2429a85bb271b46fbd", "commit_date": "2022-11-15T07:12:22Z", "commit_message": "zebra: Use the enum, luke\n\nUse the enum and let the compiler help us figure out\nwhat cases are being missed.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dc31de93e1a79b4a138b474d3c4fdb44cdfee6f3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72e7872400817cb19b5b825cde70df50c6d2c86a", "commit_date": "2022-11-11T08:47:46Z", "commit_message": "Merge pull request #12305 from FRRouting/mergify/bp/stable/8.4/pr-12303\n\nzebra: relax if_type check to allow early ES config creation (backport #12303)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a87740235ec8b61d56c713c069d4485dc44529", "commit_date": "2022-11-11T06:15:27Z", "commit_message": "zebra: relax if_type check to allow early ES config creation\n\nThe API for configuring ES in zebra had a strict check for if_type\n\"isBond\" that prevented the ES config from being created before the\ninterface.\n\nTicket: CM-29454\n\nSigned-off-by: Anuradha Karuppiah <anuradhak@cumulusnetworks.com>\n(cherry picked from commit 3fa177eed287823bbe1d6c7bd9856d1d19435db3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c2f57d6bb20eae4a1ee78a0bde94b93bb4404a2", "commit_date": "2022-11-10T22:20:57Z", "commit_message": "Merge pull request #12304 from FRRouting/mergify/bp/stable/8.4/pr-12269\n\nospfd: prevent from crashing when processing external lsa (backport #12269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24da77c557d2678bca891310ca2e7d4b994349e2", "commit_date": "2022-11-10T19:21:36Z", "commit_message": "ospfd: prevent from crashing when processing external lsa\n\nWhen using debug mode, the ei parameter may be NULL. In that\ncase, do not display the log trace, otherwise a crash will\nhappen.\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit e5309c1a6e366f5dc95cbc3bbbe5c7ce1d46625c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b87dfd9eb7b87c8c16705c953c3ecf4e9680c533", "commit_date": "2022-11-10T04:55:42Z", "commit_message": "Merge pull request #12299 from FRRouting/mergify/bp/stable/8.4/pr-12297\n\npimd: Convert zlog_warn to debug (backport #12297)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0fe0a9b5afd02c8596e06e1f62098a89c192b8a", "commit_date": "2022-11-09T22:18:05Z", "commit_message": "pimd: Convert zlog_warn to debug\n\nThe unable to find a nexthop should not be a warning it should\nbe a debug.  Switching over.\n\nSigned-off-by: Donald Sharp <sharpd@cumulusnetworks.com>\n(cherry picked from commit 7d7206a534eec49b83ff0ef95fe1ba04e5507fc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0cb4f4db970f4cd79f89332bbdd40a7c074d08cd", "commit_date": "2022-11-09T14:46:50Z", "commit_message": "Merge pull request #12293 from donaldsharp/rpki_crash_to_8.4\n\nbgpd: rpki was decrementing the node lock one time too many", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fcbb9447c52e65faf887f2c55a55a0afec2c41c1", "commit_date": "2022-11-09T12:26:26Z", "commit_message": "bgpd: rpki was decrementing the node lock one time too many\n\nThe code was this:\n\n1)        match = bgp_table_subtree_lookup(rrp->bgp->rib[rrp->afi][rrp->safi],\n                                         &rrp->prefix);\n\n2)        node = match;\n\n        while (node) {\n                if (bgp_dest_has_bgp_path_info_data(node)) {\n                        revalidate_bgp_node(node, rrp->afi, rrp->safi);\n                }\n\n3)               node = bgp_route_next_until(node, match);\n        }\n\n\tif (match)\n4)              bgp_dest_unlock_node(match);\n\nAt 1) match was locked and became +1\nAt 2) match and node are now equal\nAt 3) On first iteration, match is decremented( as that node points\nat it ) and the next item is locked, if it is found, and returned which becomes node\n\nIf 3 is run again because node is non-null then, current node is decremented\nand the next node found is incremented and returned which becomes node again.\n\nSo if we get to 4) match is unlocked again which is now a double unlock\nwhich, frankly, is not good.  In all code paths that I can see the\ntest for `if (match) ...` is not needed so let's just remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "36c54fce566f1eaeeb61a2170f22e3b459cc8ef8", "commit_date": "2022-11-09T09:20:28Z", "commit_message": "Merge pull request #12290 from FRRouting/mergify/bp/stable/8.4/pr-12286\n\nzebra/netconf_netlink.c: fix build without AF_MPLS (backport #12286)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eed83c07cc2c08d1b7eb33effa396d4732b20dc1", "commit_date": "2022-11-09T05:25:17Z", "commit_message": "zebra/netconf_netlink.c: fix build without AF_MPLS\n\nFix the following build failure raised since version 8.4 and\nhttps://github.com/FRRouting/frr/commit/d53dc9bd8164ba40242e2013d382fb01eb0b96ed:\n\nzebra/netconf_netlink.c: In function 'netlink_netconf_change':\nzebra/netconf_netlink.c:109:32: error: 'AF_MPLS' undeclared (first use in this function)\n  109 |         if (ncm->ncm_family == AF_MPLS)\n      |                                ^~~~~~~\n\nSigned-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>\n(cherry picked from commit fa60f2c2fac9ff6d71e8bddab92f78a6d558035b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf74460ce359c430ac1368bc54e46e2258e733d2", "commit_date": "2022-11-08T19:24:53Z", "commit_message": "Merge pull request #12285 from FRRouting/mergify/bp/stable/8.4/pr-12258\n\nbgpd: fix \"storing the address of local variable\" (backport #12258)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "mergify/bp/stable/8.4/pr-12258": [{"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "rc/8.4": [{"commit_oid": "45e36c0c00a517ad1606135b18c5753e210cfc0d", "commit_date": "2023-06-16T04:41:18Z", "commit_message": "FRR Release 8.4.4\n\n    This a convenience release/tag for house keeping. We currently don't plan to publish\n    binary packages with this release.\n\n    Changelog:\n\nbfdd\n    Fix malformed session with vrf\n    Remove redundant nb destroy callbacks\n\nbgpd\n    Aggregate-address memory leak fix\n    Bmp fix peer-up ports byte order\n    Check 7 bytes for long-lived graceful-restart capability\n    Conform bgp_packet.h with coding standards\n    Copy the password from the previous peer on peer_xfer_config()\n    Do not allow a `no router bgp xxx` when autoimport is happening\n    Do not allow l3vni changes when shutting down\n    Do not announce routes immediatelly on filter updates\n    Ensure stream received has enough data\n    Fix bgpd core when unintern attr\n    Fix crash for `show bgp ... neighbor received-routes detail|prefix`\n    Fix debug output for route-map names when using a unsuppress-map\n    Fix ecommunity parsing for as4\n    Fix for ain->attr corruption during path update\n    Fix lcom->str string length to correctly cover aliases\n    Increase buffer size used for dumping bgp to mrt files\n    Limit flowspec to no attribute means a implicit withdrawal\n    Make bgp_keepalives.c not use mtype_tmp\n    Prevent null pointer deref when outputting data\n    Treat withdraw variable as a bool\n    Use interface name instead of pointer value\n    Use the actual pointer type instead of a void\n\nlib\n    Adjust only `any` flag for prefix-list entries if destroying\n    Destroy `any` flag when creating a prefix-list entry with prefix\n    Fix link state memory leak\n    Fix vtysh core when handling questionmark\n    On bfd peer shutdown actually stop event\n\nospf6d\n    Stop using mtype_tmp in some cases\n\nospfd, ospf6d\n    Add more logging details\n\nospfd, ospfclient\n    Do not just include .c files in another .c\n\nospfd\n    Cleanup some memory leaks on shutdown in ospf_apiserver.c\n    Fix for vitual-link crash in signal handler\n    Fix interface param type update\n    Fix memory leaks w/ `show ip ospf int x json` commands\n    Fix ospf_lsa memory leak\n    Fix ospf_ti_lfa drop of an entire table\n    Fixing summary origination after range configuration\n    Free up q_space in early return path\n    Log adjacency changes with neighbor ip in addition to neighbor id\n    Ospf opaque lsa stale processing fix and topotests.\n    Remove mtype_tmp\n    Respect loopback's cost that is set and set loopback costs to 0\n\npbrd\n    Fix mismatching in match src-dst\n\npimd\n    Fix use after free issue for ifp's moving vrfs\n    Pim not sending register packets after changing from non dr to dr\n    Process no-forward bsm packet\n\nripd\n    Fix memory leak for ripd's route-map\n\ntests\n    Add test to validate 4-byte ecomm parsing\n    Check if prefix-lists with ipv6 any works fine\n    Check if route-map works correctly if modifying prefix-lists\n\ntools\n    Fix list value remove in frr-reload\n    Fix missing remote-as configuration when reload\n    Make check flag really work for reload\n\nvtysh\n    Give actual pam error messages\n\nzebra\n    Cleanup ctx leak on shutdown and turn off event\n    Evpn handle del event for dup detected mac\n    Fix evpn dup detected local mac del event\n    Fix for heap-use-after-free in evpn\n    Fix race during shutdown\n    Install directly connected route after interface flap\n    Reduce creation and fix memory leak of frrscripting pointers\n    Unlock the route node when sending route notifications\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7be8757b855a4abcda22a70f54d87cf44bef27ef", "commit_date": "2023-06-13T19:08:00Z", "commit_message": "Merge pull request #13782 from FRRouting/mergify/bp/stable/8.4/pr-12454\n\nbgpd: Ensure stream received has enough data (backport #12454)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f61f92105288a9ddb349f27a3edf9d6594dd03c", "commit_date": "2023-06-13T19:06:11Z", "commit_message": "Merge pull request #13785 from FRRouting/mergify/bp/stable/8.4/pr-13612\n\nospfd: fix interface param type update (backport #13612)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9da5c285de38fe11ebf96f01df0d4fa8079e8ad6", "commit_date": "2023-06-13T13:55:51Z", "commit_message": "ospfd: fix interface param type update\n\ninterface link update event needs\nto be handle properly in ospf interface\ncache.\n\nExample:\nWhen vrf (interface) is created its default type\nwould be set to BROADCAST because ifp->status\nis not set to VRF.\nSubsequent link event sets ifp->status to vrf,\nospf interface update need to compare current type\nto new default type which would be VRF (OSPF_IFTYPE_LOOPBACK).\nSince ospf type param was created in first add event,\nifp vrf link event didn't update ospf type param which\nleads to treat vrf as non loopback interface.\n\nTicket:#3459451\nTesting Done:\n\nRunning config suppose to bypass rendering default\nnetwork broadcast for loopback/vrf types.\n\nBefore fix:\n\nvrf vrf1\n vni 4001\nexit-vrf\n!\ninterface vrf1\n ip ospf network broadcast\nexit\n\nAfter fix: (interface vrf1 is not displayed).\n\nvrf vrf1\n vni 4001\nexit-vrf\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 0d005b2d5c294d9d0a8db9d8beca83b97e0fd8ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "406de643d7a943fe11a3eea9cd9ae6a8b12369bb", "commit_date": "2023-06-13T13:07:43Z", "commit_message": "bgpd: Ensure stream received has enough data\n\nBGP_PREFIX_SID_SRV6_L3_SERVICE attributes must not\nfully trust the length value specified in the nlri.\nAlways ensure that the amount of data we need to read\ncan be fullfilled.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 06431bfa7570f169637ebb5898f0b0cc3b010802)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a6f6fca206f6bfd469bd3004e00f4cfa7c24b70", "commit_date": "2023-06-09T06:10:50Z", "commit_message": "Merge pull request #13737 from FRRouting/mergify/bp/stable/8.4/pr-13645\n\nbfdd: remove redundant nb destroy callbacks (backport #13645)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c49818bedcb427eefe54b6c067e264efc3637f6", "commit_date": "2023-06-08T15:20:16Z", "commit_message": "bfdd: remove redundant nb destroy callbacks\n\nFixes warning logs:\n```\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/profile/minimum-ttl'\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/sessions/multi-hop/minimum-ttl'\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit f7884aedf7a1249e3aae71b6a66c9a0f0915c4ef)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "30d9f81aaaad73f736dc70b3782009020ae19c88", "commit_date": "2023-06-07T12:07:31Z", "commit_message": "Merge pull request #13713 from FRRouting/mergify/bp/stable/8.4/pr-13693\n\ntools: fix list value remove in frr-reload (backport #13693)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "03c65e7f7f94b0be052c98d942a5cdc8ee1d3cd6", "commit_date": "2023-06-07T06:23:54Z", "commit_message": "tools: fix list value remove in frr-reload\n\nThere might be a time element(s) from\ntemporary list are removed more than once\nwhich leads to valueError in certain python3\nversion.\n\ncommit-id 1543f58b5 did not handle valueError\nproperly. This caused regression where\nprefix-list config leads to delete followed\nby add.\n\nThe new fix should just pass the exception as\nvalue removal from list_to_add or list_to_del\nis best effort.\nThis allows prefix-list config has no change\nthen removes the lines from lines_to_del and\nlines_to_add properly.\n\nTicket:#3490252\nTesting:\n\nConfigure prefix-list in frr.conf and perform\nmultiple frr-reload. After first reload operatoin\nsubsequent ones should not result in delete followed\nby add of the prefix-list but rather no-op operation.\n\n(Pdb) lines_to_add\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_add_to_del\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) c\n> /usr/lib/frr/frr-reload.py(1562)ignore_delete_re_add_lines()\n-> return (lines_to_add, lines_to_del)\n(Pdb) lines_to_add\n[]\n(Pdb) lines_to_del\n[]\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 9845c09d61a7e509bfae369648cb5f9893455ac4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b78b57674f17399dffc40ff1c3e0236a8d5a965", "commit_date": "2023-06-06T08:08:04Z", "commit_message": "Merge pull request #13695 from FRRouting/mergify/bp/stable/8.4/pr-13649\n\nzebra: Unlock the route node when sending route notifications (backport #13649)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e995236a343e390b526512e77aa20d8e25021a6", "commit_date": "2023-06-06T05:53:21Z", "commit_message": "zebra: Unlock the route node when sending route notifications\n\nWhen using a context to send route notifications to upper\nlevel protocols, the code was using a locking function to\nget the route node.  There is no need for this to be locked\nas such FRR should free it up.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 82c6e4fea54eb65e153e6bc45bb718367b0b5132)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a4b1a2b1fad9cc0af8c44db5c2d088dbe271b9d", "commit_date": "2023-06-02T00:32:52Z", "commit_message": "Merge pull request #13663 from FRRouting/mergify/bp/stable/8.4/pr-13637\n\nlib: fix vtysh core when handling questionmark (backport #13637)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8986db7d91d8ee88a00402ec9d2f54b88cedc465", "commit_date": "2023-06-01T19:31:31Z", "commit_message": "lib: fix vtysh core when handling questionmark\n\nWhen issue vtysh command with ?, the initial buf size for the\nelement is 16. Then it would loop through each element in the cmd\noutput vector. If the required size for printing out the next\nelement is larger than the current buf size, realloc the buf memory\nby doubling the current buf size regardless of the actual size\nthat's needed. This would cause vtysh core when the doubled size\nis not enough for the next element.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit f8aa257997a6a6f69ec5d5715ab04d7cbfae1d1c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27177c81869fb3e2272cf50d8b1a008d5138ae6e", "commit_date": "2023-05-31T08:10:00Z", "commit_message": "Merge pull request #13643 from FRRouting/mergify/bp/stable/8.4/pr-13634\n\nbgpd: fix bgpd core when unintern attr (backport #13634)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a458561282fdf90eff4442aaf2966c345d3666c8", "commit_date": "2023-05-31T05:58:21Z", "commit_message": "bgpd: fix bgpd core when unintern attr\n\nWhen the remote peer is neither EBGP nor confed, aspath is the\nshadow copy of attr->aspath in bgp_packet_attribute(). Striping\nAS4_PATH should not be done on the aspath directly, since\nthat would lead to bgpd core dump when unintern the attr.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit 32af4995aae647cf9d7c70347ec37b57279ea807)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9147e8c02a1db3aeb22afbd5fdda324de55bde77", "commit_date": "2023-05-27T17:05:17Z", "commit_message": "Merge pull request #13615 from FRRouting/mergify/bp/stable/8.4/pr-13608\n\nvtysh: Give actual pam error messages (backport #13608)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dba2bf943254bc7bdf4645f095502957c19cdc32", "commit_date": "2023-05-27T12:36:06Z", "commit_message": "vtysh: Give actual pam error messages\n\nCode was was written where the pam error message put out\nwas the result from a previous call to the pam modules\ninstead of the current call to the pam module.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8495b425bd056d405704df9e756560942d6815c1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bbc049481e2461a83dfc7b653d01c08846e6421f", "commit_date": "2023-05-22T19:05:56Z", "commit_message": "Merge pull request #13572 from FRRouting/mergify/bp/stable/8.4/pr-13506\n\nbfdd: Fix malformed session with vrf (backport #13506)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d8eaf6668ed4bad9b126b662f61751b3e51c0d4", "commit_date": "2023-05-22T11:25:56Z", "commit_message": "bfdd: Fix malformed session with vrf\n\nWith this configuration:\n\n```\nbfd\n peer 33:33::66 local-address 33:33::88 vrf vrf8 interface enp1s0\n exit\n !\nexit\n```\n\nThe bfd session can't be established with error:\n\n```\nbfdd[18663]: [YA0Q5-C0BPV] control-packet: wrong vrfid. [mhop:no peer:33:33::66 local:33:33::88 port:2 vrf:61]\n```\n\nThe vrf check should use the carefully adjusted `vrfid`, which is\nbased on globally/reliable interface.  We can't believe the\n`bvrf->vrf->vrf_id` because the `/proc/sys/net/ipv4/udp_l3mdev_accept`\nmaybe is set \"1\" in VRF-lite backend even with security drawback.\n\nJust correct the vrf check.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit b17c179664da7331a4669a1cf548e4e9c48a5477)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6c72a07aed870990de43d796c994e42d17f7a5c", "commit_date": "2023-05-11T04:00:27Z", "commit_message": "Merge pull request #13503 from FRRouting/mergify/bp/stable/8.4/pr-13489\n\nospfd: OSPF opaque LSA stale processing fix and topotests. (backport #13489)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "947b69eb17d0344b4e5a9ea8388ece4481200edd", "commit_date": "2023-05-10T20:52:06Z", "commit_message": "        ospfd: OSPF opaque LSA stale processing fix and topotests.\n\n        1. Fix OSPF opaque LSA processing to preserve the stale opaque\n            LSAs in the Link State Database for 60 seconds consistent with\n            what is done for other LSA types.\n         2. Add a topotest that tests for cases where ospfd is restarted\n            and a stale OSPF opaque LSA exists in the OSPF routing domain\n            both when the LSA is purged and when the LSA is reoriginagted\n            with a more recent instance.\n\nSigned-off-by: Acee <aceelindem@gmail.com>\n(cherry picked from commit 4e7eb1e62ce54ebcf78622682de962fdeff20b80)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcaac2a2a559c80ba13b5a38a98438d101e0cad7", "commit_date": "2023-05-10T18:23:47Z", "commit_message": "Merge pull request #13501 from FRRouting/mergify/bp/stable/8.4/pr-13485\n\nospfd: Respect loopback's cost that is set and set loopback costs to 0 (backport #13485)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b9c56b644d6beed1354aea9f9a75c29196bf2e33", "commit_date": "2023-05-10T16:13:57Z", "commit_message": "ospfd: Respect loopback's cost that is set and set loopback costs to 0\n\nWhen setting an loopback's cost, set the value to 0, unless the operator\nhas assigned a value for the loopback's cost.\n\nRFC states:\n\nIf the state of the interface is Loopback, add a Type 3\nlink (stub network) as long as this is not an interface\nto an unnumbered point-to-point network. The Link ID\nshould be set to the IP interface address, the Link Data\nset to the mask 0xffffffff (indicating a host route),\nand the cost set to 0.\n\nFRR is going to allow this to be overridden if the operator specifically\nsets a value too.\n\nFixes: #13472\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dd2bc4fb406cc9284d35ef623ebb8838cb158bc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "183dabba65ec90ebcc1a367a20bb7376a34f8e02", "commit_date": "2023-05-09T17:31:10Z", "commit_message": "Merge pull request #13482 from FRRouting/mergify/bp/stable/8.4/pr-13445\n\nzebra: Reduce creation and fix memory leak of frrscripting pointers (backport #13445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a49643612006672a03de4c0b13fa4298dc3f58de", "commit_date": "2023-05-09T12:38:58Z", "commit_message": "zebra: Reduce creation and fix memory leak of frrscripting pointers\n\nThere are two issues being addressed:\n\na) The ZEBRA_ON_RIB_PROCESS_HOOK_CALL script point\nwas creating a fs pointer per dplane ctx in\nrib_process_dplane_results().\n\nb) The fs pointer was not being deleted and directly\nleaked.\n\nFor (a) Move the creation of the fs to outside\nthe do while loop.\n\nFor (b) At function end ensure that the pointer\nis actually deleted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit d8be1399720ca36485b6a2209b143679b01b83cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc0a43da5a1a4e87964dbe08ca07bac34a2ffa7b", "commit_date": "2023-05-05T16:49:22Z", "commit_message": "Merge pull request #13443 from FRRouting/mergify/bp/stable/8.4/pr-13436\n\nospfd: Fix memory leaks w/ `show ip ospf int X json` commands (backport #13436)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6498b758e9db4d2ec0660d6ae263ed429c136dea", "commit_date": "2023-05-05T12:14:57Z", "commit_message": "ospfd: Fix memory leaks w/ `show ip ospf int X json` commands\n\nFRR has a memory leak in the case when int X does not\nexist and a memory leak when int X does exist.  Fix\nthese\n\nFixes: #13434\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 74e21732db129f7287d5ab227e45f305c5dbf34e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "39319b7d9eaf49ffe88901be7e5f147ec4dea724", "commit_date": "2023-05-04T14:00:46Z", "commit_message": "Merge pull request #13419 from FRRouting/mergify/bp/stable/8.4/pr-13020\n\npimd: PIM not sending register packets after changing from non DR to DR (backport #13020)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eaf0abf7b65d813a19f879714ed8b0d33debc672", "commit_date": "2023-05-02T15:56:34Z", "commit_message": "pimd: PIM not sending register packets after changing from non DR to DR\n\nWhen the router is non dr for an interface, it installs mroute to drop\nthe packets from directly connected source. This was done to avoid packets\ncoming to cpu as nocache hit. Later when it gets change from non-DR to DR,\nthese entries are not cleared. So the packets are still dropped.\nThis causes register packets not getting generated.\nSo cleaning up the mroute entries and channel oil without\nupstream reference which was created to drop.\n\nCo-authored-by: Saravanan K <saravanank@vmware.com>\nSigned-off-by: Sai Gomathi N <nsaigomathi@vmware.com>\n(cherry picked from commit 1c883aef96013753f5467ba5e5028dee0f0a82c5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7dddd66b4c0707a15ff55f03c933afd97f80115", "commit_date": "2023-04-24T18:28:33Z", "commit_message": "Merge pull request #13372 from FRRouting/mergify/bp/stable/8.4/pr-13330\n\nzebra: EVPN handle duplicate detected local mac delete event (backport #13330)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "192e5449be1772ae55a0c0bf9d1dac4ef92993f9", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra:fix evpn dup detected local mac del event\n\nThe current local mac delete event send to flag with force\nalways which breaks the duplicate detected MACs where\nit requires to be resynced from bgpd to earlier state.\n\nTicket:#3233019\nIssue:3233019\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 89844a967858d34de99bad8dcb410b4ab4e1dece)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2a3dd84bbf166ffc89485f300e38ef120670027", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra: evpn handle del event for dup detected mac\n\nUpon receiving local mobility event for MAC + NEIGH,\nboth are detected as duplicate upon hitting DAD threshold.\n\nDuplicated detected ( freezed) MAC + NEIGH are not known\nto bgpd.\n\nIf locally learnt MAC + NEIGH are deleted in kernel,\nthe MAC is marked as AUTO after sending delete event\nto bgpd.\n\nBgpd only reinstalls best route for MAC_IP route (NEIGH)\nbut not for MAC event.\nThis puts a situation where MAC is AUTO state and\nassociated neigh as remote.\n\nFix:\nDUPLICATE + LOCAL MAC deletion, set MAC delete request\nas reinstall from bgpd.\n\nTicket:#2873307\nReviewed By:\nTesting Done:\n\nFreeze MAC + two NEIGHs in local mobility event.\nDelete MAC and NEIGH from kerenl.\nbgp rsync remote mac route which puts MAC to remote state.\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit ad7685de2871996469d370192af7afafc234a3ca)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "673957c79a2eea952b7a76fa2db0fd0b2f6f08a0", "commit_date": "2023-04-21T11:10:23Z", "commit_message": "Merge pull request #13343 from FRRouting/mergify/bp/stable/8.4/pr-13341\n\nbgpd: Fix lcom->str string length to correctly cover aliases (backport #13341)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b2ace35bb53737686e0dab54f72dbffb611d705", "commit_date": "2023-04-21T06:23:18Z", "commit_message": "bgpd: Fix lcom->str string length to correctly cover aliases\n\nIf you have a very large number of large communities whose\nstring length happened to be greater than BUFSIZ FRR's bgpd\nwould crash.  This is because bgpd would write beyond\nthe end of the string.\n\nOriginally the code auto-calculated the string size appropriately\nbut commit ed0e57e3f079352714c3a3a8a5b0dddf4aadfe1d modified\nthe string length to be a hard coded BUFSIZ.  When a route-map\nlike this is added:\n\nroute-map LARGE-OUT permit 10\n set large-community 4635:0:0 4635:1:906 4635:1:2906 4635:1:4515 4635:1:4594 4635:1:4641 4635:1:4760 4635:1:7979 4635:1:9253 4635:1:9293 4635:1:9304 4635:1:9908 4635:1:13335 4635:1:16265 4635:1:17924 4635:1:18013 4635:1:20940 4635:1:22822 4635:1:24429 4635:1:24482 4635:1:32590 4635:1:32934 4635:1:36692 4635:1:38008 4635:1:38819 4635:1:41378 4635:1:45753 4635:1:46489 4635:1:49544 4635:1:51847 4635:1:54574 4635:1:54994 4635:1:55720 4635:1:56059 4635:1:57724 4635:1:65021 4635:1:134823 4635:1:136907 4635:1:146961 24115:0:24115 24115:1:906 24115:1:2906 24115:1:4515 24115:1:4594 24115:1:4641 24115:1:4760 24115:1:7979 24115:1:9253 24115:1:9293 24115:1:9304 24115:1:9908 24115:1:13335 24115:1:16265 24115:1:17924 24115:1:18013 24115:1:20940 24115:1:22822 24115:1:24429 24115:1:24482 24115:1:32590 24115:1:32934 24115:1:36692 24115:1:38008 24115:1:38819 24115:1:41378 24115:1:45753 24115:1:46489 24115:1:49544 24115:1:51847 24115:1:54574 24115:1:54994 24115:1:55720 24115:1:56059 24115:1:57724 24115:1:65021 24115:1:134823 24115:1:136907 24115:1:100000 24115:1:100001 24115:1:100002\nexit\n\nBGP would have issues and crash.\n\nModify the code to correctly determine the string length of the communities\nand to also double check if the string has an alias and ensure that the\nstring is still sufficiently large enough.  If not auto size it again.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8cb4892c0669d916557d693b878420faec8e6e2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "948e134d2c2cfb0904d4b607954304407195181d", "commit_date": "2023-04-20T04:06:34Z", "commit_message": "Merge pull request #13339 from FRRouting/mergify/bp/stable/8.4/pr-13329\n\nbgpd: Fix for ain->attr corruption during path update (backport #13329)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd5755610d8f489345d7cf472a1e63faae09e5ad", "commit_date": "2023-04-19T18:49:16Z", "commit_message": "bgpd: Fix for ain->attr corruption during path update\n\n1. Consider a established L2VPN EVPN BGP peer with soft-reconfiguartion\n   inbound configured\n\n2. When the interface of this directly connected BGP peer is shutdown,\n   bgp_soft_reconfig_table_update() is called, which memsets the evpn buffer\n   and calls bgp_update() with received attributes stored in ain table(ain->attr).\n   In bgp_update(), evpn_overlay attribute in ain->attr (which is an interned\n   attr) was modified by doing a memcpy\n\n3. Above action causes 2 attributes in the attrhash (which were previously different)\n   to match!\n\n4. Later during fsm change event of the peer, bgp_adj_in_remove() is called\n   to clean up the ain->attr. But, because 2 attrs in attrhash match, it causes\n   BGP to assert in bgp_attr_unintern()\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 6e076ba5231cba2e22dcbdc48a9c13df046a2e47)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ce238b421e8334e65c2d38df24338eeb0a3745", "commit_date": "2023-04-16T15:58:15Z", "commit_message": "Merge pull request #13316 from FRRouting/mergify/bp/stable/8.4/pr-13302\n\ntools: fix missing remote-as configuration when reload (backport #13302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94ffb7f5d29f7b61ea8cd99d70f8039bde804fe3", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: Make check flag really work for reload\n\nThe check flag of `found_pg_cmd` is already there, but not used.\nSo, make it really work for reload.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 9ea17a5d4978eb3d8ab3d192dd1cc8abf3e414e2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91e45e002a4e0d1ea3fd6063b8cc8d5fd6018e96", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: fix missing remote-as configuration when reload\n\nFrom commit `411d1a2`, `bgp_delete_nbr_remote_as_line()` is added to\nremove some specific bgp neighbors.  But, when reloading the following\nconfiguration, it will wrongly remove some good ones:\n`neighbor 66.66.66.6 remote-as internal`:\n\n```\nrouter bgp 66\n bgp router-id 172.16.204.6\n neighbor ANLAN peer-group\n neighbor ANLAN remote-as internal\n neighbor 66.66.66.6 remote-as internal <- LOST\n neighbor 66.66.66.60 peer-group ANLAN\n```\n\nThe reason is that \"66.66.66.6\" is included in \"66.66.66.60\" literally,\nthen it is mistakenly thought to be a match.  Just fix it with\nexcat match.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit a70895e83ae49b15f13e0801e0743d788b0cb595)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ee0c0acb82ff1b3bf52dc1e12fbd53a4e2fabb1", "commit_date": "2023-04-14T13:54:20Z", "commit_message": "Merge pull request #13306 from FRRouting/mergify/bp/stable/8.4/pr-13301\n\nbgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX (backport #13301)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0fc3078f9b7dea1d8703b57c6eaefec4cc2994b", "commit_date": "2023-04-14T13:04:48Z", "commit_message": "bgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX`\n\nBGP: Received signal 11 at 1681287514 (si_addr 0x8, PC 0x559ab42eb1d9); aborting...\nBGP: /lib/libfrr.so.0(zlog_backtrace_sigsafe+0x71) [0x7f4356b19af1]\nBGP: /lib/libfrr.so.0(zlog_signal+0xf9) [0x7f4356b19cf9]\nBGP: /lib/libfrr.so.0(+0xf5af5) [0x7f4356b4baf5]\nBGP: /lib/x86_64-linux-gnu/libpthread.so.0(+0x14420) [0x7f43568ab420]\nBGP: /usr/lib/frr/bgpd(prefix_rd2str+0x29) [0x559ab42eb1d9]\nBGP: /usr/lib/frr/bgpd(route_vty_out_detail_header+0x7ca) [0x559ab43061ba]\nBGP: /usr/lib/frr/bgpd(+0x1771a6) [0x559ab430a1a6]\nBGP: /usr/lib/frr/bgpd(+0x177f06) [0x559ab430af06]\nBGP: /usr/lib/frr/bgpd(+0x178c8b) [0x559ab430bc8b]\nBGP: /usr/lib/frr/bgpd(+0x179e7e) [0x559ab430ce7e]\nBGP: /lib/libfrr.so.0(+0x9417e) [0x7f4356aea17e]\nBGP: /lib/libfrr.so.0(cmd_execute_command+0x111) [0x7f4356aea321]\nBGP: /lib/libfrr.so.0(cmd_execute+0xd0) [0x7f4356aea4c0]\nBGP: /lib/libfrr.so.0(+0x10d5de) [0x7f4356b635de]\nBGP: /lib/libfrr.so.0(+0x10d81d) [0x7f4356b6381d]\nBGP: /lib/libfrr.so.0(+0x110b03) [0x7f4356b66b03]\nBGP: /lib/libfrr.so.0(event_call+0x81) [0x7f4356b5df91]\nBGP: /lib/libfrr.so.0(frr_run+0xe8) [0x7f4356b11b58]\nBGP: /usr/lib/frr/bgpd(main+0x385) [0x559ab4281d55]\nBGP: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f43566c9083]\nBGP: /usr/lib/frr/bgpd(_start+0x2e) [0x559ab428437e]\nBGP: in thread vtysh_read scheduled from lib/vty.c:2833 vty_event()\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ea5a8e4d5846778611fe1fd6e395bf3cbb33ebaa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "653078c53622ed02a01d442c0b43dae660444204", "commit_date": "2023-04-13T14:38:54Z", "commit_message": "Merge pull request #13294 from FRRouting/mergify/bp/stable/8.4/pr-13244\n\npimd: Process no-forward BSM packet (backport #13244)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "312c97ae18ef6260e8ccbc932a1fd1fc88cbd6fb", "commit_date": "2023-04-13T11:37:38Z", "commit_message": "pimd: Process no-forward BSM packet\n\nTopology Used:\n=============\nCisco---FRR4----FRR2\n\nInitially PIM nbr is down between FRR4----FRR2 from FRR2 side\nCisco is sending BSR packet to FRR4.\n\nProblem Statement:\n=================\nNo shutdown the PIM neighbor on FRR2 towards FRR4.\nFRR2, receives BSR packet immediately as the new neighbor\ncomes up. This BSR packet is having no-forward bit set.\nFRR2 is not able to process the BSR packet, and drop the\nBSR packet.\n\nRoot Cause:\n==========\nWhen PIMD comes up, we start BSM timer for 60 seconds.\nHere, the value accept_nofwd_bsm is setting to false.\n\nFRR2, when receives no-forward BSR packet, it is getting\naccept_nofwd_bsm value as false.\n\nSo, it drops, the no-forward BSM packet.\n\nFix:\n===\nSet accept_nofwd_bsm as false after first BSM packet received.\n\nSigned-off-by: Sarita Patra <saritap@vmware.com>\n(cherry picked from commit 8b462d557905200d98c7a8965b3d223637c3c5dd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "25463613552393cce5fbba4a6453947727f14f82", "commit_date": "2023-04-13T04:09:32Z", "commit_message": "Merge pull request #13281 from FRRouting/mergify/bp/stable/8.4/pr-13193\n\nlib: link state leak fix (backport #13193)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c4cc8fa5c24ee35153e0bdc8dd2a467b9c0cfa5", "commit_date": "2023-04-12T18:23:39Z", "commit_message": "Merge pull request #13277 from FRRouting/mergify/bp/stable/8.4/pr-13269\n\nospfd: Fix ospf_lsa memory leak (backport #13269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d917a966d2e27e0b9269da979ade532c3340b007", "commit_date": "2023-04-12T18:11:15Z", "commit_message": "Merge pull request #13264 from mjstapp/fix_dplane_shut_race_8_4\n\nzebra: fix race during shutdown", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3508b45fa1c66a143ef5cfa8d2a2bbed21145fc5", "commit_date": "2023-04-12T17:32:06Z", "commit_message": "Merge pull request #13275 from FRRouting/mergify/bp/stable/8.4/pr-13249\n\nzebra: Mark connected route as installed after interface flap event (backport #13249)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4bfefd4d919df0a0a88e3480c5e5fdb18356ee4", "commit_date": "2023-04-12T15:58:18Z", "commit_message": "lib: Fix link state memory leak\n\nFree link message data when a delete event is recorded.\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c123d2dee012620b8f43711062a10c49b9247a9c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfaaae0e04d5f62916b31cabe381086d2ae5fada", "commit_date": "2023-04-12T15:40:12Z", "commit_message": "ospfd: Fix ospf_lsa memory leak\n\nFree translated LSA when LSA installation fails\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c0ccfbfd45514251bb1f91ec9138dca138f88f57)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699e76c231a83b276e0e8f748d13583d359f88be", "commit_date": "2023-04-12T15:04:16Z", "commit_message": "zebra: Install directly connected route after interface flap\n\nIssue:\nAfter vlan flap, zebra was not marking the selected/best route as installed.\n\nAs a result, when a static route was configured with nexthop as directly\nconnected interface's(vlan) IP, the static route was not being installed\nin the kernel since its nexthop was unresolved. The nexthop was marked\nunresolved because zebra failed to mark the best route as installed after\ninterface flap.\n\nThis was happening because, in dplane_route_update_internal() if the old and\nnew context type, and nexthop group id are the same, then zebra doesn't send\ndown a route replace request to kernel. But, the installed (ROUTE_ENTRY_INSTALLED)\nflag is set when zebra receives a response from kernel. Since the\nrequest to kernel was being skipped for the route entry, installed flag\nwas not being set\n\nFix:\nIn dplane_route_update_internal() if the old and new context type, and\nnexthop group id are the same, then before returning, installed flag will\nbe set on the route-entry if it's not set already.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit e25a0b138a196c7daf389989ebffbd09d345cd53)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08aff7f17572b3b4333cc497c21e27a13a5dd17c", "commit_date": "2023-04-11T19:51:32Z", "commit_message": "zebra: fix race during shutdown\n\nDuring shutdown, the main pthread stops the dplane pthread\nbefore exiting. Don't try to clean up any events scheduled\nto the dplane pthread at that point - just let the thread\nexit and clean up. This is the 8.4 version.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc6697fa12660eafab4b3f724bcbaecfdd33b616", "commit_date": "2023-04-11T14:19:58Z", "commit_message": "Merge pull request #13256 from FRRouting/mergify/bp/stable/8.4/pr-13226\n\nripd: Fix memory leak for ripd's route-map (backport #13226)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "21eec745361aa704789fa9bf8a65b40b6142c029", "commit_date": "2023-04-11T11:44:36Z", "commit_message": "Merge pull request #13252 from FRRouting/mergify/bp/stable/8.4/pr-13247\n\nEvpn crashes and other ilk (backport #13247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8b3fc3d17fb4cdb92524f2d0b1e947a1eb04472", "commit_date": "2023-04-11T11:38:25Z", "commit_message": "ripd: Fix memory leak for ripd's route-map\n\nWhen cleaning `ripd`, it should free `ctx->name` of `struct if_rmap_ctx`,\nnot `ctx` itself.  Otherwise, it will lead to memory leak.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit d3ec0066e5ea0edd691b939806cd7b879ac6a32a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "182a164b1e4a784b794331ce0c187651a67bbf90", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow a `no router bgp XXX` when autoimport is happening\n\nWhen we have these sequence of events causing a crash in\nevpn_type5_test_topo1:\n\n(A) no router bgp vrf RED 100\n   this schedules for deletion the vrf RED instance\n(B) a l3vni change event from zebra\n   this creates a bgp instance for VRF RED in some cases\n   additionally it auto imports evpn routes into VRF RED\n   Please note this is desired behavior to allow for the\n   auto importation of evpn vrf routes\n(C) no router bgp 100\n   The code was allowing the deletion of the default\n   instance and causing tests to crash.\n\nEffectively the test in bgp_vty to allow/dissallow\nthe removal of the default instance was not correct\nfor the case when (B) happens.\n\nLet's just not allow the command to succeed in this case as that\nthe test was wrong.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 746e0522f3d5c8b1c6d5b698ff8cf861203bd9f6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d57481211ffd8cdd06bddb2a46501c4de831621", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow l3vni changes when shutting down\n\nWhen a `no router bgp XXX` is issued and the bgp instance\nis in the process of shutting down, do not allow a l3vni\nchange coming up from zebra to do anything.  We can just\nsafely ignore it at this point in time.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5a7c43c77ed27522e1e655795d5451c888abb10e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3235edd171af74afdc1166d31cf03f723b20447e", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Use the actual pointer type instead of a void\n\nLet's cut to the chase, we know the pointer type and\nit allows us to not to some gyrations.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit ef96e3753fe47de1edd0d5640bc30329ae55508a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7692f6a663f5ad0f24c59a17796422a9c61844a3", "commit_date": "2023-04-07T19:27:50Z", "commit_message": "Merge pull request #13231 from FRRouting/mergify/bp/stable/8.4/pr-13222\n\nLimit scope (backport #13222)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ce79c129ef21cb67f9ab503b9df401ec6f17806c", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Treat withdraw variable as a bool\n\nUsed as a bool, treated as a bool.  Make it a bool\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit aa056a2a6481aba66c727794d0ee988724be9316)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0a12b878082f77b67ad5d9b4782846ac738575a2", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Limit flowspec to no attribute means a implicit withdrawal\n\nAll other parsing functions done from bgp_nlri_parse() assume\nno attributes == an implicit withdrawal.  Let's move\nbgp_nlri_parse_flowspec() into the same alignment.\n\nReported-by: Matteo Memelli <mmemelli@amazon.it>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cfd04dcb3e689754a72507d086ba3b9709fc5ed8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272ea5a3ac12f2a12343555f8cd3f2c7eee665af", "commit_date": "2023-04-07T07:15:39Z", "commit_message": "bgpd: Conform bgp_packet.h with coding standards\n\nFRR's standards state that function declarations should\nhave actual variable names for parameters passed in.\nLet's make this so for bgp_packet.h\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 78745b8700f25187995ef010ff7486eb4c53296d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ef5db7e3958bd5390df8a8df24725ab83e64db47", "commit_date": "2023-04-06T13:52:12Z", "commit_message": "Merge pull request #13189 from FRRouting/mergify/bp/stable/8.4/pr-13175\n\nzebra: Cleanup ctx leak on shutdown and turn off event (backport #13175)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d5510fb6c519b9a49a83b10bb9e5c6fec0ab2b37", "commit_date": "2023-04-05T13:24:47Z", "commit_message": "zebra: Cleanup ctx leak on shutdown and turn off event\n\ntwo things:\n\nOn shutdown cleanup any events associated with the update walker.\nAlso do not allow new events to be created.\n\nFixes this mem-leak:\n\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790:Direct leak of 8 byte(s) in 1 object(s) allocated from:\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #0 0x7f0dd0b08037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #1 0x7f0dd06c19f9 in qcalloc lib/memory.c:105\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #2 0x55b42fb605bc in rib_update_ctx_init zebra/zebra_rib.c:4383\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #3 0x55b42fb6088f in rib_update zebra/zebra_rib.c:4421\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #4 0x55b42fa00344 in netlink_link_change zebra/if_netlink.c:2221\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #5 0x55b42fa24622 in netlink_information_fetch zebra/kernel_netlink.c:399\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #6 0x55b42fa28c02 in netlink_parse_info zebra/kernel_netlink.c:1183\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #7 0x55b42fa24951 in kernel_read zebra/kernel_netlink.c:493\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #8 0x7f0dd0797f0c in event_call lib/event.c:1995\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #9 0x7f0dd0684fd9 in frr_run lib/libfrr.c:1185\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #10 0x55b42fa30caa in main zebra/main.c:465\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #11 0x7f0dd01b5d09 in __libc_start_main ../csu/libc-start.c:308\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-SUMMARY: AddressSanitizer: 8 byte(s) leaked in 1 allocation(s).\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 3cd0accb5051e900ab343d5fa7c59360c0c1a812)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c9d7a8bc4c61b02a90bc6b8bb3cd4fb15b6c7d2d", "commit_date": "2023-04-05T06:57:21Z", "commit_message": "Merge pull request #13212 from FRRouting/mergify/bp/stable/8.4/pr-13181\n\nbgpd: fix ecommunity parsing for AS4 (backport #13181)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4fafe6aac5bc41dcce1c7330ceb06bcf1921c062", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "tests: add test to validate 4-byte ecomm parsing\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit f615e6dc409c214e66863e8c2ef94775edcac050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "34fdeb0ed34147933125d1bb4f8ab90c1f2a7ca0", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "bgpd: fix ecommunity parsing for AS4\n\nThe parser for extended communities was incorrectly disallowing an\noperator from configuring \"Route Origin\" extended communities\n(e.g. RD/RT/SoO) with a 4-byte value matching BGP_AS4_MAX (UINT32_MAX)\nand allowed the user to overflow UINT32_MAX. This updates the parser to\nread the value as a uint64_t so that we can do proper checks on the\nupper bounds (> BGP_AS4_MAX || errno).\n\nbefore:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 0:65\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\n% Malformed SoO extended community\nTORC11(config-router-af)#\n```\n\nafter:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\n% Malformed SoO extended community\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)#\n```\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit b571d79d6482217c599c53976cb8cf0ec77b847f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "49826030152d629308679819dc748e6c10d2119f", "commit_date": "2023-04-04T10:52:08Z", "commit_message": "Merge pull request #13204 from FRRouting/mergify/bp/stable/8.4/pr-13198\n\nbgpd: bmp fix peer-up ports byte order (backport #13198)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fbe7264546e4c3a5605edb13201e00ffd8dc33c", "commit_date": "2023-04-04T07:49:56Z", "commit_message": "bgpd: bmp fix peer-up ports byte order\n\nadded htons to ports in the peer-up message to fix byte order\n\nSigned-off-by: Maxence Younsi <mx.yns@outlook.fr>\n(cherry picked from commit 9e681c84fa07d768d41fb8fba269c965c8c08a4b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c497beba694937a9e6099bc6ee27bd8d3d818101", "commit_date": "2023-03-31T11:47:11Z", "commit_message": "Merge pull request #13170 from FRRouting/mergify/bp/stable/8.4/pr-13148\n\nbgpd : memory leak fix for aggregate-address on cleanup (backport #13148)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a8fdaa0a8c73a6c9b3b6663c9ff393998e27ec3e", "commit_date": "2023-03-31T08:41:51Z", "commit_message": "Merge pull request #13167 from FRRouting/mergify/bp/stable/8.4/pr-13153\n\nbgpd: increase buffer size used for dumping BGP to MRT files (backport #13153)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e64171d46fd5f0c8b488990ff38e1d06e57d834", "commit_date": "2023-03-31T08:12:07Z", "commit_message": "bgpd : aggregate-address memory leak fix\n\nMemory leaks are observed in the cleanup code. When \u201cno router bgp\" is executed,\ncleanup in that flow for aggregate-address command is not taken care.\n\nfixes the below leak:\n    --\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1e55 in aggregate_addressv6_magic bgpd/bgp_route.c:8592\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42be3f5 in aggregate_addressv6 bgpd/bgp_route_clippy.c:341\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1cde in aggregate_addressv4_magic bgpd/bgp_route.c:8543\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42bd258 in aggregate_addressv4 bgpd/bgp_route_clippy.c:255\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-SUMMARY: AddressSanitizer: 304 byte(s) leaked in 2 allocation(s).\n\nSigned-off-by: Samanvitha B Bhargav <bsamanvitha@vmware.com>\n(cherry picked from commit 7a70d99038a67f693c40d4f1c03027a2b05bfaf8)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a04f44cd90fa0571963bca5330c5438c0b069b05", "commit_date": "2023-03-31T06:25:13Z", "commit_message": "bgpd: increase buffer size used for dumping BGP to MRT files\n\nSigned-off-by: James Clarke (jamclar2) <jamclar2@cisco.com>\n(cherry picked from commit 461b6cd4d7f27624569f7a557f9abf91a85ab3cc)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc8baaf503a7c34eeab77491cdc7bfb8bd6f3b2b", "commit_date": "2023-03-30T10:17:31Z", "commit_message": "Merge pull request #13138 from FRRouting/mergify/bp/stable/8.4/pr-13124\n\nbgpd: Do not announce routes immediatelly on prefix/distribute/filter changes (backport #13124)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "90b54e70f9d2afe3c4168569fad1056ac41ff367", "commit_date": "2023-03-30T06:38:43Z", "commit_message": "bgpd: Do not announce routes immediatelly on filter updates\n\nIf we set `bgp route-map delay-timer X`, we should ignore starting to announce\nroutes immediately, and wait for delay timer to expire (or ignore at all if set\nto zero).\n\nf1aa49293a4a8302b70989aaa9ceb715385c3a7e broke this because we always sent\nroute refresh and on receiving BoRR before sending back EoRR.\n\nLet's get fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4d8e44c7538c6479ac99ec842bebc42a1e6b2ebc)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5620fe8de0f3dcb6001d67d9895bd0f31d89a027", "commit_date": "2023-03-29T07:25:54Z", "commit_message": "Merge pull request #13135 from FRRouting/mergify/bp/stable/8.4/pr-13120\n\nospfd: Fix for vitual-link crash in signal handler (backport #13120)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2755893d5c61f64543f64dfd1b24ba9bfbf90f65", "commit_date": "2023-03-29T04:19:40Z", "commit_message": "ospfd: Fix for vitual-link crash in signal handler\n\nWhenever OSPF virtual-link is created, a virtual interface is\nassociated with it. Name of the virtual interface is derived by\ncombining \"VLINK\" string with the value of vlink_count, which is a global\nvariable.\n\nProblem:\nConsider a scenario where 2 virtual links A and B are created in OSPF with\nvirtual interfaces VLINK0 and VLINK1 respectively. When virtual-link A is unconfigured\nand reconfigured, new interface name derived for it will be VLINK1, which is already\nassociated with virtual-link B. Due to this, both virtual-links A and B will\npoint to the same interface, VLINK1.\n\nDuring FRR restart when signal handler is called, OSPF goes through all the virtual\nlinks and deletes the interface(oi) associated with it. During the deletion of interface\nfor virtual-link B,it accesses the interface which was deleted already(which was deleted\nduring deletion of virual-link A) and whose fields were set to NULL. This\nleads to OSPF crash.\n\nFixed it by not decrementing vlink_count during unconfig/deletion for virtual-link.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 19f451913ed73810e4b02774eae37782c8c36f24)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7f92592633a5a91f3c200e4e03804286a286fbe8", "commit_date": "2023-03-29T04:17:47Z", "commit_message": "Merge pull request #13128 from FRRouting/mergify/bp/stable/8.4/pr-13118\n\nbgpd: Copy the password from the previous peer on peer_xfer_config() (backport #13118)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "906e8addd515b584d476b6e19d399dc64273baac", "commit_date": "2023-03-29T04:17:29Z", "commit_message": "Merge pull request #13127 from FRRouting/mergify/bp/stable/8.4/pr-13123\n\nbgpd: Fix debug output for route-map names when using a unsuppress-map (backport #13123)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677a2f20540b267b6bef0dc493d99ab826fb4c9", "commit_date": "2023-03-28T15:22:23Z", "commit_message": "bgpd: Copy the password from the previous peer on peer_xfer_config()\n\nWe copy the password only if an existing peer structure didn't have it.\n\nBut it might be the case when it exists, and we skip here.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b5b6f11fcb90219cbc69e5845872f2769d42bb2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "96bb0d80579fc93e7e41b20eeae1cc59b3f64f93", "commit_date": "2023-03-28T15:19:44Z", "commit_message": "bgpd: Fix debug output for route-map names when using a unsuppress-map\n\nLog is printing this with this config:\n\n2023-03-28 07:36:47.007 [DEBG] bgpd: [Q9J6Z-09HRR] 192.168.119.120 [Update:SEND] 1.2.3.33/32 is filtered by route-map '(null)'\n\nHere's the config:\n\n address-family ipv4 unicast\n  network 1.2.3.33/32\n  network 1.2.3.34/32\n  aggregate-address 1.2.3.0/24 summary-only\n  redistribute table 33 route-map foo\n  neighbor 192.168.119.120 route-map DENY in\n  neighbor 192.168.119.120 unsuppress-map UNSUPPRESS\n\nip prefix-list UNSUPPRESS seq 5 permit 1.2.3.4/32\nip prefix-list UNSUPPRESS seq 10 permit 1.2.3.5/32\nip prefix-list UNSUPPRESS seq 15 permit 1.2.3.6/32\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8e8ed2e1fb8adbe86135f2b9bcb47fcba6936ed3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9f1ba873637fd6ce4a2d366eafcf41402775852b", "commit_date": "2023-03-26T12:19:57Z", "commit_message": "Merge pull request #13104 from FRRouting/mergify/bp/stable/8.4/pr-13100\n\nbgpd: Check 7 bytes for Long-lived Graceful-Restart capability (backport #13100)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c69bee3ab252228accd4db36691f8739a230119c", "commit_date": "2023-03-24T16:00:24Z", "commit_message": "Merge pull request #13103 from FRRouting/mergify/bp/stable/8.4/pr-13088\n\npimd: Fix use after free issue for ifp's moving vrfs (backport #13088)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d5069143974e5a8935a6e6889aef452c46dccd2", "commit_date": "2023-03-24T14:23:33Z", "commit_message": "bgpd: Check 7 bytes for Long-lived Graceful-Restart capability\n\nIt's not 4 bytes, it was assuming the same as Graceful-Restart tuples.\n\nLLGR has more 3 bytes (Long-lived Stale Time).\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b1d33ec293e8e36fbb8766252f3b016d268e31ce)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ed5f28c765dd4531f7c131b8a45c4f4a4f049491", "commit_date": "2023-03-24T13:15:34Z", "commit_message": "Merge pull request #13095 from FRRouting/mergify/bp/stable/8.4/pr-13065\n\nospfd: Fixing Summary origination after range configuration (backport #13065)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1bc74a10434cfb7bd6304abbf53df271b576f79e", "commit_date": "2023-03-24T13:03:31Z", "commit_message": "pimd: Fix use after free issue for ifp's moving vrfs\n\nWe have this valgrind trace:\n\n==1125== Invalid read of size 4\n==1125==    at 0x170A7D: pim_if_delete (pim_iface.c:203)\n==1125==    by 0x170C01: pim_if_terminate (pim_iface.c:80)\n==1125==    by 0x174F34: pim_instance_terminate (pim_instance.c:68)\n==1125==    by 0x17535B: pim_vrf_terminate (pim_instance.c:260)\n==1125==    by 0x1941CF: pim_terminate (pimd.c:161)\n==1125==    by 0x1B476D: pim_sigint (pim_signals.c:44)\n==1125==    by 0x4910C22: frr_sigevent_process (sigevent.c:133)\n==1125==    by 0x49220A4: thread_fetch (thread.c:1777)\n==1125==    by 0x48DC8E2: frr_run (libfrr.c:1222)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Address 0x6274d28 is 1,192 bytes inside a block of size 1,752 free'd\n==1125==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x174FF1: pim_vrf_delete (pim_instance.c:181)\n==1125==    by 0x4925480: vrf_delete (vrf.c:264)\n==1125==    by 0x4925480: vrf_delete (vrf.c:238)\n==1125==    by 0x49332C7: zclient_vrf_delete (zclient.c:2187)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Block was alloc'd at\n==1125==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x48E80AF: qcalloc (memory.c:116)\n==1125==    by 0x1750DA: pim_instance_init (pim_instance.c:90)\n==1125==    by 0x1750DA: pim_vrf_new (pim_instance.c:161)\n==1125==    by 0x4924FDC: vrf_get (vrf.c:183)\n==1125==    by 0x493334C: zclient_vrf_add (zclient.c:2157)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n\nand you do this series of events:\n\na) Create a vrf, put an interface in it\nb) Turn on pim on that interface and turn on pim in that vrf\nc) Delete the vrf\nd) Do anything with the interface, in this case shutdown the system\n\nThe move of the interface to a new vrf is leaving the pim_ifp->pim pointer pointing\nat the old pim instance, which was just deleted, so the instance pointer was freed.\n\nLet's clean up the pim pointer in the interface pointer as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit e60308f498c356227df5dbc6cc04015a3b213f1d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57ae44234b0cb887dae7fea0cc6d3fc3250ad588", "commit_date": "2023-03-23T23:57:49Z", "commit_message": "ospfd: Fixing Summary origination after range configuration\n\nDescription:\n\tAfter area range config, summary lsas are aggerated to configured\n\troute but later it was being flushed instead of the actual summary\n\tlsa. This was seen when prefix-id of the aggregated route is same\n\tas one of the actual summary route.\n\tHere, aggregated summary lsa need to be returned to set the flag\n\tSUMMARY_APPROVE after originating aggregated summary lsa but its not.\n\tWhich is being cleaned up as part of unapproved summary cleanup.\n\tCorrected this now.\n\nIssue: #13028\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit c8c1a240ab9653d74b3af009f850e150909f784e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f3bea895e5a17154fd2bc0b04114a06353b912f", "commit_date": "2023-03-21T13:24:33Z", "commit_message": "Merge pull request #13071 from FRRouting/mergify/bp/stable/8.4/pr-13062\n\nzebra: Fix for heap-use-after-free in EVPN (backport #13062)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b55182a05f614896096a37fc168a7a44e176b67", "commit_date": "2023-03-21T11:05:09Z", "commit_message": "zebra: Fix for heap-use-after-free in EVPN\n\nIssue:\nWhen a netns is deleted, since zebra doesn\u2019t receive interface down/delete\nnotifications from kernel, it manually deletes the interface without removing\nthe association between zebra_l3vni and the interface that is being deleted\n(i.e it deletes the interface without setting \u201czl3vni->vxlan_if\u201d to NULL).\n\nLater, during the deletion of netns, when zl3vni_rmac_uninstall() is called to\nuninstall the remote RMAC from the kernel, zebra ends up accessing stale\n\u201czl3vni->vxlan_if\u201d pointer, which now points to freed memory.\nThis was causing heap use-after-free.\n\nFix:\nBefore zebra starts deleting the interfaces when it receives netns delete notification,\nappropriate functions() are being called to remove the association between evpn structs\nand interface and set \u201czl3vni->vxlan_if\u201d to NULL. This ensures that when\nzl3vni_rmac_uninstall() is called during netns deletion, it will bail because\n\u201czl3vni->vxlan_if\u201d is NULL.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 7eefea98ba5d42dc3f042b509fe0f18a0e1d5548)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "017c4f79b3471463452f1792a525f010f4a9d20d", "commit_date": "2023-03-21T10:58:59Z", "commit_message": "Merge pull request #13068 from FRRouting/mergify/bp/stable/8.4/pr-13061\n\nlib: on bfd peer shutdown actually stop event (backport #13061)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aaf031b33a799aeab9ff2f87353b9bf7e3b624d", "commit_date": "2023-03-21T07:00:30Z", "commit_message": "lib: on bfd peer shutdown actually stop event\n\nWhen deleting a bfd peer during shutdown, let's ensure\nthat any scheduled events are actually stopped.\n\n==7759== Invalid read of size 4\n==7759==    at 0x48BF700: _bfd_sess_valid (bfd.c:419)\n==7759==    by 0x48BF700: _bfd_sess_send (bfd.c:470)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Address 0xfb687a4 is 4 bytes inside a block of size 272 free'd\n==7759==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48BFA5A: bfd_sess_free (bfd.c:535)\n==7759==    by 0x2B7034: bgp_peer_remove_bfd (bgp_bfd.c:339)\n==7759==    by 0x29FF8A: peer_free (bgpd.c:1160)\n==7759==    by 0x29FF8A: peer_unlock_with_caller (bgpd.c:1192)\n==7759==    by 0x2A0506: peer_delete (bgpd.c:2633)\n==7759==    by 0x208190: bgp_stop (bgp_fsm.c:1639)\n==7759==    by 0x20C082: bgp_event_update (bgp_fsm.c:2751)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Block was alloc'd at\n==7759==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48F53AF: qcalloc (memory.c:116)\n==7759==    by 0x48BF98D: bfd_sess_new (bfd.c:397)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:298)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:279)\n==7759==    by 0x29BA06: peer_group2peer_config_copy (bgpd.c:2803)\n==7759==    by 0x2A3D96: peer_create_bind_dynamic_neighbor (bgpd.c:4107)\n==7759==    by 0x2A4195: peer_lookup_dynamic_neighbor (bgpd.c:4239)\n==7759==    by 0x21AB72: bgp_accept (bgp_network.c:422)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n\ntl;dr -> Effectively, in this test setup we have 300 dynamic bgp\nsessions all of which are using bfd.  When a peer collision is detected\nor we remove the peers, if an event has been scheduled but not actually\nexecuted yet the event event was not actually being stopped, leaving\nthe bsp pointer on the thread->arg and causing a crash when it is\nexecuted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f83431c7e8767abc01b3bc2c9a98bd712b55b67f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32a5096efdf5f2867106825068598833e19c06df", "commit_date": "2023-03-20T23:51:53Z", "commit_message": "Merge pull request #13057 from opensourcerouting/fix/bgp_null_deref_8.4\n\nbgpd: Prevent Null pointer deref when outputting data", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d7aca27af69589bd7c45cbf871300ed2ed8c262", "commit_date": "2023-03-20T14:10:56Z", "commit_message": "bgpd: Prevent Null pointer deref when outputting data\n\nCrash:\n\n(gdb) bt\n0  0x00007fee27de15cb in raise () from /lib/x86_64-linux-gnu/libpthread.so.0\n1  0x00007fee280ecd9c in core_handler (signo=11, siginfo=0x7ffe56001bb0, context=<optimized out>) at lib/sigevent.c:264\n2  <signal handler called>\n3  0x0000555e321c41b2 in prefix_rd2str (prd=0x10, buf=buf@entry=0x7ffe56002080 \"27.0.0.R\\340\\373\\062\\062^U\", size=size@entry=28) at bgpd/bgp_rd.c:168\n4  0x0000555e321c431a in printfrr_prd (buf=0x7ffe560021a0, ea=<optimized out>, ptr=<optimized out>) at bgpd/bgp_rd.c:224\n5  0x00007fee2812069b in vbprintfrr (cb_in=cb_in@entry=0x7ffe56002330, fmt0=fmt0@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/vfprintf.c:564\n6  0x00007fee28122ef7 in vasnprintfrr (mt=mt@entry=0x7fee281cb5e0 <MTYPE_VTY_OUT_BUF>, out=out@entry=0x7ffe560023f0 \" RD: : R\\n\", outsz=outsz@entry=1024, fmt=fmt@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/glue.c:103\n7  0x00007fee28103504 in vty_out (vty=vty@entry=0x555e33f82d10, format=format@entry=0x555e3229a3ad \" RD: %pRD\\n\") at lib/vty.c:190\n8  0x0000555e32185156 in bgp_evpn_es_show_entry_detail (vty=0x555e33f82d10, es=0x555e33c38420, json=<optimized out>) at bgpd/bgp_evpn_mh.c:2655\n9  0x0000555e32188fe5 in bgp_evpn_es_show (vty=vty@entry=0x555e33f82d10, uj=false, detail=true) at bgpd/bgp_evpn_mh.c:2721\nnotice prd=0x10 in #3.  This is because in bgp_evpn_mh.c we are sending &es->es_base_frag->prd.\n\nThere is one spot in the code where during output the es->es_base_frag is checked for non nullness\nLet's just make sure it's right in all the places.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3504210c3a194a1c19f9872de4695ee78661c009", "commit_date": "2023-03-20T13:43:03Z", "commit_message": "Merge pull request #13051 from FRRouting/mergify/bp/stable/8.4/pr-13049\n\nlib: IPv6 prefix-list entry handling with `any` (backport #13049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d000e49c6d20999cf95b44788c6849112d7b3d3e", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "lib: Destroy `any` flag when creating a prefix-list entry with prefix\n\nThe same as 61c07b9d43529f69f48ca54f4f0213cff52b5d0a, but forgot to put IPv6\nin place.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 14c1e0a16959ba8718bb7831c7720707e1d73555)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba257dc803b2d4c4c9fa48883e5717a56cabb770", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "tests: Check if prefix-lists with IPv6 any works fine\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit d8986f0134887f5d8916e71993ab378efaee4306)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "78ff98ae526b39a5cc34bfa1007cc964bcfbff03", "commit_date": "2023-03-20T11:26:36Z", "commit_message": "Merge pull request #13053 from FRRouting/mergify/bp/stable/8.4/pr-12445\n\nMore mtype tmp (backport #12445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b01240e8a516bf29ae4cddb2e437559273f92877", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "bgpd: Make bgp_keepalives.c not use MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 19a713be1db59d757d3d08b72636e4efe0a3e0c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a7eee2676306ac788173e728a30de8d379fe448", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "ospf6d: Stop using MTYPE_TMP in some cases\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 4898cbaf1dee95f687cf6aa6d0490a336fb7dceb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d7402780ebbd43e0ddb51aed8fb3a7232775ed7", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd, ospfclient: Do not just include .c files in another .c\n\nospfclient.c includes .c files directly from ospfd.  Let's separate\nthese out a bit.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 253113bcb80b7b489eb848988a90459403f870de)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "73850c562f7644cc3df339607f0a592940c64d2c", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd: Remove MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 29a1a53d6c3023841b8289f9ff7b15219ec0b05c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cbd7f85c580ea914e76eb3e6170984178bbf88", "commit_date": "2023-03-19T22:39:12Z", "commit_message": "Merge pull request #13040 from FRRouting/mergify/bp/stable/8.4/pr-13038", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c92eda8ab9aa230faa9698d2d9b440ad3f96f0f", "commit_date": "2023-03-19T20:58:10Z", "commit_message": "Merge pull request #13042 from FRRouting/mergify/bp/stable/8.4/pr-13026\n\npbrd:fix mismatching in match src-dst (backport #13026)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "511a5fb70619659d31ae7a5dc742edadfcf38e80", "commit_date": "2023-03-19T20:57:58Z", "commit_message": "Merge pull request #13044 from FRRouting/mergify/bp/stable/8.4/pr-13025\n\nOspf ti lfa leaks (backport #13025)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02d5f199d92da06dc674fc48b98e5052452f8c2f", "commit_date": "2023-03-19T04:45:22Z", "commit_message": "ospfd: Free up q_space in early return path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 52ff0e3ed4ea671f42e3ab5d6d97dd6312e2f87f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b63a91e2518dcff5671877cc90555956f6678b5d", "commit_date": "2023-03-19T04:45:21Z", "commit_message": "ospfd: Fix ospf_ti_lfa drop of an entire table\n\nThe new_rtrs variable was just generated and then dropped.  Let's\nfix that entirely\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit eb7e14011fa19f4ecc18b0108c556cc1d82ee381)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e83375e55ea5d447ea78cf2c87a00964305a628", "commit_date": "2023-03-19T04:43:01Z", "commit_message": "pbrd:fix mismatching in match src-dst\n\nupstream commit 67765a232d has incorect\naddress family check which prevent from\ndeleting src/dst config under pbr rule.\n\nTicket:#3405024\nIssue:3405024\nTesting Done:\n\nConfig:\n\npbr-map map6 seq 1\n match src-ip 2000::200:100:100:0/96\n match dst-ip 2000::100:100:100:0/96\n set nexthop-group group3\n\nBefore:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\nCannot mismatch families within match src/dst\n\nAfter:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\ntorc-12(config-pbr-map)#\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 03494887eddaa255d9b6a217bfff60cc63cede42)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e21e733b82b5a2f4d0cc8a575c15ca4a3ee09c9e", "commit_date": "2023-03-19T04:29:21Z", "commit_message": "ospfd: Cleanup some memory leaks on shutdown in ospf_apiserver.c\n\nClean up some memory leaks found in ospf_apiserver.c  Also\na crash in the original implementation.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7773d0071ab4eb1b725581c525c3e152f2c806c7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5c24b1fe10d79df26a8e4f0aaa83fd475f27309d", "commit_date": "2023-03-18T17:15:09Z", "commit_message": "Merge pull request #13034 from FRRouting/mergify/bp/stable/8.4/pr-13024\n\nlib: Adjust only any flag for prefix-list entries if destroying (backport #13024)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d827df53e1a1ac8cdf5934e763be08dc207666da", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "lib: Adjust only `any` flag for prefix-list entries if destroying\n\nBefore this patch, if we destroy `any` flag for a prefix-list entry, we always\nset destination as 0.0.0.0/0 and/or ::/0.\n\nThis means that, if we switch from `ip prefix-list r1-2 seq 5 deny any` to\n`ip prefix-list r1-2 seq 5 permit 10.10.10.10/32` we will have\n`permit any` eventually, which broke ACLs.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 61c07b9d43529f69f48ca54f4f0213cff52b5d0a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "04bb4249829ee3be1711e9464c83566a9d2295b4", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "tests: Check if route-map works correctly if modifying prefix-lists\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit a1e538178cb1ed09f6bbc0612605c5980bb9a3df)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dd7ec08225994a8d21102e9f82aab59e42f921c", "commit_date": "2023-03-17T22:04:42Z", "commit_message": "Merge pull request #13014 from FRRouting/mergify/bp/stable/8.4/pr-13009\n\nbgpd: Use interface name instead of pointer value (backport #13009)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ac3cbdf3889243c1aebf47c35b34fee74a0adcb9", "commit_date": "2023-03-17T22:04:16Z", "commit_message": "Merge pull request #13022 from FRRouting/mergify/bp/stable/8.4/pr-13016\n\nospfd, ospfd6: Add more logging (backport #13016)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "079fbc793054e115175e406745f8e69d2fb619b4", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd: Log Adjacency Changes with Neighbor IP in addition to Neighbor ID\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 386d232a1a706310f4425d1a0ad6f08c32646e10)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e327d9630cabdca69985969c8fdb0d54000f3fb", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd, ospf6d: Add more logging details\n\nBasically just router-id or interface/IP.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ba427e63489757756cd2b244315b1a911071bbc2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "706ec3d3c19fab5fbc1b7bf343397db6059e9f5e", "commit_date": "2023-03-17T07:56:44Z", "commit_message": "bgpd: Use interface name instead of pointer value\n\nLog message is borked in a manner that makes it unusable:\nbgpd[52]: [VX6SM-8YE5W][EC 33554460] 2000:31:0:53::2: nexthop_set failed, resetting connection - intf 0x561eb9005a30\n\nLet's print out the interface name instead.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 50e049db76573210e3b9ccfa962e5259452ccbe3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "933b8347fb4aadf53bd23aaae6bee6edc6ce72b8", "commit_date": "2023-03-15T21:42:09Z", "commit_message": "FRR Release 8.4.3\n\nThis a convenience release/tag for house keeping. We currently don't plan to publish\nbinary packages with this release.\n\nChangelog:\n\nbabeld\n    Fix filtering against all interfaces\n\nbgpd\n    Avoid double aspath_dup() for confederation when remote-as != as_specified\n    Convert evpn output to not pretty print json\n    Evpn route detail json display non prett\n    Fix deterministic-med check for stale paths\n    Fix use-after-free crash for evpn\n    Flowspec overflow issue\n    Free rfapi callback object always\n    Increment version number even when no data is sent\n    Intern default-originate attributes to avoid use-after-free\n    Pass global asn for confederation peers if not as_specified\n    Prevent multipathing among evpn and non-evpn paths\n\nlib, bgpd\n    Add ability to specify that some json output should not be pretty\n\nlib\n    Fix non-use of option\n    Free dnode before returning if yang translator model is already loaded\n    Release memory of yang translation module on error\n\nospfclient\n    Bugfix and no implicit register\n    Remove register \"ready\" requirement\n\nospfd\n    Compare prefix values in host order\n    Inc. opaque data in `show opaque info detail json` output\n    Small bugfix for miscounting a[s]brs\n\npbrd\n    Fix large tableids displayed as negative\n\npceplib\n    Add <time.h> include for time_t\n\npimd\n    In_multicast needs host order\n    Make logs useful for input drops\n    Try to reinstall mfc when we get nocache\n    V6 intentionally turned off route-maps.  turn it on.\n\ntests\n    Check if bgp confederation works with as_external (!as_specified)\n    Improve the ospfapi test (move to square topology)\n\ntools\n    Fix missing pbrd in rsyslog.d 45-frr.conf file\n    Frr-reload fix list value not present\n\nvrrpd\n    Give null when using null ifp to lookup vr\n\nzebrad\n    Add debug for bridge capability\n    Fix other table inactive when ip import-table is on\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c4bc751002555894fb1b7b8b75269dee0d665d2", "commit_date": "2023-03-15T17:20:26Z", "commit_message": "Merge pull request #13000 from FRRouting/mergify/bp/stable/8.4/pr-12996\n\ntools: frr-reload fix list value not present (backport #12996)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76bbd96c52f81467f8469026225528ba51f02805", "commit_date": "2023-03-15T12:00:33Z", "commit_message": "tools: frr-reload fix list value not present\n\nCheck for value present in list before removing\nas in certain python3 ValueError traceback is observed.\n\nTraceback (most recent call last):\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 2278, in <module>\n    (lines_to_add, lines_to_del, restart_frr)\n\t= compare_context_objects(newconf, running)\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1933, in compare_context_objects\n    lines_to_add, lines_to_del\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1549, in ignore_delete_re_add_lines\n    lines_to_del.remove((ctx_keys, line))\nValueError: list.remove(x): x not in list\n\nTicket:#3389979\nIssue:3389979\n\nTesting Done:\nWith fix perform frr-relaod on frr.conf config where earlier\ntraceback was seen.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 1543f58b5541c0ddb5e53bb7994136dcb5f836cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16706bc59f5733dd28192b7220b2e5f1de720372", "commit_date": "2023-03-14T08:08:51Z", "commit_message": "Merge pull request #12988 from FRRouting/mergify/bp/stable/8.4/pr-12978\n\npimd: IN_MULTICAST needs host order (backport #12978)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "642073dc8a7c58c21b695e21cdefc0f6f045f083", "commit_date": "2023-03-14T05:49:02Z", "commit_message": "pimd: IN_MULTICAST needs host order\n\nNew correct behavior:\n\neva# conf\neva(config)# ip pim rp 192.168.1.224 224.0.0.0/24\nNo Path to RP address specified: 192.168.1.224\neva(config)# ip pim rp 224.1.2.3 224.0.0.0/24\n% Bad RP address specified: 224.1.2.3\neva(config)#\n\nFixes: #12970\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8083e713562a44744c4c2f4a0aa5cc6e2b2170ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9ac1b3fa6440e2efb63a171275c0b6b4d89fa49f", "commit_date": "2023-03-13T05:11:21Z", "commit_message": "Merge pull request #12981 from FRRouting/mergify/bp/stable/8.4/pr-12974\n\nbgpd: Increment version number even when no data is sent (backport #12974)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "84b56b4b142f9f5ddaeb49918c7911a516663ff5", "commit_date": "2023-03-12T19:49:38Z", "commit_message": "bgpd: Increment version number even when no data is sent\n\nWhen an update group decides to not send a prefix\nannouncement because it has not changed, still increment\nthe version number.  Why?  To allow for the situation\nwhere you have say 2 peers in 1 peer group and shortly\nafter they come up a 3rd peer comes up.  It will be\nplaced into a separate update group and could be\ncoalesced down, when it finishes updating all data\nto it.  Now imagine that a single prefix changes at\nthis point in time as well.  Then first 2 peers may\ndecide to not send the data, since nothing has changed.\nWhile the 3rd peer will and since the versions numbers\nnever match they will never coalesce.  So when the decision\nis made to skip, update the version number as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8038460bd2b413a0c082fbd629cdae00708b133)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2cf050ffc0a2cdf9792f9982375dc26974473716", "commit_date": "2023-02-26T12:22:24Z", "commit_message": "Merge pull request #12901 from FRRouting/mergify/bp/stable/8.4/pr-12900\n\nbgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED (backport #12900)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4f01db503a828760fa81680263f7c0077cbbae87", "commit_date": "2023-02-25T00:18:04Z", "commit_message": "bgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED\n\nJust was blind when not seing it's already dup'ed above:\n\n```\tif (peer->sort == BGP_PEER_EBGP\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_AS_PATH_UNCHANGED)\n\t\t|| attr->aspath->segments == NULL)\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_RSERVER_CLIENT))) {\n\t\taspath = aspath_dup(attr->aspath); <<<<<<<<<<<<<<<\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 9930441c66131d26fd7c51d9684b9e6a228c38d7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a053fecd291590bf55b53a4bfd980ec40d54776", "commit_date": "2023-02-24T14:20:30Z", "commit_message": "Merge pull request #12892 from FRRouting/mergify/bp/stable/8.4/pr-12884\n\nbgpd: Flowspec overflow issue (backport #12884)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "301bdc3dad12eb5329f40bf236acb66eabb4eb0a", "commit_date": "2023-02-24T09:40:45Z", "commit_message": "Merge pull request #12882 from FRRouting/mergify/bp/stable/8.4/pr-12878\n\npimd: bughunting improvements (backport #12878)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a4e6637fc0621e90daa4decb4ee887a0af8ee24", "commit_date": "2023-02-24T07:53:36Z", "commit_message": "bgpd: Flowspec overflow issue\n\nAccording to the flowspec RFC 8955 a flowspec nlri is <length, <nlri data>>\nSpecifying 0 as a length makes BGP get all warm on the inside.  Which\nin this case is not a good thing at all.  Prevent warmth, stay cold\non the inside.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 0b999c886e241c52bd1f7ef0066700e4b618ebb3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d279b4317aa0ca1b997a8fb0d19b85b4aa613cd", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: try to reinstall MFC when we get NOCACHE\n\nWhether due to a pimd bug, some expiry, or someone just deleting MFC\nentries, when we're in NOCACHE we *know* there's no MFC entry.  Add an\ninstall call to make sure pimd's MFC view aligns with the actual kernel\nMFC.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57cbb1cc331854816eb51d35f2134f698040f60c", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: make logs useful for input drops\n\nThis path here is pretty far on top of the list of issues that operators\nwill run into and have to debug when setting up PIM.  Make the log\nmessages actually tell what's going on.  Also escalate some from\n`debug mroute detail` to `debug mroute`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a93a1e6969ff577b063f326af61d8c404925c740", "commit_date": "2023-02-23T04:49:25Z", "commit_message": "Merge pull request #12874 from FRRouting/mergify/bp/stable/8.4/pr-12865\n\nbgpd: free rfapi callback object always (backport #12865)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ffbcc741535f66be497ae4a72b6791a32fef58e", "commit_date": "2023-02-22T20:42:04Z", "commit_message": "Merge pull request #12872 from FRRouting/mergify/bp/stable/8.4/pr-12861\n\nbgpd: Confederation fixes with remote-as external/internal (backport #12861)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbe2cfc547a4e5a2594defbb18456eef54166212", "commit_date": "2023-02-22T20:13:13Z", "commit_message": "Merge pull request #12870 from FRRouting/mergify/bp/stable/8.4/pr-12850\n\nospfd client api bugfix and refinements (backport #12850)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e98fbcadb2e682248bd92bd212112f11aa69462a", "commit_date": "2023-02-22T19:50:27Z", "commit_message": "bgpd: free rfapi callback object always\n\nAn rfapi timer callback is responsible for the memory in a\ncontext object, even in special-case exit paths. Always\nfree that object.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit 870d3d2cb8e2fa6ff9329ec7126265d1e25a38ae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7db7e747656a20ac0fa72623c0290df7bfd73310", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "tests: Check if BGP confederation works with AS_EXTERNAL (!AS_SPECIFIED)\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit caf65e4a27539b1ecc0f6820994d36278c0e63e6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2a841adeea864dd7898be3126e815c272ea1ae", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "bgpd: Pass global ASN for confederation peers if not AS_SPECIFIED\n\nWhen we specify remote-as as external/internal, we need to set local_as to\nbgp->as, instead of bgp->confed_id. Before this patch, (bgp->as != *as) is\nalways valid for such a case because *as is always 0.\n\nAlso, append peer->local_as as CONFED_SEQ to avoid other side withdrawing\nthe routes due to confederation own AS received and/or malformed as-path.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit db5a5ee6e4665b5f951ed2a37398820da4b762f1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6550c0bcec1559f189c6aa9f9966d70b32d9790d", "commit_date": "2023-02-22T16:55:09Z", "commit_message": "tests: improve the ospfapi test (move to square topology)\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 663a0c96d9c52895189bef7579a308a1b14120fa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "126c452757a5aa6a73451557f319b2b947047895", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: remove register \"READY\" requirement\n\n- also add ability of the apibin to process commands on stdin\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 6efa8fd5c1653372cea1b25a9fa764269960bb91)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59346a3a4ceb2fbb439d3018871fdaabb2af7701", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: bugfix and no implicit register\n\n- dont delete the callback on opaque data delete\n- require explicit registration\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 703d2c0a3e30c18acd2426b50f97ea8c91c479f9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "652dd9bbc98e729fb3e3d0aaa344865b0632dda3", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: compare prefix values in host order\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 156a904cae87a1ea1cd51de5012c9bddc0d63747)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6e6b7c02d7a4d7e58a578cbff4e76d17612d2096", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: small bugfix for miscounting A[S]BRs\n\n- improve the debug for the second add router call.\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1eea62bb1c439ee66d502ef808695554370032e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de3c7c000c694086c12ae754e8cb0dbebe1deca9", "commit_date": "2023-02-22T16:55:06Z", "commit_message": "ospfd: inc. opaque data in `show opaque info detail json` output\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1794afe01030b3111e83e26986cd004dce290049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2bea6210453f08329d70442b93a45953313f43b0", "commit_date": "2023-02-22T08:56:31Z", "commit_message": "Merge pull request #12858 from FRRouting/mergify/bp/stable/8.4/pr-12818\n\nzebra: Fix other table inactive when ip import-table is on (backport #12818)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42a89db1aa6eed18e339efdc38826eb673fc00ed", "commit_date": "2023-02-21T16:38:15Z", "commit_message": "zebra: Fix other table inactive when ip import-table is on\n\nIn `rib_link`, if is_zebra_import_table_enabled returns\ntrue, `rib_queue_add` will not called, resulting in other\ntable route node never processed. This actually should not\nbe dependent on whether the route is imported.\n\nIn `rib_delnode`, if is_zebra_import_table_enabled returns\ntrue, it will use `rib_unlink` instead of enqueuing the\nroute node for process. There is no reason that imported\nroute nodes should not be reprocessed. Long ago, the\nbehaviour was dependent on whether the route_entry comes\nfrom a table other than main.\n\nSigned-off-by: zyxwvu Shi <i@shiyc.cn>\n(cherry picked from commit 207207c0c03e1108d1bae5cf345b7a29850e6ffd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "410d78b7a4f2c8b4d4c3736c6d6cdb710287ca80", "commit_date": "2023-02-17T14:37:08Z", "commit_message": "Merge pull request #12825 from FRRouting/mergify/bp/stable/8.4/pr-12817\n\nsome missed upstream commits (backport #12817)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b44db730c5b68af0f3e4809139c24ea3208c2f9b", "commit_date": "2023-02-17T10:09:21Z", "commit_message": "Merge pull request #12745 from opensourcerouting/fix/no_pretty_picks\n\nbgpd: Convert evpn output to not pretty print json", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc87d3d082faeb4fd9f478b57b6c83cb2614ca1e", "commit_date": "2023-02-16T20:16:02Z", "commit_message": "lib: Fix non-use of option\n\nCommit d7c6467ba2f55d1055babbb7fe82716ca3efdc7e added the\nability to specify non pretty printing but unfortunately\nforgot to use the option variable to make the whole\nthing work.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3749235319b75ef3fab75da0147b3f5a10dd3626", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "zebra: Add debug for bridge capability\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nTicket: #2609944\n(cherry picked from commit f88889ba7a48c6126e7f389b023cd232cdee5078)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa36056fb57d29eda8f09276c82383b5971b816", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "bgpd: Prevent multipathing among EVPN and non-EVPN paths\n\nEnsure that a multipath set is fully comprised of EVPN paths (i.e.,\npaths imported into the VRF from EVPN address-family) or non-EVPN\npaths. This is actually a condition that existed already in the code\nbut was not properly enforced.\n\nThis change, as a side effect, eliminates the known trigger condition\nfor bad or missing RMAC programming in an EVPN deployment, described\nin tickets CM-29043 and CM-31222. Routes (actually, paths) in a VRF\nrouting table that require VXLAN tunneling to the next hop currently\nneed some special handling in zebra to deal with the nexthop (neigh)\nand RMAC programming, and this is implemented for the entire route\n(prefix), not per-path. This can lead to the bad or missing RMAC\nsituation, which is now eliminated by ensuring all paths in the route\nare 'similar'.\n\nThe longer-term solution in CL 5.x will be to deal with the special\nprogramming by means of explicit communication between bgpd and zebra.\nThis is already implemented for EVPN-MH via CM-31398. These changes\nwill be extended to non-MH also and the special code in zebra removed\nor refined.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\nAcked-by:      Trey Aspelund <taspelund@nvidia.com>\nAcked-by:      Anuradha Karuppiah <anuradhak@nvidia.com>\nAcked-by:      Chirag Shah <chirag@nvidia.com>\n\nTicket: CM-29043\nTesting Done:\n1. Manual testing\n2. precommit on both MLX and BCM platforms\n3. evpn-smoke - BCM and VX\n\nResults described in the ticket\n\n(cherry picked from commit d2d71b042edc628cb6edae0b25d0a49aa9ad2050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38efc4b35e43fa2b6ad2a6d4bb41f3fcb3a5d559", "commit_date": "2023-02-16T19:46:36Z", "commit_message": "bgpd: Fix deterministic-med check for stale paths\n\nWhen performing deterministic MED processing, ensure that the peer\nstatus is not checked when we encounter a stale path. Otherwise, this\npath will be skipped from the DMED consideration leading to it potentially\nnot being installed.\n\nTest scenario: Consider a prefix with 2 (multi)paths. The peer that\nannounces the path with the winning DMED undergoes a graceful-restart.\nBefore it comes back up, the other path goes away. Prior to the fix, a\nthird router that receives both these paths would have ended up not\nhaving any path installed to the prefix after the above events.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nFor internal use:\nTicket: CM-32032\nTesting done: Multiple manual testing\n\n(cherry picked from commit de692a4ebe0b8ea8e191d8ac1f3b41a386edd577)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15135ce2b71182d41378fc9f1336599b1b415549", "commit_date": "2023-02-14T20:19:44Z", "commit_message": "Merge pull request #12804 from FRRouting/mergify/bp/stable/8.4/pr-12790\n\nvrrpd: give null when using null ifp to lookup vr (backport #12790)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "170851737d9833400ceaa3c60456b50654029006", "commit_date": "2023-02-14T14:30:38Z", "commit_message": "vrrpd: give null when using null ifp to lookup vr\n\nThis is still causing crashes somehow.\n\nSigned-off-by: Quentin Young <qlyoung@cumulusnetworks.com>\n(cherry picked from commit ed331629de425914568c1d5c114018878627cdaf)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1925536fe16527b4d9ecea08763ee1693152d3eb", "commit_date": "2023-02-10T13:03:51Z", "commit_message": "Merge pull request #12787 from opensourcerouting/fix/backport_e9340ff429f5f1a255e89a50867a04a370cd56bb\n\nbgpd: Intern default-originate attributes to avoid use-after-free", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c6be72a69c2294bf93e1c7aa640ca44faeb04b6f", "commit_date": "2023-02-10T09:00:58Z", "commit_message": "bgpd: Intern default-originate attributes to avoid use-after-free\n\nWhen we receive a default route from a peer and we originate default route\nusing `neighbor default-originate`, we do not track of struct attr we use,\nand when we do `no neighbor default-originate` we withdraw our generated\ndefault route, but we announce default-route from the peer.\n\nAfter we do this, we unintern aspath (which was used for default-originate),\nBUT it was used also for peer's default route we received.\n\nAnd here we have a use-after-free crash, because bgp_process_main_one()\nreaps old paths that are marked as BGP_PATH_REMOVED with aspath->refcnt > 0,\nbut here it's 0.\n\n```\n0 0x55c24bbcd022 in aspath_key_make bgpd/bgp_aspath.c:2070\n1 0x55c24b8f1140 in attrhash_key_make bgpd/bgp_attr.c:777\n2 0x7f52322e66c9 in hash_release lib/hash.c:220\n3 0x55c24b8f6017 in bgp_attr_unintern bgpd/bgp_attr.c:1271\n4 0x55c24ba0acaa in bgp_path_info_free_with_caller bgpd/bgp_route.c:283\n5 0x55c24ba0a7de in bgp_path_info_unlock bgpd/bgp_route.c:309\n6 0x55c24ba0af6d in bgp_path_info_reap bgpd/bgp_route.c:426\n7 0x55c24ba17b9a in bgp_process_main_one bgpd/bgp_route.c:3333\n8 0x55c24ba18a1d in bgp_process_wq bgpd/bgp_route.c:3425\n9 0x7f52323c2cd5 in work_queue_run lib/workqueue.c:282\n10 0x7f52323aab92 in thread_call lib/thread.c:2006\n11 0x7f5232300dc7 in frr_run lib/libfrr.c:1198\n12 0x55c24b8ea792 in main bgpd/bgp_main.c:520\n13 0x7f5231c3a082 in __libc_start_main ../csu/libc-start.c:308\n14 0x55c24b8ef0bd in _start (/usr/lib/frr/bgpd+0x2c90bd)\n    ```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4f647ff1f8dae3359fbab40cdb4a031b615a04", "commit_date": "2023-02-10T08:14:35Z", "commit_message": "Merge pull request #12783 from FRRouting/mergify/bp/stable/8.4/pr-12781\n\nlib: Release memory of YANG translation module on error (backport #12781)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bcc9e7a548115da1b5ab5c0ebe41f0d74373f839", "commit_date": "2023-02-10T00:25:47Z", "commit_message": "lib: Free dnode before returning if YANG translator model is already loaded\n\nSeems just a missed one because at `goto error` we release dnode.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ecf82aa41e76ecfbaf3f5762af1e90ebc9263721)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8093cc4b63c880f13c16a8d846722e5831cd2310", "commit_date": "2023-02-10T00:25:46Z", "commit_message": "lib: Release memory of YANG translation module on error\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b9941b3fec21eca413c4ca9460a264eb9afb7e34)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd635cd3ae34536c506287b1056dea516be7c4b0", "commit_date": "2023-02-09T13:12:00Z", "commit_message": "Merge pull request #12779 from FRRouting/mergify/bp/stable/8.4/pr-12773\n\npbrd: fix large tableids displayed as negative (backport #12773)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b70772dbd7c89a3a64d1e69461e76f35d66e869", "commit_date": "2023-02-09T10:48:49Z", "commit_message": "pbrd: fix large tableids displayed as negative\n\nTicket: 2699411\nSigned-off-by: Wesley Coakley <wcoakley@nvidia.com>\n(cherry picked from commit 8dc2001c914956f1b493c4e04499b520362dd053)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f4af9196d963c3615b08ac966828cd8b689853c7", "commit_date": "2023-02-09T07:47:01Z", "commit_message": "Merge pull request #12774 from FRRouting/mergify/bp/stable/8.4/pr-12769\n\ntools: Fix missing pbrd in rsyslog.d 45-frr.conf file (backport #12769)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b520b4f6800d2049440cc770c03a8438a60fb31", "commit_date": "2023-02-09T01:18:09Z", "commit_message": "tools: Fix missing pbrd in rsyslog.d 45-frr.conf file\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7386031781858b3a43bc66484b53d57be3ee28e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5b3be313db17d6d705872fc535adff6197391f34", "commit_date": "2023-02-08T11:54:40Z", "commit_message": "Merge pull request #12766 from FRRouting/mergify/bp/stable/8.4/pr-12761\n\nbgpd: fix use-after-free crash for evpn (backport #12761)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "850fe41c793f6b8c5487a01108aeaf67255899f5", "commit_date": "2023-02-08T08:09:37Z", "commit_message": "bgpd: fix use-after-free crash for evpn\n\n```\nanlan(config-router-af)# vni 33\nanlan(config-router-af-vni)# route-target both 44:55\nanlan(config-router-af-vni)# no route-target both 44:55\nvtysh: error reading from bgpd: Resource temporarily unavailable (11)Warning: closing connection to bgpd because of an I/O error!\n```\n\nWhen `bgp_evpn_vni_rt_cmd` deals with \"both\" type, it wrongly created\nonly one node ( should be two nodes ) for lists of both `vpn->import_rtl` and\n`vpn->export_rtl`.  At this time, the two lists are already wrong.\n\nIn `no route-target both RT`, it will free the single node from lists of both\n`vpn->import_rtl` and `vpn->export_rtl`.  After freed from `vpn->import_rtl`,\nit is \"use-after-free\" at the time of freeing it from `vpn->export_rtl`.\nIt causes crash sometimes, or other unexpected behaviours.\n\nThis issue is introduced by commit `3b7e8d`, which have adjusted both\n`bgp_evpn_vni_rt_cmd` and `bgp_evpn_vrf_rt_cmd`.\n\nSince `bgp_evpn_vrf_rt_cmd/no_bgp_evpn_vrf_rt_cmd` works well again\nunintentionally with commit `7022da`, only `bgp_evpn_vni_rt_cmd` needs to\nmodify - add two nodes for \"both\" type and some explicit comments for this\nspecial case of \"both\" type.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 432ff4b036860fb626f3027a7798038d594b8042)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c8119a01157327eac334d7370b8f56aa0e3ff42", "commit_date": "2023-02-07T11:28:28Z", "commit_message": "Merge pull request #12752 from FRRouting/mergify/bp/stable/8.4/pr-12741\n\npceplib: add <time.h> include for time_t (backport #12741)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "641899baf55f233898e52b042a3351f4005c6668", "commit_date": "2023-02-07T09:07:05Z", "commit_message": "pceplib: add <time.h> include for time_t\n\nFixes build on musl. Used for time_t in the header.\n\nBug: https://bugs.gentoo.org/862558\nSigned-off-by: Sam James <sam@gentoo.org>\n(cherry picked from commit 3c8c112df4d72d98c8646df1495cf26a84c2c3b7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48bb8903873da49f7dd43f291f34ab1d974db0d6", "commit_date": "2023-02-06T16:34:27Z", "commit_message": "Merge pull request #12746 from FRRouting/mergify/bp/stable/8.4/pr-12740\n\nbabeld: Fix filtering against all interfaces (backport #12740)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59d91332b9f0cfaa535f39e14520eb6fc44e8f08", "commit_date": "2023-02-06T13:25:50Z", "commit_message": "babeld: Fix filtering against all interfaces\n\nThe first argument of `access_list_lookup` and `prefix_list_lookup`\nshould be `AFI_` constants instead of `AF_` constants.\n\nSigned-off-by: Yuxiang Zhu <vfreex@gmail.com>\n(cherry picked from commit 0f9650ca955d4c9a5c3d9de72a9306cb429079f2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8cc8e056d63949769994bae0b745198f77a8412e", "commit_date": "2023-02-06T10:48:13Z", "commit_message": "bgpd: Convert evpn output to not pretty print json\n\nCommit: 3cdb03fba7b40240fb38469a12b7b05a11043e09\nchanged the vty_json output to not be pretty printing.\nThe previous commit in the tree added vty_json_no_pretty\nlet's use that instead\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2c512e1bc9ac7bee58da01fe7e12218aea75699c", "commit_date": "2023-02-06T10:48:10Z", "commit_message": "lib, bgpd: Add ability to specify that some json output should not be pretty\n\nInitial commit: 23b2a7ef524c9fe083b217c7f6ebaec0effc8f52\nchanged the json output of `show bgp <afi> <safi> json` to\nnot have pretty print because when under a situation where\nthere are a bunch of routes with a large scale ecmp show\noutput was taking forever and this commit cut 2 minutes out\nof vtysh run time.\n\nSubusequent commit: f4ec52f7cc99f709756d9030623a20c98a086125\nchanged this back.\n\nWhen upgrading to latest version the long run time was noticed\ndue to testing.  Let's add back this functionality such that\nFRR can have reduced run times with vtysh when it's really\nneeded.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a758370a5a2b1215c9c8df368554fae5c302429", "commit_date": "2023-02-06T10:47:56Z", "commit_message": "bgpd: evpn route detail json display non prett\n\nFor BGP evpn route table detail json to use\nnon pretty form of display.\n\nProblem:\nIn scaled evpn route table detail json dump\noccupies high resources (CPU + memory) of the system.\nIn high scale evpn route dump using pretty form\nhogs CPU for a while which can trigger watchfrr\nto kill bgpd.\n\nSolution:\nAvoid pretty JSON print for detail version dump\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c362f673bae8c7e0735da7d6a922d6a5996a8c21", "commit_date": "2023-02-01T12:12:29Z", "commit_message": "Merge pull request #12719 from FRRouting/mergify/bp/stable/8.4/pr-12704\n\npimd: v6 intentionally turned off route-maps.  Turn it on. (backport #12704)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b6d5278bac3c13ac5cb53b88157d1e1be74d6a", "commit_date": "2023-01-31T19:02:27Z", "commit_message": "pimd: v6 intentionally turned off route-maps.  Turn it on.\n\nWhy?\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f51c430a17b79bff56bae4b8425711c16cd45300)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62ac43de9f3bc470586cf4f51fadf013bf542b32", "commit_date": "2023-01-10T15:02:10Z", "commit_message": "FRR Release 8.4.2\n\nBug fixes:\n\n- bfdd: fix ipv4 socket source selection\n- bgpd : fix crash for `set ipv4/ipv6 vpn next-hop` command\n- bgpd: stop overriding nexthop when bgp unnumbered\n- bgpd: fix aggregated routes are withdrawn abnormally\n- bgpd: fix a few memory leaks\n- build: enable pim6d by default\n- build: fix sed regex in lua macro\n- doc : add freebsd 13 build docs\n- isisd: fix memory leak\n- lib:  disable vrf before terminating interfaces\n- lib: do not log `echo ping` commands from watchfrr\n- ospf6d:  fix infinite loop when adding asbr route\n- ospfd: fix rfc conformance test cases 25.19 and 27.6\n- ospfd: fix typo and report the P2P link name in the warning\n- ospfd: report the router IP with opaque capability mismatch\n- ospfd: fixing memory leak\n- pimd: consistently ignore prefix list mask len\n- staticd: do not crash when modifying an existing static route with color\n- zebra: free all memory associated ctx->u.iptable.interface_name_list\n- zebra: fix tracepoint changes for lttng\n- zebra: free up route map name memory on vrf deletion event\n- zebra: use `mpls enable`, not `mpls` when generating a config\n- tools: Ignore agentx command for frr-reload.py\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eae0855f541f0a4e8996dfe19ed3f312499375f7", "commit_date": "2023-01-09T20:56:34Z", "commit_message": "Merge pull request #12610 from FRRouting/mergify/bp/stable/8.4/pr-12606\n\n*: various build fixes (backport #12606)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e465af711c3da9267de8c5870d8242b353e8ba", "commit_date": "2023-01-09T18:27:03Z", "commit_message": "build: add doc files missing from dist tarball\n\nThe override.css/js files for sphinx docs were not being included into\nthe tarball created by `make dist`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 26eaf6e386ed2b960c0004d2f927b586e516f587)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e0f65db75fb879805065feade4e888f1aaa56e02", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib/clippy: fix symbol validity check\n\nIf symvalid is false, looking at symidx is bogus.\n\nThis fixes a build-time SEGV on mips64el.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit a185874504654a691aa7c204b87ee2f9e3b8a49a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1a89a6f79db101b15299ae19d36d459d2e9673d9", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib: disable xref ELF note on mips64el\n\nmips64el does not have a 64-bit PC-relative relocation, which is needed\nto emit the ELF note for xrefs.  Disabling the ELF note means clippy\ntakes the fallback path using section headers, so everything does still\nwork (... unless you strip the section headers.)\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ee4a6b9f654fbd4e07485037481ad6b4766bbc6d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "00624c9564457eb62adcd908b310f4df65b0efe5", "commit_date": "2023-01-09T18:27:01Z", "commit_message": "zebra: do not load/store wider-than-ptr atomics\n\nMost 32-bit architectures cannot do atomic loads and stores of data\nwider than their pointer size, i.e. 32 bit.  Funnily enough they\ngenerally *can* do a CAS2, i.e., 64-bit compare-and-swap, but while a\nCAS can emulate atomic add/bitops, loads and stores aren't available.\n\nReplace with a mutex;  since this is 99% used from the zserv thread, the\nmutex should take the local-to-thread fast path anyway.  And while one\natomic might be faster than a mutex lock/unlock, we're doing several\nhere, and at some point a mutex wins on speed anyway.\n\nThis fixes build on armel, mipsel, m68k, powerpc, and sh4.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ccac11096c385d269ecd15ad24ac88d469e7577c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c2853adde61305528383ea656852bf55a83d82f6", "commit_date": "2023-01-09T17:36:11Z", "commit_message": "Merge pull request #12607 from FRRouting/mergify/bp/stable/8.4/pr-12605\n\nospfd: report the router IP with opaque capability mismatch (backport #12605)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2e0a2a46b477ddee454ef41179fb4d3e9bc44bf8", "commit_date": "2023-01-07T18:44:06Z", "commit_message": "ospfd: report the router IP with Opaque capability mismatch\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit 8935b0fac623c84665282e81b59302b02388ad48)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "edc5dce610484cc4f20839a921dad1ee5c49c232", "commit_date": "2023-01-05T11:42:55Z", "commit_message": "Merge pull request #12598 from FRRouting/mergify/bp/stable/8.4/pr-12557\n\nvtysh: Remove double retrieve of env VTYSH_HISTFILE (backport #12557)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8df1306e2a490478250315c066d4d3e01d7a1143", "commit_date": "2023-01-05T08:32:42Z", "commit_message": "Merge pull request #12593 from FRRouting/mergify/bp/stable/8.4/pr-12458\n\nbgpd: Fix aggregated routes are withdrawn abnormally. (backport #12458)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8d472da36100a5b86f1d32d71b24c9163607daf8", "commit_date": "2023-01-05T08:32:35Z", "commit_message": "vtysh: Remove double retrieve of env VTYSH_HISTFILE\n\nThe code is double checking the VTYSH_HISTFILE env variable,\nadditionally clang-15 when running SA over it doesn't fully\nunderstand the code pattern.  Reduce the double check to\none check to reduce program run-time (ha!) and make SA happy.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 99a9f25ce8c1e070f7f37c4cbd439c11bb7432eb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2865946b03feada837020d6dcbca06f28581efc8", "commit_date": "2023-01-04T20:51:17Z", "commit_message": "    bgpd: Fix aggregated routes are withdrawn abnormally.\n\n    The withdraw message and announcement message of a prefix are received continuously within 50ms, which may lead to abnormal aggregation route reference count.\n    Steps to reproduce:\n    --------------------------\n    step1:\n    local config aggregate route 111.0.0.0/24\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:2\n\n    step2:\n    peer withdraw 111.0.0.1/32 and network 111.0.0.1/32 in 50ms\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:1\n\n    step3:\n    peer withdraw 111.0.0.1/32\n    received route\uff1a111.0.0.02/32\n    ref_count:0\n    aggregate route will be withdrawn abnormally\n\nSigned-off-by: liuze03 <liuze03@baidu.com>\n(cherry picked from commit 704e189e594418571463c80a3efcc2c1020adcf4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9594783741cc342d7612024bce57feb75813012f", "commit_date": "2023-01-03T07:17:53Z", "commit_message": "Merge pull request #12585 from FRRouting/mergify/bp/stable/8.4/pr-12566\n\nospfd: add advertising router IP to Opaque capability mismatch err msg (backport #12566)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a3acab2e123677c8490539464f6cf031cadcd24", "commit_date": "2023-01-02T21:13:09Z", "commit_message": "ospfd: add advertising router IP to Opaque capability mismatch error message\n\nSubmitted-by Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit eab190351fc4460477274cec106989392bcff1b5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "408cdb0011da5a0d9c3b63592e933eeb23e2ce53", "commit_date": "2023-01-02T20:42:30Z", "commit_message": "Merge pull request #12565 from FRRouting/mergify/bp/stable/8.4/pr-12560\n\ntools: Ignore agentx command for frr-reload.py (backport #12560)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bccbd54ecc147e1dbc67b97f1e4575c1b71960ab", "commit_date": "2022-12-28T11:12:26Z", "commit_message": "Merge pull request #12570 from FRRouting/mergify/bp/stable/8.4/pr-12558\n\nbgpd: static routes are leaked on shutdown (backport #12558)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f94ed4fdbbdf644be4ab12f2df04e5044717eff", "commit_date": "2022-12-27T20:07:55Z", "commit_message": "bgpd: bgp_connected_add memory was being leaked in some cases\n\nOn shutdown, bgp calls an unlock for the bnc connected table,\nvia the bgp_connected_cleanup function.  This function is\nonly ever called on shutdown, so we know that bgp is going\naway.  The refcount for the connected data can be more than\n1.  Let's not worry about the refcount on shutdown and\njust delete the nodes instead of leaving them around.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1c225152c0f19d2d52c38e8cdc982750e50f72e0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cec86b9c6e00bd65d0d0be220e7d7afbf949523", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: rfapi properly free a couple lists\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit c560f0698f425d4c054e13eccc9df87431cdb73f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2fdad4aef49a2a82f220f19b5bb611d05026fa31", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: static routes are leaked on shutdown\n\nShutdown of bgp results in both the bgp_path_info,\nbgp_dest and bgp_table's not being freed because\nthe bgp_path_info remains locked.\n\nEffectively static routes are scheduled for deletion but bgp_process\nskips the work because the work queue sees that the bgp router\nis marked for deletion.  Effectively not doing any work and leaving\ndata on the floor.\n\nModify the code when attempting to put into the work queue to\nnotice and not do so but just unlock the path info.\n\nThis is effectively the same as what goes on for normal peering\nas that it checks for shutdown and just calls bgp_path_info_free\ntoo.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f9d6087c51fbeafc76f3c7f1b72681cbab7f3651)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fd97bf31256815124e7c9d5fbd718eb0f7ba50c", "commit_date": "2022-12-25T01:48:51Z", "commit_message": "tools: Ignore agentx command for frr-reload.py\n\nagentx can't be disabled once enabled, so we should ignore it for frr-reload.py.\n\n```\n$ /usr/lib/frr/frr-reload.py --reload /etc/frr/bgpd.conf --bindir /usr/local/bin\n\"no agentx\" we failed to remove this command\nSNMP AgentX support cannot be disabled once enabled\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4a9ea00a27c4edfb21e1efaed468a9eefc389d79)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "930d04ad1c6e1980f24805738499df47fc6e9ac8", "commit_date": "2022-12-20T07:51:42Z", "commit_message": "Merge pull request #12545 from FRRouting/mergify/bp/stable/8.4/pr-12438\n\nbgpd: Stop overriding nexthop in vpn_leak_from_vrf_update when the peer is BGP unnumberred (backport #12438)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c16d0acc3d30eebbd597d4a55cffd9a5170d357d", "commit_date": "2022-12-19T21:29:49Z", "commit_message": "tests: Add topotest bgp_vrf_leaking_5549_routes\n\nTo verify previous changes, this PR introduces topotest to verify\nwhether imported routes learnt from BGP unnumbered peers will be active\non VPN RIB and other VRF RIB.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 2b0efccd057752a14e88c71f142a5b8bc0ad93a8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a809a704d9ff5a4500a938f57874278698e443", "commit_date": "2022-12-19T21:29:48Z", "commit_message": "bgpd: Stop overriding nexthop when BGP unnumberred\n\nWhen we use vrf-to-vrf export, the nexthop has already not been\noverridden when the peer is BGP unnumberred. However, when we use normal\nexport, the nexthop will be oberridden. This behavior will make the VPN\nroutes invalid in VPN RIB.\n\nThis PR stops overriding nexthop even if we use normal export.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit f784007d677ee20e4dbd20366928652be2a0b23c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa0c54afbca317d6d04da199dd637ce97aaac9cc", "commit_date": "2022-12-14T11:51:29Z", "commit_message": "Merge pull request #12512 from FRRouting/mergify/bp/stable/8.4/pr-12498\n\nospfd: fix typo and report the link name in the warning (backport #12498)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4842032026a7208ce26a0ca92158a42c6153ec0d", "commit_date": "2022-12-14T04:07:51Z", "commit_message": "Merge pull request #12514 from donaldsharp/cleanup_8.4\n\nzebra: Remove badly backported TC code", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272686633b651cd57adcca00b5b6b4e7181b6b1d", "commit_date": "2022-12-13T20:13:37Z", "commit_message": "zebra: Remove badly backported TC code\n\nSome TC code for the dplane got backported that should\nnot have been.  Remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64ce24a9e456154c8249dd4d0ce642c8926892d5", "commit_date": "2022-12-13T18:04:32Z", "commit_message": "ospfd: fix typo and report the link name in the warning\n\nSubmitted-by: Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit bf8d8a5451b869a07c147ae1b31d2c2b52458b2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "886d57d0b4a284b0a4c0dc2a0cefacc5c9bd0aef", "commit_date": "2022-12-12T12:25:21Z", "commit_message": "Merge pull request #12493 from FRRouting/mergify/bp/stable/8.4/pr-12466\n\nbuild: FreeBSD fixes (backport #12466)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "211c53670ac5967d8108b38540129492940fa37a", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "doc: add FreeBSD 13 build docs\n\nSome minor changes since FreeBSD 11, mostly fewer extra sauce.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d3135b0189f3b99b5eb327d821bb9a40d09988e1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8e6418c554c2be8a9b1636c42200ce1ad4d20ec", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: pim6d is Linux only\n\nThis stops breaking build on FreeBSD.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d9a2d546da40fa6eb5b546eff34e07b8e67c2247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e5abbaabae9e3a712eb35c34f06859fece6fbf19", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: fix sed regex in Lua macro\n\nUsing `\\s` to match whitespace is not portable, use `[[:space:]]`\ninstead.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 9e46405ca2c7b3d5380dc6ab619666a6d32bbbfb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd3f7171043acf9ed856efd9719dfc1676a20d97", "commit_date": "2022-12-11T19:35:23Z", "commit_message": "Merge pull request #12486 from FRRouting/mergify/bp/stable/8.4/pr-12482\n\nMem this (backport #12482)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dab73b7601d995179fe54c5f6963aa420dce398", "commit_date": "2022-12-10T02:20:13Z", "commit_message": "zebra: Free up routemap name memory on vrf deletion event\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cda0f501fb9a3b0dca429dac628ea4cc9566e233)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de7500cd06d415497471afcc292a7900f9d2ed21", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "lib: Hide list macros in linklist.c\n\nThe LISTNODE_ATTACH|DELETE macros are only used in\nlinklist.c.  Let's remove temptation from people\nto use them.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit b3faf1aab6029caf272475122fd99f7f0b0b39c9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c348fec83b0d834f5993ab5b375432b8d398f3b9", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "ospf6d: Don't allocate json memory in non-json path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 21c6569d6f4dca71b4ddf7e6499e296efaf819c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d92bdd385cb0de935ab27e1582e1dd811b90a544", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "zebra: Actually free all memory associated ctx->u.iptable.interface_name_list\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1cc380679e4cbca5c0c4259653c57da1f47dbafe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "436bf68e016ef2679b96f4f1e465655ce8038925", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "isisd: Fix sadj memory leak\n\nIn some cases the sadj was directly dropped.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 63e6e11f9f8a5e60fc9f6aaf54d33ba04cc3a6b4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64f5d73a3cbac6fe32c414a2cf30e940b97f6e7c", "commit_date": "2022-12-02T08:43:20Z", "commit_message": "Merge pull request #12428 from FRRouting/mergify/bp/stable/8.4/pr-12427\n\nbuild: enable pim6d by default (backport #12427)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7bea90ebbc8f76993417b59a967b36e2cdf4094a", "commit_date": "2022-12-02T05:56:24Z", "commit_message": "build: enable pim6d by default\n\nChange configure.ac so that pim6d is enabled by default; a\ncommand-line option can disable it.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit cee45b84f4648750cdfae314cca7b91ee3a696a2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7d7b33a0281b233757606bb1fa4e9c056c57084f", "commit_date": "2022-11-29T19:32:49Z", "commit_message": "Merge pull request #12419 from FRRouting/mergify/bp/stable/8.4/pr-12386\n\nbfdd: fix IPv4 socket source selection (backport #12386)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa4d0a699aaee28649a9e13ab3054d95cc49cad1", "commit_date": "2022-11-29T19:32:34Z", "commit_message": "Merge pull request #12420 from FRRouting/mergify/bp/stable/8.4/pr-12367\n\nospfd: Fixing a memleak. (backport #12367)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bdf19f7a057618ebf82c21965d7cd21070273a3c", "commit_date": "2022-11-29T16:24:12Z", "commit_message": "ospfd: Fixing memleak.\n\nDescription:\n\tAs part of signal handler ospf_finish_final(),  lsas are originated\n\tand added to refresh queues are not freed.\n\n\tOne such leak is :\n\t==2869285== 432 (40 direct, 392 indirect) bytes in 1 blocks are definitely lost in loss record 159 of 221\n\t==2869285==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n\t==2869285==    by 0x4910EC3: qcalloc (memory.c:116)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:4017)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:3979)\n\t==2869285==    by 0x19A37F: ospf_network_lsa_install (ospf_lsa.c:2680)\n\t==2869285==    by 0x19A37F: ospf_lsa_install (ospf_lsa.c:2941)\n\t==2869285==    by 0x19C18F: ospf_network_lsa_update (ospf_lsa.c:1099)\n\t==2869285==    by 0x1931ED: ism_change_state (ospf_ism.c:556)\n\t==2869285==    by 0x1931ED: ospf_ism_event (ospf_ism.c:596)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19FBC6: nsm_change_state (ospf_nsm.c:695)\n\t==2869285==    by 0x19FBC6: ospf_nsm_event (ospf_nsm.c:861)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19020B: ospf_if_cleanup (ospf_interface.c:322)\n\t==2869285==    by 0x192D0C: ism_interface_down (ospf_ism.c:393)\n\t==2869285==    by 0x193028: ospf_ism_event (ospf_ism.c:584)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x190F10: ospf_if_down (ospf_interface.c:851)\n\t==2869285==    by 0x1911D6: ospf_if_free (ospf_interface.c:341)\n\t==2869285==    by 0x1E6E98: ospf_finish_final (ospfd.c:748)\n\t==2869285==    by 0x1E6E98: ospf_deferred_shutdown_finish (ospfd.c:578)\n\t==2869285==    by 0x1E7727: ospf_finish (ospfd.c:682)\n\t==2869285==    by 0x1E7727: ospf_terminate (ospfd.c:652)\n\t==2869285==    by 0x18852B: sigint (ospf_main.c:105)\n\t==2869285==    by 0x493BE12: frr_sigevent_process (sigevent.c:130)\n\t==2869285==    by 0x494DCD4: thread_fetch (thread.c:1775)\n\t==2869285==    by 0x4905022: frr_run (libfrr.c:1197)\n\t==2869285==    by 0x187891: main (ospf_main.c:235)\n\n\tAdded a fix to cleanup all these queue pointers and corresponing lsas in it.\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit 594f80c83f40935b6dfcd15c8a3c28f1b4e3d423)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "836c3a35f6d434335b75753cf8c34f6f5eead359", "commit_date": "2022-11-29T15:04:29Z", "commit_message": "bfdd: fix IPv4 socket source selection\n\nThe imported BFD code had some logic to ignore the source address when\nusing single hop IPv4. The BFD peer socket function should allow the\nsource to be selected so we can:\n1. Select the source address in the outgoing packets\n2. Only receive packets from that specific source\n\nSigned-off-by: Rafael Zalamena <rzalamena@opensourcerouting.org>\n(cherry picked from commit f68114c1c397a939fd758af072c37d535f1de92f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "37ea1e70143f012e0469a8a4af81407f4460ff63", "commit_date": "2022-11-28T19:00:58Z", "commit_message": "Merge pull request #12411 from FRRouting/mergify/bp/stable/8.4/pr-12408\n\nzebra: Use `mpls enable`, not `mpls` when generating a config (backport #12408)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2070aa87deee83df5a0753788cae1b00d04db94", "commit_date": "2022-11-28T19:00:49Z", "commit_message": "Merge pull request #12412 from FRRouting/mergify/bp/stable/8.4/pr-12389\n\nospf6d: fix infinite loop when adding ASBR route (backport #12389)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "176f7aa788ac627daa572e3ad4c4a60f4148702a", "commit_date": "2022-11-28T13:46:35Z", "commit_message": "ospf6d: fix infinite loop when adding ASBR route\n\nCommit 8f359e1593c414322 removed a check that prevented the same route\nfrom being added twice. In certain topologies, that change resulted in\nthe following infinite loop when adding an ASBR route:\n\nospf6_route_add\n ospf6_top_brouter_hook_add\n  ospf6_abr_examin_brouter\n   ospf6_abr_examin_summary\n    ospf6_route_add\n     (repeat until stack overflow)\n\nRevert the offending commit and update `ospf6_route_is_identical()` to\nnot do comparison using `memcmp()`.\n\nSigned-off-by: Renato Westphal <renato@opensourcerouting.org>\n(cherry picked from commit 4dfe15200ab1a84a8d77fcbc33085c373d556eae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "400304b63eafbb9c8d31b2f258ff2d378af43928", "commit_date": "2022-11-28T12:48:59Z", "commit_message": "zebra: Use `mpls enable`, not `mpls` when generating a config\n\nIf we enable MPLS for an interface via sysctl, we should write `mpls enable`,\nnot `mpls`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 35c46a8718948850f67ec6c3ec00551b2b839310)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e717bd02472b6c8bb52155db2292aa158d8064b", "commit_date": "2022-11-28T10:39:12Z", "commit_message": "Merge pull request #12407 from FRRouting/mergify/bp/stable/8.4/pr-12403\n\nEcho exclusion (backport #12403)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8191b7c00bce5a4e037d76ec6d8f3a71eb633b3", "commit_date": "2022-11-28T08:08:46Z", "commit_message": "lib: Do not log `echo PING` commands from watchfrr\n\nSince the `echo PING` commands are from watchfrr and are sent\na whole bunch when an operator has `log commands` on the amount\nof logging done is quite significant.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8a0f80b634208c878e15335948810e1d532d1e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfe07a821f58ff45573dd7f0e11fc46fec8aa00d", "commit_date": "2022-11-28T08:08:45Z", "commit_message": "zebra: Fix tracepoint changes for lttng\n\nThe recent tracepoint additions in c317d3f246769e8261df0f9d1eb787bea7b5da06\ndid not properly setup the tracepoints for lttng.  Fix this.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit bcb486dd3cbce01dd1d9085006305cfcd738f9e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2801239675c84e0a674d6c3905c8e6e9e9220bc7", "commit_date": "2022-11-27T14:50:33Z", "commit_message": "Merge pull request #12404 from FRRouting/mergify/bp/stable/8.4/pr-12399\n\nstaticd: Fix crash for an existing route with color (backport #12399)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d438b0f5ed2682affc6bef0fba2daea87729792", "commit_date": "2022-11-26T19:26:16Z", "commit_message": "staticd: Do not crash when modifying an existing static route with color\n\n```\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65 color 123'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n123\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n0\n```\n\nBefore this patch:\n```\nSTATIC: Received signal 6 at 1666938633 (si_addr 0x4e1a, PC 0x7f295139c438); aborting...\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_backtrace_sigsafe+0x70) [0x7f29519ef0a0]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_signal+0xec) [0x7f29519ef28c]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xccee2) [0x7f2951a1aee2]\nSTATIC: /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390) [0x7f2951742390]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38) [0x7f295139c438]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a) [0x7f295139e03a]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(_zlog_assert_failed+0xe6) [0x7f2951a46766]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xae7ee) [0x7f29519fc7ee]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(routing_control_plane_protocols_control_plane_protocol_staticd_route_list_src_\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xaf264) [0x7f29519fd264]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xafb4f) [0x7f29519fdb4f]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit_apply+0x33) [0x7f29519fde33]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit+0x9e) [0x7f29519fdf6e]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb0469) [0x7f29519fe469]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb3055) [0x7f2951a01055]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_cli_apply_changes+0xd8) [0x7f2951a01358]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x407ec2]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x40a307]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0x74923) [0x7f29519c2923]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute_command+0xe4) [0x7f29519c2aa4]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute+0xc9) [0x7f29519c2c49]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4184) [0x7f2951a32184]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4436) [0x7f2951a32436]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe6fcc) [0x7f2951a34fcc]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(thread_call+0x98) [0x7f2951a2cc28]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(frr_run+0xe8) [0x7f29519e7518]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(main+0xda) [0x40572a]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7f2951387840]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(_start+0x29) [0x4058e9]\nSTATIC: in thread vtysh_read scheduled from lib/vty.c:2710 vty_event()\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 3278956b1741e9af38b92d74f84a8e48b1b6943e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "29a911093b96ea0aa330367a486d331e2a8fcc9c", "commit_date": "2022-11-26T19:19:06Z", "commit_message": "Merge pull request #12400 from FRRouting/mergify/bp/stable/8.4/pr-12370\n\nbgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command (backport #12370)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b635d08603230d57caf746c5b3440c95cd439efa", "commit_date": "2022-11-25T15:19:23Z", "commit_message": "bgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command\n\nCrash when using for example:\n\n```\nroute-map test permit 10\n set ipv6 vpn next-hop 10.10.10.10\n```\n\n```\nbgpd[30843]: libyang: Unsatisfied pattern - \"1.1.1.1\" does not conform to \"((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}((([0-9a-fA-F]{0,4}:)?(:|[0-9a-fA-F]{0,4}))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])))(%[\\p{N}\\p{L}]+)?\". (Schema location /frr-route-map:lib/route-map/entry/set-action/rmap-set-action/set-action/frr-bgp-route-map:ipv6-address/ipv6-address.)\nbgpd[30843]: [JEA2K-29RPH][EC 100663345] nb_candidate_edit: lyd_new_path(/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address) failed: 7\nbgpd[30843]: [ZDEA9-V1X7W][EC 100663341] nb_cli_apply_changes_internal: failed to edit candidate configuration: operation [modify] xpath [/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address]\nbgpd[30843]: [SZNR8-V24R3][EC 100663326] yang_dnode_xpath_get_canon: couldn't find ./rmap-set-action/frr-bgp-route-map:ipv6-address\nbgpd[30843]: Backtrace for 20 stack frames:\nbgpd[30843]: [bt 0] /usr/local/lib/libfrr.so.0(zlog_backtrace+0x3a) [0x7f539c87c95a]\nbgpd[30843]: [bt 1] /usr/local/lib/libfrr.so.0(+0xed022) [0x7f539c8c8022]\nbgpd[30843]: [bt 2] /usr/local/lib/libfrr.so.0(yang_dnode_get_string+0x96) [0x7f539c8c9ea6]\nbgpd[30843]: [bt 3] /usr/local/lib/libfrr.so.0(route_map_action_show+0xc40) [0x7f539c8a4540]\nbgpd[30843]: [bt 4] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x5c) [0x7f539c88fa8c]\nbgpd[30843]: [bt 5] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 6] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x1a3) [0x7f539c88fbd3]\nbgpd[30843]: [bt 7] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 8] /usr/local/lib/libfrr.so.0(+0xc4d47) [0x7f539c89fd47]\nbgpd[30843]: [bt 9] /usr/local/lib/libfrr.so.0(+0x7274a) [0x7f539c84d74a]\nbgpd[30843]: [bt 10] /usr/local/lib/libfrr.so.0(+0x72cb0) [0x7f539c84dcb0]\nbgpd[30843]: [bt 11] /usr/local/lib/libfrr.so.0(+0x74c40) [0x7f539c84fc40]\nbgpd[30843]: [bt 12] /usr/local/lib/libfrr.so.0(cmd_execute_command+0xa4) [0x7f539c84fd74]\nbgpd[30843]: [bt 13] /usr/local/lib/libfrr.so.0(cmd_execute+0x142) [0x7f539c84ffe2]\nbgpd[30843]: [bt 14] /usr/local/lib/libfrr.so.0(+0xe51b7) [0x7f539c8c01b7]\nbgpd[30843]: [bt 15] /usr/local/lib/libfrr.so.0(+0xe53f0) [0x7f539c8c03f0]\nbgpd[30843]: [bt 16] /usr/local/lib/libfrr.so.0(+0xe8078) [0x7f539c8c3078]\nbgpd[30843]: [bt 17] /usr/local/lib/libfrr.so.0(thread_call+0x7d) [0x7f539c8bacbd]\nbgpd[30843]: [bt 18] /usr/local/lib/libfrr.so.0(frr_run+0xe8) [0x7f539c8749b8]\nbgpd[30843]: [bt 19] /usr/lib/frr/bgpd(main+0x3f1) [0x55f887e97d71]\nBGP[30843]: Received signal 6 at 1669121170 (si_addr 0x7f0000787b, PC 0x7f539ba58e87); aborting...\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 7be9666f9a1aeda292694fc936394977ada65724)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85db584ff85c46cc3c5a33fdf548e7667f915c96", "commit_date": "2022-11-25T06:55:15Z", "commit_message": "Merge pull request #12382 from FRRouting/mergify/bp/stable/8.4/pr-12374\n\nlib: disable vrf before terminating interfaces (backport #12374)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15ca0cb7f29a5e0161530c36683f4dcf419ae8be", "commit_date": "2022-11-25T06:55:06Z", "commit_message": "Merge pull request #12387 from FRRouting/mergify/bp/stable/8.4/pr-12317\n\nospfd: Fix RFC conformance test cases 25.19 and 27.6 (backport #12317)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2237bac834178971bfd6d60ac5c40f7cead21a1", "commit_date": "2022-11-24T15:22:11Z", "commit_message": "ospfd: Fix RFC conformance test cases 25.19 and 27.6\n\nSteps to reproduce:\n--------------------------\n1. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-A on DIface-0 with DUT as DR.\n2. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n3. DUT: Send <OSPF-LSU> packet.\n4. ANVL: Verify that the received <OSPF-LSU> packet contains a Network- LSA for network N1\n   originated by DUT, and the LS Sequence Number is set to <InitialSequenceNumber>.\n5. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-B on DIface-0 with DUT as DR.\n6. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n7. DUT: Send <OSPF-LSU> packet.\n8. ANVL: Verify that the received <OSPF-LSU> packet contains a new instance of the\n   Network-LSA for network N1 originated by DUT, and the LS Sequence Number\n   is set to (<InitialSequenceNumber> + 1).\n\nBoth the test cases were failing while verifying the initial sequence number for network LSA.\n\nThis is because currently OSPF does not reset its LSA sequence number when it is going down.\n\nSigned-off-by: Mobashshera Rasool <mrasool@vmware.com>\n(cherry picked from commit ca5997cd018ec66534285130d02de168a3a4ed5c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02b684b8f74d1f2e6f333c1b8ad70b8f6a8010b1", "commit_date": "2022-11-24T07:29:24Z", "commit_message": "lib: disable vrf before terminating interfaces\n\nWe must disable the vrf before we start terminating interfaces.\n\nOn termination, we free the 'zebra_if' struct from the interface ->info\npointer. We rely on that for subsystems like vxlan for cleanup when\nshutting down.\n\n'''\n==497406== Invalid read of size 8\n==497406==    at 0x47E70A: zebra_evpn_del (zebra_evpn.c:1103)\n==497406==    by 0x47F004: zebra_evpn_cleanup_all (zebra_evpn.c:1363)\n==497406==    by 0x4F2404: zebra_evpn_vxlan_cleanup_all (zebra_vxlan.c:1158)\n==497406==    by 0x4917041: hash_iterate (hash.c:267)\n==497406==    by 0x4F25E2: zebra_vxlan_cleanup_tables (zebra_vxlan.c:5676)\n==497406==    by 0x4D52EC: zebra_vrf_disable (zebra_vrf.c:209)\n==497406==    by 0x49A247F: vrf_disable (vrf.c:340)\n==497406==    by 0x49A2521: vrf_delete (vrf.c:245)\n==497406==    by 0x49A2E2B: vrf_terminate_single (vrf.c:533)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==  Address 0x6d68c68 is 200 bytes inside a block of size 272 free'd\n==497406==    at 0x48470E4: free (vg_replace_malloc.c:872)\n==497406==    by 0x4942CF0: qfree (memory.c:141)\n==497406==    by 0x49196A9: if_delete (if.c:293)\n==497406==    by 0x491C54C: if_terminate (if.c:1031)\n==497406==    by 0x49A2E22: vrf_terminate_single (vrf.c:532)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==    by 0x499A5F0: thread_fetch (thread.c:1775)\n==497406==    by 0x492850E: frr_run (libfrr.c:1197)\n==497406==    by 0x441746: main (main.c:476)\n==497406==  Block was alloc'd at\n==497406==    at 0x4849464: calloc (vg_replace_malloc.c:1328)\n==497406==    by 0x49429A5: qcalloc (memory.c:116)\n==497406==    by 0x491D971: if_new (if.c:174)\n==497406==    by 0x491ACC8: if_create_name (if.c:228)\n==497406==    by 0x491ABEB: if_get_by_name (if.c:613)\n==497406==    by 0x427052: netlink_interface (if_netlink.c:1178)\n==497406==    by 0x43BC18: netlink_parse_info (kernel_netlink.c:1188)\n==497406==    by 0x4266D7: interface_lookup_netlink (if_netlink.c:1288)\n==497406==    by 0x42B634: interface_list (if_netlink.c:2368)\n==497406==    by 0x4ABF83: zebra_ns_enable (zebra_ns.c:127)\n==497406==    by 0x4AC17E: zebra_ns_init (zebra_ns.c:216)\n==497406==    by 0x44166C: main (main.c:408)\n'''\n\nSigned-off-by: Stephen Worley <sworley@nvidia.com>\n(cherry picked from commit b14fa9c4dca1846d64ced5a9710faa1345da4ca0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a6176ac3a223f29ea6f40dedc186eb54da68c14", "commit_date": "2022-11-24T07:13:07Z", "commit_message": "Merge pull request #12381 from FRRouting/mergify/bp/stable/8.4/pr-12377\n\nzebra: Replace TC definitions for dplane (backport #12377)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e2017f84fd06dcfcb8dc2bcfe2085b4462809c", "commit_date": "2022-11-24T05:26:32Z", "commit_message": "Merge pull request #12378 from FRRouting/mergify/bp/stable/8.4/pr-12260\n\npimd: consistently ignore prefix list mask len (backport #12260)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ad1dca166d4640fe55ee6a685c7845d5bb941c5", "commit_date": "2022-11-23T20:54:21Z", "commit_message": "zebra: Replace TC definitions for dplane\n\nThey were replaced, but forgot for `--enable-scripting`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 2272627571681ba01585fc3f25a3ebfda1b7da30)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8766ccbf073303ef998a3355136a9f08420033b", "commit_date": "2022-11-23T18:15:12Z", "commit_message": "pimd: consistently ignore prefix list mask len\n\n... the prefix length wasn't ignored as expected.  Both S and G are\nalways /32.  But expecting \"le 32\" in prefix-list config is unexpected &\ncounterintuitive.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ab2f9e89b44642af568c3542e1f2b14378fb5ec2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56a3ac3b5d96e507340cee29467ebf28e868d081", "commit_date": "2022-11-22T16:31:01Z", "commit_message": "Merge pull request #12360 from FRRouting/mergify/bp/stable/8.4/pr-12347\n\nsnapcraft: Add pim6 daemon for PIM IPv6 to snap package (backport #12347)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e0a4cda6dd3832a587d10acf94650fec05fa3ba", "commit_date": "2022-11-21T18:55:59Z", "commit_message": "snapcraft: Add pim6 daemon for PIM IPv6 to snap package\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\n(cherry picked from commit feeaf30fde211fcff4231807fc9e52c4bbd3000e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70151e264bbb697a10fed711aa8c937d4f0009b1", "commit_date": "2022-11-18T05:31:08Z", "commit_message": "FRR Release 8.4.1\n\n- zebra: reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n- zebra: fix build without AF_MPLS\n- ospfd: get route-map name for default-information originate\n- ospfd: allow unnumbered and numbered addresses to co-exist better\n- ospfd: prevent from crashing when processing external lsa\n- bgpd: fix \"storing the address of local variable\"\n- bgpd: rpki was decrementing the node lock one time too many\n- bgpd: do not send Deconfig/Shutdown message when restarting\n- pimd: convert zlog_warn to debug\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b72cc20086bf75fa492e3de79facf3cac6d6aba", "commit_date": "2022-11-17T20:21:43Z", "commit_message": "Merge pull request #12332 from FRRouting/mergify/bp/stable/8.4/pr-12309\n\nbgpd: fix invalid ipv4-vpn nexthop for IPv6 peer (backport #12309)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8dff1be53318034b88a8bc1308d2f5eae985db7b", "commit_date": "2022-11-17T15:05:49Z", "commit_message": "bgpd: fix invalid ipv4-vpn nexthop for IPv6 peer\n\nGiven that two routers are connected each other and they have IPv6\naddresses and they establish BGP peer with extended-nexthop capability\nand one router tries to advertise locally-generated IPv4-VPN routes to\nother router.\n\nIn this situation, bgpd on the router that tries to advertise IPv4-VPN\nroutes will be crashed with \"invalid MP nexthop length (AFI IP6)\".\n\nThis issue is happened because MP_REACH_NLRI path attribute is not\ngenerated correctly when ipv4-vpn routes are advertised to IPv6 peer.\nWhen IPv4 routes are leaked from VRF RIB, the nexthop of these routes\nare also IPv4 address (0.0.0.0/0 or specific addresses). However,\nbgp_packet_mpattr_start only covers the case of IPv6 nexthop (for IPv6\npeer).\n\nipv4-unicast routes were not affected by this issue because the case of\nIPv4 nexthop is covered in `else` block.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 63e7ddb509435d9e178cf51a9a288273fb91bf7e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "daa21266dc5f4318d3e0fa6db9f401ff9619f48a", "commit_date": "2022-11-17T15:05:48Z", "commit_message": "tests: Add topotest for l3vpn over ipv6 peer\n\nTo check the effect of the next patch, I added topotest.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 3db8aa8750d1be675f6df1ed765afeb101b6402b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43b7aec4ef7dc476e027339a98f6844cdb0746b4", "commit_date": "2022-11-17T14:42:01Z", "commit_message": "Merge pull request #12331 from FRRouting/mergify/bp/stable/8.4/pr-12302\n\nisisd: fix area NULL pointer in isis_route_update (backport #12302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935c3f3930cdda66e72cb5518d0cce43d653082f", "commit_date": "2022-11-17T12:14:58Z", "commit_message": "Merge pull request #12330 from FRRouting/mergify/bp/stable/8.4/pr-12312\n\nbgpd: authorise to select bgp self peer prefix on rr case (backport #12312)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a07501ff1127f1726c9aadb17d8f3cd506521f8", "commit_date": "2022-11-17T11:26:22Z", "commit_message": "isisd: fix area NULL pointer in isis_route_update\n\nFix the case area is NULL.\n\nFixes: acc0029779 (\"isisd: fix potential access to NULL pointer in isis_route_update\")\nSigned-off-by: Louis Scalbert <louis.scalbert@6wind.com>\n(cherry picked from commit 41c2bf853f072008330a929480bf235ac840212a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56dd706e9b3a5eb790fa695e8f6f71e73b843aab", "commit_date": "2022-11-17T02:58:49Z", "commit_message": "bgpd: authorise to select bgp self peer prefix on rr case\n\nThis commit addresses an issue that happens when using bgp\npeering with a rr client, with a received prefix which is the\nlocal ip address of the bgp session.\n\nWhen using bgp ipv4 unicast session, the local prefix is\nreceived by a peer, and finds out that the proposed prefix\nand its next-hop are the same. To avoid a route loop locally,\nno nexthop entry is referenced for that prefix, and the route\nwill not be selected.\n\nWhen the received peer is a route reflector, the prefix has\nto be selected, even if the route can not be installed locally.\n\nFixes: (\"fb8ae704615c\") bgpd: prevent routes loop through itself\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit f874552557cf2577ae91b297f422e307084f22d3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23f40f230d1fe293eb519aafb0825444ea44f0e0", "commit_date": "2022-11-15T16:02:43Z", "commit_message": "Merge pull request #12320 from FRRouting/mergify/bp/stable/8.4/pr-12307\n\ntools: remove backslash from declare check regex (backport #12307)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "47c5955841fef46d921ff10b2d70691c2f439851", "commit_date": "2022-11-15T09:28:25Z", "commit_message": "Merge pull request #12319 from FRRouting/mergify/bp/stable/8.4/pr-12315\n\nDplane sorry (backport #12315)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677fefbf71907d0cad2a11f6cdf762678667a25", "commit_date": "2022-11-15T07:14:19Z", "commit_message": "tools: remove backslash from declare check regex\n\nThe backslash in `grep -q '^declare \\-a'` is not needed and\ncauses `grep: warning: stray \\ before -` warning in grep-3.8.\n\nSigned-off-by: Marius Tomaschewski <mt@suse.com>\n(cherry picked from commit 5216a05b32390a64efeb598051411e1776042624)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f97e6d92b33df5c1648382c73f2c6d64a1a0c275", "commit_date": "2022-11-15T07:12:23Z", "commit_message": "zebra: Fix dplane_fpm_nl to allow for fast configuration\n\nIf you have this order in your configuration file:\n\nno fpm use-next-hop-groups\nfpm address 127.0.0.1\n\nthe dplane code was using the same event thread t_event and the second\nadd event in the code was going, you already have an event scheduled\nand as such the second event does not overwrite it.  Leaving\nno code to actually start the whole processing.  There are probably\nother cli iterations that will cause this fun as well, but I'm\nnot going to spend the time sussing them out at the moment.\n\nFixes: #12314\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 551fa8c3549e24020dfce33d06ade4a14f72abfe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5a35dd3a499c59672656eb2429a85bb271b46fbd", "commit_date": "2022-11-15T07:12:22Z", "commit_message": "zebra: Use the enum, luke\n\nUse the enum and let the compiler help us figure out\nwhat cases are being missed.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dc31de93e1a79b4a138b474d3c4fdb44cdfee6f3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72e7872400817cb19b5b825cde70df50c6d2c86a", "commit_date": "2022-11-11T08:47:46Z", "commit_message": "Merge pull request #12305 from FRRouting/mergify/bp/stable/8.4/pr-12303\n\nzebra: relax if_type check to allow early ES config creation (backport #12303)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a87740235ec8b61d56c713c069d4485dc44529", "commit_date": "2022-11-11T06:15:27Z", "commit_message": "zebra: relax if_type check to allow early ES config creation\n\nThe API for configuring ES in zebra had a strict check for if_type\n\"isBond\" that prevented the ES config from being created before the\ninterface.\n\nTicket: CM-29454\n\nSigned-off-by: Anuradha Karuppiah <anuradhak@cumulusnetworks.com>\n(cherry picked from commit 3fa177eed287823bbe1d6c7bd9856d1d19435db3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c2f57d6bb20eae4a1ee78a0bde94b93bb4404a2", "commit_date": "2022-11-10T22:20:57Z", "commit_message": "Merge pull request #12304 from FRRouting/mergify/bp/stable/8.4/pr-12269\n\nospfd: prevent from crashing when processing external lsa (backport #12269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24da77c557d2678bca891310ca2e7d4b994349e2", "commit_date": "2022-11-10T19:21:36Z", "commit_message": "ospfd: prevent from crashing when processing external lsa\n\nWhen using debug mode, the ei parameter may be NULL. In that\ncase, do not display the log trace, otherwise a crash will\nhappen.\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit e5309c1a6e366f5dc95cbc3bbbe5c7ce1d46625c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b87dfd9eb7b87c8c16705c953c3ecf4e9680c533", "commit_date": "2022-11-10T04:55:42Z", "commit_message": "Merge pull request #12299 from FRRouting/mergify/bp/stable/8.4/pr-12297\n\npimd: Convert zlog_warn to debug (backport #12297)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0fe0a9b5afd02c8596e06e1f62098a89c192b8a", "commit_date": "2022-11-09T22:18:05Z", "commit_message": "pimd: Convert zlog_warn to debug\n\nThe unable to find a nexthop should not be a warning it should\nbe a debug.  Switching over.\n\nSigned-off-by: Donald Sharp <sharpd@cumulusnetworks.com>\n(cherry picked from commit 7d7206a534eec49b83ff0ef95fe1ba04e5507fc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0cb4f4db970f4cd79f89332bbdd40a7c074d08cd", "commit_date": "2022-11-09T14:46:50Z", "commit_message": "Merge pull request #12293 from donaldsharp/rpki_crash_to_8.4\n\nbgpd: rpki was decrementing the node lock one time too many", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fcbb9447c52e65faf887f2c55a55a0afec2c41c1", "commit_date": "2022-11-09T12:26:26Z", "commit_message": "bgpd: rpki was decrementing the node lock one time too many\n\nThe code was this:\n\n1)        match = bgp_table_subtree_lookup(rrp->bgp->rib[rrp->afi][rrp->safi],\n                                         &rrp->prefix);\n\n2)        node = match;\n\n        while (node) {\n                if (bgp_dest_has_bgp_path_info_data(node)) {\n                        revalidate_bgp_node(node, rrp->afi, rrp->safi);\n                }\n\n3)               node = bgp_route_next_until(node, match);\n        }\n\n\tif (match)\n4)              bgp_dest_unlock_node(match);\n\nAt 1) match was locked and became +1\nAt 2) match and node are now equal\nAt 3) On first iteration, match is decremented( as that node points\nat it ) and the next item is locked, if it is found, and returned which becomes node\n\nIf 3 is run again because node is non-null then, current node is decremented\nand the next node found is incremented and returned which becomes node again.\n\nSo if we get to 4) match is unlocked again which is now a double unlock\nwhich, frankly, is not good.  In all code paths that I can see the\ntest for `if (match) ...` is not needed so let's just remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "36c54fce566f1eaeeb61a2170f22e3b459cc8ef8", "commit_date": "2022-11-09T09:20:28Z", "commit_message": "Merge pull request #12290 from FRRouting/mergify/bp/stable/8.4/pr-12286\n\nzebra/netconf_netlink.c: fix build without AF_MPLS (backport #12286)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eed83c07cc2c08d1b7eb33effa396d4732b20dc1", "commit_date": "2022-11-09T05:25:17Z", "commit_message": "zebra/netconf_netlink.c: fix build without AF_MPLS\n\nFix the following build failure raised since version 8.4 and\nhttps://github.com/FRRouting/frr/commit/d53dc9bd8164ba40242e2013d382fb01eb0b96ed:\n\nzebra/netconf_netlink.c: In function 'netlink_netconf_change':\nzebra/netconf_netlink.c:109:32: error: 'AF_MPLS' undeclared (first use in this function)\n  109 |         if (ncm->ncm_family == AF_MPLS)\n      |                                ^~~~~~~\n\nSigned-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>\n(cherry picked from commit fa60f2c2fac9ff6d71e8bddab92f78a6d558035b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf74460ce359c430ac1368bc54e46e2258e733d2", "commit_date": "2022-11-08T19:24:53Z", "commit_message": "Merge pull request #12285 from FRRouting/mergify/bp/stable/8.4/pr-12258\n\nbgpd: fix \"storing the address of local variable\" (backport #12258)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "rc/8.4.1": [{"commit_oid": "70151e264bbb697a10fed711aa8c937d4f0009b1", "commit_date": "2022-11-18T05:31:08Z", "commit_message": "FRR Release 8.4.1\n\n- zebra: reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n- zebra: fix build without AF_MPLS\n- ospfd: get route-map name for default-information originate\n- ospfd: allow unnumbered and numbered addresses to co-exist better\n- ospfd: prevent from crashing when processing external lsa\n- bgpd: fix \"storing the address of local variable\"\n- bgpd: rpki was decrementing the node lock one time too many\n- bgpd: do not send Deconfig/Shutdown message when restarting\n- pimd: convert zlog_warn to debug\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b72cc20086bf75fa492e3de79facf3cac6d6aba", "commit_date": "2022-11-17T20:21:43Z", "commit_message": "Merge pull request #12332 from FRRouting/mergify/bp/stable/8.4/pr-12309\n\nbgpd: fix invalid ipv4-vpn nexthop for IPv6 peer (backport #12309)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8dff1be53318034b88a8bc1308d2f5eae985db7b", "commit_date": "2022-11-17T15:05:49Z", "commit_message": "bgpd: fix invalid ipv4-vpn nexthop for IPv6 peer\n\nGiven that two routers are connected each other and they have IPv6\naddresses and they establish BGP peer with extended-nexthop capability\nand one router tries to advertise locally-generated IPv4-VPN routes to\nother router.\n\nIn this situation, bgpd on the router that tries to advertise IPv4-VPN\nroutes will be crashed with \"invalid MP nexthop length (AFI IP6)\".\n\nThis issue is happened because MP_REACH_NLRI path attribute is not\ngenerated correctly when ipv4-vpn routes are advertised to IPv6 peer.\nWhen IPv4 routes are leaked from VRF RIB, the nexthop of these routes\nare also IPv4 address (0.0.0.0/0 or specific addresses). However,\nbgp_packet_mpattr_start only covers the case of IPv6 nexthop (for IPv6\npeer).\n\nipv4-unicast routes were not affected by this issue because the case of\nIPv4 nexthop is covered in `else` block.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 63e7ddb509435d9e178cf51a9a288273fb91bf7e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "daa21266dc5f4318d3e0fa6db9f401ff9619f48a", "commit_date": "2022-11-17T15:05:48Z", "commit_message": "tests: Add topotest for l3vpn over ipv6 peer\n\nTo check the effect of the next patch, I added topotest.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 3db8aa8750d1be675f6df1ed765afeb101b6402b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43b7aec4ef7dc476e027339a98f6844cdb0746b4", "commit_date": "2022-11-17T14:42:01Z", "commit_message": "Merge pull request #12331 from FRRouting/mergify/bp/stable/8.4/pr-12302\n\nisisd: fix area NULL pointer in isis_route_update (backport #12302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935c3f3930cdda66e72cb5518d0cce43d653082f", "commit_date": "2022-11-17T12:14:58Z", "commit_message": "Merge pull request #12330 from FRRouting/mergify/bp/stable/8.4/pr-12312\n\nbgpd: authorise to select bgp self peer prefix on rr case (backport #12312)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a07501ff1127f1726c9aadb17d8f3cd506521f8", "commit_date": "2022-11-17T11:26:22Z", "commit_message": "isisd: fix area NULL pointer in isis_route_update\n\nFix the case area is NULL.\n\nFixes: acc0029779 (\"isisd: fix potential access to NULL pointer in isis_route_update\")\nSigned-off-by: Louis Scalbert <louis.scalbert@6wind.com>\n(cherry picked from commit 41c2bf853f072008330a929480bf235ac840212a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56dd706e9b3a5eb790fa695e8f6f71e73b843aab", "commit_date": "2022-11-17T02:58:49Z", "commit_message": "bgpd: authorise to select bgp self peer prefix on rr case\n\nThis commit addresses an issue that happens when using bgp\npeering with a rr client, with a received prefix which is the\nlocal ip address of the bgp session.\n\nWhen using bgp ipv4 unicast session, the local prefix is\nreceived by a peer, and finds out that the proposed prefix\nand its next-hop are the same. To avoid a route loop locally,\nno nexthop entry is referenced for that prefix, and the route\nwill not be selected.\n\nWhen the received peer is a route reflector, the prefix has\nto be selected, even if the route can not be installed locally.\n\nFixes: (\"fb8ae704615c\") bgpd: prevent routes loop through itself\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit f874552557cf2577ae91b297f422e307084f22d3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23f40f230d1fe293eb519aafb0825444ea44f0e0", "commit_date": "2022-11-15T16:02:43Z", "commit_message": "Merge pull request #12320 from FRRouting/mergify/bp/stable/8.4/pr-12307\n\ntools: remove backslash from declare check regex (backport #12307)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "47c5955841fef46d921ff10b2d70691c2f439851", "commit_date": "2022-11-15T09:28:25Z", "commit_message": "Merge pull request #12319 from FRRouting/mergify/bp/stable/8.4/pr-12315\n\nDplane sorry (backport #12315)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677fefbf71907d0cad2a11f6cdf762678667a25", "commit_date": "2022-11-15T07:14:19Z", "commit_message": "tools: remove backslash from declare check regex\n\nThe backslash in `grep -q '^declare \\-a'` is not needed and\ncauses `grep: warning: stray \\ before -` warning in grep-3.8.\n\nSigned-off-by: Marius Tomaschewski <mt@suse.com>\n(cherry picked from commit 5216a05b32390a64efeb598051411e1776042624)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f97e6d92b33df5c1648382c73f2c6d64a1a0c275", "commit_date": "2022-11-15T07:12:23Z", "commit_message": "zebra: Fix dplane_fpm_nl to allow for fast configuration\n\nIf you have this order in your configuration file:\n\nno fpm use-next-hop-groups\nfpm address 127.0.0.1\n\nthe dplane code was using the same event thread t_event and the second\nadd event in the code was going, you already have an event scheduled\nand as such the second event does not overwrite it.  Leaving\nno code to actually start the whole processing.  There are probably\nother cli iterations that will cause this fun as well, but I'm\nnot going to spend the time sussing them out at the moment.\n\nFixes: #12314\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 551fa8c3549e24020dfce33d06ade4a14f72abfe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5a35dd3a499c59672656eb2429a85bb271b46fbd", "commit_date": "2022-11-15T07:12:22Z", "commit_message": "zebra: Use the enum, luke\n\nUse the enum and let the compiler help us figure out\nwhat cases are being missed.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dc31de93e1a79b4a138b474d3c4fdb44cdfee6f3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72e7872400817cb19b5b825cde70df50c6d2c86a", "commit_date": "2022-11-11T08:47:46Z", "commit_message": "Merge pull request #12305 from FRRouting/mergify/bp/stable/8.4/pr-12303\n\nzebra: relax if_type check to allow early ES config creation (backport #12303)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a87740235ec8b61d56c713c069d4485dc44529", "commit_date": "2022-11-11T06:15:27Z", "commit_message": "zebra: relax if_type check to allow early ES config creation\n\nThe API for configuring ES in zebra had a strict check for if_type\n\"isBond\" that prevented the ES config from being created before the\ninterface.\n\nTicket: CM-29454\n\nSigned-off-by: Anuradha Karuppiah <anuradhak@cumulusnetworks.com>\n(cherry picked from commit 3fa177eed287823bbe1d6c7bd9856d1d19435db3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c2f57d6bb20eae4a1ee78a0bde94b93bb4404a2", "commit_date": "2022-11-10T22:20:57Z", "commit_message": "Merge pull request #12304 from FRRouting/mergify/bp/stable/8.4/pr-12269\n\nospfd: prevent from crashing when processing external lsa (backport #12269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24da77c557d2678bca891310ca2e7d4b994349e2", "commit_date": "2022-11-10T19:21:36Z", "commit_message": "ospfd: prevent from crashing when processing external lsa\n\nWhen using debug mode, the ei parameter may be NULL. In that\ncase, do not display the log trace, otherwise a crash will\nhappen.\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit e5309c1a6e366f5dc95cbc3bbbe5c7ce1d46625c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b87dfd9eb7b87c8c16705c953c3ecf4e9680c533", "commit_date": "2022-11-10T04:55:42Z", "commit_message": "Merge pull request #12299 from FRRouting/mergify/bp/stable/8.4/pr-12297\n\npimd: Convert zlog_warn to debug (backport #12297)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0fe0a9b5afd02c8596e06e1f62098a89c192b8a", "commit_date": "2022-11-09T22:18:05Z", "commit_message": "pimd: Convert zlog_warn to debug\n\nThe unable to find a nexthop should not be a warning it should\nbe a debug.  Switching over.\n\nSigned-off-by: Donald Sharp <sharpd@cumulusnetworks.com>\n(cherry picked from commit 7d7206a534eec49b83ff0ef95fe1ba04e5507fc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0cb4f4db970f4cd79f89332bbdd40a7c074d08cd", "commit_date": "2022-11-09T14:46:50Z", "commit_message": "Merge pull request #12293 from donaldsharp/rpki_crash_to_8.4\n\nbgpd: rpki was decrementing the node lock one time too many", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fcbb9447c52e65faf887f2c55a55a0afec2c41c1", "commit_date": "2022-11-09T12:26:26Z", "commit_message": "bgpd: rpki was decrementing the node lock one time too many\n\nThe code was this:\n\n1)        match = bgp_table_subtree_lookup(rrp->bgp->rib[rrp->afi][rrp->safi],\n                                         &rrp->prefix);\n\n2)        node = match;\n\n        while (node) {\n                if (bgp_dest_has_bgp_path_info_data(node)) {\n                        revalidate_bgp_node(node, rrp->afi, rrp->safi);\n                }\n\n3)               node = bgp_route_next_until(node, match);\n        }\n\n\tif (match)\n4)              bgp_dest_unlock_node(match);\n\nAt 1) match was locked and became +1\nAt 2) match and node are now equal\nAt 3) On first iteration, match is decremented( as that node points\nat it ) and the next item is locked, if it is found, and returned which becomes node\n\nIf 3 is run again because node is non-null then, current node is decremented\nand the next node found is incremented and returned which becomes node again.\n\nSo if we get to 4) match is unlocked again which is now a double unlock\nwhich, frankly, is not good.  In all code paths that I can see the\ntest for `if (match) ...` is not needed so let's just remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "36c54fce566f1eaeeb61a2170f22e3b459cc8ef8", "commit_date": "2022-11-09T09:20:28Z", "commit_message": "Merge pull request #12290 from FRRouting/mergify/bp/stable/8.4/pr-12286\n\nzebra/netconf_netlink.c: fix build without AF_MPLS (backport #12286)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eed83c07cc2c08d1b7eb33effa396d4732b20dc1", "commit_date": "2022-11-09T05:25:17Z", "commit_message": "zebra/netconf_netlink.c: fix build without AF_MPLS\n\nFix the following build failure raised since version 8.4 and\nhttps://github.com/FRRouting/frr/commit/d53dc9bd8164ba40242e2013d382fb01eb0b96ed:\n\nzebra/netconf_netlink.c: In function 'netlink_netconf_change':\nzebra/netconf_netlink.c:109:32: error: 'AF_MPLS' undeclared (first use in this function)\n  109 |         if (ncm->ncm_family == AF_MPLS)\n      |                                ^~~~~~~\n\nSigned-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>\n(cherry picked from commit fa60f2c2fac9ff6d71e8bddab92f78a6d558035b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf74460ce359c430ac1368bc54e46e2258e733d2", "commit_date": "2022-11-08T19:24:53Z", "commit_message": "Merge pull request #12285 from FRRouting/mergify/bp/stable/8.4/pr-12258\n\nbgpd: fix \"storing the address of local variable\" (backport #12258)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "stable/8.4": [{"commit_oid": "178a1cb9823bb2bcaf1a301e5a97304bc314aae4", "commit_date": "2023-08-31T16:58:58Z", "commit_message": "Merge pull request #14319 from opensourcerouting/fix/backport_530be6a4d089600f1028439ddec420ef651b983b_8.4\n\nospfd: Prevent use after free( and crash of ospf ) when no router ospf", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f0698dda58482719d207336cb7092388589e8fa", "commit_date": "2023-08-31T06:59:24Z", "commit_message": "ospfd: Prevent use after free( and crash of ospf ) when no router ospf\n\nConsider this config:\n\nrouter ospf\n  redistribute kernel\n\nThen you issue:\n\nno router ospf\n\nospf will crash with a use after free.\n\nThe problem is that the event's associated with the\nospf pointer were shut off then the ospf_external_delete\nwas called which rescheduled the event.  Let's just move\nevent deletion to the end of the no router ospf.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76e43eab2f82d24c398d5ba545892c6ce97def87", "commit_date": "2023-08-30T13:21:23Z", "commit_message": "Merge pull request #14295 from FRRouting/mergify/bp/stable/8.4/pr-14290\n\nbgpd: Use treat-as-withdraw for tunnel encapsulation attribute (backport #14290)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b7880156056bdd85d47b7120ce8739a94a19fb68", "commit_date": "2023-08-30T08:33:01Z", "commit_message": "Merge pull request #14298 from FRRouting/mergify/bp/stable/8.4/pr-14243\n\nbgpd: Do not explicitly print MAXTTL value for ebgp-multihop vty output (backport #14243)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5f877bb51d44ba56dcbb5067ee9eedae27591a7c", "commit_date": "2023-08-30T03:26:58Z", "commit_message": "bgpd: Do not explicitly print MAXTTL value for ebgp-multihop vty output\n\n1. Create /etc/frr/frr.conf\n```\nfrr version 7.5\nfrr defaults traditional\nhostname centos8.localdomain\nno ip forwarding\nno ipv6 forwarding\nservice integrated-vtysh-config\nline vty\nrouter bgp 4250001000\n  neighbor 192.168.122.207 remote-as 65512\n  neighbor 192.168.122.207 ebgp-multihop\n```\n\n2. Start FRR\n`# systemctl start frr\n`\n3. Show running configuration. Note that FRR explicitly set and shows the default TTL (225)\n\n```\nBuilding configuration...\n\nCurrent configuration:\n!\nfrr version 7.5\nfrr defaults traditional\nhostname centos8.localdomain\nno ip forwarding\nno ipv6 forwarding\nservice integrated-vtysh-config\n!\nrouter bgp 4250001000\n neighbor 192.168.122.207 remote-as 65512\n neighbor 192.168.122.207 ebgp-multihop 255\n!\nline vty\n!\nend\n```\n4. Copy initial frr.conf to frr.conf.new (no changes)\n`# cp /etc/frr/frr.conf /root/frr.conf.new\n`\n5. Run frr-reload.sh:\n\n```\n$ /usr/lib/frr/frr-reload.py --test  /root/frr.conf.new\n2023-08-20 20:15:48,050  INFO: Called via \"Namespace(bindir='/usr/bin', confdir='/etc/frr', daemon='', debug=False, filename='/root/frr.conf.new', input=None, log_level='info', overwrite=False, pathspace=None, reload=False, rundir='/var/run/frr', stdout=False, test=True, vty_socket=None)\"\n2023-08-20 20:15:48,050  INFO: Loading Config object from file /root/frr.conf.new\n2023-08-20 20:15:48,124  INFO: Loading Config object from vtysh show running\n\nLines To Delete\n===============\nrouter bgp 4250001000\n no neighbor 192.168.122.207 ebgp-multihop 255\n\nLines To Add\n============\nrouter bgp 4250001000\n neighbor 192.168.122.207 ebgp-multihop\n```\n\nCloses https://github.com/FRRouting/frr/issues/14242\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 767aaa3a80489bfc4ff097f932fc347e3db25b89)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "46817adab03802355c3cce7b753c7a735bdcc5ae", "commit_date": "2023-08-29T23:53:03Z", "commit_message": "bgpd: Use treat-as-withdraw for tunnel encapsulation attribute\n\nBefore this path we used session reset method, which is discouraged by rfc7606.\n\nHandle this as rfc requires.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bcb6b58d9530173df41d3a3cbc4c600ee0b4b186)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "753f65b5089e1409a9a25f126e28801ead04bb92", "commit_date": "2023-08-16T13:25:00Z", "commit_message": "Merge pull request #14212 from opensourcerouting/fix/backport_fedf9119a1964abf8e476f239d81b3f4ce385b1d_8.4\n\nlib: Allow unsetting walltime-warning and cpu-warning", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "51c70bc03225f2ef4eaa14bc4041819f3aac7dd4", "commit_date": "2023-08-16T04:31:00Z", "commit_message": "vtysh: Print uniq lines when parsing `no service ...`\n\nBefore this patch:\n\n```\nno service cputime-warning\nno service cputime-warning\nno ipv6 forwarding\nno service cputime-warning\nno service cputime-warning\nno service cputime-warning\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "021aa58871a90d5795fd4c8108cb4567fe06f77f", "commit_date": "2023-08-16T04:29:46Z", "commit_message": "lib: Allow unsetting walltime-warning and cpu-warning\n\nWith a negative form we get:\n\n```\nInternal CLI error [walltime_warning_str]\nInternal CLI error [cputime_warning_str]\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f106ffa08ad582d43f1bfac969a83903b5b50ef2", "commit_date": "2023-08-12T18:02:54Z", "commit_message": "Merge pull request #14191 from FRRouting/mergify/bp/stable/8.4/pr-14182\n\nbgpd: evpn code was not properly unlocking rd_dest (backport #14182)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b7c5e5e3defcffa6c5e8dafa2657d0bca2adfcc", "commit_date": "2023-08-12T00:53:41Z", "commit_message": "bgpd: evpn code was not properly unlocking rd_dest\n\nFound some code where bgp was not unlocking the dest\nand rd_dest when walking the tree attempting to\nfind something to install.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1e8ac95bfb757b85d02514dd0f708974cdc22899)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "11d0164a0e4e92ef52e9219cf7d8d3b19331a0d2", "commit_date": "2023-08-12T00:48:37Z", "commit_message": "Merge pull request #14185 from FRRouting/mergify/bp/stable/8.4/pr-12524\n\nlib, zebra: Fix EVPN nexthop config order (backport #12524)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e4351d3b162832b77cb41840565a85da80dd218", "commit_date": "2023-08-11T15:39:43Z", "commit_message": "lib, zebra: Fix EVPN nexthop config order\n\nDelay EVPN route addition to synchronize with rib_delete(), which now\nuses early route queue.\n\nSigned-off-by: Xiao Liang <shaw.leon@gmail.com>\n(cherry picked from commit cea3f7f25a23e485d4f814b670c11c92249568e1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1539b571496129712ab88d99c7d74ff21520d87e", "commit_date": "2023-08-03T19:36:29Z", "commit_message": "Merge pull request #14134 from FRRouting/mergify/bp/stable/8.4/pr-14129\n\nbgpd: Fix for session reset issue caused by malformed core attributes  in update message (backport #14129)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "188fc62333cf975c6cf4e0e70ad44246103733d7", "commit_date": "2023-08-02T17:49:02Z", "commit_message": "bgpd: Fix session reset issue caused by malformed core attributes\n\nRCA:\nOn encountering any attribute error for core attributes in update message,\nthe error handling is set to 'treat as withdraw' and\nfurther parsing of the remaining attributes is skipped.\nBut the stream pointer is not being correctly adjusted to\npoint to the next NLRI field skipping the rest of the attributes.\nThis leads to incorrect parsing of the NLRI field,\nwhich causes BGP session to reset.\n\nFix:\nThe stream pointer offset is rightly adjusted to point to the NLRI field correctly\nwhen the malformed attribute is encountered and remaining attribute parsing is skipped.\n\nSigned-off-by: Samanvitha B Bhargav <bsamanvitha@vmware.com>\n(cherry picked from commit 70ff940fd1cbf920958116c558150ca5d3200eb8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6056702fba8dd47768603dbb061e6be8a1247e0a", "commit_date": "2023-07-11T15:27:31Z", "commit_message": "Merge pull request #13957 from opensourcerouting/fix/route_map_cli_8.4\n\nlib: make cmd_element->attr a bitmask & clarify", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5371bbf321841acf7a0b5531e738a28e51cba845", "commit_date": "2023-07-08T07:58:42Z", "commit_message": "lib: make cmd_element->attr a bitmask & clarify\n\nIt already \"looks\" like a bitmask, but we currently can't flag a command\nboth YANG and HIDDEN at the same time.  It really should be a bitmask.\n\nAlso clarify DEPRECATED behaviour (or the absence thereof.)\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7c95fd50c6b2bb600d6a4a8a6ab6216111d18ca9", "commit_date": "2023-07-03T12:34:34Z", "commit_message": "Merge pull request #13914 from opensourcerouting/fix/ospf6d_backports_8.4\n\nospf6d: Crash backports", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4594eecd22774481f61aac8201755c4a3c58bbe0", "commit_date": "2023-07-03T07:49:58Z", "commit_message": "Merge pull request #13906 from FRRouting/mergify/bp/stable/8.4/pr-13895\n\nospfd: check for NULLs in ldp-igp sync json code (backport #13895)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f403d3a7b384f8996f863d6828342c62b92903d8", "commit_date": "2023-07-03T06:41:34Z", "commit_message": "ospf6d: Fix crash because neighbor structure was freed\n\nThe loading_done event needs a event pointer to prevent\nuse after free's.  Testing found this:\n\n    ERROR: AddressSanitizer: heap-use-after-free on address 0x613000035130 at pc 0x55ad42d54e5f bp 0x7ffff1e942a0 sp 0x7ffff1e94290\n    READ of size 1 at 0x613000035130 thread T0\n        #0 0x55ad42d54e5e in loading_done ospf6d/ospf6_neighbor.c:447\n        #1 0x55ad42ed7be4 in event_call lib/event.c:1995\n        #2 0x55ad42e1df75 in frr_run lib/libfrr.c:1213\n        #3 0x55ad42cf332e in main ospf6d/ospf6_main.c:250\n        #4 0x7f5798133c86 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21c86)\n        #5 0x55ad42cf2b19 in _start (/usr/lib/frr/ospf6d+0x248b19)\n\n    0x613000035130 is located 48 bytes inside of 384-byte region [0x613000035100,0x613000035280)\n    freed by thread T0 here:\n        #0 0x7f57998d77a8 in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xde7a8)\n        #1 0x55ad42e3b4b6 in qfree lib/memory.c:130\n        #2 0x55ad42d5d049 in ospf6_neighbor_delete ospf6d/ospf6_neighbor.c:180\n        #3 0x55ad42d1e1ea in interface_down ospf6d/ospf6_interface.c:930\n        #4 0x55ad42ed7be4 in event_call lib/event.c:1995\n        #5 0x55ad42ed84fe in _event_execute lib/event.c:2086\n        #6 0x55ad42d26d7b in ospf6_interface_clear ospf6d/ospf6_interface.c:2847\n        #7 0x55ad42d73f16 in ospf6_process_reset ospf6d/ospf6_top.c:755\n        #8 0x55ad42d7e98c in clear_router_ospf6_magic ospf6d/ospf6_top.c:778\n        #9 0x55ad42d7e98c in clear_router_ospf6 ospf6d/ospf6_top_clippy.c:42\n        #10 0x55ad42dc2665 in cmd_execute_command_real lib/command.c:994\n        #11 0x55ad42dc2b32 in cmd_execute_command lib/command.c:1053\n        #12 0x55ad42dc2fa9 in cmd_execute lib/command.c:1221\n        #13 0x55ad42ee3cd6 in vty_command lib/vty.c:591\n        #14 0x55ad42ee4170 in vty_execute lib/vty.c:1354\n        #15 0x55ad42eec94f in vtysh_read lib/vty.c:2362\n        #16 0x55ad42ed7be4 in event_call lib/event.c:1995\n        #17 0x55ad42e1df75 in frr_run lib/libfrr.c:1213\n        #18 0x55ad42cf332e in main ospf6d/ospf6_main.c:250\n        #19 0x7f5798133c86 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21c86)\n\n    previously allocated by thread T0 here:\n        #0 0x7f57998d7d28 in __interceptor_calloc (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xded28)\n        #1 0x55ad42e3ab22 in qcalloc lib/memory.c:105\n        #2 0x55ad42d5c8ff in ospf6_neighbor_create ospf6d/ospf6_neighbor.c:119\n        #3 0x55ad42d4c86a in ospf6_hello_recv ospf6d/ospf6_message.c:464\n        #4 0x55ad42d4c86a in ospf6_read_helper ospf6d/ospf6_message.c:1884\n        #5 0x55ad42d4c86a in ospf6_receive ospf6d/ospf6_message.c:1925\n        #6 0x55ad42ed7be4 in event_call lib/event.c:1995\n        #7 0x55ad42e1df75 in frr_run lib/libfrr.c:1213\n        #8 0x55ad42cf332e in main ospf6d/ospf6_main.c:250\n        #9 0x7f5798133c86 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21c86)\n\nAdd an actual event pointer and just track it appropriately.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ea97713c66d134a39f95d1e0e4597558fc15a5b", "commit_date": "2023-07-03T06:40:14Z", "commit_message": "ospf6d: Stop crash in ospf6_write\n\nI'm seeing crashes in ospf6_write on the `assert(node)`.  The only\nsequence of events that I see that could possibly cause this to happen\nis this:\n\na) Someone has scheduled a outgoing write to the ospf6->t_write and\nplaced item(s) on the ospf6->oi_write_q\nb) A decision is made in ospf6_send_lsupdate() to send an immediate\npacket via a event_execute(..., ospf6_write,....).\nc) ospf6_write is called and the oi_write_q is cleaned out.\nd) the t_write event is now popped and the oi_write_q is empty\nand FRR asserts on the `assert(node)` <crash>\n\nWhen event_execute is called for ospf6_write, just cancel the t_write\nevent.  If ospf6_write has more data to send at the end of the function\nit will reschedule itself.  I've only seen this crash one time and am\nunable to reliably reproduce this at all.  But this is the only mechanism\nthat I can see that could make this happen, given how little the oi_write_q\nis actually touched in code.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24dfbd39512cd031792f0743f2cfccc3bf9606c0", "commit_date": "2023-07-02T19:40:57Z", "commit_message": "ospfd: check for NULLs in vty code\n\nThere were a couple of cli paths that NULL-checked in the\nvtysh output path, but not in the json path.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit 864a3bc1855ec8027fec8d6f400adb44e1ecbfcf)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "68cfb9748f10ae109074d1ae041ee4640f0ef47d", "commit_date": "2023-06-20T18:22:54Z", "commit_message": "Merge pull request #13820 from FRRouting/mergify/bp/stable/8.4/pr-13800\n\nfix crashes in rip and ripng (backport #13800)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2989b573c5134234abf274ccd0289db42e0a024f", "commit_date": "2023-06-20T14:41:33Z", "commit_message": "Revert \"ripngd: Cleanup memory allocations on shutdown\"\n\nThis reverts commit b1d29673ca16e558aea5d632da181555c83980cf.\n\nThis commit introduced a crash. When the VRF is deleted, the RIPNG\ninstance should not be freed, because the NB infrastructure still stores\nthe pointer to it. The instance should be deleted only when it's actually\ndeleted from the configuration.\n\nTo reproduce the crash:\n```\nfrr# conf t\nfrr(config)# vrf vrf1\nfrr(config-vrf)# exit\nfrr(config)# router ripng vrf vrf1\nfrr(config-router)# exit\nfrr(config)# no vrf vrf1\nfrr(config)# no router ripng vrf vrf1\nvtysh: error reading from ripngd: Resource temporarily unavailable (11)Warning: closing connection to ripngd because of an I/O error!\nfrr(config)#\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit 9f6dade90e5e4686f67ae17b42c2873ec7ca6532)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de1fae613822af18a27b1cd01769666fb17a5816", "commit_date": "2023-06-20T14:41:33Z", "commit_message": "Revert \"ripd: Cleanup memory allocations on shutdown\"\n\nThis reverts commit 3d1588d8ed537e3dbf120e1b2a5ad5b3c00c7897.\n\nThis commit introduced a crash. When the VRF is deleted, the RIP instance\nshould not be freed, because the NB infrastructure still stores the\npointer to it. The instance should be deleted only when it's actually\ndeleted from the configuration.\n\nTo reproduce the crash:\n```\nfrr# conf t\nfrr(config)# vrf vrf1\nfrr(config-vrf)# exit\nfrr(config)# router rip vrf vrf1\nfrr(config-router)# exit\nfrr(config)# no vrf vrf1\nfrr(config)# no router rip vrf vrf1\nvtysh: error reading from ripd: Resource temporarily unavailable (11)Warning: closing connection to ripd because of an I/O error!\nfrr(config)#\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit 054ca9b9ee760e23ac5d9f8d26d50e8fca78a887)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "45e36c0c00a517ad1606135b18c5753e210cfc0d", "commit_date": "2023-06-16T04:41:18Z", "commit_message": "FRR Release 8.4.4\n\n    This a convenience release/tag for house keeping. We currently don't plan to publish\n    binary packages with this release.\n\n    Changelog:\n\nbfdd\n    Fix malformed session with vrf\n    Remove redundant nb destroy callbacks\n\nbgpd\n    Aggregate-address memory leak fix\n    Bmp fix peer-up ports byte order\n    Check 7 bytes for long-lived graceful-restart capability\n    Conform bgp_packet.h with coding standards\n    Copy the password from the previous peer on peer_xfer_config()\n    Do not allow a `no router bgp xxx` when autoimport is happening\n    Do not allow l3vni changes when shutting down\n    Do not announce routes immediatelly on filter updates\n    Ensure stream received has enough data\n    Fix bgpd core when unintern attr\n    Fix crash for `show bgp ... neighbor received-routes detail|prefix`\n    Fix debug output for route-map names when using a unsuppress-map\n    Fix ecommunity parsing for as4\n    Fix for ain->attr corruption during path update\n    Fix lcom->str string length to correctly cover aliases\n    Increase buffer size used for dumping bgp to mrt files\n    Limit flowspec to no attribute means a implicit withdrawal\n    Make bgp_keepalives.c not use mtype_tmp\n    Prevent null pointer deref when outputting data\n    Treat withdraw variable as a bool\n    Use interface name instead of pointer value\n    Use the actual pointer type instead of a void\n\nlib\n    Adjust only `any` flag for prefix-list entries if destroying\n    Destroy `any` flag when creating a prefix-list entry with prefix\n    Fix link state memory leak\n    Fix vtysh core when handling questionmark\n    On bfd peer shutdown actually stop event\n\nospf6d\n    Stop using mtype_tmp in some cases\n\nospfd, ospf6d\n    Add more logging details\n\nospfd, ospfclient\n    Do not just include .c files in another .c\n\nospfd\n    Cleanup some memory leaks on shutdown in ospf_apiserver.c\n    Fix for vitual-link crash in signal handler\n    Fix interface param type update\n    Fix memory leaks w/ `show ip ospf int x json` commands\n    Fix ospf_lsa memory leak\n    Fix ospf_ti_lfa drop of an entire table\n    Fixing summary origination after range configuration\n    Free up q_space in early return path\n    Log adjacency changes with neighbor ip in addition to neighbor id\n    Ospf opaque lsa stale processing fix and topotests.\n    Remove mtype_tmp\n    Respect loopback's cost that is set and set loopback costs to 0\n\npbrd\n    Fix mismatching in match src-dst\n\npimd\n    Fix use after free issue for ifp's moving vrfs\n    Pim not sending register packets after changing from non dr to dr\n    Process no-forward bsm packet\n\nripd\n    Fix memory leak for ripd's route-map\n\ntests\n    Add test to validate 4-byte ecomm parsing\n    Check if prefix-lists with ipv6 any works fine\n    Check if route-map works correctly if modifying prefix-lists\n\ntools\n    Fix list value remove in frr-reload\n    Fix missing remote-as configuration when reload\n    Make check flag really work for reload\n\nvtysh\n    Give actual pam error messages\n\nzebra\n    Cleanup ctx leak on shutdown and turn off event\n    Evpn handle del event for dup detected mac\n    Fix evpn dup detected local mac del event\n    Fix for heap-use-after-free in evpn\n    Fix race during shutdown\n    Install directly connected route after interface flap\n    Reduce creation and fix memory leak of frrscripting pointers\n    Unlock the route node when sending route notifications\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7be8757b855a4abcda22a70f54d87cf44bef27ef", "commit_date": "2023-06-13T19:08:00Z", "commit_message": "Merge pull request #13782 from FRRouting/mergify/bp/stable/8.4/pr-12454\n\nbgpd: Ensure stream received has enough data (backport #12454)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f61f92105288a9ddb349f27a3edf9d6594dd03c", "commit_date": "2023-06-13T19:06:11Z", "commit_message": "Merge pull request #13785 from FRRouting/mergify/bp/stable/8.4/pr-13612\n\nospfd: fix interface param type update (backport #13612)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9da5c285de38fe11ebf96f01df0d4fa8079e8ad6", "commit_date": "2023-06-13T13:55:51Z", "commit_message": "ospfd: fix interface param type update\n\ninterface link update event needs\nto be handle properly in ospf interface\ncache.\n\nExample:\nWhen vrf (interface) is created its default type\nwould be set to BROADCAST because ifp->status\nis not set to VRF.\nSubsequent link event sets ifp->status to vrf,\nospf interface update need to compare current type\nto new default type which would be VRF (OSPF_IFTYPE_LOOPBACK).\nSince ospf type param was created in first add event,\nifp vrf link event didn't update ospf type param which\nleads to treat vrf as non loopback interface.\n\nTicket:#3459451\nTesting Done:\n\nRunning config suppose to bypass rendering default\nnetwork broadcast for loopback/vrf types.\n\nBefore fix:\n\nvrf vrf1\n vni 4001\nexit-vrf\n!\ninterface vrf1\n ip ospf network broadcast\nexit\n\nAfter fix: (interface vrf1 is not displayed).\n\nvrf vrf1\n vni 4001\nexit-vrf\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 0d005b2d5c294d9d0a8db9d8beca83b97e0fd8ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "406de643d7a943fe11a3eea9cd9ae6a8b12369bb", "commit_date": "2023-06-13T13:07:43Z", "commit_message": "bgpd: Ensure stream received has enough data\n\nBGP_PREFIX_SID_SRV6_L3_SERVICE attributes must not\nfully trust the length value specified in the nlri.\nAlways ensure that the amount of data we need to read\ncan be fullfilled.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 06431bfa7570f169637ebb5898f0b0cc3b010802)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a6f6fca206f6bfd469bd3004e00f4cfa7c24b70", "commit_date": "2023-06-09T06:10:50Z", "commit_message": "Merge pull request #13737 from FRRouting/mergify/bp/stable/8.4/pr-13645\n\nbfdd: remove redundant nb destroy callbacks (backport #13645)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3c49818bedcb427eefe54b6c067e264efc3637f6", "commit_date": "2023-06-08T15:20:16Z", "commit_message": "bfdd: remove redundant nb destroy callbacks\n\nFixes warning logs:\n```\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/profile/minimum-ttl'\n2023/05/29 20:11:50 BFD: [ZKB8W-3S2Q4][EC 100663330] unneeded 'destroy' callback for '/frr-bfdd:bfdd/bfd/sessions/multi-hop/minimum-ttl'\n```\n\nSigned-off-by: Igor Ryzhov <iryzhov@nfware.com>\n(cherry picked from commit f7884aedf7a1249e3aae71b6a66c9a0f0915c4ef)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "30d9f81aaaad73f736dc70b3782009020ae19c88", "commit_date": "2023-06-07T12:07:31Z", "commit_message": "Merge pull request #13713 from FRRouting/mergify/bp/stable/8.4/pr-13693\n\ntools: fix list value remove in frr-reload (backport #13693)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "03c65e7f7f94b0be052c98d942a5cdc8ee1d3cd6", "commit_date": "2023-06-07T06:23:54Z", "commit_message": "tools: fix list value remove in frr-reload\n\nThere might be a time element(s) from\ntemporary list are removed more than once\nwhich leads to valueError in certain python3\nversion.\n\ncommit-id 1543f58b5 did not handle valueError\nproperly. This caused regression where\nprefix-list config leads to delete followed\nby add.\n\nThe new fix should just pass the exception as\nvalue removal from list_to_add or list_to_del\nis best effort.\nThis allows prefix-list config has no change\nthen removes the lines from lines_to_del and\nlines_to_add properly.\n\nTicket:#3490252\nTesting:\n\nConfigure prefix-list in frr.conf and perform\nmultiple frr-reload. After first reload operatoin\nsubsequent ones should not result in delete followed\nby add of the prefix-list but rather no-op operation.\n\n(Pdb) lines_to_add\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_del_to_del\n[(('ip prefix-list FOO seq 5 permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO seq 10 permit 10.2.1.0/24',), None)]\n(Pdb) lines_to_add_to_del\n[(('ip prefix-list FOO permit 10.2.1.0/24',), None),\n (('ip prefix-list FOO permit 10.2.1.0/24',), None)]\n(Pdb) c\n> /usr/lib/frr/frr-reload.py(1562)ignore_delete_re_add_lines()\n-> return (lines_to_add, lines_to_del)\n(Pdb) lines_to_add\n[]\n(Pdb) lines_to_del\n[]\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 9845c09d61a7e509bfae369648cb5f9893455ac4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b78b57674f17399dffc40ff1c3e0236a8d5a965", "commit_date": "2023-06-06T08:08:04Z", "commit_message": "Merge pull request #13695 from FRRouting/mergify/bp/stable/8.4/pr-13649\n\nzebra: Unlock the route node when sending route notifications (backport #13649)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e995236a343e390b526512e77aa20d8e25021a6", "commit_date": "2023-06-06T05:53:21Z", "commit_message": "zebra: Unlock the route node when sending route notifications\n\nWhen using a context to send route notifications to upper\nlevel protocols, the code was using a locking function to\nget the route node.  There is no need for this to be locked\nas such FRR should free it up.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 82c6e4fea54eb65e153e6bc45bb718367b0b5132)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a4b1a2b1fad9cc0af8c44db5c2d088dbe271b9d", "commit_date": "2023-06-02T00:32:52Z", "commit_message": "Merge pull request #13663 from FRRouting/mergify/bp/stable/8.4/pr-13637\n\nlib: fix vtysh core when handling questionmark (backport #13637)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8986db7d91d8ee88a00402ec9d2f54b88cedc465", "commit_date": "2023-06-01T19:31:31Z", "commit_message": "lib: fix vtysh core when handling questionmark\n\nWhen issue vtysh command with ?, the initial buf size for the\nelement is 16. Then it would loop through each element in the cmd\noutput vector. If the required size for printing out the next\nelement is larger than the current buf size, realloc the buf memory\nby doubling the current buf size regardless of the actual size\nthat's needed. This would cause vtysh core when the doubled size\nis not enough for the next element.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit f8aa257997a6a6f69ec5d5715ab04d7cbfae1d1c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "27177c81869fb3e2272cf50d8b1a008d5138ae6e", "commit_date": "2023-05-31T08:10:00Z", "commit_message": "Merge pull request #13643 from FRRouting/mergify/bp/stable/8.4/pr-13634\n\nbgpd: fix bgpd core when unintern attr (backport #13634)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a458561282fdf90eff4442aaf2966c345d3666c8", "commit_date": "2023-05-31T05:58:21Z", "commit_message": "bgpd: fix bgpd core when unintern attr\n\nWhen the remote peer is neither EBGP nor confed, aspath is the\nshadow copy of attr->aspath in bgp_packet_attribute(). Striping\nAS4_PATH should not be done on the aspath directly, since\nthat would lead to bgpd core dump when unintern the attr.\n\nSigned-off-by: Yuan Yuan <yyuanam@amazon.com>\n(cherry picked from commit 32af4995aae647cf9d7c70347ec37b57279ea807)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9147e8c02a1db3aeb22afbd5fdda324de55bde77", "commit_date": "2023-05-27T17:05:17Z", "commit_message": "Merge pull request #13615 from FRRouting/mergify/bp/stable/8.4/pr-13608\n\nvtysh: Give actual pam error messages (backport #13608)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dba2bf943254bc7bdf4645f095502957c19cdc32", "commit_date": "2023-05-27T12:36:06Z", "commit_message": "vtysh: Give actual pam error messages\n\nCode was was written where the pam error message put out\nwas the result from a previous call to the pam modules\ninstead of the current call to the pam module.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8495b425bd056d405704df9e756560942d6815c1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bbc049481e2461a83dfc7b653d01c08846e6421f", "commit_date": "2023-05-22T19:05:56Z", "commit_message": "Merge pull request #13572 from FRRouting/mergify/bp/stable/8.4/pr-13506\n\nbfdd: Fix malformed session with vrf (backport #13506)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d8eaf6668ed4bad9b126b662f61751b3e51c0d4", "commit_date": "2023-05-22T11:25:56Z", "commit_message": "bfdd: Fix malformed session with vrf\n\nWith this configuration:\n\n```\nbfd\n peer 33:33::66 local-address 33:33::88 vrf vrf8 interface enp1s0\n exit\n !\nexit\n```\n\nThe bfd session can't be established with error:\n\n```\nbfdd[18663]: [YA0Q5-C0BPV] control-packet: wrong vrfid. [mhop:no peer:33:33::66 local:33:33::88 port:2 vrf:61]\n```\n\nThe vrf check should use the carefully adjusted `vrfid`, which is\nbased on globally/reliable interface.  We can't believe the\n`bvrf->vrf->vrf_id` because the `/proc/sys/net/ipv4/udp_l3mdev_accept`\nmaybe is set \"1\" in VRF-lite backend even with security drawback.\n\nJust correct the vrf check.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit b17c179664da7331a4669a1cf548e4e9c48a5477)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6c72a07aed870990de43d796c994e42d17f7a5c", "commit_date": "2023-05-11T04:00:27Z", "commit_message": "Merge pull request #13503 from FRRouting/mergify/bp/stable/8.4/pr-13489\n\nospfd: OSPF opaque LSA stale processing fix and topotests. (backport #13489)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "947b69eb17d0344b4e5a9ea8388ece4481200edd", "commit_date": "2023-05-10T20:52:06Z", "commit_message": "        ospfd: OSPF opaque LSA stale processing fix and topotests.\n\n        1. Fix OSPF opaque LSA processing to preserve the stale opaque\n            LSAs in the Link State Database for 60 seconds consistent with\n            what is done for other LSA types.\n         2. Add a topotest that tests for cases where ospfd is restarted\n            and a stale OSPF opaque LSA exists in the OSPF routing domain\n            both when the LSA is purged and when the LSA is reoriginagted\n            with a more recent instance.\n\nSigned-off-by: Acee <aceelindem@gmail.com>\n(cherry picked from commit 4e7eb1e62ce54ebcf78622682de962fdeff20b80)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dcaac2a2a559c80ba13b5a38a98438d101e0cad7", "commit_date": "2023-05-10T18:23:47Z", "commit_message": "Merge pull request #13501 from FRRouting/mergify/bp/stable/8.4/pr-13485\n\nospfd: Respect loopback's cost that is set and set loopback costs to 0 (backport #13485)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b9c56b644d6beed1354aea9f9a75c29196bf2e33", "commit_date": "2023-05-10T16:13:57Z", "commit_message": "ospfd: Respect loopback's cost that is set and set loopback costs to 0\n\nWhen setting an loopback's cost, set the value to 0, unless the operator\nhas assigned a value for the loopback's cost.\n\nRFC states:\n\nIf the state of the interface is Loopback, add a Type 3\nlink (stub network) as long as this is not an interface\nto an unnumbered point-to-point network. The Link ID\nshould be set to the IP interface address, the Link Data\nset to the mask 0xffffffff (indicating a host route),\nand the cost set to 0.\n\nFRR is going to allow this to be overridden if the operator specifically\nsets a value too.\n\nFixes: #13472\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dd2bc4fb406cc9284d35ef623ebb8838cb158bc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "183dabba65ec90ebcc1a367a20bb7376a34f8e02", "commit_date": "2023-05-09T17:31:10Z", "commit_message": "Merge pull request #13482 from FRRouting/mergify/bp/stable/8.4/pr-13445\n\nzebra: Reduce creation and fix memory leak of frrscripting pointers (backport #13445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a49643612006672a03de4c0b13fa4298dc3f58de", "commit_date": "2023-05-09T12:38:58Z", "commit_message": "zebra: Reduce creation and fix memory leak of frrscripting pointers\n\nThere are two issues being addressed:\n\na) The ZEBRA_ON_RIB_PROCESS_HOOK_CALL script point\nwas creating a fs pointer per dplane ctx in\nrib_process_dplane_results().\n\nb) The fs pointer was not being deleted and directly\nleaked.\n\nFor (a) Move the creation of the fs to outside\nthe do while loop.\n\nFor (b) At function end ensure that the pointer\nis actually deleted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit d8be1399720ca36485b6a2209b143679b01b83cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc0a43da5a1a4e87964dbe08ca07bac34a2ffa7b", "commit_date": "2023-05-05T16:49:22Z", "commit_message": "Merge pull request #13443 from FRRouting/mergify/bp/stable/8.4/pr-13436\n\nospfd: Fix memory leaks w/ `show ip ospf int X json` commands (backport #13436)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6498b758e9db4d2ec0660d6ae263ed429c136dea", "commit_date": "2023-05-05T12:14:57Z", "commit_message": "ospfd: Fix memory leaks w/ `show ip ospf int X json` commands\n\nFRR has a memory leak in the case when int X does not\nexist and a memory leak when int X does exist.  Fix\nthese\n\nFixes: #13434\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 74e21732db129f7287d5ab227e45f305c5dbf34e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "39319b7d9eaf49ffe88901be7e5f147ec4dea724", "commit_date": "2023-05-04T14:00:46Z", "commit_message": "Merge pull request #13419 from FRRouting/mergify/bp/stable/8.4/pr-13020\n\npimd: PIM not sending register packets after changing from non DR to DR (backport #13020)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eaf0abf7b65d813a19f879714ed8b0d33debc672", "commit_date": "2023-05-02T15:56:34Z", "commit_message": "pimd: PIM not sending register packets after changing from non DR to DR\n\nWhen the router is non dr for an interface, it installs mroute to drop\nthe packets from directly connected source. This was done to avoid packets\ncoming to cpu as nocache hit. Later when it gets change from non-DR to DR,\nthese entries are not cleared. So the packets are still dropped.\nThis causes register packets not getting generated.\nSo cleaning up the mroute entries and channel oil without\nupstream reference which was created to drop.\n\nCo-authored-by: Saravanan K <saravanank@vmware.com>\nSigned-off-by: Sai Gomathi N <nsaigomathi@vmware.com>\n(cherry picked from commit 1c883aef96013753f5467ba5e5028dee0f0a82c5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7dddd66b4c0707a15ff55f03c933afd97f80115", "commit_date": "2023-04-24T18:28:33Z", "commit_message": "Merge pull request #13372 from FRRouting/mergify/bp/stable/8.4/pr-13330\n\nzebra: EVPN handle duplicate detected local mac delete event (backport #13330)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "192e5449be1772ae55a0c0bf9d1dac4ef92993f9", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra:fix evpn dup detected local mac del event\n\nThe current local mac delete event send to flag with force\nalways which breaks the duplicate detected MACs where\nit requires to be resynced from bgpd to earlier state.\n\nTicket:#3233019\nIssue:3233019\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 89844a967858d34de99bad8dcb410b4ab4e1dece)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e2a3dd84bbf166ffc89485f300e38ef120670027", "commit_date": "2023-04-24T13:51:53Z", "commit_message": "zebra: evpn handle del event for dup detected mac\n\nUpon receiving local mobility event for MAC + NEIGH,\nboth are detected as duplicate upon hitting DAD threshold.\n\nDuplicated detected ( freezed) MAC + NEIGH are not known\nto bgpd.\n\nIf locally learnt MAC + NEIGH are deleted in kernel,\nthe MAC is marked as AUTO after sending delete event\nto bgpd.\n\nBgpd only reinstalls best route for MAC_IP route (NEIGH)\nbut not for MAC event.\nThis puts a situation where MAC is AUTO state and\nassociated neigh as remote.\n\nFix:\nDUPLICATE + LOCAL MAC deletion, set MAC delete request\nas reinstall from bgpd.\n\nTicket:#2873307\nReviewed By:\nTesting Done:\n\nFreeze MAC + two NEIGHs in local mobility event.\nDelete MAC and NEIGH from kerenl.\nbgp rsync remote mac route which puts MAC to remote state.\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit ad7685de2871996469d370192af7afafc234a3ca)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "673957c79a2eea952b7a76fa2db0fd0b2f6f08a0", "commit_date": "2023-04-21T11:10:23Z", "commit_message": "Merge pull request #13343 from FRRouting/mergify/bp/stable/8.4/pr-13341\n\nbgpd: Fix lcom->str string length to correctly cover aliases (backport #13341)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7b2ace35bb53737686e0dab54f72dbffb611d705", "commit_date": "2023-04-21T06:23:18Z", "commit_message": "bgpd: Fix lcom->str string length to correctly cover aliases\n\nIf you have a very large number of large communities whose\nstring length happened to be greater than BUFSIZ FRR's bgpd\nwould crash.  This is because bgpd would write beyond\nthe end of the string.\n\nOriginally the code auto-calculated the string size appropriately\nbut commit ed0e57e3f079352714c3a3a8a5b0dddf4aadfe1d modified\nthe string length to be a hard coded BUFSIZ.  When a route-map\nlike this is added:\n\nroute-map LARGE-OUT permit 10\n set large-community 4635:0:0 4635:1:906 4635:1:2906 4635:1:4515 4635:1:4594 4635:1:4641 4635:1:4760 4635:1:7979 4635:1:9253 4635:1:9293 4635:1:9304 4635:1:9908 4635:1:13335 4635:1:16265 4635:1:17924 4635:1:18013 4635:1:20940 4635:1:22822 4635:1:24429 4635:1:24482 4635:1:32590 4635:1:32934 4635:1:36692 4635:1:38008 4635:1:38819 4635:1:41378 4635:1:45753 4635:1:46489 4635:1:49544 4635:1:51847 4635:1:54574 4635:1:54994 4635:1:55720 4635:1:56059 4635:1:57724 4635:1:65021 4635:1:134823 4635:1:136907 4635:1:146961 24115:0:24115 24115:1:906 24115:1:2906 24115:1:4515 24115:1:4594 24115:1:4641 24115:1:4760 24115:1:7979 24115:1:9253 24115:1:9293 24115:1:9304 24115:1:9908 24115:1:13335 24115:1:16265 24115:1:17924 24115:1:18013 24115:1:20940 24115:1:22822 24115:1:24429 24115:1:24482 24115:1:32590 24115:1:32934 24115:1:36692 24115:1:38008 24115:1:38819 24115:1:41378 24115:1:45753 24115:1:46489 24115:1:49544 24115:1:51847 24115:1:54574 24115:1:54994 24115:1:55720 24115:1:56059 24115:1:57724 24115:1:65021 24115:1:134823 24115:1:136907 24115:1:100000 24115:1:100001 24115:1:100002\nexit\n\nBGP would have issues and crash.\n\nModify the code to correctly determine the string length of the communities\nand to also double check if the string has an alias and ensure that the\nstring is still sufficiently large enough.  If not auto size it again.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8cb4892c0669d916557d693b878420faec8e6e2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "948e134d2c2cfb0904d4b607954304407195181d", "commit_date": "2023-04-20T04:06:34Z", "commit_message": "Merge pull request #13339 from FRRouting/mergify/bp/stable/8.4/pr-13329\n\nbgpd: Fix for ain->attr corruption during path update (backport #13329)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bd5755610d8f489345d7cf472a1e63faae09e5ad", "commit_date": "2023-04-19T18:49:16Z", "commit_message": "bgpd: Fix for ain->attr corruption during path update\n\n1. Consider a established L2VPN EVPN BGP peer with soft-reconfiguartion\n   inbound configured\n\n2. When the interface of this directly connected BGP peer is shutdown,\n   bgp_soft_reconfig_table_update() is called, which memsets the evpn buffer\n   and calls bgp_update() with received attributes stored in ain table(ain->attr).\n   In bgp_update(), evpn_overlay attribute in ain->attr (which is an interned\n   attr) was modified by doing a memcpy\n\n3. Above action causes 2 attributes in the attrhash (which were previously different)\n   to match!\n\n4. Later during fsm change event of the peer, bgp_adj_in_remove() is called\n   to clean up the ain->attr. But, because 2 attrs in attrhash match, it causes\n   BGP to assert in bgp_attr_unintern()\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 6e076ba5231cba2e22dcbdc48a9c13df046a2e47)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e7ce238b421e8334e65c2d38df24338eeb0a3745", "commit_date": "2023-04-16T15:58:15Z", "commit_message": "Merge pull request #13316 from FRRouting/mergify/bp/stable/8.4/pr-13302\n\ntools: fix missing remote-as configuration when reload (backport #13302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "94ffb7f5d29f7b61ea8cd99d70f8039bde804fe3", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: Make check flag really work for reload\n\nThe check flag of `found_pg_cmd` is already there, but not used.\nSo, make it really work for reload.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 9ea17a5d4978eb3d8ab3d192dd1cc8abf3e414e2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91e45e002a4e0d1ea3fd6063b8cc8d5fd6018e96", "commit_date": "2023-04-16T06:51:22Z", "commit_message": "tools: fix missing remote-as configuration when reload\n\nFrom commit `411d1a2`, `bgp_delete_nbr_remote_as_line()` is added to\nremove some specific bgp neighbors.  But, when reloading the following\nconfiguration, it will wrongly remove some good ones:\n`neighbor 66.66.66.6 remote-as internal`:\n\n```\nrouter bgp 66\n bgp router-id 172.16.204.6\n neighbor ANLAN peer-group\n neighbor ANLAN remote-as internal\n neighbor 66.66.66.6 remote-as internal <- LOST\n neighbor 66.66.66.60 peer-group ANLAN\n```\n\nThe reason is that \"66.66.66.6\" is included in \"66.66.66.60\" literally,\nthen it is mistakenly thought to be a match.  Just fix it with\nexcat match.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit a70895e83ae49b15f13e0801e0743d788b0cb595)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ee0c0acb82ff1b3bf52dc1e12fbd53a4e2fabb1", "commit_date": "2023-04-14T13:54:20Z", "commit_message": "Merge pull request #13306 from FRRouting/mergify/bp/stable/8.4/pr-13301\n\nbgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX (backport #13301)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c0fc3078f9b7dea1d8703b57c6eaefec4cc2994b", "commit_date": "2023-04-14T13:04:48Z", "commit_message": "bgpd: Fix crash for `show bgp ... neighbor received-routes detail|PREFIX`\n\nBGP: Received signal 11 at 1681287514 (si_addr 0x8, PC 0x559ab42eb1d9); aborting...\nBGP: /lib/libfrr.so.0(zlog_backtrace_sigsafe+0x71) [0x7f4356b19af1]\nBGP: /lib/libfrr.so.0(zlog_signal+0xf9) [0x7f4356b19cf9]\nBGP: /lib/libfrr.so.0(+0xf5af5) [0x7f4356b4baf5]\nBGP: /lib/x86_64-linux-gnu/libpthread.so.0(+0x14420) [0x7f43568ab420]\nBGP: /usr/lib/frr/bgpd(prefix_rd2str+0x29) [0x559ab42eb1d9]\nBGP: /usr/lib/frr/bgpd(route_vty_out_detail_header+0x7ca) [0x559ab43061ba]\nBGP: /usr/lib/frr/bgpd(+0x1771a6) [0x559ab430a1a6]\nBGP: /usr/lib/frr/bgpd(+0x177f06) [0x559ab430af06]\nBGP: /usr/lib/frr/bgpd(+0x178c8b) [0x559ab430bc8b]\nBGP: /usr/lib/frr/bgpd(+0x179e7e) [0x559ab430ce7e]\nBGP: /lib/libfrr.so.0(+0x9417e) [0x7f4356aea17e]\nBGP: /lib/libfrr.so.0(cmd_execute_command+0x111) [0x7f4356aea321]\nBGP: /lib/libfrr.so.0(cmd_execute+0xd0) [0x7f4356aea4c0]\nBGP: /lib/libfrr.so.0(+0x10d5de) [0x7f4356b635de]\nBGP: /lib/libfrr.so.0(+0x10d81d) [0x7f4356b6381d]\nBGP: /lib/libfrr.so.0(+0x110b03) [0x7f4356b66b03]\nBGP: /lib/libfrr.so.0(event_call+0x81) [0x7f4356b5df91]\nBGP: /lib/libfrr.so.0(frr_run+0xe8) [0x7f4356b11b58]\nBGP: /usr/lib/frr/bgpd(main+0x385) [0x559ab4281d55]\nBGP: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f43566c9083]\nBGP: /usr/lib/frr/bgpd(_start+0x2e) [0x559ab428437e]\nBGP: in thread vtysh_read scheduled from lib/vty.c:2833 vty_event()\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ea5a8e4d5846778611fe1fd6e395bf3cbb33ebaa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "653078c53622ed02a01d442c0b43dae660444204", "commit_date": "2023-04-13T14:38:54Z", "commit_message": "Merge pull request #13294 from FRRouting/mergify/bp/stable/8.4/pr-13244\n\npimd: Process no-forward BSM packet (backport #13244)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "312c97ae18ef6260e8ccbc932a1fd1fc88cbd6fb", "commit_date": "2023-04-13T11:37:38Z", "commit_message": "pimd: Process no-forward BSM packet\n\nTopology Used:\n=============\nCisco---FRR4----FRR2\n\nInitially PIM nbr is down between FRR4----FRR2 from FRR2 side\nCisco is sending BSR packet to FRR4.\n\nProblem Statement:\n=================\nNo shutdown the PIM neighbor on FRR2 towards FRR4.\nFRR2, receives BSR packet immediately as the new neighbor\ncomes up. This BSR packet is having no-forward bit set.\nFRR2 is not able to process the BSR packet, and drop the\nBSR packet.\n\nRoot Cause:\n==========\nWhen PIMD comes up, we start BSM timer for 60 seconds.\nHere, the value accept_nofwd_bsm is setting to false.\n\nFRR2, when receives no-forward BSR packet, it is getting\naccept_nofwd_bsm value as false.\n\nSo, it drops, the no-forward BSM packet.\n\nFix:\n===\nSet accept_nofwd_bsm as false after first BSM packet received.\n\nSigned-off-by: Sarita Patra <saritap@vmware.com>\n(cherry picked from commit 8b462d557905200d98c7a8965b3d223637c3c5dd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "25463613552393cce5fbba4a6453947727f14f82", "commit_date": "2023-04-13T04:09:32Z", "commit_message": "Merge pull request #13281 from FRRouting/mergify/bp/stable/8.4/pr-13193\n\nlib: link state leak fix (backport #13193)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c4cc8fa5c24ee35153e0bdc8dd2a467b9c0cfa5", "commit_date": "2023-04-12T18:23:39Z", "commit_message": "Merge pull request #13277 from FRRouting/mergify/bp/stable/8.4/pr-13269\n\nospfd: Fix ospf_lsa memory leak (backport #13269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d917a966d2e27e0b9269da979ade532c3340b007", "commit_date": "2023-04-12T18:11:15Z", "commit_message": "Merge pull request #13264 from mjstapp/fix_dplane_shut_race_8_4\n\nzebra: fix race during shutdown", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3508b45fa1c66a143ef5cfa8d2a2bbed21145fc5", "commit_date": "2023-04-12T17:32:06Z", "commit_message": "Merge pull request #13275 from FRRouting/mergify/bp/stable/8.4/pr-13249\n\nzebra: Mark connected route as installed after interface flap event (backport #13249)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c4bfefd4d919df0a0a88e3480c5e5fdb18356ee4", "commit_date": "2023-04-12T15:58:18Z", "commit_message": "lib: Fix link state memory leak\n\nFree link message data when a delete event is recorded.\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c123d2dee012620b8f43711062a10c49b9247a9c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfaaae0e04d5f62916b31cabe381086d2ae5fada", "commit_date": "2023-04-12T15:40:12Z", "commit_message": "ospfd: Fix ospf_lsa memory leak\n\nFree translated LSA when LSA installation fails\n\nSigned-off-by: Keelan Cannoo <keelan.cannoo@icloud.com>\n(cherry picked from commit c0ccfbfd45514251bb1f91ec9138dca138f88f57)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "699e76c231a83b276e0e8f748d13583d359f88be", "commit_date": "2023-04-12T15:04:16Z", "commit_message": "zebra: Install directly connected route after interface flap\n\nIssue:\nAfter vlan flap, zebra was not marking the selected/best route as installed.\n\nAs a result, when a static route was configured with nexthop as directly\nconnected interface's(vlan) IP, the static route was not being installed\nin the kernel since its nexthop was unresolved. The nexthop was marked\nunresolved because zebra failed to mark the best route as installed after\ninterface flap.\n\nThis was happening because, in dplane_route_update_internal() if the old and\nnew context type, and nexthop group id are the same, then zebra doesn't send\ndown a route replace request to kernel. But, the installed (ROUTE_ENTRY_INSTALLED)\nflag is set when zebra receives a response from kernel. Since the\nrequest to kernel was being skipped for the route entry, installed flag\nwas not being set\n\nFix:\nIn dplane_route_update_internal() if the old and new context type, and\nnexthop group id are the same, then before returning, installed flag will\nbe set on the route-entry if it's not set already.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit e25a0b138a196c7daf389989ebffbd09d345cd53)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "08aff7f17572b3b4333cc497c21e27a13a5dd17c", "commit_date": "2023-04-11T19:51:32Z", "commit_message": "zebra: fix race during shutdown\n\nDuring shutdown, the main pthread stops the dplane pthread\nbefore exiting. Don't try to clean up any events scheduled\nto the dplane pthread at that point - just let the thread\nexit and clean up. This is the 8.4 version.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc6697fa12660eafab4b3f724bcbaecfdd33b616", "commit_date": "2023-04-11T14:19:58Z", "commit_message": "Merge pull request #13256 from FRRouting/mergify/bp/stable/8.4/pr-13226\n\nripd: Fix memory leak for ripd's route-map (backport #13226)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "21eec745361aa704789fa9bf8a65b40b6142c029", "commit_date": "2023-04-11T11:44:36Z", "commit_message": "Merge pull request #13252 from FRRouting/mergify/bp/stable/8.4/pr-13247\n\nEvpn crashes and other ilk (backport #13247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8b3fc3d17fb4cdb92524f2d0b1e947a1eb04472", "commit_date": "2023-04-11T11:38:25Z", "commit_message": "ripd: Fix memory leak for ripd's route-map\n\nWhen cleaning `ripd`, it should free `ctx->name` of `struct if_rmap_ctx`,\nnot `ctx` itself.  Otherwise, it will lead to memory leak.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit d3ec0066e5ea0edd691b939806cd7b879ac6a32a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "182a164b1e4a784b794331ce0c187651a67bbf90", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow a `no router bgp XXX` when autoimport is happening\n\nWhen we have these sequence of events causing a crash in\nevpn_type5_test_topo1:\n\n(A) no router bgp vrf RED 100\n   this schedules for deletion the vrf RED instance\n(B) a l3vni change event from zebra\n   this creates a bgp instance for VRF RED in some cases\n   additionally it auto imports evpn routes into VRF RED\n   Please note this is desired behavior to allow for the\n   auto importation of evpn vrf routes\n(C) no router bgp 100\n   The code was allowing the deletion of the default\n   instance and causing tests to crash.\n\nEffectively the test in bgp_vty to allow/dissallow\nthe removal of the default instance was not correct\nfor the case when (B) happens.\n\nLet's just not allow the command to succeed in this case as that\nthe test was wrong.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 746e0522f3d5c8b1c6d5b698ff8cf861203bd9f6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d57481211ffd8cdd06bddb2a46501c4de831621", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Do not allow l3vni changes when shutting down\n\nWhen a `no router bgp XXX` is issued and the bgp instance\nis in the process of shutting down, do not allow a l3vni\nchange coming up from zebra to do anything.  We can just\nsafely ignore it at this point in time.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5a7c43c77ed27522e1e655795d5451c888abb10e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3235edd171af74afdc1166d31cf03f723b20447e", "commit_date": "2023-04-11T06:36:08Z", "commit_message": "bgpd: Use the actual pointer type instead of a void\n\nLet's cut to the chase, we know the pointer type and\nit allows us to not to some gyrations.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit ef96e3753fe47de1edd0d5640bc30329ae55508a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7692f6a663f5ad0f24c59a17796422a9c61844a3", "commit_date": "2023-04-07T19:27:50Z", "commit_message": "Merge pull request #13231 from FRRouting/mergify/bp/stable/8.4/pr-13222\n\nLimit scope (backport #13222)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ce79c129ef21cb67f9ab503b9df401ec6f17806c", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Treat withdraw variable as a bool\n\nUsed as a bool, treated as a bool.  Make it a bool\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit aa056a2a6481aba66c727794d0ee988724be9316)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0a12b878082f77b67ad5d9b4782846ac738575a2", "commit_date": "2023-04-07T07:15:40Z", "commit_message": "bgpd: Limit flowspec to no attribute means a implicit withdrawal\n\nAll other parsing functions done from bgp_nlri_parse() assume\nno attributes == an implicit withdrawal.  Let's move\nbgp_nlri_parse_flowspec() into the same alignment.\n\nReported-by: Matteo Memelli <mmemelli@amazon.it>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cfd04dcb3e689754a72507d086ba3b9709fc5ed8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272ea5a3ac12f2a12343555f8cd3f2c7eee665af", "commit_date": "2023-04-07T07:15:39Z", "commit_message": "bgpd: Conform bgp_packet.h with coding standards\n\nFRR's standards state that function declarations should\nhave actual variable names for parameters passed in.\nLet's make this so for bgp_packet.h\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 78745b8700f25187995ef010ff7486eb4c53296d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ef5db7e3958bd5390df8a8df24725ab83e64db47", "commit_date": "2023-04-06T13:52:12Z", "commit_message": "Merge pull request #13189 from FRRouting/mergify/bp/stable/8.4/pr-13175\n\nzebra: Cleanup ctx leak on shutdown and turn off event (backport #13175)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d5510fb6c519b9a49a83b10bb9e5c6fec0ab2b37", "commit_date": "2023-04-05T13:24:47Z", "commit_message": "zebra: Cleanup ctx leak on shutdown and turn off event\n\ntwo things:\n\nOn shutdown cleanup any events associated with the update walker.\nAlso do not allow new events to be created.\n\nFixes this mem-leak:\n\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790:Direct leak of 8 byte(s) in 1 object(s) allocated from:\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #0 0x7f0dd0b08037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #1 0x7f0dd06c19f9 in qcalloc lib/memory.c:105\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #2 0x55b42fb605bc in rib_update_ctx_init zebra/zebra_rib.c:4383\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #3 0x55b42fb6088f in rib_update zebra/zebra_rib.c:4421\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #4 0x55b42fa00344 in netlink_link_change zebra/if_netlink.c:2221\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #5 0x55b42fa24622 in netlink_information_fetch zebra/kernel_netlink.c:399\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #6 0x55b42fa28c02 in netlink_parse_info zebra/kernel_netlink.c:1183\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #7 0x55b42fa24951 in kernel_read zebra/kernel_netlink.c:493\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #8 0x7f0dd0797f0c in event_call lib/event.c:1995\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #9 0x7f0dd0684fd9 in frr_run lib/libfrr.c:1185\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #10 0x55b42fa30caa in main zebra/main.c:465\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-    #11 0x7f0dd01b5d09 in __libc_start_main ../csu/libc-start.c:308\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-\n./msdp_topo1.test_msdp_topo1/r2.zebra.asan.1117790-SUMMARY: AddressSanitizer: 8 byte(s) leaked in 1 allocation(s).\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 3cd0accb5051e900ab343d5fa7c59360c0c1a812)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c9d7a8bc4c61b02a90bc6b8bb3cd4fb15b6c7d2d", "commit_date": "2023-04-05T06:57:21Z", "commit_message": "Merge pull request #13212 from FRRouting/mergify/bp/stable/8.4/pr-13181\n\nbgpd: fix ecommunity parsing for AS4 (backport #13181)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4fafe6aac5bc41dcce1c7330ceb06bcf1921c062", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "tests: add test to validate 4-byte ecomm parsing\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit f615e6dc409c214e66863e8c2ef94775edcac050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "34fdeb0ed34147933125d1bb4f8ab90c1f2a7ca0", "commit_date": "2023-04-04T15:23:22Z", "commit_message": "bgpd: fix ecommunity parsing for AS4\n\nThe parser for extended communities was incorrectly disallowing an\noperator from configuring \"Route Origin\" extended communities\n(e.g. RD/RT/SoO) with a 4-byte value matching BGP_AS4_MAX (UINT32_MAX)\nand allowed the user to overflow UINT32_MAX. This updates the parser to\nread the value as a uint64_t so that we can do proper checks on the\nupper bounds (> BGP_AS4_MAX || errno).\n\nbefore:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 0:65\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\n% Malformed SoO extended community\nTORC11(config-router-af)#\n```\n\nafter:\n```\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967296:65\n% Malformed SoO extended community\nTORC11(config-router-af)# neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)# do sh run | include soo\n  neighbor uplink-1 soo 4294967295:65\nTORC11(config-router-af)#\n```\n\nSigned-off-by: Trey Aspelund <taspelund@nvidia.com>\n(cherry picked from commit b571d79d6482217c599c53976cb8cf0ec77b847f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "49826030152d629308679819dc748e6c10d2119f", "commit_date": "2023-04-04T10:52:08Z", "commit_message": "Merge pull request #13204 from FRRouting/mergify/bp/stable/8.4/pr-13198\n\nbgpd: bmp fix peer-up ports byte order (backport #13198)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fbe7264546e4c3a5605edb13201e00ffd8dc33c", "commit_date": "2023-04-04T07:49:56Z", "commit_message": "bgpd: bmp fix peer-up ports byte order\n\nadded htons to ports in the peer-up message to fix byte order\n\nSigned-off-by: Maxence Younsi <mx.yns@outlook.fr>\n(cherry picked from commit 9e681c84fa07d768d41fb8fba269c965c8c08a4b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c497beba694937a9e6099bc6ee27bd8d3d818101", "commit_date": "2023-03-31T11:47:11Z", "commit_message": "Merge pull request #13170 from FRRouting/mergify/bp/stable/8.4/pr-13148\n\nbgpd : memory leak fix for aggregate-address on cleanup (backport #13148)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a8fdaa0a8c73a6c9b3b6663c9ff393998e27ec3e", "commit_date": "2023-03-31T08:41:51Z", "commit_message": "Merge pull request #13167 from FRRouting/mergify/bp/stable/8.4/pr-13153\n\nbgpd: increase buffer size used for dumping BGP to MRT files (backport #13153)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e64171d46fd5f0c8b488990ff38e1d06e57d834", "commit_date": "2023-03-31T08:12:07Z", "commit_message": "bgpd : aggregate-address memory leak fix\n\nMemory leaks are observed in the cleanup code. When \u201cno router bgp\" is executed,\ncleanup in that flow for aggregate-address command is not taken care.\n\nfixes the below leak:\n    --\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1e55 in aggregate_addressv6_magic bgpd/bgp_route.c:8592\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42be3f5 in aggregate_addressv6 bgpd/bgp_route_clippy.c:341\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444:Direct leak of 152 byte(s) in 1 object(s) allocated from:\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #0 0x7f163e911037 in __interceptor_calloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:154\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #1 0x7f163e4b9259 in qcalloc lib/memory.c:105\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #2 0x562bf42ebbd5 in bgp_aggregate_new bgpd/bgp_route.c:7239\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #3 0x562bf42f14e8 in bgp_aggregate_set bgpd/bgp_route.c:8421\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #4 0x562bf42f1cde in aggregate_addressv4_magic bgpd/bgp_route.c:8543\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #5 0x562bf42bd258 in aggregate_addressv4 bgpd/bgp_route_clippy.c:255\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #6 0x7f163e3f1e1b in cmd_execute_command_real lib/command.c:988\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #7 0x7f163e3f219c in cmd_execute_command lib/command.c:1048\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #8 0x7f163e3f2df4 in cmd_execute lib/command.c:1215\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #9 0x7f163e5a2d73 in vty_command lib/vty.c:544\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #10 0x7f163e5a79c8 in vty_execute lib/vty.c:1307\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #11 0x7f163e5ad299 in vtysh_read lib/vty.c:2216\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #12 0x7f163e593f16 in event_call lib/event.c:1995\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #13 0x7f163e47c839 in frr_run lib/libfrr.c:1185\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #14 0x562bf414e58d in main bgpd/bgp_main.c:505\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-    #15 0x7f163de66d09 in __libc_start_main ../csu/libc-start.c:308\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-\n    ./bgp_local_asn_dot.test_bgp_local_asn_dot_agg/r3.bgpd.asan.3410444-SUMMARY: AddressSanitizer: 304 byte(s) leaked in 2 allocation(s).\n\nSigned-off-by: Samanvitha B Bhargav <bsamanvitha@vmware.com>\n(cherry picked from commit 7a70d99038a67f693c40d4f1c03027a2b05bfaf8)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a04f44cd90fa0571963bca5330c5438c0b069b05", "commit_date": "2023-03-31T06:25:13Z", "commit_message": "bgpd: increase buffer size used for dumping BGP to MRT files\n\nSigned-off-by: James Clarke (jamclar2) <jamclar2@cisco.com>\n(cherry picked from commit 461b6cd4d7f27624569f7a557f9abf91a85ab3cc)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bc8baaf503a7c34eeab77491cdc7bfb8bd6f3b2b", "commit_date": "2023-03-30T10:17:31Z", "commit_message": "Merge pull request #13138 from FRRouting/mergify/bp/stable/8.4/pr-13124\n\nbgpd: Do not announce routes immediatelly on prefix/distribute/filter changes (backport #13124)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "90b54e70f9d2afe3c4168569fad1056ac41ff367", "commit_date": "2023-03-30T06:38:43Z", "commit_message": "bgpd: Do not announce routes immediatelly on filter updates\n\nIf we set `bgp route-map delay-timer X`, we should ignore starting to announce\nroutes immediately, and wait for delay timer to expire (or ignore at all if set\nto zero).\n\nf1aa49293a4a8302b70989aaa9ceb715385c3a7e broke this because we always sent\nroute refresh and on receiving BoRR before sending back EoRR.\n\nLet's get fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4d8e44c7538c6479ac99ec842bebc42a1e6b2ebc)\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5620fe8de0f3dcb6001d67d9895bd0f31d89a027", "commit_date": "2023-03-29T07:25:54Z", "commit_message": "Merge pull request #13135 from FRRouting/mergify/bp/stable/8.4/pr-13120\n\nospfd: Fix for vitual-link crash in signal handler (backport #13120)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2755893d5c61f64543f64dfd1b24ba9bfbf90f65", "commit_date": "2023-03-29T04:19:40Z", "commit_message": "ospfd: Fix for vitual-link crash in signal handler\n\nWhenever OSPF virtual-link is created, a virtual interface is\nassociated with it. Name of the virtual interface is derived by\ncombining \"VLINK\" string with the value of vlink_count, which is a global\nvariable.\n\nProblem:\nConsider a scenario where 2 virtual links A and B are created in OSPF with\nvirtual interfaces VLINK0 and VLINK1 respectively. When virtual-link A is unconfigured\nand reconfigured, new interface name derived for it will be VLINK1, which is already\nassociated with virtual-link B. Due to this, both virtual-links A and B will\npoint to the same interface, VLINK1.\n\nDuring FRR restart when signal handler is called, OSPF goes through all the virtual\nlinks and deletes the interface(oi) associated with it. During the deletion of interface\nfor virtual-link B,it accesses the interface which was deleted already(which was deleted\nduring deletion of virual-link A) and whose fields were set to NULL. This\nleads to OSPF crash.\n\nFixed it by not decrementing vlink_count during unconfig/deletion for virtual-link.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 19f451913ed73810e4b02774eae37782c8c36f24)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7f92592633a5a91f3c200e4e03804286a286fbe8", "commit_date": "2023-03-29T04:17:47Z", "commit_message": "Merge pull request #13128 from FRRouting/mergify/bp/stable/8.4/pr-13118\n\nbgpd: Copy the password from the previous peer on peer_xfer_config() (backport #13118)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "906e8addd515b584d476b6e19d399dc64273baac", "commit_date": "2023-03-29T04:17:29Z", "commit_message": "Merge pull request #13127 from FRRouting/mergify/bp/stable/8.4/pr-13123\n\nbgpd: Fix debug output for route-map names when using a unsuppress-map (backport #13123)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677a2f20540b267b6bef0dc493d99ab826fb4c9", "commit_date": "2023-03-28T15:22:23Z", "commit_message": "bgpd: Copy the password from the previous peer on peer_xfer_config()\n\nWe copy the password only if an existing peer structure didn't have it.\n\nBut it might be the case when it exists, and we skip here.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b5b6f11fcb90219cbc69e5845872f2769d42bb2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "96bb0d80579fc93e7e41b20eeae1cc59b3f64f93", "commit_date": "2023-03-28T15:19:44Z", "commit_message": "bgpd: Fix debug output for route-map names when using a unsuppress-map\n\nLog is printing this with this config:\n\n2023-03-28 07:36:47.007 [DEBG] bgpd: [Q9J6Z-09HRR] 192.168.119.120 [Update:SEND] 1.2.3.33/32 is filtered by route-map '(null)'\n\nHere's the config:\n\n address-family ipv4 unicast\n  network 1.2.3.33/32\n  network 1.2.3.34/32\n  aggregate-address 1.2.3.0/24 summary-only\n  redistribute table 33 route-map foo\n  neighbor 192.168.119.120 route-map DENY in\n  neighbor 192.168.119.120 unsuppress-map UNSUPPRESS\n\nip prefix-list UNSUPPRESS seq 5 permit 1.2.3.4/32\nip prefix-list UNSUPPRESS seq 10 permit 1.2.3.5/32\nip prefix-list UNSUPPRESS seq 15 permit 1.2.3.6/32\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8e8ed2e1fb8adbe86135f2b9bcb47fcba6936ed3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9f1ba873637fd6ce4a2d366eafcf41402775852b", "commit_date": "2023-03-26T12:19:57Z", "commit_message": "Merge pull request #13104 from FRRouting/mergify/bp/stable/8.4/pr-13100\n\nbgpd: Check 7 bytes for Long-lived Graceful-Restart capability (backport #13100)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c69bee3ab252228accd4db36691f8739a230119c", "commit_date": "2023-03-24T16:00:24Z", "commit_message": "Merge pull request #13103 from FRRouting/mergify/bp/stable/8.4/pr-13088\n\npimd: Fix use after free issue for ifp's moving vrfs (backport #13088)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0d5069143974e5a8935a6e6889aef452c46dccd2", "commit_date": "2023-03-24T14:23:33Z", "commit_message": "bgpd: Check 7 bytes for Long-lived Graceful-Restart capability\n\nIt's not 4 bytes, it was assuming the same as Graceful-Restart tuples.\n\nLLGR has more 3 bytes (Long-lived Stale Time).\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b1d33ec293e8e36fbb8766252f3b016d268e31ce)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ed5f28c765dd4531f7c131b8a45c4f4a4f049491", "commit_date": "2023-03-24T13:15:34Z", "commit_message": "Merge pull request #13095 from FRRouting/mergify/bp/stable/8.4/pr-13065\n\nospfd: Fixing Summary origination after range configuration (backport #13065)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1bc74a10434cfb7bd6304abbf53df271b576f79e", "commit_date": "2023-03-24T13:03:31Z", "commit_message": "pimd: Fix use after free issue for ifp's moving vrfs\n\nWe have this valgrind trace:\n\n==1125== Invalid read of size 4\n==1125==    at 0x170A7D: pim_if_delete (pim_iface.c:203)\n==1125==    by 0x170C01: pim_if_terminate (pim_iface.c:80)\n==1125==    by 0x174F34: pim_instance_terminate (pim_instance.c:68)\n==1125==    by 0x17535B: pim_vrf_terminate (pim_instance.c:260)\n==1125==    by 0x1941CF: pim_terminate (pimd.c:161)\n==1125==    by 0x1B476D: pim_sigint (pim_signals.c:44)\n==1125==    by 0x4910C22: frr_sigevent_process (sigevent.c:133)\n==1125==    by 0x49220A4: thread_fetch (thread.c:1777)\n==1125==    by 0x48DC8E2: frr_run (libfrr.c:1222)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Address 0x6274d28 is 1,192 bytes inside a block of size 1,752 free'd\n==1125==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x174FF1: pim_vrf_delete (pim_instance.c:181)\n==1125==    by 0x4925480: vrf_delete (vrf.c:264)\n==1125==    by 0x4925480: vrf_delete (vrf.c:238)\n==1125==    by 0x49332C7: zclient_vrf_delete (zclient.c:2187)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n==1125==  Block was alloc'd at\n==1125==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==1125==    by 0x48E80AF: qcalloc (memory.c:116)\n==1125==    by 0x1750DA: pim_instance_init (pim_instance.c:90)\n==1125==    by 0x1750DA: pim_vrf_new (pim_instance.c:161)\n==1125==    by 0x4924FDC: vrf_get (vrf.c:183)\n==1125==    by 0x493334C: zclient_vrf_add (zclient.c:2157)\n==1125==    by 0x4934319: zclient_read (zclient.c:4003)\n==1125==    by 0x492249C: thread_call (thread.c:2008)\n==1125==    by 0x48DC8D7: frr_run (libfrr.c:1223)\n==1125==    by 0x15E12A: main (pim_main.c:176)\n\nand you do this series of events:\n\na) Create a vrf, put an interface in it\nb) Turn on pim on that interface and turn on pim in that vrf\nc) Delete the vrf\nd) Do anything with the interface, in this case shutdown the system\n\nThe move of the interface to a new vrf is leaving the pim_ifp->pim pointer pointing\nat the old pim instance, which was just deleted, so the instance pointer was freed.\n\nLet's clean up the pim pointer in the interface pointer as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit e60308f498c356227df5dbc6cc04015a3b213f1d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57ae44234b0cb887dae7fea0cc6d3fc3250ad588", "commit_date": "2023-03-23T23:57:49Z", "commit_message": "ospfd: Fixing Summary origination after range configuration\n\nDescription:\n\tAfter area range config, summary lsas are aggerated to configured\n\troute but later it was being flushed instead of the actual summary\n\tlsa. This was seen when prefix-id of the aggregated route is same\n\tas one of the actual summary route.\n\tHere, aggregated summary lsa need to be returned to set the flag\n\tSUMMARY_APPROVE after originating aggregated summary lsa but its not.\n\tWhich is being cleaned up as part of unapproved summary cleanup.\n\tCorrected this now.\n\nIssue: #13028\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit c8c1a240ab9653d74b3af009f850e150909f784e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f3bea895e5a17154fd2bc0b04114a06353b912f", "commit_date": "2023-03-21T13:24:33Z", "commit_message": "Merge pull request #13071 from FRRouting/mergify/bp/stable/8.4/pr-13062\n\nzebra: Fix for heap-use-after-free in EVPN (backport #13062)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0b55182a05f614896096a37fc168a7a44e176b67", "commit_date": "2023-03-21T11:05:09Z", "commit_message": "zebra: Fix for heap-use-after-free in EVPN\n\nIssue:\nWhen a netns is deleted, since zebra doesn\u2019t receive interface down/delete\nnotifications from kernel, it manually deletes the interface without removing\nthe association between zebra_l3vni and the interface that is being deleted\n(i.e it deletes the interface without setting \u201czl3vni->vxlan_if\u201d to NULL).\n\nLater, during the deletion of netns, when zl3vni_rmac_uninstall() is called to\nuninstall the remote RMAC from the kernel, zebra ends up accessing stale\n\u201czl3vni->vxlan_if\u201d pointer, which now points to freed memory.\nThis was causing heap use-after-free.\n\nFix:\nBefore zebra starts deleting the interfaces when it receives netns delete notification,\nappropriate functions() are being called to remove the association between evpn structs\nand interface and set \u201czl3vni->vxlan_if\u201d to NULL. This ensures that when\nzl3vni_rmac_uninstall() is called during netns deletion, it will bail because\n\u201czl3vni->vxlan_if\u201d is NULL.\n\nSigned-off-by: Pooja Jagadeesh Doijode <pdoijode@nvidia.com>\n(cherry picked from commit 7eefea98ba5d42dc3f042b509fe0f18a0e1d5548)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "017c4f79b3471463452f1792a525f010f4a9d20d", "commit_date": "2023-03-21T10:58:59Z", "commit_message": "Merge pull request #13068 from FRRouting/mergify/bp/stable/8.4/pr-13061\n\nlib: on bfd peer shutdown actually stop event (backport #13061)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1aaf031b33a799aeab9ff2f87353b9bf7e3b624d", "commit_date": "2023-03-21T07:00:30Z", "commit_message": "lib: on bfd peer shutdown actually stop event\n\nWhen deleting a bfd peer during shutdown, let's ensure\nthat any scheduled events are actually stopped.\n\n==7759== Invalid read of size 4\n==7759==    at 0x48BF700: _bfd_sess_valid (bfd.c:419)\n==7759==    by 0x48BF700: _bfd_sess_send (bfd.c:470)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Address 0xfb687a4 is 4 bytes inside a block of size 272 free'd\n==7759==    at 0x48369AB: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48BFA5A: bfd_sess_free (bfd.c:535)\n==7759==    by 0x2B7034: bgp_peer_remove_bfd (bgp_bfd.c:339)\n==7759==    by 0x29FF8A: peer_free (bgpd.c:1160)\n==7759==    by 0x29FF8A: peer_unlock_with_caller (bgpd.c:1192)\n==7759==    by 0x2A0506: peer_delete (bgpd.c:2633)\n==7759==    by 0x208190: bgp_stop (bgp_fsm.c:1639)\n==7759==    by 0x20C082: bgp_event_update (bgp_fsm.c:2751)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n==7759==  Block was alloc'd at\n==7759==    at 0x4837B65: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==7759==    by 0x48F53AF: qcalloc (memory.c:116)\n==7759==    by 0x48BF98D: bfd_sess_new (bfd.c:397)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:298)\n==7759==    by 0x2B76DC: bgp_peer_configure_bfd (bgp_bfd.c:279)\n==7759==    by 0x29BA06: peer_group2peer_config_copy (bgpd.c:2803)\n==7759==    by 0x2A3D96: peer_create_bind_dynamic_neighbor (bgpd.c:4107)\n==7759==    by 0x2A4195: peer_lookup_dynamic_neighbor (bgpd.c:4239)\n==7759==    by 0x21AB72: bgp_accept (bgp_network.c:422)\n==7759==    by 0x492F79C: thread_call (thread.c:2008)\n==7759==    by 0x48E9BD7: frr_run (libfrr.c:1223)\n==7759==    by 0x1C739B: main (bgp_main.c:550)\n\ntl;dr -> Effectively, in this test setup we have 300 dynamic bgp\nsessions all of which are using bfd.  When a peer collision is detected\nor we remove the peers, if an event has been scheduled but not actually\nexecuted yet the event event was not actually being stopped, leaving\nthe bsp pointer on the thread->arg and causing a crash when it is\nexecuted.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f83431c7e8767abc01b3bc2c9a98bd712b55b67f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "32a5096efdf5f2867106825068598833e19c06df", "commit_date": "2023-03-20T23:51:53Z", "commit_message": "Merge pull request #13057 from opensourcerouting/fix/bgp_null_deref_8.4\n\nbgpd: Prevent Null pointer deref when outputting data", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d7aca27af69589bd7c45cbf871300ed2ed8c262", "commit_date": "2023-03-20T14:10:56Z", "commit_message": "bgpd: Prevent Null pointer deref when outputting data\n\nCrash:\n\n(gdb) bt\n0  0x00007fee27de15cb in raise () from /lib/x86_64-linux-gnu/libpthread.so.0\n1  0x00007fee280ecd9c in core_handler (signo=11, siginfo=0x7ffe56001bb0, context=<optimized out>) at lib/sigevent.c:264\n2  <signal handler called>\n3  0x0000555e321c41b2 in prefix_rd2str (prd=0x10, buf=buf@entry=0x7ffe56002080 \"27.0.0.R\\340\\373\\062\\062^U\", size=size@entry=28) at bgpd/bgp_rd.c:168\n4  0x0000555e321c431a in printfrr_prd (buf=0x7ffe560021a0, ea=<optimized out>, ptr=<optimized out>) at bgpd/bgp_rd.c:224\n5  0x00007fee2812069b in vbprintfrr (cb_in=cb_in@entry=0x7ffe56002330, fmt0=fmt0@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/vfprintf.c:564\n6  0x00007fee28122ef7 in vasnprintfrr (mt=mt@entry=0x7fee281cb5e0 <MTYPE_VTY_OUT_BUF>, out=out@entry=0x7ffe560023f0 \" RD: : R\\n\", outsz=outsz@entry=1024, fmt=fmt@entry=0x555e3229a3ad \" RD: %pRD\\n\", ap=ap@entry=0x7ffe560023d8) at lib/printf/glue.c:103\n7  0x00007fee28103504 in vty_out (vty=vty@entry=0x555e33f82d10, format=format@entry=0x555e3229a3ad \" RD: %pRD\\n\") at lib/vty.c:190\n8  0x0000555e32185156 in bgp_evpn_es_show_entry_detail (vty=0x555e33f82d10, es=0x555e33c38420, json=<optimized out>) at bgpd/bgp_evpn_mh.c:2655\n9  0x0000555e32188fe5 in bgp_evpn_es_show (vty=vty@entry=0x555e33f82d10, uj=false, detail=true) at bgpd/bgp_evpn_mh.c:2721\nnotice prd=0x10 in #3.  This is because in bgp_evpn_mh.c we are sending &es->es_base_frag->prd.\n\nThere is one spot in the code where during output the es->es_base_frag is checked for non nullness\nLet's just make sure it's right in all the places.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3504210c3a194a1c19f9872de4695ee78661c009", "commit_date": "2023-03-20T13:43:03Z", "commit_message": "Merge pull request #13051 from FRRouting/mergify/bp/stable/8.4/pr-13049\n\nlib: IPv6 prefix-list entry handling with `any` (backport #13049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d000e49c6d20999cf95b44788c6849112d7b3d3e", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "lib: Destroy `any` flag when creating a prefix-list entry with prefix\n\nThe same as 61c07b9d43529f69f48ca54f4f0213cff52b5d0a, but forgot to put IPv6\nin place.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 14c1e0a16959ba8718bb7831c7720707e1d73555)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba257dc803b2d4c4c9fa48883e5717a56cabb770", "commit_date": "2023-03-20T11:27:16Z", "commit_message": "tests: Check if prefix-lists with IPv6 any works fine\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit d8986f0134887f5d8916e71993ab378efaee4306)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "78ff98ae526b39a5cc34bfa1007cc964bcfbff03", "commit_date": "2023-03-20T11:26:36Z", "commit_message": "Merge pull request #13053 from FRRouting/mergify/bp/stable/8.4/pr-12445\n\nMore mtype tmp (backport #12445)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b01240e8a516bf29ae4cddb2e437559273f92877", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "bgpd: Make bgp_keepalives.c not use MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 19a713be1db59d757d3d08b72636e4efe0a3e0c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a7eee2676306ac788173e728a30de8d379fe448", "commit_date": "2023-03-20T08:33:37Z", "commit_message": "ospf6d: Stop using MTYPE_TMP in some cases\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 4898cbaf1dee95f687cf6aa6d0490a336fb7dceb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d7402780ebbd43e0ddb51aed8fb3a7232775ed7", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd, ospfclient: Do not just include .c files in another .c\n\nospfclient.c includes .c files directly from ospfd.  Let's separate\nthese out a bit.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 253113bcb80b7b489eb848988a90459403f870de)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "73850c562f7644cc3df339607f0a592940c64d2c", "commit_date": "2023-03-20T08:33:36Z", "commit_message": "ospfd: Remove MTYPE_TMP\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 29a1a53d6c3023841b8289f9ff7b15219ec0b05c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6cbd7f85c580ea914e76eb3e6170984178bbf88", "commit_date": "2023-03-19T22:39:12Z", "commit_message": "Merge pull request #13040 from FRRouting/mergify/bp/stable/8.4/pr-13038", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c92eda8ab9aa230faa9698d2d9b440ad3f96f0f", "commit_date": "2023-03-19T20:58:10Z", "commit_message": "Merge pull request #13042 from FRRouting/mergify/bp/stable/8.4/pr-13026\n\npbrd:fix mismatching in match src-dst (backport #13026)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "511a5fb70619659d31ae7a5dc742edadfcf38e80", "commit_date": "2023-03-19T20:57:58Z", "commit_message": "Merge pull request #13044 from FRRouting/mergify/bp/stable/8.4/pr-13025\n\nOspf ti lfa leaks (backport #13025)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02d5f199d92da06dc674fc48b98e5052452f8c2f", "commit_date": "2023-03-19T04:45:22Z", "commit_message": "ospfd: Free up q_space in early return path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 52ff0e3ed4ea671f42e3ab5d6d97dd6312e2f87f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b63a91e2518dcff5671877cc90555956f6678b5d", "commit_date": "2023-03-19T04:45:21Z", "commit_message": "ospfd: Fix ospf_ti_lfa drop of an entire table\n\nThe new_rtrs variable was just generated and then dropped.  Let's\nfix that entirely\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit eb7e14011fa19f4ecc18b0108c556cc1d82ee381)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5e83375e55ea5d447ea78cf2c87a00964305a628", "commit_date": "2023-03-19T04:43:01Z", "commit_message": "pbrd:fix mismatching in match src-dst\n\nupstream commit 67765a232d has incorect\naddress family check which prevent from\ndeleting src/dst config under pbr rule.\n\nTicket:#3405024\nIssue:3405024\nTesting Done:\n\nConfig:\n\npbr-map map6 seq 1\n match src-ip 2000::200:100:100:0/96\n match dst-ip 2000::100:100:100:0/96\n set nexthop-group group3\n\nBefore:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\nCannot mismatch families within match src/dst\n\nAfter:\ntorc-12(config)# pbr-map map6 seq 1\ntorc-12(config-pbr-map)# no match src-ip 2000::200:100:100:0/96\ntorc-12(config-pbr-map)#\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 03494887eddaa255d9b6a217bfff60cc63cede42)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e21e733b82b5a2f4d0cc8a575c15ca4a3ee09c9e", "commit_date": "2023-03-19T04:29:21Z", "commit_message": "ospfd: Cleanup some memory leaks on shutdown in ospf_apiserver.c\n\nClean up some memory leaks found in ospf_apiserver.c  Also\na crash in the original implementation.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7773d0071ab4eb1b725581c525c3e152f2c806c7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5c24b1fe10d79df26a8e4f0aaa83fd475f27309d", "commit_date": "2023-03-18T17:15:09Z", "commit_message": "Merge pull request #13034 from FRRouting/mergify/bp/stable/8.4/pr-13024\n\nlib: Adjust only any flag for prefix-list entries if destroying (backport #13024)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d827df53e1a1ac8cdf5934e763be08dc207666da", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "lib: Adjust only `any` flag for prefix-list entries if destroying\n\nBefore this patch, if we destroy `any` flag for a prefix-list entry, we always\nset destination as 0.0.0.0/0 and/or ::/0.\n\nThis means that, if we switch from `ip prefix-list r1-2 seq 5 deny any` to\n`ip prefix-list r1-2 seq 5 permit 10.10.10.10/32` we will have\n`permit any` eventually, which broke ACLs.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 61c07b9d43529f69f48ca54f4f0213cff52b5d0a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "04bb4249829ee3be1711e9464c83566a9d2295b4", "commit_date": "2023-03-18T11:31:54Z", "commit_message": "tests: Check if route-map works correctly if modifying prefix-lists\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit a1e538178cb1ed09f6bbc0612605c5980bb9a3df)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dd7ec08225994a8d21102e9f82aab59e42f921c", "commit_date": "2023-03-17T22:04:42Z", "commit_message": "Merge pull request #13014 from FRRouting/mergify/bp/stable/8.4/pr-13009\n\nbgpd: Use interface name instead of pointer value (backport #13009)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ac3cbdf3889243c1aebf47c35b34fee74a0adcb9", "commit_date": "2023-03-17T22:04:16Z", "commit_message": "Merge pull request #13022 from FRRouting/mergify/bp/stable/8.4/pr-13016\n\nospfd, ospfd6: Add more logging (backport #13016)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "079fbc793054e115175e406745f8e69d2fb619b4", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd: Log Adjacency Changes with Neighbor IP in addition to Neighbor ID\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 386d232a1a706310f4425d1a0ad6f08c32646e10)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0e327d9630cabdca69985969c8fdb0d54000f3fb", "commit_date": "2023-03-17T11:55:54Z", "commit_message": "ospfd, ospf6d: Add more logging details\n\nBasically just router-id or interface/IP.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ba427e63489757756cd2b244315b1a911071bbc2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "706ec3d3c19fab5fbc1b7bf343397db6059e9f5e", "commit_date": "2023-03-17T07:56:44Z", "commit_message": "bgpd: Use interface name instead of pointer value\n\nLog message is borked in a manner that makes it unusable:\nbgpd[52]: [VX6SM-8YE5W][EC 33554460] 2000:31:0:53::2: nexthop_set failed, resetting connection - intf 0x561eb9005a30\n\nLet's print out the interface name instead.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 50e049db76573210e3b9ccfa962e5259452ccbe3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "933b8347fb4aadf53bd23aaae6bee6edc6ce72b8", "commit_date": "2023-03-15T21:42:09Z", "commit_message": "FRR Release 8.4.3\n\nThis a convenience release/tag for house keeping. We currently don't plan to publish\nbinary packages with this release.\n\nChangelog:\n\nbabeld\n    Fix filtering against all interfaces\n\nbgpd\n    Avoid double aspath_dup() for confederation when remote-as != as_specified\n    Convert evpn output to not pretty print json\n    Evpn route detail json display non prett\n    Fix deterministic-med check for stale paths\n    Fix use-after-free crash for evpn\n    Flowspec overflow issue\n    Free rfapi callback object always\n    Increment version number even when no data is sent\n    Intern default-originate attributes to avoid use-after-free\n    Pass global asn for confederation peers if not as_specified\n    Prevent multipathing among evpn and non-evpn paths\n\nlib, bgpd\n    Add ability to specify that some json output should not be pretty\n\nlib\n    Fix non-use of option\n    Free dnode before returning if yang translator model is already loaded\n    Release memory of yang translation module on error\n\nospfclient\n    Bugfix and no implicit register\n    Remove register \"ready\" requirement\n\nospfd\n    Compare prefix values in host order\n    Inc. opaque data in `show opaque info detail json` output\n    Small bugfix for miscounting a[s]brs\n\npbrd\n    Fix large tableids displayed as negative\n\npceplib\n    Add <time.h> include for time_t\n\npimd\n    In_multicast needs host order\n    Make logs useful for input drops\n    Try to reinstall mfc when we get nocache\n    V6 intentionally turned off route-maps.  turn it on.\n\ntests\n    Check if bgp confederation works with as_external (!as_specified)\n    Improve the ospfapi test (move to square topology)\n\ntools\n    Fix missing pbrd in rsyslog.d 45-frr.conf file\n    Frr-reload fix list value not present\n\nvrrpd\n    Give null when using null ifp to lookup vr\n\nzebrad\n    Add debug for bridge capability\n    Fix other table inactive when ip import-table is on\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c4bc751002555894fb1b7b8b75269dee0d665d2", "commit_date": "2023-03-15T17:20:26Z", "commit_message": "Merge pull request #13000 from FRRouting/mergify/bp/stable/8.4/pr-12996\n\ntools: frr-reload fix list value not present (backport #12996)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "76bbd96c52f81467f8469026225528ba51f02805", "commit_date": "2023-03-15T12:00:33Z", "commit_message": "tools: frr-reload fix list value not present\n\nCheck for value present in list before removing\nas in certain python3 ValueError traceback is observed.\n\nTraceback (most recent call last):\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 2278, in <module>\n    (lines_to_add, lines_to_del, restart_frr)\n\t= compare_context_objects(newconf, running)\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1933, in compare_context_objects\n    lines_to_add, lines_to_del\n  File \"/usr/lib/frr/frr-reload.py\",\n\t\tline 1549, in ignore_delete_re_add_lines\n    lines_to_del.remove((ctx_keys, line))\nValueError: list.remove(x): x not in list\n\nTicket:#3389979\nIssue:3389979\n\nTesting Done:\nWith fix perform frr-relaod on frr.conf config where earlier\ntraceback was seen.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\nSigned-off-by: Chirag Shah <chirag@nvidia.com>\n(cherry picked from commit 1543f58b5541c0ddb5e53bb7994136dcb5f836cb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "16706bc59f5733dd28192b7220b2e5f1de720372", "commit_date": "2023-03-14T08:08:51Z", "commit_message": "Merge pull request #12988 from FRRouting/mergify/bp/stable/8.4/pr-12978\n\npimd: IN_MULTICAST needs host order (backport #12978)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "642073dc8a7c58c21b695e21cdefc0f6f045f083", "commit_date": "2023-03-14T05:49:02Z", "commit_message": "pimd: IN_MULTICAST needs host order\n\nNew correct behavior:\n\neva# conf\neva(config)# ip pim rp 192.168.1.224 224.0.0.0/24\nNo Path to RP address specified: 192.168.1.224\neva(config)# ip pim rp 224.1.2.3 224.0.0.0/24\n% Bad RP address specified: 224.1.2.3\neva(config)#\n\nFixes: #12970\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 8083e713562a44744c4c2f4a0aa5cc6e2b2170ff)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9ac1b3fa6440e2efb63a171275c0b6b4d89fa49f", "commit_date": "2023-03-13T05:11:21Z", "commit_message": "Merge pull request #12981 from FRRouting/mergify/bp/stable/8.4/pr-12974\n\nbgpd: Increment version number even when no data is sent (backport #12974)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "84b56b4b142f9f5ddaeb49918c7911a516663ff5", "commit_date": "2023-03-12T19:49:38Z", "commit_message": "bgpd: Increment version number even when no data is sent\n\nWhen an update group decides to not send a prefix\nannouncement because it has not changed, still increment\nthe version number.  Why?  To allow for the situation\nwhere you have say 2 peers in 1 peer group and shortly\nafter they come up a 3rd peer comes up.  It will be\nplaced into a separate update group and could be\ncoalesced down, when it finishes updating all data\nto it.  Now imagine that a single prefix changes at\nthis point in time as well.  Then first 2 peers may\ndecide to not send the data, since nothing has changed.\nWhile the 3rd peer will and since the versions numbers\nnever match they will never coalesce.  So when the decision\nis made to skip, update the version number as well.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8038460bd2b413a0c082fbd629cdae00708b133)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2cf050ffc0a2cdf9792f9982375dc26974473716", "commit_date": "2023-02-26T12:22:24Z", "commit_message": "Merge pull request #12901 from FRRouting/mergify/bp/stable/8.4/pr-12900\n\nbgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED (backport #12900)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4f01db503a828760fa81680263f7c0077cbbae87", "commit_date": "2023-02-25T00:18:04Z", "commit_message": "bgpd: Avoid double aspath_dup() for confederation when remote-as != AS_SPECIFIED\n\nJust was blind when not seing it's already dup'ed above:\n\n```\tif (peer->sort == BGP_PEER_EBGP\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_AS_PATH_UNCHANGED)\n\t\t|| attr->aspath->segments == NULL)\n\t    && (!CHECK_FLAG(peer->af_flags[afi][safi],\n\t\t\t    PEER_FLAG_RSERVER_CLIENT))) {\n\t\taspath = aspath_dup(attr->aspath); <<<<<<<<<<<<<<<\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 9930441c66131d26fd7c51d9684b9e6a228c38d7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a053fecd291590bf55b53a4bfd980ec40d54776", "commit_date": "2023-02-24T14:20:30Z", "commit_message": "Merge pull request #12892 from FRRouting/mergify/bp/stable/8.4/pr-12884\n\nbgpd: Flowspec overflow issue (backport #12884)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "301bdc3dad12eb5329f40bf236acb66eabb4eb0a", "commit_date": "2023-02-24T09:40:45Z", "commit_message": "Merge pull request #12882 from FRRouting/mergify/bp/stable/8.4/pr-12878\n\npimd: bughunting improvements (backport #12878)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a4e6637fc0621e90daa4decb4ee887a0af8ee24", "commit_date": "2023-02-24T07:53:36Z", "commit_message": "bgpd: Flowspec overflow issue\n\nAccording to the flowspec RFC 8955 a flowspec nlri is <length, <nlri data>>\nSpecifying 0 as a length makes BGP get all warm on the inside.  Which\nin this case is not a good thing at all.  Prevent warmth, stay cold\non the inside.\n\nReported-by: Iggy Frankovic <iggyfran@amazon.com>\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 0b999c886e241c52bd1f7ef0066700e4b618ebb3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5d279b4317aa0ca1b997a8fb0d19b85b4aa613cd", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: try to reinstall MFC when we get NOCACHE\n\nWhether due to a pimd bug, some expiry, or someone just deleting MFC\nentries, when we're in NOCACHE we *know* there's no MFC entry.  Add an\ninstall call to make sure pimd's MFC view aligns with the actual kernel\nMFC.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "57cbb1cc331854816eb51d35f2134f698040f60c", "commit_date": "2023-02-23T19:50:07Z", "commit_message": "pimd: make logs useful for input drops\n\nThis path here is pretty far on top of the list of issues that operators\nwill run into and have to debug when setting up PIM.  Make the log\nmessages actually tell what's going on.  Also escalate some from\n`debug mroute detail` to `debug mroute`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a93a1e6969ff577b063f326af61d8c404925c740", "commit_date": "2023-02-23T04:49:25Z", "commit_message": "Merge pull request #12874 from FRRouting/mergify/bp/stable/8.4/pr-12865\n\nbgpd: free rfapi callback object always (backport #12865)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3ffbcc741535f66be497ae4a72b6791a32fef58e", "commit_date": "2023-02-22T20:42:04Z", "commit_message": "Merge pull request #12872 from FRRouting/mergify/bp/stable/8.4/pr-12861\n\nbgpd: Confederation fixes with remote-as external/internal (backport #12861)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dbe2cfc547a4e5a2594defbb18456eef54166212", "commit_date": "2023-02-22T20:13:13Z", "commit_message": "Merge pull request #12870 from FRRouting/mergify/bp/stable/8.4/pr-12850\n\nospfd client api bugfix and refinements (backport #12850)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e98fbcadb2e682248bd92bd212112f11aa69462a", "commit_date": "2023-02-22T19:50:27Z", "commit_message": "bgpd: free rfapi callback object always\n\nAn rfapi timer callback is responsible for the memory in a\ncontext object, even in special-case exit paths. Always\nfree that object.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit 870d3d2cb8e2fa6ff9329ec7126265d1e25a38ae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7db7e747656a20ac0fa72623c0290df7bfd73310", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "tests: Check if BGP confederation works with AS_EXTERNAL (!AS_SPECIFIED)\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit caf65e4a27539b1ecc0f6820994d36278c0e63e6)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e2a841adeea864dd7898be3126e815c272ea1ae", "commit_date": "2023-02-22T17:25:35Z", "commit_message": "bgpd: Pass global ASN for confederation peers if not AS_SPECIFIED\n\nWhen we specify remote-as as external/internal, we need to set local_as to\nbgp->as, instead of bgp->confed_id. Before this patch, (bgp->as != *as) is\nalways valid for such a case because *as is always 0.\n\nAlso, append peer->local_as as CONFED_SEQ to avoid other side withdrawing\nthe routes due to confederation own AS received and/or malformed as-path.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit db5a5ee6e4665b5f951ed2a37398820da4b762f1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6550c0bcec1559f189c6aa9f9966d70b32d9790d", "commit_date": "2023-02-22T16:55:09Z", "commit_message": "tests: improve the ospfapi test (move to square topology)\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 663a0c96d9c52895189bef7579a308a1b14120fa)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "126c452757a5aa6a73451557f319b2b947047895", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: remove register \"READY\" requirement\n\n- also add ability of the apibin to process commands on stdin\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 6efa8fd5c1653372cea1b25a9fa764269960bb91)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59346a3a4ceb2fbb439d3018871fdaabb2af7701", "commit_date": "2023-02-22T16:55:08Z", "commit_message": "ospfclient: bugfix and no implicit register\n\n- dont delete the callback on opaque data delete\n- require explicit registration\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 703d2c0a3e30c18acd2426b50f97ea8c91c479f9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "652dd9bbc98e729fb3e3d0aaa344865b0632dda3", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: compare prefix values in host order\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 156a904cae87a1ea1cd51de5012c9bddc0d63747)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6e6b7c02d7a4d7e58a578cbff4e76d17612d2096", "commit_date": "2023-02-22T16:55:07Z", "commit_message": "ospfd: small bugfix for miscounting A[S]BRs\n\n- improve the debug for the second add router call.\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1eea62bb1c439ee66d502ef808695554370032e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de3c7c000c694086c12ae754e8cb0dbebe1deca9", "commit_date": "2023-02-22T16:55:06Z", "commit_message": "ospfd: inc. opaque data in `show opaque info detail json` output\n\nSigned-off-by: Christian Hopps <chopps@labn.net>\n(cherry picked from commit 1794afe01030b3111e83e26986cd004dce290049)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2bea6210453f08329d70442b93a45953313f43b0", "commit_date": "2023-02-22T08:56:31Z", "commit_message": "Merge pull request #12858 from FRRouting/mergify/bp/stable/8.4/pr-12818\n\nzebra: Fix other table inactive when ip import-table is on (backport #12818)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42a89db1aa6eed18e339efdc38826eb673fc00ed", "commit_date": "2023-02-21T16:38:15Z", "commit_message": "zebra: Fix other table inactive when ip import-table is on\n\nIn `rib_link`, if is_zebra_import_table_enabled returns\ntrue, `rib_queue_add` will not called, resulting in other\ntable route node never processed. This actually should not\nbe dependent on whether the route is imported.\n\nIn `rib_delnode`, if is_zebra_import_table_enabled returns\ntrue, it will use `rib_unlink` instead of enqueuing the\nroute node for process. There is no reason that imported\nroute nodes should not be reprocessed. Long ago, the\nbehaviour was dependent on whether the route_entry comes\nfrom a table other than main.\n\nSigned-off-by: zyxwvu Shi <i@shiyc.cn>\n(cherry picked from commit 207207c0c03e1108d1bae5cf345b7a29850e6ffd)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "410d78b7a4f2c8b4d4c3736c6d6cdb710287ca80", "commit_date": "2023-02-17T14:37:08Z", "commit_message": "Merge pull request #12825 from FRRouting/mergify/bp/stable/8.4/pr-12817\n\nsome missed upstream commits (backport #12817)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b44db730c5b68af0f3e4809139c24ea3208c2f9b", "commit_date": "2023-02-17T10:09:21Z", "commit_message": "Merge pull request #12745 from opensourcerouting/fix/no_pretty_picks\n\nbgpd: Convert evpn output to not pretty print json", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fc87d3d082faeb4fd9f478b57b6c83cb2614ca1e", "commit_date": "2023-02-16T20:16:02Z", "commit_message": "lib: Fix non-use of option\n\nCommit d7c6467ba2f55d1055babbb7fe82716ca3efdc7e added the\nability to specify non pretty printing but unfortunately\nforgot to use the option variable to make the whole\nthing work.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3749235319b75ef3fab75da0147b3f5a10dd3626", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "zebra: Add debug for bridge capability\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nTicket: #2609944\n(cherry picked from commit f88889ba7a48c6126e7f389b023cd232cdee5078)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9aa36056fb57d29eda8f09276c82383b5971b816", "commit_date": "2023-02-16T19:46:37Z", "commit_message": "bgpd: Prevent multipathing among EVPN and non-EVPN paths\n\nEnsure that a multipath set is fully comprised of EVPN paths (i.e.,\npaths imported into the VRF from EVPN address-family) or non-EVPN\npaths. This is actually a condition that existed already in the code\nbut was not properly enforced.\n\nThis change, as a side effect, eliminates the known trigger condition\nfor bad or missing RMAC programming in an EVPN deployment, described\nin tickets CM-29043 and CM-31222. Routes (actually, paths) in a VRF\nrouting table that require VXLAN tunneling to the next hop currently\nneed some special handling in zebra to deal with the nexthop (neigh)\nand RMAC programming, and this is implemented for the entire route\n(prefix), not per-path. This can lead to the bad or missing RMAC\nsituation, which is now eliminated by ensuring all paths in the route\nare 'similar'.\n\nThe longer-term solution in CL 5.x will be to deal with the special\nprogramming by means of explicit communication between bgpd and zebra.\nThis is already implemented for EVPN-MH via CM-31398. These changes\nwill be extended to non-MH also and the special code in zebra removed\nor refined.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\nAcked-by:      Trey Aspelund <taspelund@nvidia.com>\nAcked-by:      Anuradha Karuppiah <anuradhak@nvidia.com>\nAcked-by:      Chirag Shah <chirag@nvidia.com>\n\nTicket: CM-29043\nTesting Done:\n1. Manual testing\n2. precommit on both MLX and BCM platforms\n3. evpn-smoke - BCM and VX\n\nResults described in the ticket\n\n(cherry picked from commit d2d71b042edc628cb6edae0b25d0a49aa9ad2050)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38efc4b35e43fa2b6ad2a6d4bb41f3fcb3a5d559", "commit_date": "2023-02-16T19:46:36Z", "commit_message": "bgpd: Fix deterministic-med check for stale paths\n\nWhen performing deterministic MED processing, ensure that the peer\nstatus is not checked when we encounter a stale path. Otherwise, this\npath will be skipped from the DMED consideration leading to it potentially\nnot being installed.\n\nTest scenario: Consider a prefix with 2 (multi)paths. The peer that\nannounces the path with the winning DMED undergoes a graceful-restart.\nBefore it comes back up, the other path goes away. Prior to the fix, a\nthird router that receives both these paths would have ended up not\nhaving any path installed to the prefix after the above events.\n\nSigned-off-by: Vivek Venkatraman <vivek@nvidia.com>\n\nFor internal use:\nTicket: CM-32032\nTesting done: Multiple manual testing\n\n(cherry picked from commit de692a4ebe0b8ea8e191d8ac1f3b41a386edd577)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15135ce2b71182d41378fc9f1336599b1b415549", "commit_date": "2023-02-14T20:19:44Z", "commit_message": "Merge pull request #12804 from FRRouting/mergify/bp/stable/8.4/pr-12790\n\nvrrpd: give null when using null ifp to lookup vr (backport #12790)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "170851737d9833400ceaa3c60456b50654029006", "commit_date": "2023-02-14T14:30:38Z", "commit_message": "vrrpd: give null when using null ifp to lookup vr\n\nThis is still causing crashes somehow.\n\nSigned-off-by: Quentin Young <qlyoung@cumulusnetworks.com>\n(cherry picked from commit ed331629de425914568c1d5c114018878627cdaf)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1925536fe16527b4d9ecea08763ee1693152d3eb", "commit_date": "2023-02-10T13:03:51Z", "commit_message": "Merge pull request #12787 from opensourcerouting/fix/backport_e9340ff429f5f1a255e89a50867a04a370cd56bb\n\nbgpd: Intern default-originate attributes to avoid use-after-free", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c6be72a69c2294bf93e1c7aa640ca44faeb04b6f", "commit_date": "2023-02-10T09:00:58Z", "commit_message": "bgpd: Intern default-originate attributes to avoid use-after-free\n\nWhen we receive a default route from a peer and we originate default route\nusing `neighbor default-originate`, we do not track of struct attr we use,\nand when we do `no neighbor default-originate` we withdraw our generated\ndefault route, but we announce default-route from the peer.\n\nAfter we do this, we unintern aspath (which was used for default-originate),\nBUT it was used also for peer's default route we received.\n\nAnd here we have a use-after-free crash, because bgp_process_main_one()\nreaps old paths that are marked as BGP_PATH_REMOVED with aspath->refcnt > 0,\nbut here it's 0.\n\n```\n0 0x55c24bbcd022 in aspath_key_make bgpd/bgp_aspath.c:2070\n1 0x55c24b8f1140 in attrhash_key_make bgpd/bgp_attr.c:777\n2 0x7f52322e66c9 in hash_release lib/hash.c:220\n3 0x55c24b8f6017 in bgp_attr_unintern bgpd/bgp_attr.c:1271\n4 0x55c24ba0acaa in bgp_path_info_free_with_caller bgpd/bgp_route.c:283\n5 0x55c24ba0a7de in bgp_path_info_unlock bgpd/bgp_route.c:309\n6 0x55c24ba0af6d in bgp_path_info_reap bgpd/bgp_route.c:426\n7 0x55c24ba17b9a in bgp_process_main_one bgpd/bgp_route.c:3333\n8 0x55c24ba18a1d in bgp_process_wq bgpd/bgp_route.c:3425\n9 0x7f52323c2cd5 in work_queue_run lib/workqueue.c:282\n10 0x7f52323aab92 in thread_call lib/thread.c:2006\n11 0x7f5232300dc7 in frr_run lib/libfrr.c:1198\n12 0x55c24b8ea792 in main bgpd/bgp_main.c:520\n13 0x7f5231c3a082 in __libc_start_main ../csu/libc-start.c:308\n14 0x55c24b8ef0bd in _start (/usr/lib/frr/bgpd+0x2c90bd)\n    ```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6f4f647ff1f8dae3359fbab40cdb4a031b615a04", "commit_date": "2023-02-10T08:14:35Z", "commit_message": "Merge pull request #12783 from FRRouting/mergify/bp/stable/8.4/pr-12781\n\nlib: Release memory of YANG translation module on error (backport #12781)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bcc9e7a548115da1b5ab5c0ebe41f0d74373f839", "commit_date": "2023-02-10T00:25:47Z", "commit_message": "lib: Free dnode before returning if YANG translator model is already loaded\n\nSeems just a missed one because at `goto error` we release dnode.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit ecf82aa41e76ecfbaf3f5762af1e90ebc9263721)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8093cc4b63c880f13c16a8d846722e5831cd2310", "commit_date": "2023-02-10T00:25:46Z", "commit_message": "lib: Release memory of YANG translation module on error\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit b9941b3fec21eca413c4ca9460a264eb9afb7e34)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd635cd3ae34536c506287b1056dea516be7c4b0", "commit_date": "2023-02-09T13:12:00Z", "commit_message": "Merge pull request #12779 from FRRouting/mergify/bp/stable/8.4/pr-12773\n\npbrd: fix large tableids displayed as negative (backport #12773)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b70772dbd7c89a3a64d1e69461e76f35d66e869", "commit_date": "2023-02-09T10:48:49Z", "commit_message": "pbrd: fix large tableids displayed as negative\n\nTicket: 2699411\nSigned-off-by: Wesley Coakley <wcoakley@nvidia.com>\n(cherry picked from commit 8dc2001c914956f1b493c4e04499b520362dd053)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f4af9196d963c3615b08ac966828cd8b689853c7", "commit_date": "2023-02-09T07:47:01Z", "commit_message": "Merge pull request #12774 from FRRouting/mergify/bp/stable/8.4/pr-12769\n\ntools: Fix missing pbrd in rsyslog.d 45-frr.conf file (backport #12769)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2b520b4f6800d2049440cc770c03a8438a60fb31", "commit_date": "2023-02-09T01:18:09Z", "commit_message": "tools: Fix missing pbrd in rsyslog.d 45-frr.conf file\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 7386031781858b3a43bc66484b53d57be3ee28e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5b3be313db17d6d705872fc535adff6197391f34", "commit_date": "2023-02-08T11:54:40Z", "commit_message": "Merge pull request #12766 from FRRouting/mergify/bp/stable/8.4/pr-12761\n\nbgpd: fix use-after-free crash for evpn (backport #12761)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "850fe41c793f6b8c5487a01108aeaf67255899f5", "commit_date": "2023-02-08T08:09:37Z", "commit_message": "bgpd: fix use-after-free crash for evpn\n\n```\nanlan(config-router-af)# vni 33\nanlan(config-router-af-vni)# route-target both 44:55\nanlan(config-router-af-vni)# no route-target both 44:55\nvtysh: error reading from bgpd: Resource temporarily unavailable (11)Warning: closing connection to bgpd because of an I/O error!\n```\n\nWhen `bgp_evpn_vni_rt_cmd` deals with \"both\" type, it wrongly created\nonly one node ( should be two nodes ) for lists of both `vpn->import_rtl` and\n`vpn->export_rtl`.  At this time, the two lists are already wrong.\n\nIn `no route-target both RT`, it will free the single node from lists of both\n`vpn->import_rtl` and `vpn->export_rtl`.  After freed from `vpn->import_rtl`,\nit is \"use-after-free\" at the time of freeing it from `vpn->export_rtl`.\nIt causes crash sometimes, or other unexpected behaviours.\n\nThis issue is introduced by commit `3b7e8d`, which have adjusted both\n`bgp_evpn_vni_rt_cmd` and `bgp_evpn_vrf_rt_cmd`.\n\nSince `bgp_evpn_vrf_rt_cmd/no_bgp_evpn_vrf_rt_cmd` works well again\nunintentionally with commit `7022da`, only `bgp_evpn_vni_rt_cmd` needs to\nmodify - add two nodes for \"both\" type and some explicit comments for this\nspecial case of \"both\" type.\n\nSigned-off-by: anlan_cs <vic.lan@pica8.com>\n(cherry picked from commit 432ff4b036860fb626f3027a7798038d594b8042)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9c8119a01157327eac334d7370b8f56aa0e3ff42", "commit_date": "2023-02-07T11:28:28Z", "commit_message": "Merge pull request #12752 from FRRouting/mergify/bp/stable/8.4/pr-12741\n\npceplib: add <time.h> include for time_t (backport #12741)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "641899baf55f233898e52b042a3351f4005c6668", "commit_date": "2023-02-07T09:07:05Z", "commit_message": "pceplib: add <time.h> include for time_t\n\nFixes build on musl. Used for time_t in the header.\n\nBug: https://bugs.gentoo.org/862558\nSigned-off-by: Sam James <sam@gentoo.org>\n(cherry picked from commit 3c8c112df4d72d98c8646df1495cf26a84c2c3b7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "48bb8903873da49f7dd43f291f34ab1d974db0d6", "commit_date": "2023-02-06T16:34:27Z", "commit_message": "Merge pull request #12746 from FRRouting/mergify/bp/stable/8.4/pr-12740\n\nbabeld: Fix filtering against all interfaces (backport #12740)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "59d91332b9f0cfaa535f39e14520eb6fc44e8f08", "commit_date": "2023-02-06T13:25:50Z", "commit_message": "babeld: Fix filtering against all interfaces\n\nThe first argument of `access_list_lookup` and `prefix_list_lookup`\nshould be `AFI_` constants instead of `AF_` constants.\n\nSigned-off-by: Yuxiang Zhu <vfreex@gmail.com>\n(cherry picked from commit 0f9650ca955d4c9a5c3d9de72a9306cb429079f2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8cc8e056d63949769994bae0b745198f77a8412e", "commit_date": "2023-02-06T10:48:13Z", "commit_message": "bgpd: Convert evpn output to not pretty print json\n\nCommit: 3cdb03fba7b40240fb38469a12b7b05a11043e09\nchanged the vty_json output to not be pretty printing.\nThe previous commit in the tree added vty_json_no_pretty\nlet's use that instead\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2c512e1bc9ac7bee58da01fe7e12218aea75699c", "commit_date": "2023-02-06T10:48:10Z", "commit_message": "lib, bgpd: Add ability to specify that some json output should not be pretty\n\nInitial commit: 23b2a7ef524c9fe083b217c7f6ebaec0effc8f52\nchanged the json output of `show bgp <afi> <safi> json` to\nnot have pretty print because when under a situation where\nthere are a bunch of routes with a large scale ecmp show\noutput was taking forever and this commit cut 2 minutes out\nof vtysh run time.\n\nSubusequent commit: f4ec52f7cc99f709756d9030623a20c98a086125\nchanged this back.\n\nWhen upgrading to latest version the long run time was noticed\ndue to testing.  Let's add back this functionality such that\nFRR can have reduced run times with vtysh when it's really\nneeded.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a758370a5a2b1215c9c8df368554fae5c302429", "commit_date": "2023-02-06T10:47:56Z", "commit_message": "bgpd: evpn route detail json display non prett\n\nFor BGP evpn route table detail json to use\nnon pretty form of display.\n\nProblem:\nIn scaled evpn route table detail json dump\noccupies high resources (CPU + memory) of the system.\nIn high scale evpn route dump using pretty form\nhogs CPU for a while which can trigger watchfrr\nto kill bgpd.\n\nSolution:\nAvoid pretty JSON print for detail version dump\n\nSigned-off-by: Chirag Shah <chirag@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c362f673bae8c7e0735da7d6a922d6a5996a8c21", "commit_date": "2023-02-01T12:12:29Z", "commit_message": "Merge pull request #12719 from FRRouting/mergify/bp/stable/8.4/pr-12704\n\npimd: v6 intentionally turned off route-maps.  Turn it on. (backport #12704)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9b6d5278bac3c13ac5cb53b88157d1e1be74d6a", "commit_date": "2023-01-31T19:02:27Z", "commit_message": "pimd: v6 intentionally turned off route-maps.  Turn it on.\n\nWhy?\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f51c430a17b79bff56bae4b8425711c16cd45300)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "62ac43de9f3bc470586cf4f51fadf013bf542b32", "commit_date": "2023-01-10T15:02:10Z", "commit_message": "FRR Release 8.4.2\n\nBug fixes:\n\n- bfdd: fix ipv4 socket source selection\n- bgpd : fix crash for `set ipv4/ipv6 vpn next-hop` command\n- bgpd: stop overriding nexthop when bgp unnumbered\n- bgpd: fix aggregated routes are withdrawn abnormally\n- bgpd: fix a few memory leaks\n- build: enable pim6d by default\n- build: fix sed regex in lua macro\n- doc : add freebsd 13 build docs\n- isisd: fix memory leak\n- lib:  disable vrf before terminating interfaces\n- lib: do not log `echo ping` commands from watchfrr\n- ospf6d:  fix infinite loop when adding asbr route\n- ospfd: fix rfc conformance test cases 25.19 and 27.6\n- ospfd: fix typo and report the P2P link name in the warning\n- ospfd: report the router IP with opaque capability mismatch\n- ospfd: fixing memory leak\n- pimd: consistently ignore prefix list mask len\n- staticd: do not crash when modifying an existing static route with color\n- zebra: free all memory associated ctx->u.iptable.interface_name_list\n- zebra: fix tracepoint changes for lttng\n- zebra: free up route map name memory on vrf deletion event\n- zebra: use `mpls enable`, not `mpls` when generating a config\n- tools: Ignore agentx command for frr-reload.py\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eae0855f541f0a4e8996dfe19ed3f312499375f7", "commit_date": "2023-01-09T20:56:34Z", "commit_message": "Merge pull request #12610 from FRRouting/mergify/bp/stable/8.4/pr-12606\n\n*: various build fixes (backport #12606)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e465af711c3da9267de8c5870d8242b353e8ba", "commit_date": "2023-01-09T18:27:03Z", "commit_message": "build: add doc files missing from dist tarball\n\nThe override.css/js files for sphinx docs were not being included into\nthe tarball created by `make dist`.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 26eaf6e386ed2b960c0004d2f927b586e516f587)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e0f65db75fb879805065feade4e888f1aaa56e02", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib/clippy: fix symbol validity check\n\nIf symvalid is false, looking at symidx is bogus.\n\nThis fixes a build-time SEGV on mips64el.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit a185874504654a691aa7c204b87ee2f9e3b8a49a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1a89a6f79db101b15299ae19d36d459d2e9673d9", "commit_date": "2023-01-09T18:27:02Z", "commit_message": "lib: disable xref ELF note on mips64el\n\nmips64el does not have a 64-bit PC-relative relocation, which is needed\nto emit the ELF note for xrefs.  Disabling the ELF note means clippy\ntakes the fallback path using section headers, so everything does still\nwork (... unless you strip the section headers.)\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ee4a6b9f654fbd4e07485037481ad6b4766bbc6d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "00624c9564457eb62adcd908b310f4df65b0efe5", "commit_date": "2023-01-09T18:27:01Z", "commit_message": "zebra: do not load/store wider-than-ptr atomics\n\nMost 32-bit architectures cannot do atomic loads and stores of data\nwider than their pointer size, i.e. 32 bit.  Funnily enough they\ngenerally *can* do a CAS2, i.e., 64-bit compare-and-swap, but while a\nCAS can emulate atomic add/bitops, loads and stores aren't available.\n\nReplace with a mutex;  since this is 99% used from the zserv thread, the\nmutex should take the local-to-thread fast path anyway.  And while one\natomic might be faster than a mutex lock/unlock, we're doing several\nhere, and at some point a mutex wins on speed anyway.\n\nThis fixes build on armel, mipsel, m68k, powerpc, and sh4.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ccac11096c385d269ecd15ad24ac88d469e7577c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c2853adde61305528383ea656852bf55a83d82f6", "commit_date": "2023-01-09T17:36:11Z", "commit_message": "Merge pull request #12607 from FRRouting/mergify/bp/stable/8.4/pr-12605\n\nospfd: report the router IP with opaque capability mismatch (backport #12605)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2e0a2a46b477ddee454ef41179fb4d3e9bc44bf8", "commit_date": "2023-01-07T18:44:06Z", "commit_message": "ospfd: report the router IP with Opaque capability mismatch\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit 8935b0fac623c84665282e81b59302b02388ad48)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "edc5dce610484cc4f20839a921dad1ee5c49c232", "commit_date": "2023-01-05T11:42:55Z", "commit_message": "Merge pull request #12598 from FRRouting/mergify/bp/stable/8.4/pr-12557\n\nvtysh: Remove double retrieve of env VTYSH_HISTFILE (backport #12557)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8df1306e2a490478250315c066d4d3e01d7a1143", "commit_date": "2023-01-05T08:32:42Z", "commit_message": "Merge pull request #12593 from FRRouting/mergify/bp/stable/8.4/pr-12458\n\nbgpd: Fix aggregated routes are withdrawn abnormally. (backport #12458)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8d472da36100a5b86f1d32d71b24c9163607daf8", "commit_date": "2023-01-05T08:32:35Z", "commit_message": "vtysh: Remove double retrieve of env VTYSH_HISTFILE\n\nThe code is double checking the VTYSH_HISTFILE env variable,\nadditionally clang-15 when running SA over it doesn't fully\nunderstand the code pattern.  Reduce the double check to\none check to reduce program run-time (ha!) and make SA happy.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 99a9f25ce8c1e070f7f37c4cbd439c11bb7432eb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2865946b03feada837020d6dcbca06f28581efc8", "commit_date": "2023-01-04T20:51:17Z", "commit_message": "    bgpd: Fix aggregated routes are withdrawn abnormally.\n\n    The withdraw message and announcement message of a prefix are received continuously within 50ms, which may lead to abnormal aggregation route reference count.\n    Steps to reproduce:\n    --------------------------\n    step1:\n    local config aggregate route 111.0.0.0/24\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:2\n\n    step2:\n    peer withdraw 111.0.0.1/32 and network 111.0.0.1/32 in 50ms\n    received route\uff1a111.0.0.1/32 111.0.0.02/32\n    ref_count:1\n\n    step3:\n    peer withdraw 111.0.0.1/32\n    received route\uff1a111.0.0.02/32\n    ref_count:0\n    aggregate route will be withdrawn abnormally\n\nSigned-off-by: liuze03 <liuze03@baidu.com>\n(cherry picked from commit 704e189e594418571463c80a3efcc2c1020adcf4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9594783741cc342d7612024bce57feb75813012f", "commit_date": "2023-01-03T07:17:53Z", "commit_message": "Merge pull request #12585 from FRRouting/mergify/bp/stable/8.4/pr-12566\n\nospfd: add advertising router IP to Opaque capability mismatch err msg (backport #12566)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8a3acab2e123677c8490539464f6cf031cadcd24", "commit_date": "2023-01-02T21:13:09Z", "commit_message": "ospfd: add advertising router IP to Opaque capability mismatch error message\n\nSubmitted-by Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit eab190351fc4460477274cec106989392bcff1b5)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "408cdb0011da5a0d9c3b63592e933eeb23e2ce53", "commit_date": "2023-01-02T20:42:30Z", "commit_message": "Merge pull request #12565 from FRRouting/mergify/bp/stable/8.4/pr-12560\n\ntools: Ignore agentx command for frr-reload.py (backport #12560)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bccbd54ecc147e1dbc67b97f1e4575c1b71960ab", "commit_date": "2022-12-28T11:12:26Z", "commit_message": "Merge pull request #12570 from FRRouting/mergify/bp/stable/8.4/pr-12558\n\nbgpd: static routes are leaked on shutdown (backport #12558)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3f94ed4fdbbdf644be4ab12f2df04e5044717eff", "commit_date": "2022-12-27T20:07:55Z", "commit_message": "bgpd: bgp_connected_add memory was being leaked in some cases\n\nOn shutdown, bgp calls an unlock for the bnc connected table,\nvia the bgp_connected_cleanup function.  This function is\nonly ever called on shutdown, so we know that bgp is going\naway.  The refcount for the connected data can be more than\n1.  Let's not worry about the refcount on shutdown and\njust delete the nodes instead of leaving them around.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1c225152c0f19d2d52c38e8cdc982750e50f72e0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1cec86b9c6e00bd65d0d0be220e7d7afbf949523", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: rfapi properly free a couple lists\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit c560f0698f425d4c054e13eccc9df87431cdb73f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2fdad4aef49a2a82f220f19b5bb611d05026fa31", "commit_date": "2022-12-27T20:07:54Z", "commit_message": "bgpd: static routes are leaked on shutdown\n\nShutdown of bgp results in both the bgp_path_info,\nbgp_dest and bgp_table's not being freed because\nthe bgp_path_info remains locked.\n\nEffectively static routes are scheduled for deletion but bgp_process\nskips the work because the work queue sees that the bgp router\nis marked for deletion.  Effectively not doing any work and leaving\ndata on the floor.\n\nModify the code when attempting to put into the work queue to\nnotice and not do so but just unlock the path info.\n\nThis is effectively the same as what goes on for normal peering\nas that it checks for shutdown and just calls bgp_path_info_free\ntoo.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit f9d6087c51fbeafc76f3c7f1b72681cbab7f3651)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3fd97bf31256815124e7c9d5fbd718eb0f7ba50c", "commit_date": "2022-12-25T01:48:51Z", "commit_message": "tools: Ignore agentx command for frr-reload.py\n\nagentx can't be disabled once enabled, so we should ignore it for frr-reload.py.\n\n```\n$ /usr/lib/frr/frr-reload.py --reload /etc/frr/bgpd.conf --bindir /usr/local/bin\n\"no agentx\" we failed to remove this command\nSNMP AgentX support cannot be disabled once enabled\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 4a9ea00a27c4edfb21e1efaed468a9eefc389d79)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "930d04ad1c6e1980f24805738499df47fc6e9ac8", "commit_date": "2022-12-20T07:51:42Z", "commit_message": "Merge pull request #12545 from FRRouting/mergify/bp/stable/8.4/pr-12438\n\nbgpd: Stop overriding nexthop in vpn_leak_from_vrf_update when the peer is BGP unnumberred (backport #12438)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c16d0acc3d30eebbd597d4a55cffd9a5170d357d", "commit_date": "2022-12-19T21:29:49Z", "commit_message": "tests: Add topotest bgp_vrf_leaking_5549_routes\n\nTo verify previous changes, this PR introduces topotest to verify\nwhether imported routes learnt from BGP unnumbered peers will be active\non VPN RIB and other VRF RIB.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 2b0efccd057752a14e88c71f142a5b8bc0ad93a8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a809a704d9ff5a4500a938f57874278698e443", "commit_date": "2022-12-19T21:29:48Z", "commit_message": "bgpd: Stop overriding nexthop when BGP unnumberred\n\nWhen we use vrf-to-vrf export, the nexthop has already not been\noverridden when the peer is BGP unnumberred. However, when we use normal\nexport, the nexthop will be oberridden. This behavior will make the VPN\nroutes invalid in VPN RIB.\n\nThis PR stops overriding nexthop even if we use normal export.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit f784007d677ee20e4dbd20366928652be2a0b23c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa0c54afbca317d6d04da199dd637ce97aaac9cc", "commit_date": "2022-12-14T11:51:29Z", "commit_message": "Merge pull request #12512 from FRRouting/mergify/bp/stable/8.4/pr-12498\n\nospfd: fix typo and report the link name in the warning (backport #12498)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4842032026a7208ce26a0ca92158a42c6153ec0d", "commit_date": "2022-12-14T04:07:51Z", "commit_message": "Merge pull request #12514 from donaldsharp/cleanup_8.4\n\nzebra: Remove badly backported TC code", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "272686633b651cd57adcca00b5b6b4e7181b6b1d", "commit_date": "2022-12-13T20:13:37Z", "commit_message": "zebra: Remove badly backported TC code\n\nSome TC code for the dplane got backported that should\nnot have been.  Remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64ce24a9e456154c8249dd4d0ce642c8926892d5", "commit_date": "2022-12-13T18:04:32Z", "commit_message": "ospfd: fix typo and report the link name in the warning\n\nSubmitted-by: Marc Boucher <marc@airvitesse.net>\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>\n(cherry picked from commit bf8d8a5451b869a07c147ae1b31d2c2b52458b2a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "886d57d0b4a284b0a4c0dc2a0cefacc5c9bd0aef", "commit_date": "2022-12-12T12:25:21Z", "commit_message": "Merge pull request #12493 from FRRouting/mergify/bp/stable/8.4/pr-12466\n\nbuild: FreeBSD fixes (backport #12466)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "211c53670ac5967d8108b38540129492940fa37a", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "doc: add FreeBSD 13 build docs\n\nSome minor changes since FreeBSD 11, mostly fewer extra sauce.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d3135b0189f3b99b5eb327d821bb9a40d09988e1)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8e6418c554c2be8a9b1636c42200ce1ad4d20ec", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: pim6d is Linux only\n\nThis stops breaking build on FreeBSD.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit d9a2d546da40fa6eb5b546eff34e07b8e67c2247)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e5abbaabae9e3a712eb35c34f06859fece6fbf19", "commit_date": "2022-12-12T08:44:56Z", "commit_message": "build: fix sed regex in Lua macro\n\nUsing `\\s` to match whitespace is not portable, use `[[:space:]]`\ninstead.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit 9e46405ca2c7b3d5380dc6ab619666a6d32bbbfb)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fd3f7171043acf9ed856efd9719dfc1676a20d97", "commit_date": "2022-12-11T19:35:23Z", "commit_message": "Merge pull request #12486 from FRRouting/mergify/bp/stable/8.4/pr-12482\n\nMem this (backport #12482)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7dab73b7601d995179fe54c5f6963aa420dce398", "commit_date": "2022-12-10T02:20:13Z", "commit_message": "zebra: Free up routemap name memory on vrf deletion event\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit cda0f501fb9a3b0dca429dac628ea4cc9566e233)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "de7500cd06d415497471afcc292a7900f9d2ed21", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "lib: Hide list macros in linklist.c\n\nThe LISTNODE_ATTACH|DELETE macros are only used in\nlinklist.c.  Let's remove temptation from people\nto use them.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit b3faf1aab6029caf272475122fd99f7f0b0b39c9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c348fec83b0d834f5993ab5b375432b8d398f3b9", "commit_date": "2022-12-10T02:20:12Z", "commit_message": "ospf6d: Don't allocate json memory in non-json path\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 21c6569d6f4dca71b4ddf7e6499e296efaf819c0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d92bdd385cb0de935ab27e1582e1dd811b90a544", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "zebra: Actually free all memory associated ctx->u.iptable.interface_name_list\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 1cc380679e4cbca5c0c4259653c57da1f47dbafe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "436bf68e016ef2679b96f4f1e465655ce8038925", "commit_date": "2022-12-10T02:20:11Z", "commit_message": "isisd: Fix sadj memory leak\n\nIn some cases the sadj was directly dropped.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 63e6e11f9f8a5e60fc9f6aaf54d33ba04cc3a6b4)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "64f5d73a3cbac6fe32c414a2cf30e940b97f6e7c", "commit_date": "2022-12-02T08:43:20Z", "commit_message": "Merge pull request #12428 from FRRouting/mergify/bp/stable/8.4/pr-12427\n\nbuild: enable pim6d by default (backport #12427)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7bea90ebbc8f76993417b59a967b36e2cdf4094a", "commit_date": "2022-12-02T05:56:24Z", "commit_message": "build: enable pim6d by default\n\nChange configure.ac so that pim6d is enabled by default; a\ncommand-line option can disable it.\n\nSigned-off-by: Mark Stapp <mjs@labn.net>\n(cherry picked from commit cee45b84f4648750cdfae314cca7b91ee3a696a2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7d7b33a0281b233757606bb1fa4e9c056c57084f", "commit_date": "2022-11-29T19:32:49Z", "commit_message": "Merge pull request #12419 from FRRouting/mergify/bp/stable/8.4/pr-12386\n\nbfdd: fix IPv4 socket source selection (backport #12386)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa4d0a699aaee28649a9e13ab3054d95cc49cad1", "commit_date": "2022-11-29T19:32:34Z", "commit_message": "Merge pull request #12420 from FRRouting/mergify/bp/stable/8.4/pr-12367\n\nospfd: Fixing a memleak. (backport #12367)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bdf19f7a057618ebf82c21965d7cd21070273a3c", "commit_date": "2022-11-29T16:24:12Z", "commit_message": "ospfd: Fixing memleak.\n\nDescription:\n\tAs part of signal handler ospf_finish_final(),  lsas are originated\n\tand added to refresh queues are not freed.\n\n\tOne such leak is :\n\t==2869285== 432 (40 direct, 392 indirect) bytes in 1 blocks are definitely lost in loss record 159 of 221\n\t==2869285==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)\n\t==2869285==    by 0x4910EC3: qcalloc (memory.c:116)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:4017)\n\t==2869285==    by 0x199024: ospf_refresher_register_lsa (ospf_lsa.c:3979)\n\t==2869285==    by 0x19A37F: ospf_network_lsa_install (ospf_lsa.c:2680)\n\t==2869285==    by 0x19A37F: ospf_lsa_install (ospf_lsa.c:2941)\n\t==2869285==    by 0x19C18F: ospf_network_lsa_update (ospf_lsa.c:1099)\n\t==2869285==    by 0x1931ED: ism_change_state (ospf_ism.c:556)\n\t==2869285==    by 0x1931ED: ospf_ism_event (ospf_ism.c:596)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19FBC6: nsm_change_state (ospf_nsm.c:695)\n\t==2869285==    by 0x19FBC6: ospf_nsm_event (ospf_nsm.c:861)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x19020B: ospf_if_cleanup (ospf_interface.c:322)\n\t==2869285==    by 0x192D0C: ism_interface_down (ospf_ism.c:393)\n\t==2869285==    by 0x193028: ospf_ism_event (ospf_ism.c:584)\n\t==2869285==    by 0x494E0B0: thread_call (thread.c:2006)\n\t==2869285==    by 0x494E395: _thread_execute (thread.c:2098)\n\t==2869285==    by 0x190F10: ospf_if_down (ospf_interface.c:851)\n\t==2869285==    by 0x1911D6: ospf_if_free (ospf_interface.c:341)\n\t==2869285==    by 0x1E6E98: ospf_finish_final (ospfd.c:748)\n\t==2869285==    by 0x1E6E98: ospf_deferred_shutdown_finish (ospfd.c:578)\n\t==2869285==    by 0x1E7727: ospf_finish (ospfd.c:682)\n\t==2869285==    by 0x1E7727: ospf_terminate (ospfd.c:652)\n\t==2869285==    by 0x18852B: sigint (ospf_main.c:105)\n\t==2869285==    by 0x493BE12: frr_sigevent_process (sigevent.c:130)\n\t==2869285==    by 0x494DCD4: thread_fetch (thread.c:1775)\n\t==2869285==    by 0x4905022: frr_run (libfrr.c:1197)\n\t==2869285==    by 0x187891: main (ospf_main.c:235)\n\n\tAdded a fix to cleanup all these queue pointers and corresponing lsas in it.\n\nSigned-off-by: Rajesh Girada <rgirada@vmware.com>\n(cherry picked from commit 594f80c83f40935b6dfcd15c8a3c28f1b4e3d423)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "836c3a35f6d434335b75753cf8c34f6f5eead359", "commit_date": "2022-11-29T15:04:29Z", "commit_message": "bfdd: fix IPv4 socket source selection\n\nThe imported BFD code had some logic to ignore the source address when\nusing single hop IPv4. The BFD peer socket function should allow the\nsource to be selected so we can:\n1. Select the source address in the outgoing packets\n2. Only receive packets from that specific source\n\nSigned-off-by: Rafael Zalamena <rzalamena@opensourcerouting.org>\n(cherry picked from commit f68114c1c397a939fd758af072c37d535f1de92f)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "37ea1e70143f012e0469a8a4af81407f4460ff63", "commit_date": "2022-11-28T19:00:58Z", "commit_message": "Merge pull request #12411 from FRRouting/mergify/bp/stable/8.4/pr-12408\n\nzebra: Use `mpls enable`, not `mpls` when generating a config (backport #12408)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2070aa87deee83df5a0753788cae1b00d04db94", "commit_date": "2022-11-28T19:00:49Z", "commit_message": "Merge pull request #12412 from FRRouting/mergify/bp/stable/8.4/pr-12389\n\nospf6d: fix infinite loop when adding ASBR route (backport #12389)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "176f7aa788ac627daa572e3ad4c4a60f4148702a", "commit_date": "2022-11-28T13:46:35Z", "commit_message": "ospf6d: fix infinite loop when adding ASBR route\n\nCommit 8f359e1593c414322 removed a check that prevented the same route\nfrom being added twice. In certain topologies, that change resulted in\nthe following infinite loop when adding an ASBR route:\n\nospf6_route_add\n ospf6_top_brouter_hook_add\n  ospf6_abr_examin_brouter\n   ospf6_abr_examin_summary\n    ospf6_route_add\n     (repeat until stack overflow)\n\nRevert the offending commit and update `ospf6_route_is_identical()` to\nnot do comparison using `memcmp()`.\n\nSigned-off-by: Renato Westphal <renato@opensourcerouting.org>\n(cherry picked from commit 4dfe15200ab1a84a8d77fcbc33085c373d556eae)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "400304b63eafbb9c8d31b2f258ff2d378af43928", "commit_date": "2022-11-28T12:48:59Z", "commit_message": "zebra: Use `mpls enable`, not `mpls` when generating a config\n\nIf we enable MPLS for an interface via sysctl, we should write `mpls enable`,\nnot `mpls`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 35c46a8718948850f67ec6c3ec00551b2b839310)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3e717bd02472b6c8bb52155db2292aa158d8064b", "commit_date": "2022-11-28T10:39:12Z", "commit_message": "Merge pull request #12407 from FRRouting/mergify/bp/stable/8.4/pr-12403\n\nEcho exclusion (backport #12403)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c8191b7c00bce5a4e037d76ec6d8f3a71eb633b3", "commit_date": "2022-11-28T08:08:46Z", "commit_message": "lib: Do not log `echo PING` commands from watchfrr\n\nSince the `echo PING` commands are from watchfrr and are sent\na whole bunch when an operator has `log commands` on the amount\nof logging done is quite significant.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit a8a0f80b634208c878e15335948810e1d532d1e7)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dfe07a821f58ff45573dd7f0e11fc46fec8aa00d", "commit_date": "2022-11-28T08:08:45Z", "commit_message": "zebra: Fix tracepoint changes for lttng\n\nThe recent tracepoint additions in c317d3f246769e8261df0f9d1eb787bea7b5da06\ndid not properly setup the tracepoints for lttng.  Fix this.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit bcb486dd3cbce01dd1d9085006305cfcd738f9e8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2801239675c84e0a674d6c3905c8e6e9e9220bc7", "commit_date": "2022-11-27T14:50:33Z", "commit_message": "Merge pull request #12404 from FRRouting/mergify/bp/stable/8.4/pr-12399\n\nstaticd: Fix crash for an existing route with color (backport #12399)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d438b0f5ed2682affc6bef0fba2daea87729792", "commit_date": "2022-11-26T19:26:16Z", "commit_message": "staticd: Do not crash when modifying an existing static route with color\n\n```\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65 color 123'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n123\n$ vtysh -c 'conf' -c 'ip route 192.168.0.0/32 192.168.10.65'\n$ vtysh -c 'show ip route 192.168.0.0/32 json' | jq '.\"192.168.0.0/32\"[0].nexthops[0].srteColor'\n0\n```\n\nBefore this patch:\n```\nSTATIC: Received signal 6 at 1666938633 (si_addr 0x4e1a, PC 0x7f295139c438); aborting...\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_backtrace_sigsafe+0x70) [0x7f29519ef0a0]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(zlog_signal+0xec) [0x7f29519ef28c]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xccee2) [0x7f2951a1aee2]\nSTATIC: /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390) [0x7f2951742390]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38) [0x7f295139c438]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(abort+0x16a) [0x7f295139e03a]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(_zlog_assert_failed+0xe6) [0x7f2951a46766]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xae7ee) [0x7f29519fc7ee]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(routing_control_plane_protocols_control_plane_protocol_staticd_route_list_src_\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xaf264) [0x7f29519fd264]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xafb4f) [0x7f29519fdb4f]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit_apply+0x33) [0x7f29519fde33]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_candidate_commit+0x9e) [0x7f29519fdf6e]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb0469) [0x7f29519fe469]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xb3055) [0x7f2951a01055]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(nb_cli_apply_changes+0xd8) [0x7f2951a01358]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x407ec2]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd() [0x40a307]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0x74923) [0x7f29519c2923]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute_command+0xe4) [0x7f29519c2aa4]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(cmd_execute+0xc9) [0x7f29519c2c49]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4184) [0x7f2951a32184]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe4436) [0x7f2951a32436]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(+0xe6fcc) [0x7f2951a34fcc]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(thread_call+0x98) [0x7f2951a2cc28]\nSTATIC: /home/u1/mGIT/frr-master/lib/.libs/libfrr.so.0(frr_run+0xe8) [0x7f29519e7518]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(main+0xda) [0x40572a]\nSTATIC: /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7f2951387840]\nSTATIC: /home/u1/mGIT/frr-master/staticd/.libs/lt-staticd(_start+0x29) [0x4058e9]\nSTATIC: in thread vtysh_read scheduled from lib/vty.c:2710 vty_event()\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 3278956b1741e9af38b92d74f84a8e48b1b6943e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "29a911093b96ea0aa330367a486d331e2a8fcc9c", "commit_date": "2022-11-26T19:19:06Z", "commit_message": "Merge pull request #12400 from FRRouting/mergify/bp/stable/8.4/pr-12370\n\nbgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command (backport #12370)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b635d08603230d57caf746c5b3440c95cd439efa", "commit_date": "2022-11-25T15:19:23Z", "commit_message": "bgpd: Fix crash for `set ipv4/ipv6 vpn next-hop` command\n\nCrash when using for example:\n\n```\nroute-map test permit 10\n set ipv6 vpn next-hop 10.10.10.10\n```\n\n```\nbgpd[30843]: libyang: Unsatisfied pattern - \"1.1.1.1\" does not conform to \"((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}((([0-9a-fA-F]{0,4}:)?(:|[0-9a-fA-F]{0,4}))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])))(%[\\p{N}\\p{L}]+)?\". (Schema location /frr-route-map:lib/route-map/entry/set-action/rmap-set-action/set-action/frr-bgp-route-map:ipv6-address/ipv6-address.)\nbgpd[30843]: [JEA2K-29RPH][EC 100663345] nb_candidate_edit: lyd_new_path(/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address) failed: 7\nbgpd[30843]: [ZDEA9-V1X7W][EC 100663341] nb_cli_apply_changes_internal: failed to edit candidate configuration: operation [modify] xpath [/frr-route-map:lib/route-map[name='belekas']/entry[sequence='109']/set-action[action='frr-bgp-route-map:ipv6-vpn-address']/rmap-set-action/frr-bgp-route-map:ipv6-address]\nbgpd[30843]: [SZNR8-V24R3][EC 100663326] yang_dnode_xpath_get_canon: couldn't find ./rmap-set-action/frr-bgp-route-map:ipv6-address\nbgpd[30843]: Backtrace for 20 stack frames:\nbgpd[30843]: [bt 0] /usr/local/lib/libfrr.so.0(zlog_backtrace+0x3a) [0x7f539c87c95a]\nbgpd[30843]: [bt 1] /usr/local/lib/libfrr.so.0(+0xed022) [0x7f539c8c8022]\nbgpd[30843]: [bt 2] /usr/local/lib/libfrr.so.0(yang_dnode_get_string+0x96) [0x7f539c8c9ea6]\nbgpd[30843]: [bt 3] /usr/local/lib/libfrr.so.0(route_map_action_show+0xc40) [0x7f539c8a4540]\nbgpd[30843]: [bt 4] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x5c) [0x7f539c88fa8c]\nbgpd[30843]: [bt 5] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 6] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x1a3) [0x7f539c88fbd3]\nbgpd[30843]: [bt 7] /usr/local/lib/libfrr.so.0(nb_cli_show_dnode_cmds+0x159) [0x7f539c88fb89]\nbgpd[30843]: [bt 8] /usr/local/lib/libfrr.so.0(+0xc4d47) [0x7f539c89fd47]\nbgpd[30843]: [bt 9] /usr/local/lib/libfrr.so.0(+0x7274a) [0x7f539c84d74a]\nbgpd[30843]: [bt 10] /usr/local/lib/libfrr.so.0(+0x72cb0) [0x7f539c84dcb0]\nbgpd[30843]: [bt 11] /usr/local/lib/libfrr.so.0(+0x74c40) [0x7f539c84fc40]\nbgpd[30843]: [bt 12] /usr/local/lib/libfrr.so.0(cmd_execute_command+0xa4) [0x7f539c84fd74]\nbgpd[30843]: [bt 13] /usr/local/lib/libfrr.so.0(cmd_execute+0x142) [0x7f539c84ffe2]\nbgpd[30843]: [bt 14] /usr/local/lib/libfrr.so.0(+0xe51b7) [0x7f539c8c01b7]\nbgpd[30843]: [bt 15] /usr/local/lib/libfrr.so.0(+0xe53f0) [0x7f539c8c03f0]\nbgpd[30843]: [bt 16] /usr/local/lib/libfrr.so.0(+0xe8078) [0x7f539c8c3078]\nbgpd[30843]: [bt 17] /usr/local/lib/libfrr.so.0(thread_call+0x7d) [0x7f539c8bacbd]\nbgpd[30843]: [bt 18] /usr/local/lib/libfrr.so.0(frr_run+0xe8) [0x7f539c8749b8]\nbgpd[30843]: [bt 19] /usr/lib/frr/bgpd(main+0x3f1) [0x55f887e97d71]\nBGP[30843]: Received signal 6 at 1669121170 (si_addr 0x7f0000787b, PC 0x7f539ba58e87); aborting...\n```\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 7be9666f9a1aeda292694fc936394977ada65724)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85db584ff85c46cc3c5a33fdf548e7667f915c96", "commit_date": "2022-11-25T06:55:15Z", "commit_message": "Merge pull request #12382 from FRRouting/mergify/bp/stable/8.4/pr-12374\n\nlib: disable vrf before terminating interfaces (backport #12374)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "15ca0cb7f29a5e0161530c36683f4dcf419ae8be", "commit_date": "2022-11-25T06:55:06Z", "commit_message": "Merge pull request #12387 from FRRouting/mergify/bp/stable/8.4/pr-12317\n\nospfd: Fix RFC conformance test cases 25.19 and 27.6 (backport #12317)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b2237bac834178971bfd6d60ac5c40f7cead21a1", "commit_date": "2022-11-24T15:22:11Z", "commit_message": "ospfd: Fix RFC conformance test cases 25.19 and 27.6\n\nSteps to reproduce:\n--------------------------\n1. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-A on DIface-0 with DUT as DR.\n2. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n3. DUT: Send <OSPF-LSU> packet.\n4. ANVL: Verify that the received <OSPF-LSU> packet contains a Network- LSA for network N1\n   originated by DUT, and the LS Sequence Number is set to <InitialSequenceNumber>.\n5. ANVL: Establish full adjacency with DUT for neighbor Rtr-0-B on DIface-0 with DUT as DR.\n6. ANVL: Listen (for up to 2 * <RxmtInterval> seconds) on DIface-0.\n7. DUT: Send <OSPF-LSU> packet.\n8. ANVL: Verify that the received <OSPF-LSU> packet contains a new instance of the\n   Network-LSA for network N1 originated by DUT, and the LS Sequence Number\n   is set to (<InitialSequenceNumber> + 1).\n\nBoth the test cases were failing while verifying the initial sequence number for network LSA.\n\nThis is because currently OSPF does not reset its LSA sequence number when it is going down.\n\nSigned-off-by: Mobashshera Rasool <mrasool@vmware.com>\n(cherry picked from commit ca5997cd018ec66534285130d02de168a3a4ed5c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02b684b8f74d1f2e6f333c1b8ad70b8f6a8010b1", "commit_date": "2022-11-24T07:29:24Z", "commit_message": "lib: disable vrf before terminating interfaces\n\nWe must disable the vrf before we start terminating interfaces.\n\nOn termination, we free the 'zebra_if' struct from the interface ->info\npointer. We rely on that for subsystems like vxlan for cleanup when\nshutting down.\n\n'''\n==497406== Invalid read of size 8\n==497406==    at 0x47E70A: zebra_evpn_del (zebra_evpn.c:1103)\n==497406==    by 0x47F004: zebra_evpn_cleanup_all (zebra_evpn.c:1363)\n==497406==    by 0x4F2404: zebra_evpn_vxlan_cleanup_all (zebra_vxlan.c:1158)\n==497406==    by 0x4917041: hash_iterate (hash.c:267)\n==497406==    by 0x4F25E2: zebra_vxlan_cleanup_tables (zebra_vxlan.c:5676)\n==497406==    by 0x4D52EC: zebra_vrf_disable (zebra_vrf.c:209)\n==497406==    by 0x49A247F: vrf_disable (vrf.c:340)\n==497406==    by 0x49A2521: vrf_delete (vrf.c:245)\n==497406==    by 0x49A2E2B: vrf_terminate_single (vrf.c:533)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==  Address 0x6d68c68 is 200 bytes inside a block of size 272 free'd\n==497406==    at 0x48470E4: free (vg_replace_malloc.c:872)\n==497406==    by 0x4942CF0: qfree (memory.c:141)\n==497406==    by 0x49196A9: if_delete (if.c:293)\n==497406==    by 0x491C54C: if_terminate (if.c:1031)\n==497406==    by 0x49A2E22: vrf_terminate_single (vrf.c:532)\n==497406==    by 0x49A2D8F: vrf_terminate (vrf.c:561)\n==497406==    by 0x441240: sigint (main.c:192)\n==497406==    by 0x4981F6D: frr_sigevent_process (sigevent.c:130)\n==497406==    by 0x499A5F0: thread_fetch (thread.c:1775)\n==497406==    by 0x492850E: frr_run (libfrr.c:1197)\n==497406==    by 0x441746: main (main.c:476)\n==497406==  Block was alloc'd at\n==497406==    at 0x4849464: calloc (vg_replace_malloc.c:1328)\n==497406==    by 0x49429A5: qcalloc (memory.c:116)\n==497406==    by 0x491D971: if_new (if.c:174)\n==497406==    by 0x491ACC8: if_create_name (if.c:228)\n==497406==    by 0x491ABEB: if_get_by_name (if.c:613)\n==497406==    by 0x427052: netlink_interface (if_netlink.c:1178)\n==497406==    by 0x43BC18: netlink_parse_info (kernel_netlink.c:1188)\n==497406==    by 0x4266D7: interface_lookup_netlink (if_netlink.c:1288)\n==497406==    by 0x42B634: interface_list (if_netlink.c:2368)\n==497406==    by 0x4ABF83: zebra_ns_enable (zebra_ns.c:127)\n==497406==    by 0x4AC17E: zebra_ns_init (zebra_ns.c:216)\n==497406==    by 0x44166C: main (main.c:408)\n'''\n\nSigned-off-by: Stephen Worley <sworley@nvidia.com>\n(cherry picked from commit b14fa9c4dca1846d64ced5a9710faa1345da4ca0)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2a6176ac3a223f29ea6f40dedc186eb54da68c14", "commit_date": "2022-11-24T07:13:07Z", "commit_message": "Merge pull request #12381 from FRRouting/mergify/bp/stable/8.4/pr-12377\n\nzebra: Replace TC definitions for dplane (backport #12377)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "67e2017f84fd06dcfcb8dc2bcfe2085b4462809c", "commit_date": "2022-11-24T05:26:32Z", "commit_message": "Merge pull request #12378 from FRRouting/mergify/bp/stable/8.4/pr-12260\n\npimd: consistently ignore prefix list mask len (backport #12260)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ad1dca166d4640fe55ee6a685c7845d5bb941c5", "commit_date": "2022-11-23T20:54:21Z", "commit_message": "zebra: Replace TC definitions for dplane\n\nThey were replaced, but forgot for `--enable-scripting`.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 2272627571681ba01585fc3f25a3ebfda1b7da30)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8766ccbf073303ef998a3355136a9f08420033b", "commit_date": "2022-11-23T18:15:12Z", "commit_message": "pimd: consistently ignore prefix list mask len\n\n... the prefix length wasn't ignored as expected.  Both S and G are\nalways /32.  But expecting \"le 32\" in prefix-list config is unexpected &\ncounterintuitive.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit ab2f9e89b44642af568c3542e1f2b14378fb5ec2)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56a3ac3b5d96e507340cee29467ebf28e868d081", "commit_date": "2022-11-22T16:31:01Z", "commit_message": "Merge pull request #12360 from FRRouting/mergify/bp/stable/8.4/pr-12347\n\nsnapcraft: Add pim6 daemon for PIM IPv6 to snap package (backport #12347)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e0a4cda6dd3832a587d10acf94650fec05fa3ba", "commit_date": "2022-11-21T18:55:59Z", "commit_message": "snapcraft: Add pim6 daemon for PIM IPv6 to snap package\n\nSigned-off-by: Martin Winter <mwinter@opensourcerouting.org>\n(cherry picked from commit feeaf30fde211fcff4231807fc9e52c4bbd3000e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "70151e264bbb697a10fed711aa8c937d4f0009b1", "commit_date": "2022-11-18T05:31:08Z", "commit_message": "FRR Release 8.4.1\n\n- zebra: reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n- zebra: fix build without AF_MPLS\n- ospfd: get route-map name for default-information originate\n- ospfd: allow unnumbered and numbered addresses to co-exist better\n- ospfd: prevent from crashing when processing external lsa\n- bgpd: fix \"storing the address of local variable\"\n- bgpd: rpki was decrementing the node lock one time too many\n- bgpd: do not send Deconfig/Shutdown message when restarting\n- pimd: convert zlog_warn to debug\n\nSigned-off-by: Jafar Al-Gharaibeh <jafar@atcorp.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6b72cc20086bf75fa492e3de79facf3cac6d6aba", "commit_date": "2022-11-17T20:21:43Z", "commit_message": "Merge pull request #12332 from FRRouting/mergify/bp/stable/8.4/pr-12309\n\nbgpd: fix invalid ipv4-vpn nexthop for IPv6 peer (backport #12309)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8dff1be53318034b88a8bc1308d2f5eae985db7b", "commit_date": "2022-11-17T15:05:49Z", "commit_message": "bgpd: fix invalid ipv4-vpn nexthop for IPv6 peer\n\nGiven that two routers are connected each other and they have IPv6\naddresses and they establish BGP peer with extended-nexthop capability\nand one router tries to advertise locally-generated IPv4-VPN routes to\nother router.\n\nIn this situation, bgpd on the router that tries to advertise IPv4-VPN\nroutes will be crashed with \"invalid MP nexthop length (AFI IP6)\".\n\nThis issue is happened because MP_REACH_NLRI path attribute is not\ngenerated correctly when ipv4-vpn routes are advertised to IPv6 peer.\nWhen IPv4 routes are leaked from VRF RIB, the nexthop of these routes\nare also IPv4 address (0.0.0.0/0 or specific addresses). However,\nbgp_packet_mpattr_start only covers the case of IPv6 nexthop (for IPv6\npeer).\n\nipv4-unicast routes were not affected by this issue because the case of\nIPv4 nexthop is covered in `else` block.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 63e7ddb509435d9e178cf51a9a288273fb91bf7e)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "daa21266dc5f4318d3e0fa6db9f401ff9619f48a", "commit_date": "2022-11-17T15:05:48Z", "commit_message": "tests: Add topotest for l3vpn over ipv6 peer\n\nTo check the effect of the next patch, I added topotest.\n\nSigned-off-by: Ryoga Saito <ryoga.saito@linecorp.com>\n(cherry picked from commit 3db8aa8750d1be675f6df1ed765afeb101b6402b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "43b7aec4ef7dc476e027339a98f6844cdb0746b4", "commit_date": "2022-11-17T14:42:01Z", "commit_message": "Merge pull request #12331 from FRRouting/mergify/bp/stable/8.4/pr-12302\n\nisisd: fix area NULL pointer in isis_route_update (backport #12302)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935c3f3930cdda66e72cb5518d0cce43d653082f", "commit_date": "2022-11-17T12:14:58Z", "commit_message": "Merge pull request #12330 from FRRouting/mergify/bp/stable/8.4/pr-12312\n\nbgpd: authorise to select bgp self peer prefix on rr case (backport #12312)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7a07501ff1127f1726c9aadb17d8f3cd506521f8", "commit_date": "2022-11-17T11:26:22Z", "commit_message": "isisd: fix area NULL pointer in isis_route_update\n\nFix the case area is NULL.\n\nFixes: acc0029779 (\"isisd: fix potential access to NULL pointer in isis_route_update\")\nSigned-off-by: Louis Scalbert <louis.scalbert@6wind.com>\n(cherry picked from commit 41c2bf853f072008330a929480bf235ac840212a)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "56dd706e9b3a5eb790fa695e8f6f71e73b843aab", "commit_date": "2022-11-17T02:58:49Z", "commit_message": "bgpd: authorise to select bgp self peer prefix on rr case\n\nThis commit addresses an issue that happens when using bgp\npeering with a rr client, with a received prefix which is the\nlocal ip address of the bgp session.\n\nWhen using bgp ipv4 unicast session, the local prefix is\nreceived by a peer, and finds out that the proposed prefix\nand its next-hop are the same. To avoid a route loop locally,\nno nexthop entry is referenced for that prefix, and the route\nwill not be selected.\n\nWhen the received peer is a route reflector, the prefix has\nto be selected, even if the route can not be installed locally.\n\nFixes: (\"fb8ae704615c\") bgpd: prevent routes loop through itself\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit f874552557cf2577ae91b297f422e307084f22d3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "23f40f230d1fe293eb519aafb0825444ea44f0e0", "commit_date": "2022-11-15T16:02:43Z", "commit_message": "Merge pull request #12320 from FRRouting/mergify/bp/stable/8.4/pr-12307\n\ntools: remove backslash from declare check regex (backport #12307)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "47c5955841fef46d921ff10b2d70691c2f439851", "commit_date": "2022-11-15T09:28:25Z", "commit_message": "Merge pull request #12319 from FRRouting/mergify/bp/stable/8.4/pr-12315\n\nDplane sorry (backport #12315)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9677fefbf71907d0cad2a11f6cdf762678667a25", "commit_date": "2022-11-15T07:14:19Z", "commit_message": "tools: remove backslash from declare check regex\n\nThe backslash in `grep -q '^declare \\-a'` is not needed and\ncauses `grep: warning: stray \\ before -` warning in grep-3.8.\n\nSigned-off-by: Marius Tomaschewski <mt@suse.com>\n(cherry picked from commit 5216a05b32390a64efeb598051411e1776042624)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f97e6d92b33df5c1648382c73f2c6d64a1a0c275", "commit_date": "2022-11-15T07:12:23Z", "commit_message": "zebra: Fix dplane_fpm_nl to allow for fast configuration\n\nIf you have this order in your configuration file:\n\nno fpm use-next-hop-groups\nfpm address 127.0.0.1\n\nthe dplane code was using the same event thread t_event and the second\nadd event in the code was going, you already have an event scheduled\nand as such the second event does not overwrite it.  Leaving\nno code to actually start the whole processing.  There are probably\nother cli iterations that will cause this fun as well, but I'm\nnot going to spend the time sussing them out at the moment.\n\nFixes: #12314\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 551fa8c3549e24020dfce33d06ade4a14f72abfe)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5a35dd3a499c59672656eb2429a85bb271b46fbd", "commit_date": "2022-11-15T07:12:22Z", "commit_message": "zebra: Use the enum, luke\n\nUse the enum and let the compiler help us figure out\nwhat cases are being missed.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit dc31de93e1a79b4a138b474d3c4fdb44cdfee6f3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72e7872400817cb19b5b825cde70df50c6d2c86a", "commit_date": "2022-11-11T08:47:46Z", "commit_message": "Merge pull request #12305 from FRRouting/mergify/bp/stable/8.4/pr-12303\n\nzebra: relax if_type check to allow early ES config creation (backport #12303)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "07a87740235ec8b61d56c713c069d4485dc44529", "commit_date": "2022-11-11T06:15:27Z", "commit_message": "zebra: relax if_type check to allow early ES config creation\n\nThe API for configuring ES in zebra had a strict check for if_type\n\"isBond\" that prevented the ES config from being created before the\ninterface.\n\nTicket: CM-29454\n\nSigned-off-by: Anuradha Karuppiah <anuradhak@cumulusnetworks.com>\n(cherry picked from commit 3fa177eed287823bbe1d6c7bd9856d1d19435db3)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0c2f57d6bb20eae4a1ee78a0bde94b93bb4404a2", "commit_date": "2022-11-10T22:20:57Z", "commit_message": "Merge pull request #12304 from FRRouting/mergify/bp/stable/8.4/pr-12269\n\nospfd: prevent from crashing when processing external lsa (backport #12269)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "24da77c557d2678bca891310ca2e7d4b994349e2", "commit_date": "2022-11-10T19:21:36Z", "commit_message": "ospfd: prevent from crashing when processing external lsa\n\nWhen using debug mode, the ei parameter may be NULL. In that\ncase, do not display the log trace, otherwise a crash will\nhappen.\n\nSigned-off-by: Philippe Guibert <philippe.guibert@6wind.com>\n(cherry picked from commit e5309c1a6e366f5dc95cbc3bbbe5c7ce1d46625c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b87dfd9eb7b87c8c16705c953c3ecf4e9680c533", "commit_date": "2022-11-10T04:55:42Z", "commit_message": "Merge pull request #12299 from FRRouting/mergify/bp/stable/8.4/pr-12297\n\npimd: Convert zlog_warn to debug (backport #12297)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0fe0a9b5afd02c8596e06e1f62098a89c192b8a", "commit_date": "2022-11-09T22:18:05Z", "commit_message": "pimd: Convert zlog_warn to debug\n\nThe unable to find a nexthop should not be a warning it should\nbe a debug.  Switching over.\n\nSigned-off-by: Donald Sharp <sharpd@cumulusnetworks.com>\n(cherry picked from commit 7d7206a534eec49b83ff0ef95fe1ba04e5507fc8)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0cb4f4db970f4cd79f89332bbdd40a7c074d08cd", "commit_date": "2022-11-09T14:46:50Z", "commit_message": "Merge pull request #12293 from donaldsharp/rpki_crash_to_8.4\n\nbgpd: rpki was decrementing the node lock one time too many", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fcbb9447c52e65faf887f2c55a55a0afec2c41c1", "commit_date": "2022-11-09T12:26:26Z", "commit_message": "bgpd: rpki was decrementing the node lock one time too many\n\nThe code was this:\n\n1)        match = bgp_table_subtree_lookup(rrp->bgp->rib[rrp->afi][rrp->safi],\n                                         &rrp->prefix);\n\n2)        node = match;\n\n        while (node) {\n                if (bgp_dest_has_bgp_path_info_data(node)) {\n                        revalidate_bgp_node(node, rrp->afi, rrp->safi);\n                }\n\n3)               node = bgp_route_next_until(node, match);\n        }\n\n\tif (match)\n4)              bgp_dest_unlock_node(match);\n\nAt 1) match was locked and became +1\nAt 2) match and node are now equal\nAt 3) On first iteration, match is decremented( as that node points\nat it ) and the next item is locked, if it is found, and returned which becomes node\n\nIf 3 is run again because node is non-null then, current node is decremented\nand the next node found is incremented and returned which becomes node again.\n\nSo if we get to 4) match is unlocked again which is now a double unlock\nwhich, frankly, is not good.  In all code paths that I can see the\ntest for `if (match) ...` is not needed so let's just remove it.\n\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "36c54fce566f1eaeeb61a2170f22e3b459cc8ef8", "commit_date": "2022-11-09T09:20:28Z", "commit_message": "Merge pull request #12290 from FRRouting/mergify/bp/stable/8.4/pr-12286\n\nzebra/netconf_netlink.c: fix build without AF_MPLS (backport #12286)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eed83c07cc2c08d1b7eb33effa396d4732b20dc1", "commit_date": "2022-11-09T05:25:17Z", "commit_message": "zebra/netconf_netlink.c: fix build without AF_MPLS\n\nFix the following build failure raised since version 8.4 and\nhttps://github.com/FRRouting/frr/commit/d53dc9bd8164ba40242e2013d382fb01eb0b96ed:\n\nzebra/netconf_netlink.c: In function 'netlink_netconf_change':\nzebra/netconf_netlink.c:109:32: error: 'AF_MPLS' undeclared (first use in this function)\n  109 |         if (ncm->ncm_family == AF_MPLS)\n      |                                ^~~~~~~\n\nSigned-off-by: Fabrice Fontaine <fontaine.fabrice@gmail.com>\n(cherry picked from commit fa60f2c2fac9ff6d71e8bddab92f78a6d558035b)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bf74460ce359c430ac1368bc54e46e2258e733d2", "commit_date": "2022-11-08T19:24:53Z", "commit_message": "Merge pull request #12285 from FRRouting/mergify/bp/stable/8.4/pr-12258\n\nbgpd: fix \"storing the address of local variable\" (backport #12258)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5026a9632dbec59ef91c8fb6ed267fccbd6b2d", "commit_date": "2022-11-08T16:37:22Z", "commit_message": "bgpd: fix \"storing the address of local variable\"\n\nNew GCC 12 warning.\n\nSigned-off-by: David Lamparter <equinox@opensourcerouting.org>\n(cherry picked from commit c34a7afc743c52e1081f10792047cdf73e9cba2c)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dd63a540848912e05880ec1d125b3faf4a9da98e", "commit_date": "2022-11-08T16:33:21Z", "commit_message": "Merge pull request #12282 from FRRouting/mergify/bp/stable/8.4/pr-12115\n\nospfd: Allow unnumbered and numbered addresses to co-exist better (backport #12115)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fe5434eb946948778d4572b4d6a8380027f544eb", "commit_date": "2022-11-08T11:51:12Z", "commit_message": "ospfd: Allow unnumbered and numbered addresses to co-exist better\n\nWhen forming a neighbor relationship on an interface, ospf is\ncurrently evaluating unnumbered as highest priority, without\nany consideration for if you have /32's and non /32's on the\ninterface.  Effectively if I have something like this:\n\nint foo0\n  ip address 192.168.119.1/24\n!\nrouter ospf\n  network 0.0.0.0/0 area 0\n!\n\nospf will form a neighbor on foo0 if it exists.  Now\nsuppose someone does this:\n\nint foo0\n  ip address 192.168.120.1/32\n\nThis will create the unnumbered interface on foo0 and\nthe peering will come down immediately.\n\nThe problem here is that the original designers of the unnumbered\ncode for ospf didn't envision end operators mixing and matching\naddresses on an interface like this ( for perfectly legitimate\nreasons I might add ).\n\nSo if ospf has both numbered and unnumbered let's match against\nthe numbered first and then unnumbered.  This solves the problem\n\nFixes: #6823\nSigned-off-by: Donald Sharp <sharpd@nvidia.com>\n(cherry picked from commit 5136e6729464c57353be1ad4a55fcbdbbfc7779d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9d2a8d56cf939ac3e9f841718864f34da44873d5", "commit_date": "2022-11-08T07:16:10Z", "commit_message": "Merge pull request #12275 from FRRouting/mergify/bp/stable/8.4/pr-12034\n\nbgpd: Do not send Deconfig/Shutdown message when restarting (backport #12034)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "bb72d071d788a6922d697c8232a2513946be8145", "commit_date": "2022-11-08T06:26:03Z", "commit_message": "Merge pull request #12274 from FRRouting/mergify/bp/stable/8.4/pr-12268\n\nzebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr (backport #12268)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6ffc00d9502acfc46a95f30f46c40eb51ef2cd3b", "commit_date": "2022-11-08T06:25:34Z", "commit_message": "Merge pull request #12277 from FRRouting/mergify/bp/stable/8.4/pr-12276\n\nospfd: Get route-map name for default-information originate (backport #12276)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4a21c603e075eb606b33880f8ad9044a39a48a36", "commit_date": "2022-11-08T04:09:01Z", "commit_message": "ospfd: Get route-map name for default-information originate\n\nLR1.wue3(config)# route-map foo-bar-baz10 permit 10\nLR1.wue3(config-route-map)# exit\nLR1.wue3(config)# router ospf\nLR1.wue3(config-router)#  ospf router-id 172.18.254.201\nLR1.wue3(config-router)#  log-adjacency-changes\nLR1.wue3(config-router)# default-information originate metric 50 metric-type 1 route-map foo-bar-baz10\nLR1.wue3(config-router)# end\n\nResults in:\n\nLR1.wue3# show run\n...\n!\nrouter ospf\n ospf router-id 172.18.254.201\n log-adjacency-changes\n default-information originate metric 50 metric-type 1 route-map oute-map\nexit\n!\nroute-map foo-bar-baz10 permit 10\nexit\n!\nend\n\nLet's fix this.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit bd162aae094360605b7f4b9b8cd46f6e4ffebc04)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "28f5cfb51eeab3fbe181e1c751c2c8264197357b", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "tests: Check if the routes in the kernel are retained for GR as well\n\nNot only in BGP table.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 18e427bc598879110860fd198808300e991ad146)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "54acee45bd60bd06662f9551db500d584a9c73b1", "commit_date": "2022-11-07T19:26:41Z", "commit_message": "bgpd: Do not send Deconfig/Shutdown message when restarting\n\nWe might disable sending unconfig/shutdown notifications when\nGraceful-Restart is enabled and negotiated.\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 95098d9611e79d43b578400bb76dc7a76aa8cab9)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f04dff1889fdc0ec2c850c92a5a9b8c05b56a792", "commit_date": "2022-11-07T19:21:26Z", "commit_message": "zebra: Reuse netinet/if_ether.h to avoid redefinition of struct ethhdr\n\nIn file included from /usr/include/net/ethernet.h:10,\n                 from ./lib/prefix.h:26,\n                 from zebra/tc_netlink.c:32:\n/usr/include/netinet/if_ether.h:115:8: error: redefinition of 'struct ethhdr'\n  115 | struct ethhdr {\n      |        ^~~~~~\nIn file included from zebra/tc_netlink.c:28:\n/usr/include/linux/if_ether.h:169:8: note: originally defined here\n  169 | struct ethhdr {\n      |        ^~~~~~\n\nSigned-off-by: Donatas Abraitis <donatas@opensourcerouting.org>\n(cherry picked from commit 83f496bdf094d71e9bbe38f08f39426f8b1a139d)", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}]}