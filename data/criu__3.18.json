{"criu-dev": [{"commit_oid": "5e37ccf379ad7f47a720f64bced40cf2fe5bd6a2", "commit_date": "2023-09-25T21:56:24Z", "commit_message": "ci: stop testing ubuntu overlayfs\n\nThey break it with each kernel rebase. More details are here:\nhttps://bugs.launchpad.net/ubuntu/+source/linux/+bug/1857257\n\nLast time, it was fixed a few month ago and it has been broken again in\n5.15.0-1046-azure.\n\nLet's bind-mount the CRIU directory into a test container to make it\nindependent of a container file system.\n\nSigned-off-by: Andrei Vagin <avagin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "150eecc0f8f1b4ee8c0bdc1a902141d103732ee1", "commit_date": "2023-09-22T14:53:26Z", "commit_message": "py/cli: add --version option\n\nThis patch implements the '--version' for the crit tool.\n\n$ crit --version\n3.17\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b8b2fe6b7c48d6b5c346670d64aace645778cef7", "commit_date": "2023-09-22T14:53:26Z", "commit_message": "crit/setup.py: use __version__ from pycriu\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4ae1518df81132314a7ae3e1c5797d147f0dde24", "commit_date": "2023-09-22T14:53:26Z", "commit_message": "lib/pycriu: generate version.py\n\nThe version of CRIU is specified in the Makefile.versions file.\nThis patch generates '__varion__' value for the pycriu module.\nThis value can be used by crit to implement `--version`.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4766ffa197cbb700a89dff4d19eae8807245b276", "commit_date": "2023-09-20T14:35:29Z", "commit_message": "compel: Add support for ppc64le scv syscalls\n\nPower ISA 3.0 added a new syscall instruction. Kernel 5.9 added\ncorresponding support.\n\nAdd CRIU support to recognize the new instruction and kernel ABI changes\nto properly dump and restore threads executing in syscalls. Without this\nchange threads executing in syscalls using the scv instruction will not\nbe restored to re-execute the syscall, they will be restored to execute\nthe following instruction and will return unexpected error codes\n(ERESTARTSYS, etc) to user code.\n\nSigned-off-by: Younes Manton <ymanton@ca.ibm.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f043f53cff6b50af15cf642e3916761bd2ffadb8", "commit_date": "2023-09-14T23:38:40Z", "commit_message": "criu/plugin: Add environment variable to cap size of buffers.\n\nThe amdgpu plugin would create a memory buffer at the size\nof the largest VRAM bo (buffer object). On some systems, VRAM\nsize exceeds RAM size, so the largest bo might be larger than\nthe available memory.\n\nAdd an environment variable KFD_MAX_BUFFER_SIZE, which caps the\nsize of this buffer. By default, it is set to 0, and has no\neffect. When active, any bo larger than its value will be\nsaved to/restored from file in multiple passes.\n\nSigned-off-by: David Francis <David.Francis@amd.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d7524792db48716bb9005637c8e1280d1792b07e", "commit_date": "2023-09-14T15:50:11Z", "commit_message": "zdtm: test MEMBARRIER_CMD_GLOBAL_EXPEDITED migration\n\nCheck membarrier registration both ways:\n1. By issuing membarrier commands and checking if they succeed.\n2. By issuing MEMBARRIER_CMD_GET_REGISTRATIONS.\n\nThe first way is needed for older kernels. The second way is needed to test\nMEMBARRIER_CMD_GLOBAL_EXPEDITED.\n\nSigned-off-by: Michal Clapinski <mclapinski@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4b7287be9b55f4651bd32587ab8446966b4bdd6c", "commit_date": "2023-09-14T15:49:57Z", "commit_message": "dump: use MEMBARRIER_CMD_GET_REGISTRATIONS when available\n\nMEMBARRIER_CMD_GET_REGISTRATIONS can tell us whether or not the process used\nMEMBARRIER_CMD_REGISTER_GLOBAL_EXPEDITED unlike the old probing method.\n\nFalls back to the old method when MEMBARRIER_CMD_GET_REGISTRATIONS is\nunavailable.\n\nSigned-off-by: Michal Clapinski <mclapinski@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "82bfb67abe6eab7aa2d6fedc30e34647beaf8c7a", "commit_date": "2023-09-04T11:49:25Z", "commit_message": "vagrant: run tests with fedora 38\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1df618a3e1d846d3e3878ffd7c7d6144774ca6e2", "commit_date": "2023-09-04T11:49:25Z", "commit_message": "vagrant: update to version 2.3.7\n\nThis patch also updated the download URL format\n\nfrom\n    https://releases.hashicorp.com/vagrant/2.3.7/vagrant_2.3.7_x86_64.deb\n\nto\n    https://releases.hashicorp.com/vagrant/2.3.7/vagrant_2.3.7-1_amd64.deb\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "03541c0e6dac74cfdfd8876c06615e51ff03c603", "commit_date": "2023-08-31T13:25:43Z", "commit_message": "lint: don't fail workflow on indent fail\n\nThere are multiple cases where good human readable code block is\nconverted to an unreadable mess by clang-format, so we don't want to\nrely on clang-format completely. Also there is no way, as far as I can\nsee, to make clang-format only fix what we want it to fix without\nbreaking something.\n\nSo let's just display hints inline where clang-format is unhappy. When\nreviewer sees such a warning it's a good sign that something is broken\nin coding-style around this warning.\n\nWe add special script which parses diff generated by indent and\ngenerates warning for each hunk.\n\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "75146b02c9fa64b748aaa162efe5c0796c0b689c", "commit_date": "2023-08-31T13:25:43Z", "commit_message": "CONTRIBUTING.md: improve coding-style related sections\n\nThis is highlight that code readability is the real goal of all the\ncoding-style rules. We should not do coding-style just for coding-style,\ne.g. when clang-format suggests crazy formating we should not follow it\nif we feel it is bad.\n\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "959a32da5f0af7348570d4626c3ceb929ccd4dab", "commit_date": "2023-08-31T13:25:43Z", "commit_message": "CONTRIBUTING.md: don't mention ctags\n\nCtags is mentioned in the beginning of the \"Edit the source code\" which\nis really confusing: Do you need ctags to edit CRIU code? - No. It is\njust one helpful tool to browse the code, and we do not want to enforce\nit. So, what is it doing in contribution guide? People who really need\nit should be able to find it in Makefile or just write oneliner of their\nown to collect tags...\n\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a652c686652df835ce9212fa5bca76f74cc3b284", "commit_date": "2023-08-29T19:30:48Z", "commit_message": "zdtm: test execveat(memfd)\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e0d13ef05c04d0ac550b4981d89b860f835ba61b", "commit_date": "2023-08-29T19:30:36Z", "commit_message": "memfd: return original memfd fd for execveat()\n\nIf there is only a single RW opened fd for a memfd, it can be used\nto pass it to execveat() with AT_EMPTY_PATH to have its contents\nexecuted.  This currently works only for the original fd from\nmemfd_create().  For now we ignore processes that reopen the memfd's\nrw and expect a particular executability trait of it.  (Note: for\nsecurity purposes recent kernels have SEAL_EXEC to make memfds\nnon-executable.)\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6d0e785182934c4072aca6fe7fb17f036cb78c2c", "commit_date": "2023-08-28T15:02:53Z", "commit_message": "kerndat: check_pagemap: reword retried case explanation\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d0f88ffdd5cc5ae7bc526043f2d331d816474399", "commit_date": "2023-08-28T15:02:53Z", "commit_message": "kerndat: check_pagemap: close(fd) on error path\n\nPlug a fd leak when returning error from check_pagemap().\n(Cosmetic, as the process will exit soon anyway.)\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a04fac57f71540654a7b475fc35ca150fe8f9bcc", "commit_date": "2023-08-28T12:11:08Z", "commit_message": "kerndat: Make errors from clone3() check more precise.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "92b96a55a67e0e8eba2da1259d8a661018da36b5", "commit_date": "2023-08-28T12:11:08Z", "commit_message": "proc_parse: Log smaps entry while dumping VMA.\n\nHelp debugging problems with restoring custom VMAs.\n\nFrom: Micha\u0142 C\u0142api\u0144ski <mclapinski@google.com>\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2df6ec519d3348a23bff32c7f337bda72d443ba2", "commit_date": "2023-08-25T21:58:51Z", "commit_message": "test/other: add test for action-script\n\nThis commit is introducing a test for the action-script functionality\nof CRIU to verify that pre-dump, post-dump, pre-restore, pre-resume,\npost-restore, post-resume hooks are executed during dump/restore.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba27d27cd40993db3cacee2547b7583539328be6", "commit_date": "2023-08-25T16:15:21Z", "commit_message": "proc_parse: remove trivial goto from vma_get_mapfile_user()\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38baf73b6d3e1409d817735f8eae62abbc1f373f", "commit_date": "2023-08-25T16:14:20Z", "commit_message": "compel/infect: include the relevant pid in \"no-breakpoints restore\" debug message\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af31e8e242b8a5175475383ecf6ce062910f2aec", "commit_date": "2023-08-25T16:13:56Z", "commit_message": "kerndat: Make pagemap check more robust against swapped out pages.\n\nFix test of whether the kernel exposes page frame numbers to cope with the\npossibility that the top of the stack is swapped out, which was happening\nin about one 1 out of 3 million runs.  This lead to a later failure when\ntrying to read the PFN of the zero page, after which criu would exit with\nno error message.\n\nOriginal-From: Ambrose Feinstein <ambrose@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "675c5e46553d83d41f4b56517d45927564740d91", "commit_date": "2023-08-25T14:25:27Z", "commit_message": "ci/loongarch64: compile tests before running zdtm.py\n\nOtherwise tests fail by timeout.\n\nSigned-off-by: Andrei Vagin <avagin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "359b25766f2268383c9c6519ac7cb74a407042d8", "commit_date": "2023-08-24T21:01:25Z", "commit_message": "memfd: don't set fd attributes not needed for vma mapping\n\nThere is only one user of memfd_open() outside of memfd.c: open_filemap().\nIt is restoring a file-backed mapping and doesn't need nor expect to\nupdate F_SETOWN nor the fd's position.  Check the inherited_fd() handling\nin the callers to simplify the code.\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "942b5fdcc6f12b08fbd496f0f5a08b807f224b94", "commit_date": "2023-08-24T20:52:21Z", "commit_message": "loongarch64: fix syscall_64.tbl\n\nThe 288d6a61e29d change broke all the syscall numbers.\n\nReported-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>\nFixes: (288d6a61e29d \"loongarch64: reformat syscall_64.tbl for 8-wide tabs\")\nSigned-off-by: Andrei Vagin <avagin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "649292c1b0b8a8d2531bbf81a9456d444bdb78d6", "commit_date": "2023-08-24T18:19:52Z", "commit_message": "github: auto-remove `changes requested` and `awaiting reply` labels\n\nLabels are removed when new comments are posted.\n\nSigned-off-by: Andrei Vagin <avagin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5fedcaaa5aa53d7ee8761b29e0c26cb20b7f7472", "commit_date": "2023-08-21T21:19:50Z", "commit_message": "Put a cap on the size of single preadv in restore operation.\n\nWhile each preadv() is followed by a fallocate() that removes the data\nrange from image files on tmpfs, temporarily (between preadv() and\nfallocate()) the same data is in two places; this increases the memory\noverhead of restore operation by the size of a single preadv.\nUncapped preadv() would read up to 2 GiB of data, thus we limit that to\na smaller block size (128 MiB).\n\nBased-on-work-by: Pawe\u0142 Stradomski <pstradomski@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b5c3cccf44130bb11ab830e9a5d3637e366fa29a", "commit_date": "2023-08-21T15:10:45Z", "commit_message": "zdtm: membarrier: test migration of membarrier() registration\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2f50da4389a588ae675830788f9de09ed64fa578", "commit_date": "2023-08-21T15:10:45Z", "commit_message": "dump+restore: Implement membarrier() registration c/r.\n\nNote: Silently drops MEMBARRIER_CMD_REGISTER_GLOBAL_EXPEDITED as it's\nnot currently detectable. This is still better than silently dropping\nall membarrier() registrations.\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "288d6a61e29de9be17bc8c47169e4a907d01d60c", "commit_date": "2023-08-21T15:10:37Z", "commit_message": "loongarch64: reformat syscall_64.tbl for 8-wide tabs\n\nSigned-off-by: Andrei Vagin <avagin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e1cda9f074b853c7a2d6cd2c112ce1950bb1e451", "commit_date": "2023-08-18T18:38:28Z", "commit_message": "lib/py: add VMA_AREA_MEMFD constant\n\nThe VMA_AREA_MEMFD constant was introduced with commit\n\n29a1a88bcebaf9d83591077d2bec424da82c0e71\nmemfd: add memory mapping support\n\nThis patch extends the status map used in CRIT and coredump with the\nvalue of this constant to recognize it.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "21992206b2e049f0e41efcfa46f9cdbba0622ca8", "commit_date": "2023-08-08T18:36:23Z", "commit_message": "ci/docker: install all required packages\n\nThis change fixes the issue:\n```\nThe following packages have unmet dependencies:\n docker-ce : Depends: containerd.io (>= 1.6.4)\nE: Unable to correct problems, you have held broken packages.\n```\n\nSigned-off-by: Andrei Vagin <avagin@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6fc5bc668f1556a401bfbff88df17c08ad27407f", "commit_date": "2023-08-08T18:36:23Z", "commit_message": "scripts/apt: don't hide apt output\n\nIt is required to investigate issues.\n\nSigned-off-by: Andrei Vagin <avagin@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "242de4e72e9c92203149efbecf06aa88d959a6ff", "commit_date": "2023-08-07T20:33:32Z", "commit_message": "amdgpu_plugin: remove duplicated log prefix\n\nThe log prefix \"amdgpu_plugin:\" is defined with `LOG_PREFIX` in\n`amdgpu_plugin.c`.  However, the prefix is also included in each\nlog message. As a result it appears duplicated in the log messages:\n\n(00.044324) amdgpu_plugin: amdgpu_plugin: devices:1 bos:58 objects:148 priv_data:45696\n(00.045376) amdgpu_plugin: amdgpu_plugin: Thread[0x5589] started\n(00.167172) amdgpu_plugin: amdgpu_plugin: img_path = amdgpu-kfd-62.img\n(00.083739) amdgpu_plugin: amdgpu_plugin : amdgpu_plugin_dump_file() called for fd = 235\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "72494ed608b84c31ba01d6c2a703148d27701c75", "commit_date": "2023-08-04T23:29:43Z", "commit_message": "irmap: scan user-provided paths in order\n\nMake the scan use the order of paths that came from the user.\n\nFixes: 4f2e4ab3be01 (\"irmap: add --irmap-scan-path option\"; 2015-09-16)\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1db922f1704e9ecfd5d8fcc898bd45fb150b192a", "commit_date": "2023-08-04T06:37:25Z", "commit_message": "page-xfer: Pull tcp_cork,nodelay().\n\nMove tcp_cork() and tcp_nodelay() to the only user: page-xfer.c. While\nat it, fix error messages (as they do not refer to restoring the sockopt\nvalues) and demote them as they are not fatal to the page transfer.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91186014495f306391405ac4cd4f6805922b9c14", "commit_date": "2023-08-03T17:06:54Z", "commit_message": "apparmor: fix incorrect usage of sizeof on char ptr\n\nIn criu/apparmor.c: write_aa_policy(), the arg path is passed as a char\npointer. The original code used sizeof(path) to get the size of it,\nwhich is incorrect as it always return the size of the char pointer\n(typically 8 or 4), not the actual capacity of the char array.\n\nGiven that this function is only invoked with path declared as `char\npath[PATH_MAX]`, replacing sizeof(path) with PATH_MAX should correctly\nrepresent the maximum size of it.\n\nFixes: 8723e3f (\"check: add a feature test for apparmor_stacking\")\n\nSigned-off-by: Haorong Lu <ancientmodern4@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "88249fe5269bbd2df58d8109b5a485ce10d9f81f", "commit_date": "2023-08-01T21:05:20Z", "commit_message": "zdtm/memfd00: test memfd file mode\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f2d9672e5ece7607ae7d1cef2ec9edc244dccab1", "commit_date": "2023-08-01T21:05:20Z", "commit_message": "memfd: dump and restore permissions.\n\nmemfd is created by default with +x permissions set. This can be changed\nby a process using fchmod() and expected to prevent using this fd for\nexec(). Migrate the permissions.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc500d9967441d0eb6b63b365eb3add9f0dc0a4b", "commit_date": "2023-08-01T20:08:30Z", "commit_message": "sk-inet: Extend 'TCP repair off' failure log.\n\nInclude the file descriptor and error code in the debug message to make\nit more useful.\n\nFixes: e7ba90955ce7 (2016-03-14 \"cr-check: Inspect errno on syscall failures\")\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "988a5f4816d5bf651f9cdfa8b85359da18a77a7c", "commit_date": "2023-07-27T01:13:39Z", "commit_message": "restore: Skip dropping BSET capability if irrelevant.\n\nprctl(NO_NEW_PRIVS) when set prevents child processes gaining\ncapabilities not in permitted set. In this case, inability to\nclear capability from BSET that is not in the permitted set is\nharmless.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d4902182b0bf9b69c11e4159110bba6a65a846ba", "commit_date": "2023-07-27T01:13:36Z", "commit_message": "prctl: test prctl(NO_NEW_PRIVS) setting\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6bad5d2cdbf2f88aad0416da47649508276c8a84", "commit_date": "2023-07-27T01:13:23Z", "commit_message": "prctl: Migrate prctl(NO_NEW_PRIVS) setting.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ff67ad84e4d6bd3e6405a298e557ee562a28f238", "commit_date": "2023-07-26T20:52:31Z", "commit_message": "restore: Fix capability migration requirements between different kernels.\n\nWhen restoring on a kernel that has different number of supported\ncapabilities than checkpoint one, check that the extra caps are unset.\n\nThere are two directions to consider:\n\n1) dump.cap_last_cap > restore.cap_last_cap\n\t- restoring might reduce the processes' capabilities if restored\n\t  kernel doesn't support checkpointed caps. Warn.\n\n2) dump.cap_last_cap < restore.cap_last_cap\n\t- restoring will fill the extra caps with zeroes. No changes.\n\nNote: `last_cap` might change without affecting `n_words`.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "53dd6ba74c4b8fed95d9c2292aae191b12c3977a", "commit_date": "2023-07-22T00:04:49Z", "commit_message": "restore: Skip setgroups() when already correct.\n\nSkip calling setgroups() when the list of auxiliary groups already has\nthe values we want.  This allows restoring into an unprivileged user\nnamespace where setgroups() is disabled.\n\nFrom: Ambrose Feinstein <ambrose@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b9f360b15fc4883af2db611125488144f61f368e", "commit_date": "2023-07-22T00:04:49Z", "commit_message": "restore: Avoid need for CAP_SETPCAP if not changing uids.\n\nWhen CRIU is run with the task's credentials on restore, don't set uids\nand gids. This avoids the need to modify the SECURE_NO_SETUID_FIXUP flag\nwhich requires CAP_SETPCAP.\n\nFrom: Andy Tucker <agtucker@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e90fbd72f73b486957890c9ddf1828ea1827611a", "commit_date": "2023-07-22T00:04:48Z", "commit_message": "tty: Avoid EPERM for no-op chown().\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "00d061b58dabf1aca512e1934d0667fd4732dee1", "commit_date": "2023-07-22T00:04:48Z", "commit_message": "memfd: Avoid EPERM for no-op chown().\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6e2312577bac405bd43c0153aac26451bf665f0c", "commit_date": "2023-07-22T00:04:48Z", "commit_message": "cgroup: Replace restore_perms() with cr_fchperm().\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5f214bc7d58e94798891043154046f17feb247d4", "commit_date": "2023-07-22T00:04:48Z", "commit_message": "files-reg: Avoid EPERM in ghost_apply_metadata() for no-op changes.\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "923e66bcdd136b0111e08c0d6c762e7e1b453348", "commit_date": "2023-07-22T00:04:47Z", "commit_message": "sk-unix: Avoid restore_file_perms() EPERM error for no-op changes.\n\nNote: This removes the difference in calling convention of\nrestore_file_perms() returning -errno that was the only call that did\nthis in the caller.\n\nFrom: Rados\u0142aw Burny <rburny@google.com>\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9f6948475a7009e99bc16688de30f9287fd7c37a", "commit_date": "2023-07-22T00:04:39Z", "commit_message": "util: Implement fchown() and fchmod() wrappers.\n\nAdd generic wrappers for fchown() and fchmod() that skip the calls if\nno changes are needed. This will allow to unify places where we can\navoid errors when no-op requests are not permitted.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f70c782e5c39097b8950b2d67b403ae302ff9d6b", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "ci: add workflow for loongarch64\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c94128250ffde2f75c3f600e6d52004636d1dc63", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "zdtm: add loongarch64 support\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "95fbd7e45788a55339cf90f96a4cf9b1b1046ca7", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "criu: add loongarch64 support to parasite and restorer\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "521383d1b2e831aaa0ebb012552c3b73415fb42c", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "images: add loongarch64 core image\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "52630dbf58656a1e01a47c7191da5ce7cc927ac0", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "compel: add loongarch64 support\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f684719484b7ec70906d0af44144c64d0d1c19ea", "commit_date": "2023-07-19T15:59:04Z", "commit_message": "include: add common header files for loongarch64\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d6f04cbd8313c075ff6423d2ae69f7e518c6fe4", "commit_date": "2023-07-10T18:36:02Z", "commit_message": "ci: add workflow to ensure self-contained commits\n\nSigned-off-by: Prajwal S N <prajwalnadig21@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "935e60d65b9435aa431fa587799e5b4e4f380ade", "commit_date": "2023-07-10T16:27:36Z", "commit_message": "kerndat: don't leak a socket file descriptor\n\nkerndat_has_ipv6_freebind creates a socket but doesn't close it.\n\nSigned-off-by: Andrei Vagin <avagin@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a96aa58096e7f7b56e5b3eed89f8324d94eaea56", "commit_date": "2023-07-10T16:24:48Z", "commit_message": "zdtm: replace NR_fstat with NR_statx\n\nNR_fstat is a deprecated syscall, some\nmodern architectures such as riscv and\nloongarch64 no longer support this syscall.\nIt is usually replaced by NR_statx.\n\nNR_statx is supported since linux 4.10.\n\nSigned-off-by: znley <shanjiantao@loongson.cn>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a4bb3f9a063cea2aede654317c53b35b608d042e", "commit_date": "2023-07-07T23:26:28Z", "commit_message": "kerndat: bind ipv6-socket only if ipv6 is enabled\n\nFixes: #2222\nFixes: f1c8d38 (\"kerndat: check if setsockopt IPV6_FREEBIND is supported\")\nSigned-off-by: Yan Evzman <yevzman@gmail.com>\nSigned-off-by: Andrei Vagin <avagin@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cf4b225ac03cc2a08c80194e64ad008db0a9f0b2", "commit_date": "2023-07-07T23:08:09Z", "commit_message": "irmap: Reduce error log severity to warning.\n\nThese errors originate from the filesystem scanning in irmap.c and are mostly\nbenign. Nevertheless, if they do result in a failed irmap lookup, that failed\nlookup is more interesting from an application perspective.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb149f76b139fd60ef00222f8eb0685a066625ca", "commit_date": "2023-07-07T23:08:09Z", "commit_message": "mount: Demote fsnotify logs for ignored failures.\n\nMake logs about inaccessible mounts warnings, as the failures are\nnormally harmless (e.g. failure to read /dev/cgroup) and don't\nmake the CRIU run fail. (If it happens that the fsnotify can't\nfind a file, then to debug, full CRIU logs will be necessary anyway.)\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d67f67818b39e622d4986b0a45faa9631bba852", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "log: Remove error logs for ignored or otherwise logged subprocess exits.\n\nErrors in early restore.log for status=1 from a subprocess are confusing,\nesp. that they don't show what command failed. Since the result is\neither ignored or logged anyway, mark the calls as \"can fail\".\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "dc3f4b5bb2165e094434ba5b2a007984b65fb90b", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "soccr: Log name of socket queue that failed to restore.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "13c08b83d611d3e068ca1438fbbeb274b44740df", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "soccr: Log offset when failed to restore socket's queued data.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cf01c325558f83a913911f53d374fb2b66db1d96", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "sk-unix: Log both peer names when failing on an external stream unix socket.\n\nMake debugging dump failures resulting in \"sk unix: Can't dump half\nof stream unix connection\" errors easier.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b42e7af88ceb8947f37e990ea655b7b8a5a942e1", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "compel: Log the status word with \"Task is still running\" errors.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ce33c4926f1916ba9ad71cdd93172aca20e1ad3d", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "files-reg: Debug \"open file on overmounted mount\" error.\n\nLog the mount and file that were the cause of failing a dump.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b759678e2d8a38e07b668882b1aa444e0b08b4d3", "commit_date": "2023-07-07T23:08:08Z", "commit_message": "cgroup: Propagate error on cgroup mount failure.\n\nThis makes the error to mount cgroup hierarchy a bit less noisy:\n\nError (criu/cgroup.c:623): cg: Unable to mount cgroup2 : Invalid argument'\n\nInstead of\n\nError (criu/cgroup.c:623): cg: Unable to mount cgroup2 : Invalid argument'\nError (criu/cgroup.c:715): cg: failed walking /proc/self/fd/-1/zdtmtst for empty cgroups: No such file or directory'\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "75d9d6822a59ea3f839d7cb11ef879ee5d49fc52", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "zdtm: drop python 2 compatibility\n\nThis patch removes the code for Python 2 compatibility introduced\nwith commit e65c7b5 (zdtm: Replace imp module with importlib).\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "460c4d26972ecf57d5fe9c5bbbc0ed2ded9b8bf2", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "lib/py: drop python 2 compatibility\n\nThis patch removes code introduced for compatibility with\nPython 2 in commits:\n\n  bf80fee (lib: correctly handle stdin/stdout (Python 3))\n\n  b82f222 (lib: fix crit-recode fix for Python 2)\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a8cfec9dc43537e834a2d439927dfd8750476037", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "test/others: drop setup_swrk() py2 compatibility\n\nThis patch removes the code introduced for compatibility\nwith Python 2 in commits:\n\n4c1ee3e227045fc1dc07b10ac7a538a68299693b\ntest/other: Resolve Py3 compatibility issues\n\n6b615ca15277fc14b52a09b4eb18314b7c6cbe75\ntest/others: Reuse setup_swrk()\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc5742d7073e5a991bb1eaa5fdaebbd5718b2591", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "test/criu-ns: drop python 2 compatibility\n\nThis patch is replacing the set_blocking() function with\nos.set_blocking(). This function was introduced for compatibility with\nPython 2 in commit 8094df8di (criu-ns: Add tests for criu-ns script).\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "5f4d92f995212fbc7c04505a1dfc58e7559dc2db", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "make: remove checks for python 2 binary\n\nThis commit removes the checks for the Python 2 binary in the makefile\nand makes sure that ZDTM tests always use python3. Since support for\nPython 2 has been dropped, these checks are no longer needed.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c794f396560bf55602220fde39e12c2a24914e4c", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "remove python-future dependency\n\nThis commit removes the dependency on the __future__ module, which was\nused to enable Python 3 features in Python 2 code. With support for\nPython 2 being dropped, it is no longer necessary to maintain backward\ncompatibility.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "02bd1bc7f363a565c896aca1a0ce5a24ca107f3b", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "crit: add requirements.txt for pip>=20.1\n\nWhen building with pip version 20.0.2 or older, the pip install\ncommand creates a temporary directory and copies all files from\n./crit. This results in the following error message:\n\n    ModuleNotFoundError: No module named 'pycriu'\n\nThis error appears because the symlink 'pycriu' uses a relative path\nthat becomes invalid '../lib/py/'.\n\nThe '--no-build-isolation' option for pip install is needed to enable\nthe use of pre-installed dependencies (e.g., protobuf) during build.\n\nThe '--ignore-installed' option for pip is needed to avoid an error when\ncrit is already installed. For example, crit is installed in the GitHub\nCI environment as part of the criu OBS package as a dependency for\npodman.\n\nDistributions such as Arch Linux have adopted an externally managed\npython installation in compliance with PEP 668 [1] that prevents pip\nfrom breaking the system by either installing packages to the system or\nlocally in the home folder. The '--break-system-packages' [2] option\nallows pip to modify an externally managed Python installation.\n\n[1] https://peps.python.org/pep-0668/\n[2] https://pip.pypa.io/en/stable/cli/pip_uninstall/\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "91edb5f9ff345a6bd9efc96c3c1a2cff5d2f149e", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "crit: drop python 2 support\n\nThis patch reverts changes introduced with the following commits:\n\n4feb07020dedbf845fc00268d8ca02f4645641cd\ncrit: enable python2 or python3 based crit\n\nb78c4e071a42ebe34aac82fa0711df07ed375e2b\ntest: fix crit test and extend it\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e9901cdf2df32de3a05fbb26ec36067326f66135", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "coredump: drop python 2 support\n\nThis patch reverts changes introduced for Python 2 compatibility\nin commits:\n\n  1c866db (Add new files for running criu-coredump via python 2 or 3)\n\n  3180d35 (Add support for python3 in criu-coredump).\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f8466ca798acd124eebbba2655894ebd2f777879", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "ci: clean up CentOS 7 related tweaks\n\nWe have disabled CentOS 7 tests in CI. This patch reverts the\nchanges introduced in the following commit:\n\n24bc083653f7d2b984653194e921b1ff32292b3b\nci: disable some tests on CentOS 7\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "42a5b640f658771d2ddf238045bf4fa54569a64a", "commit_date": "2023-07-07T22:45:05Z", "commit_message": "ci: disable CentOS 7 test in Cirrus CI\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3a932e9115fcc2cd3f90b25b89910e6577b4b88b", "commit_date": "2023-07-07T22:42:48Z", "commit_message": "readme: refactor asciinema link for video playback\n\nInstead of opening the image directly, the commit refactors the\nasciinema image embedded link to redirect users to the corresponding\nvideo.\n\nSigned-off-by: Abhishek Guleri <abhishekguleri24@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4c2b71c37259e52b07b992f5b953e9ca59ae20df", "commit_date": "2023-07-05T15:53:32Z", "commit_message": "zdtm: Update netns purpose comment in zdtm_ct.\n\nWith the parasite socket clash now guaranteed not to happen,\nthe comment becomes obsolete. netns is steel needed though, so\nupdate the comment to point at the requirement.\n\nChange-Id: I3cfb253cd5c53b91b955fcb001530b4aee5129f4\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "ba11426de59ffb02a8cbd00b2ca03740b6c10ef0", "commit_date": "2023-07-05T15:53:32Z", "commit_message": "util: Make CRIU run_id machine-level unique.\n\nInstead of relying on chance of CLOCK_MONOTONIC reading being unique,\nuse pid namespace ID that combined with the process ID will make it\nunique on the machine level.\n\nIf pidns is not enabled on a kernel we'll get ENOENT, but then CRIU's\npid will already be unique. If there is some other error, log it but\ncontinue, as the socket clash (if it happens) will result in a failed\nrun anyway.\n\nFixes: 45e048d77a6a (2022-03-31 \"criu: generate unique socket names\")\nFixes: 408a7d82d644 (2022-02-12 \"util: add an unique ID of the current criu run\")\nChange-Id: I111c006e1b5b1db8932232684c976a84f4256e49\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a5939b006c57a81c8bb4d6043668a227461104f3", "commit_date": "2023-07-05T15:47:18Z", "commit_message": "kerndat: Don't fail on NETLINK/nsid support missing.\n\nIf not dumping netns nor connections, nsid support is not used. Don't\nfail the run as if the support is needed, the dumping process will fail\nlater.\n\nChange-Id: I39a086756f6d520c73bb6b21eaf6d9fb49a18879\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0d1b89f567a620192a754a3dfc4301844c7319a", "commit_date": "2023-07-05T15:47:18Z", "commit_message": "kerndat: unexport kerndat_nsid()\n\nkerndat_nsid() is not used outside kerndat.c. Make it static.\n\nChange-Id: I52e518ecb7c627cc1866e373411b2be3f71a2c9d\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "fb8ca647f220435c0542d4ebe47ef5c6195518c6", "commit_date": "2023-07-05T15:47:18Z", "commit_message": "util: Downgrade ignored errors to warnings.\n\nIf the error is ignored it is not important enough - make it a warning\ninstead.\n\nFrom: Mian Luo <mianl@google.com>\nChange-Id: If2641c3d4e0a4d57fdf04e4570c49be55f526535\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6cfe7aa1142093f93a38a127a8a063e1470bca65", "commit_date": "2023-06-30T23:06:59Z", "commit_message": "rpc: Support setting images_dir by path.\n\nGoogle's RPC client process is in a different pidns and has more privileges --\nCRIU can't open its /proc/<pid>/fd/<fd>.  For images_dir_fd to be useful here\nit would need to refer to a passed or CRIU's fd.\n\nFrom: Micha\u0142 C\u0142api\u0144ski <mclapinski@google.com>\nChange-Id: Icbfb5af6844b21939a15f6fbb5b02264c12341b1\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8ba6efb0056a57a6b3f3abd2173f91d765e13a20", "commit_date": "2023-06-30T23:06:59Z", "commit_message": "rpc: Support gathering external file list after freezing process tree.\n\nNew 'query-ext-files' action for `criu dump` is sent after\nfreezing the process tree. This allows to defer gathering\nthe external file list when the process tree is in a stable\nstate and avoids race with the process creating and deleting\nfiles.\n\nChange-Id: Iae32149dc3992dea086f513ada52cf6863beaa1f\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cde9bcf63d5b397ccc08e8966f510828eed0c0df", "commit_date": "2023-06-30T23:05:20Z", "commit_message": "docker/podman: test c/r with action-script\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "b02d53a8f41c471f88c8487c58b8a5bb2a9a55a3", "commit_date": "2023-06-30T23:05:20Z", "commit_message": "action-scripts: allow shell scripts in rpc mode\n\nContainer runtimes commonly use CRIU with RPC. However, this prevents\nthe use of action-scripts set in a CRIU configuration file due to the\nexplicit scripts mode introduced with the following commit:\n\n  ac78f13bdfaee260dd4234f054bf4c5d2a373783\n  actions: Introduce explicit scripts mode\n\nThis patch enables container checkpoint/restore with action-scripts\nspecified via configuration file.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0588c3b21a17f063437cff22c15ca12801ed711b", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: libnfnetlink: Remove nla_get_s32().\n\nnla_get_s32() was added to libnl 3.2.7 in 2015. Remove CRIU's definition\nas it breaks build when statically linking the binary.\n\nFrom: Uros Prestor <urosp@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "eece28d29c910374a5ead93cccdc1ae105587e7d", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: Guard against libbsd's version of `__aligned`.\n\nWhen trying to build CRIU with libbsd enabled the compilation fails due\nto duplicate definition of __aligned macro. Other such definitions are\nalready wrapped with #ifndef make __aligned definition consistent and\nmake it easier in the future to use the libbsd features if needed.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "85f53bdecdc79d604d9c9fceae5dce8b3f96933f", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: Use make-provided AR for building libzdtmtst.\n\nMake $(AR) used also for libzdtmtst build.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "722a90ccd9b465c3af62e66a02ffa36533f5d013", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: Fix LIBS vs LDFLAGS order.\n\n$LDFLAGS can contain `-Ldir`s that are required by '-lib's in $LIBS.\nReverse the order so that `-L` options make effect.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "2d76e4b31a91424d9d8c6533d2c0aaa38bf8f639", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: Debug system feature tests.\n\n`make` without `-s` option will normally show the commands executed. In\nthe case of detecting build environment features current makefile will\ncause detected features to be seen as 'echo #define' commands, but not\ndetected ones will be silent. Change it so that all tried features can\nbe seen (outside of make's silent mode) regardless of detection result.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aa6b633912565f99e242df7839c6e1ece7c03673", "commit_date": "2023-06-28T04:45:46Z", "commit_message": "build: Remove HAS_MEMFD test\n\nThe test for HAS_MEMFD is empty and noit used. Remove it.\n\nFixes: 5ee1ac1f28e6 (\"criu: remove FEATURE_TEST_MEMFD\")\nChange-Id: I43b8f0cfd50ce9bdf93dafb647377318df1deae8\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1e90fc8f4b4b2c8457470e01697135914b5e2296", "commit_date": "2023-06-26T16:01:54Z", "commit_message": "restore: remove unused `secbits` field.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f5cd44f79737fb91cacd28bd4b6d0abdca1e180b", "commit_date": "2023-06-22T00:58:59Z", "commit_message": "kerndat: Make socket feature probing work on IPv6-only host.\n\nTry IPv6 if IPv4 sockets are not supported.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "12290f4583d8810b6692eb501cf8336a590ffd53", "commit_date": "2023-06-22T00:51:34Z", "commit_message": "pipes: Plug pipe fd leak in \"Unable to set a pipe size\" error case.\n\nFrom: Piotr Figiel <figiel@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e6427c5600867cd6a5d1d0f03bee1c25f6771b88", "commit_date": "2023-06-22T00:47:52Z", "commit_message": "sockets: Increase the size of sockets hashmap to 16K.\n\nDuring dump, CRIU stores the structs representing sockets in a statically sized\nhashmap of size 32. We have some (admittedly crazy) tasks that use tens of\nthousands of sockets, and seem to spend most of the dump time iterating over\nthe linked lists of the map.\n\n16K is chosen arbitrarily, so that it reduces the lengths of the chains to few\nelements on average, while not introducing significant memory overhead.\n\nFrom: Rados\u0142aw Burny <rburny@google.com>\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f018893d261d649edeca57de5763b65b159800be", "commit_date": "2023-06-19T18:41:33Z", "commit_message": "test/thp_disable: fix lint\n\nThe fail() macro provides a new line character at the end of the\nmessage. This patch fixes the following lint check that currently\nfails in CI:\n\n$ git --no-pager grep -E '^\\s*\\<(pr_perror|fail)\\>.*\\\\n\"'\ntest/zdtm/static/thp_disable.c:\t\tfail(\"prctl(GET_THP_DISABLE) returned unexpected value: %d != 1\\n\", ret);\ntest/zdtm/static/thp_disable.c:\t\tfail(\"Flags changed %lx -> %lx\\n\", orig_flags, new_flags);\ntest/zdtm/static/thp_disable.c:\t\tfail(\"Madvs changed %lx -> %lx\\n\", orig_madv, new_madv);\ntest/zdtm/static/thp_disable.c:\t\tfail(\"post-migration prctl(GET_THP_DISABLE) returned unexpected value: %d != 1\\n\", ret);\ntest/zdtm/static/thp_disable.c:\t\tfail(\"Flags changed %lx -> %lx\\n\", orig_flags, new_flags);\ntest/zdtm/static/thp_disable.c:\t\tfail(\"Madvs changed %lx -> %lx\\n\", orig_madv, new_madv);\n\nFixes: #2193\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "a2c4dd2265701285c6d74dc99d9f7f0ad29f122a", "commit_date": "2023-06-19T18:22:57Z", "commit_message": "Allow skipping iptables/nftables invocation.\n\nMake it possible to skip network lock to enable uses that break connections\nanyway to work without iptables/nftables being present.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9301aba877b82b4779ea8cde49999131c1bc7853", "commit_date": "2023-06-17T22:03:51Z", "commit_message": "zdtm: sock_opts00: Improve error messages.\n\nMake it clear that the option numbers are indexes not the option\nidentifiers (\"names\"). Also show the value change that prompted test\nfailure.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e595787cf727504a942cb77f71bda0eaf93a4c1a", "commit_date": "2023-06-17T22:03:05Z", "commit_message": "zdtm: Implement test sharding.\n\nAllow to split test suite into predictable sets to parallelize runs on\nmultiple machines or VMs.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "05f2319f1e998eb8ea69f8de2d6e345ab682653b", "commit_date": "2023-06-17T21:59:33Z", "commit_message": "zdtm: Allow --keep-going for single test.\n\nWe don't want test framework to change its behaviour on whether we\nrun a single or multiple tests in a run. When we shard the test suite\nit can result in some shards having a single test to run and\nunexpectedly change the test output format.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0bd5abe4ed331c96fcc6d4da5fc4a60ece0045e2", "commit_date": "2023-06-17T21:54:10Z", "commit_message": "zdtm: Add timeouts for test commands.\n\nExtend ability to limit time taken to all CRIU invocations.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "e55e168e9049b762963994f7ebc3ad2692668f1b", "commit_date": "2023-06-17T21:44:23Z", "commit_message": "zdtm: Allow overriding /tmp.\n\nUse $TMPDIR for tests_root as the host's /tmp might not have enough\nfeatures or space.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7f7b553af3d87a4573ac54b06f701c304cdb347f", "commit_date": "2023-06-17T16:39:30Z", "commit_message": "Allow passing --log_to_stderr via RPC.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "161a5ff8d4f6be1a45afd10581287eeda48f5aef", "commit_date": "2023-06-17T16:37:36Z", "commit_message": "Allow passing --display_stats via RPC.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "3d4d943253483bd6d2c16da75daaa0eb3d4d8b66", "commit_date": "2023-06-17T16:34:48Z", "commit_message": "Allow passing --leave_stopped by RPC.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e2e56006b8e59d1aee437da01dbc3659e285e25", "commit_date": "2023-06-17T16:21:57Z", "commit_message": "compel/test: Return 0 in case of error in fdspy\n\nThis commit revises the error handling in the fdspy test. Previously,\na failure case could have been incorrectly reported as successful because\nof a specific check `pass != 0`, leading to potential false positives\nwhen `check_pipe_ends()` returned `-1` due to a read/write pipe error.\n\nTo improve this, we've adjusted the error handling to return `0` in case\nof any error. As such, the final success condition remains unchanged. This\napproach will help accurately differentiate between successful and failed\ncases, ensuring the output \"All OK\" is printed for success, and \"Something\nwent WRONG\" for any failure.\n\nFixes: 5364ca3 (\"compel/test: Fix warn_unused_result\")\n\nSigned-off-by: Haorong Lu <ancientmodern4@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c6ee1ba05e7bc88d9fb2de9643a0dfd25379a31c", "commit_date": "2023-06-16T00:42:02Z", "commit_message": "Fill FPU init state if it's not provided by kernel.\n\nApparently Skylake uses init-optimization when saving FPU state, and ptrace()\nreturns XSTATE_BV[0] = 0 meaning FPU was not used by a task (in init state).\nSince CRIU restore uses sigreturn to restore registers, FPU state is always\nrestored. Fill the state with default values on dump to make restore happy.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "c75c017e4c22bf8e5082a0cec1d8e9df76bac9dc", "commit_date": "2023-06-15T00:38:37Z", "commit_message": "zdtm: thp_disable: Verify MADV_NOHUGEPAGE before migration\n\nAdd a sanity check for THP_DISABLE. This discovered a broken commit\nin Google's kernel tree.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "6006cb6eaf034f5581a6f52a981ea64534fe32e7", "commit_date": "2023-06-15T00:38:37Z", "commit_message": "zdtm: thp_disable: Verify prctl(THP_DISABLE) migration\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d3a33ca1efcfd2cf45dd972cde6e0d350482a703", "commit_date": "2023-06-15T00:38:37Z", "commit_message": "zdtm: thp_disable: Output a single failure message\n\nWhile at it, don't carry over stale errno to the fail() message.\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7ca6856be45094b417519fd8cfcb4a1a5365dfc8", "commit_date": "2023-06-15T00:38:37Z", "commit_message": "Log if prctl(SET_THP_DISABLE) doesn't work as expected.\n\nIf prctl(SET_THP_DISABLE) is not used due to bad semantics, log it\nfor easier debugging.\n\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9e6454f50b0f06683ac5a0875535443efb498f45", "commit_date": "2023-06-15T00:38:37Z", "commit_message": "Restore THP_DISABLE prctl.\n\nThe original commit added saving THP_DISABLED flag value, but missed\nrestoring it. There is restoring code, but used only when --lazy_pages\nmode is enabled. Restore the prctl flag always. While at it, rename the\n`has_thp_enabled` -> `!thp_disabled` for consistency.\n\nFixes: bbbd597b4124 (2017-06-28 \"mem: add dump state of THP_DISABLED prctl\")\nSigned-off-by: Micha\u0142 Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "11288c968d57e001df32a17346c5d262a32d3958", "commit_date": "2023-06-15T00:32:24Z", "commit_message": "Fix mount(cgroup2) for older kernels.\n\nLinux 4.15 doesn't like empty string for cgroup2 mount options.\nPass NULL then to satisfy the kernel check. Log the options for\neasier debugging.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "af0e413e03f5ac22139a7f8a4d81db75a5b0fb86", "commit_date": "2023-06-15T00:32:24Z", "commit_message": "Fix dumping hugetlb-based memfd on kernels < 4.16.\n\n4.15-based kernels don't allow F_*SEAL for memfds created with MFD_HUGETLB.\nSince seals are not possible in this case, fake F_GETSEALS result as if it\nwas queried for a non-sealing-enabled memfd.\n\nSigned-off-by: Micha\u0142\u00a0Miros\u0142aw <emmir@google.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "4d137b81a0b6e4c5dc5bb093d2cbbc6ea04cb486", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "cgroup/restore: split prepare_task_cgroup code into two separate functions\n\nThis does cgroup namespace creation separately from joining task\ncgroups. This makes the code more logical, because creating cgroup\nnamespace also involves joining cgroups but these cgroups can be\ndifferent to task's cgroups as they are cgroup namespace roots\n(cgns_prefix), and mixing all of them together may lead to\nmisunderstanding.\n\nAnother positive thing is that we consolidate !item->parent checks in\none place in restore_task_with_children.\n\nSigned-off-by: Valeriy Vdovin <valeriy.vdovin@virtuozzo.com>\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "104a82856f83bfa24fb08811778f7f967d1d12ae", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "action-scripts: Add pre-stream hook\n\nThis hook allows to start image streamer process from an action script.\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "358f09cf48a66e0f643c787efadacdea5b921361", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "timers: improve and fix posix timer id sequence checks\n\nThis is a patch proposed by Thomas here:\nhttps://lore.kernel.org/all/87ilczc7d9.ffs@tglx/\n\nIt removes (created id > desired id) \"sanity\" check and adds proper\nchecking that ids start at zero and increment by one each time when we\ncreate/delete a posix timer.\n\nFirst purpose of it is to fix infinite looping in create_posix_timers on\nold pre 3.11 kernels.\n\nSecond purpose is to allow kernel interface of creating posix timers\nwith desired id change from iterating with predictable next id to just\nsetting next id directly. And at the same time removing predictable next\nid so that criu with this patch would not get to infinite loop in\ncreate_posix_timers if this happens.\n\nThanks a lot to Thomas!\n\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "9130fefa4dd4e0c3029ab062fefd796a863a8880", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "criu-ns: Update shebang line to python\n\nCentOS 7 CI environment uses Python 2. To execute criu-ns\nscript in CentOS 7 changing the current shebang line to\npython is required.\n\nThis reverse the changes made in a15a63fce0ad4d1a9119771577fa7ef562bbfd6b\n\nSigned-off-by: Dhanuka Warusadura <csx@tuta.io>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f0e93585903cbf3450563f97fc47a9cdc01c709f", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "criu-ns: Install Python pathlib module in CentOS 7\n\nThese changes fix the `ImportError: No module named pathlib`\nerror when executing criu-ns tests located at criu/test/others/criu-ns\n\nSigned-off-by: Dhanuka Warusadura <csx@tuta.io>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8094df8ddb9644f715212bc18226e94a1560bbff", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "criu-ns: Add tests for criu-ns script\n\nThese changes add test implementations for criu-ns script.\n\nFixes: #1909\n\nSigned-off-by: Dhanuka Warusadura <csx@tuta.io>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "38db5e1f2fa613733e0902599bcdf6ea30d98086", "commit_date": "2023-06-12T06:32:59Z", "commit_message": "criu-ns: Add support for older Python version in CI\n\nThese changes remove and update the changes introduced in\n7177938e60b81752a44a8116b3e7e399c24c4fcb in favor of the\nPython version in CI.\n\nos.waitstatus_to_exitcode() function appeared in Python 3.9\n\nRelated to: #1909\n\nSigned-off-by: Dhanuka Warusadura <csx@tuta.io>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f3082720622e28cfea1415a6bb285a73546db7dc", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "criu-ns: Add --criu-binary argument to run_criu()\n\n--criu-binary argument provides a way to supply the CRIU binary\nlocation to run_criu().\n\nRelated to: #1909\n\nSigned-off-by: Dhanuka Warusadura <csx@tuta.io>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "f57bda46a3b371bdb375de5639c4b0de92e75dec", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "lib/c: add empty_ns interfaces to libcriu\n\ncrun wants to set empty_ns and this interface is missing from the\nlibrary. This adds it to libcriu.\n\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "806ee350159b6d8a50b59ae87bbd295377233134", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "docs: rename amdgpu_plugin.txt to criu-amdgpu-plugin.txt\n\nBy default, the file name 'amdgpu_plugin.txt' is used also as the name\nfor the corresponding man page (`man amdgpu_plugin`). However, when\nthis man page is installed system-wide it would be more appropriate\nto have a prefix 'criu-' (e.g., `man criu-amdgpu-plugin`).\n\nSigned-off-by: Radostin Stoyanov <rstoyanov@fedoraproject.org>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "8e0697d5643a370ffb1c2fcb18c4a7afa47440b6", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "criu-ns: make --pidfile option show pid in caller pidns\n\nUsing the fact that we know criu_pid and criu is a parent of restored\nprocess we can create pidfile with pid on caller pidns level.\n\nWe need to move mount namespace creation to child so that criu-ns can\nsee caller pidns proc.\n\nSigned-off-by: Pavel Tikhomirov <ptikhomirov@virtuozzo.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d98c533a83c9ee7cca12a476bc8b5e7bd2188efa", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "scripts: make newer versions of shellcheck happy\n\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1d4c5ed74de3180eaa1b9527e99cbe6dbb9dcbc5", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "ci: fix new codespell errors\n\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "970c4abe7b6df0ef691e476e3964480dee5508fe", "commit_date": "2023-06-12T06:32:58Z", "commit_message": "compel: support XSAVE on newer Intel CPUs\n\nNewer Intel CPUs (Sapphire Rapids) have a much larger xsave area than\nbefore. Looking at older CPUs I see 2440 bytes.\n\n    # cpuid -1 -l 0xd -s 0\n    ...\n        bytes required by XSAVE/XRSTOR area     = 0x00000988 (2440)\n\nOn newer CPUs (Sapphire Rapids) it grows to 11008 bytes.\n\n    # cpuid -1 -l 0xd -s 0\n    ...\n        bytes required by XSAVE/XRSTOR area     = 0x00002b00 (11008)\n\nThis increase the xsave area from one page to four pages.\n\nWithout this patch the fpu03 test fails, with this patch it works again.\n\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "13eb87606e47b5d5a6813fe42b632b7861f7343c", "commit_date": "2023-06-12T06:32:43Z", "commit_message": "dump: increase fcntl call failure judgment\n\nThe pipe_size type is unsigned int, when the fcntl call fails and\nreturn -1, it will cause a negative rollover problem.\n\nSigned-off-by: zhoujie <zhoujie133@huawei.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "0dd4668aaf28206fb08ed98c0711a7bee7a2ce3d", "commit_date": "2023-06-12T06:30:01Z", "commit_message": "zdtm: Add tests for ip tos restore\n\nSigned-off-by: Suraj Shirvankar <surajshirvankar@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "d6860d06122855623038563092cbbb3081c763b0", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "sk-inet: Add IP TOS socket option\n\nThe TOS(type of service) field in the ip header allows you specify the\npriority of the socket data.\n\nSigned-off-by: Suraj Shirvankar <surajshirvankar@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "aed3f34c092e3cb2214514d198d5c0762b0c2b7a", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "limit the field width of 'scanf'\n\nFixes: #2121\n\nSigned-off-by: Pengda Yang <daz-3ux@proton.me>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "7eaf7a38f478e2f222a7267b544eeeb927ecc220", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "flog: fix some codespell warnings\n\nBrought to you by\n\n    codespell -w\n\n(using codespell v2.1.0).\n\n[v2: use \"make indent\" on the result]\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1fa21a0fafc5cc1a42476d4b666400a933d0b6cc", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "flog: typo: mmaped -> mmapped\n\nIt is mapped, not maped. Same applies for mmap I guess.\n\nFound by codespell, except it wants to change it to mapped,\nwhich will make it less specific.\n\nSigned-off-by: Kir Kolyshkin <kolyshkin@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "cc193dc669088b2a561b232ff98ea17ed21b80ff", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "Run 'make indent' on 'flog/'\n\nSeparate commit for easier criu-dev <-> master transfer.\n\nAcked-by: Mike Rapoport <rppt@linux.ibm.com>\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "1444b72d25c754fa9508525826f26b7a8d3662cd", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "flog: Missing varargs init or cleanup (VARARGS)\n\nCID 302713 (#1 of 1): Missing varargs init or cleanup (VARARGS)\n va_end was not called for argptr.\n\nSigned-off-by: Adrian Reber <areber@redhat.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}, {"commit_oid": "823db1bfccf6463225af76a09748d3691405e0f9", "commit_date": "2023-06-12T06:30:00Z", "commit_message": "Add flog to CRIU\n\nChange made through this commit:\n- Include copy of flog as a seperate tree.\n- Modify the makefile to add and compile flog code.\n\nSigned-off-by: prakritigoyal19 <prakritigoyal19@gmail.com>", "commit_author": "", "message_analysis": {"glm6b_2": [], "manual": [], "noob_engine": []}}], "master": []}